const __vite__fileDeps=["./DnO0ARxW.js","./DZZ6t_j4.js","./entry.DIDWwc7m.css","./DQfemegE.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{o as i,c as l,a,e as D,K as O,L as H,ap as K,ag as X,cP as Y,aw as J,r as I,ar as Q,g as Z,b as n,w as d,N as t,t as r,av as E,R as _,ao as k,ce as ee,d as g,X as te,z as P,a3 as oe,y as se,a4 as ne}from"./DZZ6t_j4.js";import{_ as ae}from"./CyRMlOXW.js";import{v as re}from"./C3jLTHF4.js";import{_ as ie,a as le}from"./CzUUXbeq.js";import{_ as ce}from"./BeDviXlI.js";import{v as me}from"./BtEbFxXZ.js";import"./DKN1hQ6S.js";import{I as ue}from"./BQuyMdA-.js";import{F as pe}from"./BYINaHrJ.js";import{_ as de}from"./dfem9Uc_.js";import{_ as _e}from"./DyDFI6NE.js";import"./B5RRVMt5.js";import"./DGj1ycqW.js";import"./BQQOEPN4.js";import"./vll-Pnjv.js";import"./D9tFZoTQ.js";import"./BCJFTkwv.js";const ge={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},fe=a("path",{fill:"currentColor",d:"m5.65 10.025l1.95.825q.35-.7.725-1.35t.825-1.3l-1.4-.275zM9.2 12.1l2.85 2.825q1.05-.4 2.25-1.225t2.25-1.875q1.75-1.75 2.738-3.887T20.15 4q-1.8-.125-3.95.863T12.3 7.6q-1.05 1.05-1.875 2.25T9.2 12.1m4.45-1.625q-.575-.575-.575-1.412t.575-1.413t1.425-.575t1.425.575t.575 1.413t-.575 1.412t-1.425.575t-1.425-.575m.475 8.025l2.1-2.1l-.275-1.4q-.65.45-1.3.812t-1.35.713zM21.95 2.175q.475 3.025-.587 5.888T17.7 13.525L18.2 16q.1.5-.05.975t-.5.825l-4.2 4.2l-2.1-4.925L7.075 12.8L2.15 10.7l4.175-4.2q.35-.35.838-.5t.987-.05l2.475.5q2.6-2.6 5.45-3.675t5.875-.6m-18.025 13.8q.875-.875 2.138-.887t2.137.862t.863 2.138t-.888 2.137q-.625.625-2.087 1.075t-4.038.8q.35-2.575.8-4.038t1.075-2.087m1.425 1.4q-.25.25-.5.913t-.35 1.337q.675-.1 1.338-.337t.912-.488q.3-.3.325-.725T6.8 17.35t-.725-.288t-.725.313"},null,-1),he=[fe];function be(f,x){return i(),l("svg",ge,[...he])}const ye={name:"material-symbols-rocket-launch-outline",render:be},ve=te(()=>ne(()=>import("./DnO0ARxW.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(f=>f.default||f)),we={class:"md:bg-primary bg-opacity-5 signup h-full min-h-[600px] flex flex-col justify-center items-center"},qe={class:"bg-white mt-[60px] relative flex flex-col justify-center gap-2 w-full max-w-[500px] mx-auto p-8 md:rounded-lg md:border-1 md:border-gray-200 md:shadow-xl"},ke={class:"prose-2xl font-bold self-center my-4"},xe={key:0,class:"prose !text-primary font-semibold self-center"},$e={key:0,class:"self-center mb-4 bg-red-500 text-white rounded-lg w-3/4 mx-auto p-1","data-testid":"nc-signup-error"},Ue={class:"flex items-center gap-2 justify-center"},Ie={class:"break-words"},Ee={class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4"},Pe={key:0,class:"scaling-btn bg-opacity-100",type:"submit"},Re={class:"flex items-center gap-2"},Te=["href"],Ae={class:"flex items-center gap-2"},Le={key:2,class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4 justify-center"},Ne=["href"],Se={type:"button",class:"scaling-btn bg-opacity-100"},ze={class:"flex items-center gap-2"},Ce={class:"text-end prose-sm"},tt=D({__name:"[[token]]",setup(f){const{$e:x}=se(),y=O(),{appInfo:c,signIn:R}=H(),{api:T,isLoading:A,error:h}=K({useGlobalInstance:!0}),{t:v}=X(),{navigateToTable:L}=Y(),{clearWorkspaces:N}=J(),$=I(),S=I(!1),u=Q({email:"",password:""}),U={email:[{required:!0,message:v("msg.error.signUpRules.emailRequired")},{validator:(e,o)=>new Promise((m,s)=>{if(!(o!=null&&o.length)||re(o.trim()))return m();s(new Error(v("msg.error.signUpRules.emailInvalid")))}),message:v("msg.error.signUpRules.emailInvalid")}],password:[{validator:(e,o)=>new Promise((m,s)=>{const{error:p,valid:b}=me(o);if(b)return m();s(new Error(p))})}]};async function z(){if(!$.value.validate())return;w();const e={...u,token:y.params.token};e.ignore_subscribe=!S.value,T.auth.signup(e).then(async o=>{var m;R(o.token),x("a:auth:sign-up");try{const s=o.createdProject,p=(m=s==null?void 0:s.tables)==null?void 0:m[0];if(s&&p)return await L({baseId:s.id,tableId:p.id,workspaceId:"nc"})}catch(s){console.error(s)}await P({path:"/",query:y.query})})}function w(){h.value&&(h.value=null)}function C(){P({path:"/signin",query:y.query})}return Z(async()=>{await N()}),(e,o)=>{const m=ve,s=ce,p=ue,b=de,F=_e,V=ye,G=ie,M=le,j=ae,B=pe,W=oe;return i(),l("div",null,[n(W,null,{default:d(()=>[a("div",we,[a("div",qe,[n(m,{class:"color-transition hover:ring hover:ring-accent hover:ring-opacity-100",animate:t(A)},null,8,["animate"]),a("h1",ke,r(e.$t("general.signUp"))+" "+r((e._.provides[E]||e.$route).query.redirect_to==="/referral"?"& REFER":"")+" "+r((e._.provides[E]||e.$route).query.redirect_to==="/pricing"?"& BUY":""),1),t(c).firstUser?(i(),l("h2",xe,r(e.$t("msg.info.signUp.superAdmin")),1)):_("",!0),n(B,{ref_key:"formValidator",ref:$,model:t(u),layout:"vertical","no-style":"",onFinish:z},{default:d(()=>[t(c).disableEmailAuth?_("",!0):(i(),l(k,{key:0},[n(ee,{name:"layout"},{default:d(()=>[t(h)?(i(),l("div",$e,[a("div",Ue,[n(s),a("div",Ie,r(t(h)),1)])])):_("",!0)]),_:1}),n(b,{label:e.$t("labels.email"),name:"email",rules:U.email},{default:d(()=>[n(p,{value:t(u).email,"onUpdate:value":o[0]||(o[0]=q=>t(u).email=q),size:"large",placeholder:e.$t("msg.info.signUp.workEmail"),onFocus:w},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),n(b,{label:e.$t("labels.password"),name:"password",rules:U.password},{default:d(()=>[n(F,{value:t(u).password,"onUpdate:value":o[1]||(o[1]=q=>t(u).password=q),size:"large",class:"password",placeholder:e.$t("msg.info.signUp.enterPassword"),onFocus:w},null,8,["value","placeholder"])]),_:1},8,["label","rules"])],64)),a("div",Ee,[t(c).disableEmailAuth?_("",!0):(i(),l("button",Pe,[a("span",Re,[n(V),g(" "+r(e.$t("general.signUp")),1)])])),t(c).googleAuthEnabled?(i(),l("a",{key:1,href:`${t(c).ncSiteUrl}/auth/google`,class:"scaling-btn bg-opacity-100 !after:bg-white !text-primary !no-underline"},[a("span",Ae,[n(G),g(" "+r(e.$t("labels.signUpWithProvider",{provider:"Google"})),1)])],8,Te)):_("",!0),t(c).oidcAuthEnabled?(i(),l("div",Le,[a("a",{href:`${t(c).ncSiteUrl}/auth/oidc`,class:"!text-primary !no-underline"},[a("button",Se,[a("span",ze,[n(M),t(c).disableEmailAuth?(i(),l(k,{key:1},[g(r(e.$t("general.signUp")),1)],64)):(i(),l(k,{key:0},[g(r(e.$t("labels.signUpWithProvider",{provider:t(c).oidcProviderName||"OpenID Connect"})),1)],64))])])],8,Ne)])):_("",!0),a("div",Ce,[g(r(e.$t("msg.info.signUp.alreadyHaveAccount"))+" ",1),n(j,{onClick:C},{default:d(()=>[g(r(e.$t("general.signIn")),1)]),_:1})])])]),_:1},8,["model"])])])]),_:1})])}}});export{tt as default};
