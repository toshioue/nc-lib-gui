import{f as E,az as $,cN as H,bN as v,r as p,d9 as S,dB as D,db as O,c_ as T,N as U,O as P,o as r,S as g,w as f,a as o,Y as A,t as x,c as L,aq as W,av as z,b as G,d as q,P as i,V as k,W as y,T as F,R as Q,Q as Y,j0 as C,g3 as J,g0 as K,aj as X,ak as Z,a0 as ee,$ as se,ag as ae,A as oe,_ as te}from"./Cgw6cdOy.js";import{u as ie}from"./LbdZxisI.js";const ne={class:"flex items-center gap-0.5"},re={class:"w-full bg-white shadow-lg p-1.5 menu-filter-dropdown border-1 border-gray-200 rounded-lg overflow-hidden w-[160px]","data-testid":"nc-height-menu"},ce={class:"text-xs text-gray-500 px-3 pt-2 pb-1 select-none"},le=["onClick"],de={class:"flex items-center gap-2"},he=E({__name:"RowHeight",setup(ue){const R=[{icon:"heightShort",heightClass:"short"},{icon:"heightMedium",heightClass:"medium"},{icon:"heightTall",heightClass:"tall"},{icon:"heightExtra",heightClass:"extra"}],{isSharedBase:j}=$(H()),s=v(S,p()),V=v(D,p(!1)),I=v(O,p(!1)),{$api:M}=oe(),{addUndo:N,defineViewScope:B}=T(),{user:_}=U(),n=p(!1),w=async(e,t=!1)=>{var c,l,d;if((c=s.value)!=null&&c.id){if(e===s.value.view.row_height)return;t||N({redo:{fn:a=>w(a,!0),args:[e]},undo:{fn:a=>w(a,!0),args:[s.value.view.row_height||0]},scope:B({view:s.value})});try{!V.value&&!j.value&&!(C(((l=_.value)==null?void 0:l.roles)??{})[J.VIEWER]||C(((d=_.value)==null?void 0:d.roles)??{})[K.VIEWER])&&await M.dbView.gridUpdate(s.value.id,{row_height:e}),s.value.view.row_height=e,n.value=!1}catch(a){X.error(await Z(a)||"There was an error while updating view!")}}};return ie(n),(e,t)=>{const c=ee,l=se,d=ae,a=P("e");return r(),g(d,{visible:i(n),"onUpdate:visible":t[1]||(t[1]=h=>Y(n)?n.value=h:null),"offset-y":"",class:"",trigger:["click"],"overlay-class-name":"nc-dropdown-height-menu"},{overlay:f(()=>[o("div",re,[o("div",{class:"flex flex-col w-full text-sm",onClick:t[0]||(t[0]=A(()=>{},["stop"]))},[o("div",ce,x(e.$t("objects.rowHeight")),1),(r(),L(W,null,z(R,(h,u)=>{var m,b;return o("div",{key:u,class:"nc-row-height-option",onClick:pe=>w(u)},[o("div",de,[G(l,{icon:h.icon,class:"nc-row-height-icon"},null,8,["icon"]),q(" "+x(e.$t(`objects.heightClass.${h.heightClass}`)),1)]),(u===0?!((m=i(s))==null?void 0:m.view).row_height:((b=i(s))==null?void 0:b.view).row_height===u)?(r(),g(k(("iconMap"in e?e.iconMap:i(y)).check),{key:0,class:"text-primary w-4 h-4"})):F("",!0)],8,le)}),64))])])]),default:f(()=>[o("div",null,[Q((r(),g(c,{disabled:i(I),class:"nc-height-menu-btn nc-toolbar-btn !border-0 !h-7 !px-1.5 !min-w-7",size:"small",type:"secondary"},{default:f(()=>[o("div",ne,[(r(),g(k(("iconMap"in e?e.iconMap:i(y)).rowHeight),{class:"!h-3.75 !w-3.75"}))])]),_:1},8,["disabled"])),[[a,["c:row-height"]]])])]),_:1},8,["visible"])}}}),ve=te(he,[["__scopeId","data-v-bcfc01c5"]]);export{ve as default};
