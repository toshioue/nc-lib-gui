import{f as B,bL as d,r,d1 as I,c$ as L,N as V,g as j,H as A,av as E,iN as U,h8 as $,O,o as a,U as p,w as c,b as R,P as o,Q as u,R as T,a as f,V as z,W,c as _,t as v,S as b,a2 as G}from"./DKhUGBot.js";import{u as H,_ as P}from"./BJaKCwQi.js";import{_ as Q}from"./B5mlyM8k.js";import{a as q}from"./D-d1Vlq3.js";import{u as J}from"./BNVF6GgL.js";import"./Cx8swDhG.js";import"./CyGutrdy.js";import"./C600yAEI.js";import"./CX4Cv_ut.js";import"./DEJjMRn_.js";import"./BQQOEPN4.js";import"./DX_5E9FR.js";import"./BOlDoh1A.js";import"./CUg8TjpL.js";import"./BtV7eYjf.js";import"./DDp3Vqr0.js";import"./lyxpGZoZ.js";import"./DL47xb_5.js";import"./DFT4Rrrq.js";import"./BMlI7u7p.js";import"./DGy9VVU7.js";import"./BUmA83RI.js";import"./BIe2oNDw.js";import"./BiTIZUqU.js";import"./G7I_n9Op.js";import"./CNjr3NNT.js";import"./COYnUPbb.js";import"./CmYcbEuO.js";import"./BqRqK2Ui.js";import"./8sUkqrB1.js";import"./Dk-Fa7iC.js";import"./1zjhoUZl.js";import"./DWVP0YiP.js";import"./Dyq3XO_M.js";import"./CB-3FEW-.js";import"./Dh4kjljt.js";import"./BQtN66rY.js";import"./BUFVivkI.js";import"./C9Sjn86N.js";import"./CAYVDp6l.js";import"./BjAi9enL.js";import"./D5vu-8hY.js";import"./CfYq_yPs.js";import"./CPFSWOd0.js";import"./PQ7fmm4f.js";import"./BHcVgkAo.js";import"./B4STZUIT.js";import"./BxHuRoBd.js";const K={class:"flex items-center gap-1"},X={class:"flex items-center gap-2"},Y={key:0,class:"text-capitalize !text-[13px] font-medium"},Z={key:0,class:"bg-brand-50 text-brand-500 py-1 px-2 text-md rounded-md"},Jt=B({__name:"ColumnFilterMenu",setup(tt){const h=d(I,r(!1)),n=d(L,r()),{isMobileMode:y}=V(),k=r(),{nestedFilters:F,eventBus:w}=q(),{nonDeletedFilters:g,loadFilters:x}=H(n,void 0,j(()=>!0),()=>!1,F.value,!0),l=r(0);A(()=>{var t;return(t=n==null?void 0:n.value)==null?void 0:t.id},async t=>{t&&(await x({hookId:void 0,isWebhook:!1,loadAllFilters:!0}),l.value=g.value.length||0)},{immediate:!0});const i=r(!1),C=r({});E(U,C),J(i);const m=r({});return w.on(async(t,e)=>{e&&t===$.FILTER_ADD&&(m.value={fk_column_id:e.id},i.value=!0)}),(t,e)=>{const D=G,M=P,N=Q,S=O("e");return a(),p(N,{visible:o(i),"onUpdate:visible":e[2]||(e[2]=s=>u(i)?i.value=s:null),trigger:["click"],"overlay-class-name":"nc-dropdown-filter-menu nc-toolbar-dropdown",class:"!xs:hidden"},{overlay:c(()=>[R(M,{ref_key:"filterComp",ref:k,"draft-filter":o(m),"onUpdate:draftFilter":e[0]||(e[0]=s=>u(m)?m.value=s:null),class:"nc-table-toolbar-menu","auto-save":!0,"data-testid":"nc-filter-menu","is-open":o(i),"onUpdate:filtersLength":e[1]||(e[1]=s=>l.value=s)},null,8,["draft-filter","is-open"])]),default:c(()=>[T((a(),p(D,{disabled:o(h),class:"nc-filter-menu-btn nc-toolbar-btn !border-0 !h-7",size:"small",type:"secondary"},{default:c(()=>[f("div",K,[f("div",X,[(a(),p(z(("iconMap"in t?t.iconMap:o(W)).filter),{class:"h-4 w-4"})),o(y)?b("",!0):(a(),_("span",Y,v(t.$t("activity.filter")),1))]),o(l)?(a(),_("span",Z,v(o(l)),1)):b("",!0)])]),_:1},8,["disabled"])),[[S,["c:filter"]]])]),_:1},8,["visible"])}}});export{Jt as default};
