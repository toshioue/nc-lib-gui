import{f as $,bN as l,fQ as B,r as c,hP as N,da as P,hL as V,gV as R,L as T,dB as S,g as d,o as r,c as A,S as u,w as m,P as t,U as _,T as f,d as E,t as h,a as G,a9 as L,V as F,aj as U,ak as z,aN as D,$ as M,a1 as Q,A as W,_ as q}from"./Cgw6cdOy.js";import{a as H}from"./r2PN1Hfg.js";import{e as J}from"./D7yS5JAk.js";import"./CO8XXsKl.js";import"./vIgbYHAs.js";import"./DpDIhxXu.js";import"./boyBAVNN.js";const K={class:"text-[13px] truncate font-medium"},X=$({__name:"Button",setup(Y){const e=l(B),p=l(N,c()),{currentRow:b}=H(),k=l(P,c()),w=l(V,c(!1)),O=l(R,c(!1)),{isUIAllowed:x}=T(),g=l(S,c(!1)),{$api:v}=W(),I=d(()=>{var s;return J((s=b.value)==null?void 0:s.row,k.value.columns)}),i=c(!1),y=async()=>{var n;if(e.value.colOptions.type==="webhook")try{i.value=!0,await v.dbTableWebhook.trigger((n=p.value)==null?void 0:n.fk_webhook_id,I.value)}catch(a){console.log(a),U.error(await z(a))}finally{i.value=!1}},j=d(()=>{var s,n,a;if(e.value.colOptions.type==="url"){let o=`${(s=p.value)==null?void 0:s.url}`;return o=encodeURI(/^(https?|ftp|mailto|file):\/\//.test(o)?o:o.trim()?`http://${o}`:""),{href:o,target:"_blank",...(n=e.value)!=null&&n.colOptions.error?{disabled:!0}:{}}}else return{disabled:g.value||!x("hookTrigger")||i.value||!e.value.colOptions.fk_webhook_id||!((a=p.value)!=null&&a.fk_webhook_id)}});return(s,n)=>{const a=D,o=M,C=Q;return r(),A("div",{class:_([{"justify-center":t(w)&&!t(O)},"w-full flex items-center"])},[(r(),u(F(t(e).colOptions.type==="url"?"a":"button"),L(t(j),{"data-testid":"nc-button-cell",class:[[`${t(e).colOptions.color??"brand"} ${t(e).colOptions.theme??"solid"}`,{"!w-6":!t(e).colOptions.label}],"nc-cell-button nc-button-cell-link btn-cell-colors truncate flex items-center h-6"],onClick:y}),{default:m(()=>[t(i)?(r(),u(a,{key:0,class:_([{solid:t(e).colOptions.theme==="solid",text:t(e).colOptions.theme==="text",light:t(e).colOptions.theme==="light"},"flex btn-cell-colors !bg-transparent w-4 h-4"]),size:"medium"},null,8,["class"])):t(e).colOptions.icon?(r(),u(o,{key:1,icon:t(e).colOptions.icon,class:"!w-4 min-w-4 min-h-4 !h-4"},null,8,["icon"])):f("",!0),t(e).colOptions.label?(r(),u(C,{key:2,class:"!truncate","show-on-truncate-only":""},{title:m(()=>[E(h(t(e).colOptions.label),1)]),default:m(()=>[G("span",K,h(t(e).colOptions.label),1)]),_:1})):f("",!0)]),_:1},16,["class"]))],2)}}}),le=q(X,[["__scopeId","data-v-ac7746d9"]]);export{le as default};
