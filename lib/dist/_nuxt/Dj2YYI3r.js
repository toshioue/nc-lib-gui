const __vite__fileDeps=["./CBZqTOye.js","./nEPQs079.js","./entry.B8GgT5QA.css","./BQDKbNwe.js","./Drwf52jU.js","./BMD-JIxU.js","./MenuItem.C7h59s4s.css","./C7QTvYaO.js","./C6cwFr3C.js","./Menu.CQ8GNWeI.css","./DLam_m52.js","./-QMWbHL6.js","./C3R8onno.js","./CF0GO8gh.js","./Gr6cVSxP.js","./DeleteModal.SEMJ_gSK.css","./vKaAFL5T.js","./-Hb63wRq.js","./BfnA8LRy.js","./Dmq5P-i4.js","./COktFmkf.js","./C5mABW8R.js","./B2IWgAhL.js","./BfMXOlc4.js","./DLdzJuss.js","./DAFLhYLz.js","./Menu.D_rr_iPw.css","./CTsvj3xA.js","./CBuEllkd.js","./BZvBjxVv.js","./BdIpmjdG.js","./ByzT15Y-.js","./BQQOEPN4.js","./DKtVUO_j.js","./DzMAdbS0.js","./QHUCxglU.js","./_EDhj-h1.js","./CNqbIxb7.js","./CZJAloFU.js","./BzWD3wIg.js","./5fs2TD9N.js","./BTGvCRQH.js","./DYYbRAhI.js","./0qbEdPZ2.js","./Crc5Dj5L.js","./CbkeA9B5.js","./SelectOptions.JaHDUZhn.css","./CYZtDArE.js","./DJpQD7nd.js","./QTd5iuHu.js","./CFgyk-dW.js","./BLe4UTYD.js","./B-HMHOhf.js","./4x_dpF5A.js","./D3hm18CN.js","./BEhsxILe.js","./Switch.CEh6YzqD.css","./C9Sjn86N.js","./DGtfac4d.js","./C9R3Q-Om.js","./B-1vRibT.js","./BLh6tVRa.js","./Select.Ct6CicDJ.css","./lp5FXGS2.js","./qMO8t_Go.js","./EditOrAddProvider.CRN0tnY2.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as de,ai as ce,ab as G,N as pe,r as p,bL as I,d1 as ve,av as me,fH as fe,cP as _e,L as ye,d0 as be,ht as he,az as ke,gx as we,hI as Ie,g as _,fw as K,hM as xe,cU as B,d4 as Ce,hJ as F,fI as Oe,o as i,c as y,a as N,P as e,al as J,U as T,w as x,d as Q,t as P,b as j,S as b,T as D,Q as W,Y as L,Z as U,a5 as z,hK as Te,ap as ge,$ as Ee,af as Me,_ as $e}from"./nEPQs079.js";import{b as De,c as Le,d as Re,e as Ae,g as Y}from"./BQDKbNwe.js";import{b as Ve}from"./DAFLhYLz.js";const Be=U(()=>z(()=>import("./CBZqTOye.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(u=>u.default||u)),Fe=U(()=>z(()=>import("./Drwf52jU.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10,0,3,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url).then(u=>u.default||u)),Ne=U(()=>z(()=>import("./CTsvj3xA.js"),__vite__mapDeps([27,28,1,2,14,15,7,29,30,31,32,20,33,34,35,36,37,38,39,40,41,42,43,44,45,46,25,47,48,49,50,51,52,53,0,3,11,12,23,17,54,55,56,57,58,59,19,60,61,62,63,64,65]),import.meta.url).then(u=>u.default||u)),Pe=["data-test-id"],je={key:1,class:"text-red-500"},Ue={key:0,class:"flex-1"},ze={key:1},He={class:"nc-edit-or-add-provider-wrapper"},Se=de({__name:"VirtualCell",props:{column:{},hideMenu:{type:Boolean},required:{type:[Boolean,Number]},hideIcon:{type:Boolean},isHiddenCol:{type:Boolean}},setup(u){const R=u,{t:g}=ce(),t=G(R,"column"),Z=G(R,"hideMenu"),{isMobileMode:h}=pe(),n=p(!1),r=p(!1),H=I(ve,p(!1));me(fe,t);const{metas:X}=_e(),{isUIAllowed:k,isMetaReadOnly:ee}=ye(),d=I(be,p()),te=I(he,p(!1)),A=I(ke,p(!1)),s=I(we,p(!1)),c=I(Ie,p(!1)),V=_(()=>{var l;return(l=d==null?void 0:d.value)==null?void 0:l.title}),S=_(()=>{var l,o,a,v,m,f;return K(t.value)?(l=t.value)==null?void 0:l.colOptions:(a=(o=t==null?void 0:t.value)==null?void 0:o.colOptions)!=null&&a.fk_relation_column_id?(f=(m=(v=d==null?void 0:d.value)==null?void 0:v.columns)==null?void 0:m.find(w=>{var C,O;return w.id===((O=(C=t==null?void 0:t.value)==null?void 0:C.colOptions)==null?void 0:O.fk_relation_column_id)}))==null?void 0:f.colOptions:null}),le=_(()=>{var l,o,a;return((l=S.value)==null?void 0:l.fk_related_model_id)&&((a=X.value)==null?void 0:a[(o=S.value)==null?void 0:o.fk_related_model_id])}),E=_(()=>{var l;return(l=le.value)==null?void 0:l.title}),oe=_(()=>{var l,o,a,v,m,f,w;return t.value?De(t.value)?`'${V.value}' ${g("labels.hasMany")} '${E.value}'`:Le(t.value)?`'${V.value}' & '${E.value}' ${g("labels.manyToMany")}`:Re(t.value)?`'${(l=t==null?void 0:t.value)==null?void 0:l.title}' ${g("labels.belongsTo")} '${E.value}'`:Ae(t.value)?`'${V.value}' & '${E.value}' ${g("labels.oneToOne")}`:Y(t.value)?`Formula - ${xe((a=(o=t.value)==null?void 0:o.colOptions)==null?void 0:a.formula,(v=d==null?void 0:d.value)==null?void 0:v.columns,(f=(m=t.value)==null?void 0:m.colOptions)==null?void 0:f.formula_raw)}`:((w=t==null?void 0:t.value)==null?void 0:w.title)||"":""}),ae=_(()=>K(t.value)||Y(t.value)),M=p(null),ne=_(()=>{var l,o,a;return t.value.uidt===B.LongText&&((o=Ce((l=t==null?void 0:t.value)==null?void 0:l.meta))!=null&&o.richMode)?F.RichText:t.value.uidt===B.LinkToAnotherRecord&&((a=t.value.colOptions)==null?void 0:a.type)===Oe.ONE_TO_ONE?F[B.Links]:t.value.uidt?F[t.value.uidt]:""}),se=async l=>{M.value=l,n.value=!0},q=()=>{M.value=null,n.value=!1},ie=l=>{H.value||s.value&&(l==null?void 0:l.type)==="dblclick"||c.value||!A.value&&k("fieldEdit")&&!h.value&&(!ee.value||Te.includes(t.value.uidt))&&(n.value=!0)},re=l=>{H.value||A.value||!k("fieldEdit")&&!h.value||(l.preventDefault(),l.stopPropagation(),r.value=!r.value)},ue=l=>{if(!(h.value||!k("fieldEdit"))){if(r.value)l.preventDefault(),l.stopPropagation();else if(s.value&&!n.value&&!c.value){r.value=!0;return}r.value=!1}};return(l,o)=>{var O;const a=Be,v=ge,m=Ee,f=Fe,w=Ne,C=Me;return i(),y("div",{class:D(["flex items-center w-full h-full text-small text-gray-500 font-weight-medium group",{"flex-col !items-start justify-center pt-0.5":e(s)&&!e(h)&&!e(c),"bg-gray-100":e(s)&&!e(c)?e(n)||e(r):!1,"nc-cell-expanded-form-header cursor-pointer hover:bg-gray-100":e(s)&&!e(h)&&e(k)("fieldEdit")&&!e(c)}]),onDblclick:ie,onContextmenu:L(re,["right"]),onClick:ue},[N("div",{class:D(["nc-virtual-cell-name-wrapper flex-1 flex items-center",{"max-w-[calc(100%_-_23px)]":!e(s),"max-w-full":e(s)&&!e(c)}])},[e(t)&&!R.hideIcon?(i(),y(J,{key:0},[e(te)?(i(),T(v,{key:0,class:"flex items-center",placement:"bottom"},{title:x(()=>[Q(P(e(ne)),1)]),default:x(()=>[j(a)]),_:1})):(i(),T(a,{key:1}))],64)):b("",!0),j(v,{placement:"bottom",class:"truncate name pl-1","show-on-truncate-only":!e(ae)},{title:x(()=>[Q(P(e(oe)),1)]),default:x(()=>[N("span",{"data-test-id":e(t).title,class:D({"select-none":e(s)&&!e(c)})},P(e(t).title),11,Pe)]),_:1},8,["show-on-truncate-only"]),("isVirtualColRequired"in l?l.isVirtualColRequired:e(Ve))(e(t),((O=e(d))==null?void 0:O.columns)||[])||l.required?(i(),y("span",je," *")):b("",!0),e(s)&&!e(h)&&e(k)("fieldEdit")&&!e(c)?(i(),T(m,{key:2,icon:"arrowDown",class:D(["flex-none cursor-pointer ml-1 group-hover:visible w-4 h-4",{visible:e(n)||e(r),invisible:!(e(n)||e(r))}])},null,8,["class"])):b("",!0)],2),e(Z)?b("",!0):(i(),y(J,{key:0},[e(s)?b("",!0):(i(),y("div",Ue)),!e(A)&&e(k)("fieldEdit")?(i(),T(f,{key:1,"is-open":e(r),"onUpdate:isOpen":o[0]||(o[0]=$=>W(r)?r.value=$:null),"is-hidden-col":l.isHiddenCol,virtual:!0,onAddColumn:se,onEdit:o[1]||(o[1]=$=>n.value=!0)},null,8,["is-open","is-hidden-col"])):b("",!0)],64)),j(C,{visible:e(n),"onUpdate:visible":o[5]||(o[5]=$=>W(n)?n.value=$:null),class:"h-full",trigger:["click"],placement:e(s)&&!e(c)?"bottomLeft":"bottomRight","overlay-class-name":`nc-dropdown-edit-column ${e(n)?"active":""}`},{overlay:x(()=>[N("div",He,[e(n)?(i(),T(w,{key:0,column:e(M)?null:e(t),"column-position":e(M),class:"w-full",onSubmit:q,onCancel:q,onClick:o[3]||(o[3]=L(()=>{},["stop"])),onKeydown:o[4]||(o[4]=L(()=>{},["stop"]))},null,8,["column","column-position"])):b("",!0)])]),default:x(()=>[e(s)&&!e(c)?(i(),y("div",{key:0,class:"h-[1px]",onDblclick:o[2]||(o[2]=L(()=>{},["stop"]))}," ",32)):(i(),y("div",ze))]),_:1},8,["visible","placement","overlay-class-name"])],34)}}}),Je=$e(Se,[["__scopeId","data-v-62a06176"]]);export{Je as default};
