import{e as De,ax as te,aw as Me,ay as He,r as N,gC as et,f as ke,cq as O,aE as tt,g as Se,ac as J,o as d,c as y,a as l,d as u,b as a,w as r,N as s,O as se,S as g,Q as h,ao as ee,at as $e,a8 as Ce,t as c,R as $,gr as Y,V as st,W as ot,fy as Z,P as lt,aF as at,as as Ie,aJ as nt,ah as rt,ai as ct,da as it,aK as dt,Y as Ue,$ as ut,Z as pt,aL as _t,aM as mt,y as ft,_ as oe,J as Te,ge as yt,F as vt,gs as gt,ga as bt,eL as xt,fU as ht}from"./DZZ6t_j4.js";import{_ as wt}from"./ByvYYClF.js";import{u as kt,_ as $t,c as Ct,a as It,b as Tt}from"./BpclqUFq.js";import{_ as Dt}from"./B89oU1M4.js";import{_ as Mt}from"./DnwRMKX3.js";import{_ as St}from"./sz1d3zjm.js";import{_ as Ut}from"./TJfB7GlU.js";import{_ as Rt}from"./BLgccLvp.js";import{_ as Et}from"./vK-WmZ7a.js";import{_ as Lt}from"./QHHXY-Ma.js";import{_ as zt}from"./DCjuPxLb.js";import{_ as Nt}from"./BqKQ8afS.js";import{_ as Bt}from"./Bdv7ru7D.js";import{u as At}from"./CXKU6jgO.js";import{_ as Pt}from"./BVrX6sNU.js";import"./DKN1hQ6S.js";import{I as Ot}from"./BQuyMdA-.js";import{S as Wt}from"./BmtvKY7O.js";import{_ as jt}from"./Ck-cgwga.js";import"./DuJHisTB.js";import"./oyD85nwD.js";import"./DGj1ycqW.js";import"./BQQOEPN4.js";import"./vll-Pnjv.js";import"./DnSVh-oD.js";import"./D_MsYLkT.js";import"./BCJFTkwv.js";import"./CB1aB6F1.js";import"./B5RRVMt5.js";import"./B4Lj1XSi.js";import"./boyBAVNN.js";import"./CwK0k4WN.js";import"./0QUe8GCE.js";import"./GMLocJHP.js";import"./C3jLTHF4.js";import"./C00NHga8.js";import"./G4Pt-Lbf.js";import"./BYINaHrJ.js";import"./dfem9Uc_.js";import"./D9tFZoTQ.js";import"./C3wAmqC5.js";import"./CbjHV4v2.js";import"./DyDFI6NE.js";import"./CDWovrGB.js";import"./0azk-b-q.js";import"./DgixBgIx.js";import"./CXD-Dj4T.js";import"./DXQuLwNn.js";const Gt={class:"h-full flex flex-col gap-6 nc-workspace-connections"},Vt={class:"flex flex-col justify-between gap-2 mx-1"},Yt={class:"flex items-center gap-3"},Kt={class:"table-container relative flex-1"},Qt={class:"!sticky top-0 z-5 w-full"},qt={class:"flex items-center gap-3"},Ft={class:"flex items-center gap-3"},Jt={class:"flex items-center gap-3"},Zt={class:"flex items-center gap-3"},Xt={key:0,class:"h-full max-h-[calc(100%_-_55px)] w-full"},Ht=["onClick"],es={class:"cell-title"},ts={key:0},ss={class:"cell-type"},os={class:"cell-created-date"},ls={class:"cell-added-by"},as={key:0,class:"w-full flex gap-3 items-center"},ns={class:"flex-1 flex flex-col max-w-[calc(100%_-_44px)]"},rs={class:"w-full flex gap-3"},cs={key:1,class:"w-full truncate text-gray-500"},is={class:"cell-usage"},ds={class:"justify-end"},us={class:"flex items-center justify-center absolute left-0 top-0 w-full h-full z-10 pb-10 pointer-events-none"},ps={class:"flex flex-col justify-center items-center gap-2"},_s={class:"text-center"},ms={key:0,class:"flex-none integration-table-empty flex items-center justify-center py-8 px-6 h-full max-h-[calc(100%_-_94px)]"},fs={key:0,class:"px-2 py-6 text-gray-500 flex flex-col items-center gap-6 text-center"},ys={key:1,class:"flex-none text-center flex flex-col items-center gap-3"},vs={class:"flex justify-between items-center w-full px-6"},gs={class:"text-gray-500 text-xs"},bs={class:"rounded-lg overflow-hidden"},xs={class:"rounded-lg overflow-hidden mt-2"},hs={key:1,class:"w-full flex flex-col text-gray-800"},ws={class:"flex flex-row items-center py-2 px-3.25 bg-gray-50 rounded-lg text-gray-700 mb-4"},ks={class:"text-ellipsis overflow-hidden select-none w-full pl-3",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},$s={key:0,class:"flex flex-col pb-2 text-small leading-[18px] text-gray-500"},Cs={class:"!list-disc ml-6 mb-0"},Is={class:"flex items-center gap-1"},Ts={class:"flex items-center"},Ds={class:"flex gap-4"},Ms={class:"flex flex-col gap-3"},Ss={class:"flex"},Us={class:"!m-0 text-base font-weight-700 flex-1"},Rs={class:"text-sm text-gray-700"},Es=De({__name:"ConnectionsTab",setup(le){const{integrations:C,isLoadingIntegrations:I,deleteConfirmText:X,integrationPaginationData:v,successConfirmModal:D,searchQuery:B,loadIntegrations:W,deleteIntegration:U,editIntegration:K,duplicateIntegration:R,getIntegration:p}=kt(),{$api:M,$e:j}=ft();te(Me());const{bases:G}=te(He()),A=N(!1),x=N(null),P=N(!1),S=N(),Q=N(),i=N({}),E=N([]),{width:Re}=et(Q),b=ke(()=>{var e;const t=new Map;return(e=E.value)==null||e.forEach(n=>{n!=null&&n.id&&t.set(n.id,n)}),t}),k=ke(()=>(C.value||[]).sort((t,e)=>{var n,m,_,w;if(i.value.title){if(t.title&&e.title)return i.value.title==="asc"?t.title<e.title?-1:1:t.title>e.title?-1:1}else if(i.value.sub_type){if(t.sub_type&&e.sub_type)return i.value.sub_type==="asc"?t.sub_type<e.sub_type?-1:1:t.sub_type>e.sub_type?-1:1}else if(i.value.created_at){if(t!=null&&t.created_at&&(e!=null&&e.created_at))return i.value.created_at==="asc"?O(t.created_at).local().isBefore(O(e.created_at).local())?-1:1:O(t.created_at).local().isAfter(O(e.created_at).local())?-1:1}else if(i.value.created_by){if(t.created_by&&e.created_by&&b.value.get(t.created_by)&&b.value.get(e.created_by))return i.value.created_by==="asc"?((n=b.value.get(t.created_by))==null?void 0:n.email)<((m=b.value.get(e.created_by))==null?void 0:m.email)?-1:1:((_=b.value.get(t.created_by))==null?void 0:_.email)>((w=b.value.get(e.created_by))==null?void 0:w.email)?-1:1}else if(i.value.source_count&&t.source_count!==void 0&&e.source_count!==void 0)return i.value.source_count==="asc"?t.source_count-e.source_count:e.source_count-t.source_count;return 0}));async function q(t=v.value.page,e=v.value.pageSize,n=!0){try{n&&(v.value.page=1),await W(void 0,void 0,n?1:t,e)}catch{}}const Ee=async t=>{v.value.page=t,await q(void 0,void 0,!1)},{onLeft:Le,onRight:ze,onUp:Ne,onDown:Be}=At({paginationDataRef:v,changePage:Ee,isViewDataLoading:I}),Ae=async t=>{P.value=!0,j("c:integration:delete"),X.value=null,A.value=!0,x.value=t;const e=await p(t,{includeSources:!0});x.value.sources=(e==null?void 0:e.sources)||[],P.value=!1},Pe=async()=>{var e;if(await U(x.value,!0))for(const n of((e=x.value)==null?void 0:e.sources)||[]){if(!n.base_id||!n.id||n.base_id&&!G.value.get(n.base_id))continue;const m=G.value.get(n.base_id);Array.isArray(m==null?void 0:m.sources)&&G.value.set(n.base_id,{...m||{},sources:[...m.sources.filter(_=>_.id!==n.id)]})}},Oe=async()=>{try{const t=await M.orgUsers.list();if(!(t!=null&&t.list))return;E.value=t.list}catch(t){rt.error(await ct(t))}},V=t=>{var e,n,m;(e=C.value)!=null&&e.length&&(((n=i.value)==null?void 0:n[t])==="asc"?i.value={[t]:"desc"}:((m=i.value)==null?void 0:m[t])==="desc"?i.value={[t]:void 0}:i.value={[t]:"asc"})},We=it(()=>{q()},250),F=()=>dt()?"⌥":"ALT",T=t=>{var e;return t?!((e=b.value.get(t))!=null&&e.email):!1},ae=t=>{var e,n,m,_,w;return((e=b.value.get(t))==null?void 0:e.display_name)||((w=(n=b.value.get(t))==null?void 0:n.email)==null?void 0:w.slice(0,(_=(m=b.value.get(t))==null?void 0:m.email)==null?void 0:_.indexOf("@")))};return tt(S,"scroll",()=>{var n,m,_,w;const t=(n=S.value)==null?void 0:n.querySelector("th.cell-title"),e=(m=S.value)==null?void 0:m.querySelector("th.cell-type");!(t!=null&&t.getBoundingClientRect().right)||!(e!=null&&e.getBoundingClientRect().left)||((e==null?void 0:e.getBoundingClientRect().left)<(t==null?void 0:t.getBoundingClientRect().right)?(_=S.value)==null||_.classList.add("sticky-shadow"):(w=S.value)==null||w.classList.remove("sticky-shadow"))}),Se(async()=>{await Promise.allSettled([!C.value.length&&W(),Oe()])}),J("ArrowLeft",Le),J("ArrowRight",ze),J("ArrowUp",Ne),J("ArrowDown",Be),(t,e)=>{var ie,de,ue,pe,_e,me,fe,ye,ve,ge,be,xe,he,we;const n=Ue,m=Ot,_=ut,w=Dt,ne=$t,je=Mt,re=pt,H=St,Ge=Ut,Ve=Rt,Ye=Et,Ke=_t,Qe=Ie,qe=Lt,ce=Wt,Fe=mt,Je=zt,Ze=Nt,Xe=Bt;return d(),y("div",Gt,[l("div",Vt,[e[15]||(e[15]=l("div",{class:"text-sm font-normal text-gray-600"},[l("div",null,[u(" Manage connections for your integrations. "),l("a",{target:"_blank",href:"https://docs.nocodb.com/integrations/actions-on-connection",rel:"noopener noreferrer"}," Learn more ")])],-1)),l("div",Yt,[a(m,{value:s(B),"onUpdate:value":e[0]||(e[0]=o=>se(B)?B.value=o:null),type:"text",class:"nc-search-integration-input !min-w-[300px] !max-w-[400px] nc-input-sm flex-none",placeholder:`${t.$t("general.search")} ${t.$t("general.connections").toLowerCase()}`,"allow-clear":"",onInput:s(We)},{prefix:r(()=>[a(n,{icon:"search",class:"mr-2 h-4 w-4 text-gray-500"})]),_:1},8,["value","placeholder","onInput"])])]),l("div",Kt,[l("div",{ref_key:"tableWrapper",ref:S,class:g(["nc-workspace-integration-table relative nc-scrollbar-thin !overflow-auto max-h-[calc(100%_-_40px)]",{"h-full":(ie=s(k))==null?void 0:ie.length}])},[l("table",Qt,[l("thead",null,[l("tr",null,[l("th",{class:g(["cell-title !hover:bg-gray-100 select-none cursor-pointer",{"cursor-not-allowed":!((de=s(k))!=null&&de.length),"!text-gray-700":s(i).title}]),onClick:e[1]||(e[1]=o=>V("title"))},[l("div",{ref_key:"titleHeaderCellRef",ref:Q,class:"flex items-center gap-3"},[e[16]||(e[16]=l("div",null,"Name",-1)),s(i).title?(d(),h(n,{key:0,icon:"chevronDown",class:g(["flex-none",{"transform rotate-180":((ue=s(i))==null?void 0:ue.title)==="asc"}])},null,8,["class"])):(d(),h(n,{key:1,icon:"chevronUpDown",class:"flex-none"}))],512)],2),l("th",{class:g(["cell-type !hover:bg-gray-100 select-none cursor-pointer",{"cursor-not-allowed":!((pe=s(k))!=null&&pe.length),"!text-gray-700":s(i).sub_type}]),onClick:e[2]||(e[2]=o=>V("sub_type"))},[l("div",qt,[e[17]||(e[17]=l("div",null,"Type",-1)),s(i).sub_type?(d(),h(n,{key:0,icon:"chevronDown",class:g(["flex-none",{"transform rotate-180":s(i).sub_type==="asc"}])},null,8,["class"])):(d(),h(n,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),l("th",{class:g(["cell-created-date !hover:bg-gray-100 select-none cursor-pointer",{"cursor-not-allowed":!((_e=s(k))!=null&&_e.length),"!text-gray-700":s(i).created_at}]),onClick:e[3]||(e[3]=o=>V("created_at"))},[l("div",Ft,[e[18]||(e[18]=l("div",null,"Date added",-1)),s(i).created_at?(d(),h(n,{key:0,icon:"chevronDown",class:g(["flex-none",{"transform rotate-180":s(i).created_at==="asc"}])},null,8,["class"])):(d(),h(n,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),l("th",{class:g(["cell-added-by !hover:bg-gray-100 select-none cursor-pointer",{"cursor-not-allowed":!((me=s(k))!=null&&me.length),"!text-gray-700":s(i).created_by}]),onClick:e[4]||(e[4]=o=>V("created_by"))},[l("div",Jt,[e[19]||(e[19]=l("div",null,"Added by",-1)),s(i).created_by?(d(),h(n,{key:0,icon:"chevronDown",class:g(["flex-none",{"transform rotate-180":s(i).created_by==="asc"}])},null,8,["class"])):(d(),h(n,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),l("th",{class:g(["cell-usage !hover:bg-gray-100 select-none cursor-pointer",{"cursor-not-allowed":!((fe=s(k))!=null&&fe.length)}]),onClick:e[5]||(e[5]=o=>V("source_count"))},[l("div",Zt,[e[20]||(e[20]=l("div",null,"Usage",-1)),(ye=s(i))!=null&&ye.source_count?(d(),h(n,{key:0,icon:"chevronDown",class:g(["flex-none",{"transform rotate-180":((ve=s(i))==null?void 0:ve.source_count)==="asc"}])},null,8,["class"])):(d(),h(n,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),e[21]||(e[21]=l("th",{class:"cell-actions"},[l("div",null,"Actions")],-1))])])]),(ge=s(k))!=null&&ge.length?(d(),y("table",Xt,[l("tbody",null,[(d(!0),y(ee,null,$e(s(k),o=>(d(),y("tr",{key:o.id,onClick:f=>s(K)(o)},[l("td",es,[l("div",{class:"gap-3",style:Ce({maxWidth:`${s(Re)}px`})},[a(_,{placement:"bottom",class:"truncate","show-on-truncate-only":""},{title:r(()=>[u(c(o.title),1)]),default:r(()=>[u(" "+c(o.title),1)]),_:2},1024),o.is_private?(d(),y("span",ts,[a(w,{border:!1,class:"text-primary !h-4.5 bg-brand-50 text-xs"},{default:r(()=>[u(c(t.$t("general.private")),1)]),_:1})])):$("",!0)],4)]),l("td",ss,[l("div",null,[a(w,{rounded:"lg",class:"flex items-center gap-2 px-0 py-1 !h-7 truncate !border-transparent"},{default:r(()=>[a(ne,{type:o.sub_type},null,8,["type"]),a(_,{placement:"bottom","show-on-truncate-only":"",class:"text-sm truncate"},{title:r(()=>{var f;return[u(c(((f=("clientTypesMap"in t?t.clientTypesMap:s(Y))[o==null?void 0:o.sub_type])==null?void 0:f.text)||(o==null?void 0:o.sub_type)),1)]}),default:r(()=>{var f;return[u(" "+c(o.sub_type&&("clientTypesMap"in t?t.clientTypesMap:s(Y))[o.sub_type]?(f=("clientTypesMap"in t?t.clientTypesMap:s(Y))[o.sub_type])==null?void 0:f.text:o.sub_type),1)]}),_:2},1024)]),_:2},1024)])]),l("td",os,[l("div",null,[a(_,{placement:"bottom","show-on-truncate-only":""},{title:r(()=>[u(c(s(O)(o.created_at).local().format("DD MMM YYYY")),1)]),default:r(()=>[u(" "+c(s(O)(o.created_at).local().format("DD MMM YYYY")),1)]),_:2},1024)])]),l("td",ls,[l("div",null,[a(_,{disabled:!T(o.created_by),class:"w-full"},{title:r(()=>[u(c(`User not part of this ${("isEeUI"in t?t.isEeUI:s(st))?"workspace":"organisation"} anymore`),1)]),default:r(()=>{var f,L;return[o.created_by&&((f=s(b).get(o.created_by))!=null&&f.email)?(d(),y("div",as,[a(je,{email:(L=s(b).get(o.created_by))==null?void 0:L.email,size:"base",class:g(["flex-none",{"!grayscale":T(o.created_by)}]),style:Ce(T(o.created_by)?{filter:"grayscale(100%) brightness(115%)"}:{})},null,8,["email","class","style"]),l("div",ns,[l("div",rs,[a(_,{class:g(["text-sm !leading-5 capitalize font-semibold truncate",{"text-gray-800":!T(o.created_by),"text-gray-500":T(o.created_by)}]),disabled:T(o.created_by),"show-on-truncate-only":"",placement:"bottom"},{title:r(()=>[u(c(ae(o.created_by)),1)]),default:r(()=>[u(" "+c(ae(o.created_by)),1)]),_:2},1032,["class","disabled"])]),a(_,{class:g(["text-xs !leading-4 truncate",{"text-gray-600":!T(o.created_by),"text-gray-500":T(o.created_by)}]),disabled:T(o.created_by),"show-on-truncate-only":"",placement:"bottom"},{title:r(()=>{var z;return[u(c((z=s(b).get(o.created_by))==null?void 0:z.email),1)]}),default:r(()=>{var z;return[u(" "+c((z=s(b).get(o.created_by))==null?void 0:z.email),1)]}),_:2},1032,["class","disabled"])])])):(d(),y("div",cs,c(o.created_by),1))]}),_:2},1032,["disabled"])])]),l("td",is,[l("div",null,c((o==null?void 0:o.source_count)??0),1)]),l("td",{class:"cell-actions",onClick:e[6]||(e[6]=ot(()=>{},["stop"]))},[l("div",ds,[a(Ye,{placement:"bottomRight"},{overlay:r(()=>[a(Ve,null,{default:r(()=>[a(H,{onClick:f=>s(K)(o)},{default:r(()=>[a(n,{class:"text-gray-800",icon:"edit"}),l("span",null,c(t.$t("general.edit")),1)]),_:2},1032,["onClick"]),a(_,{disabled:(o==null?void 0:o.sub_type)!==("ClientType"in t?t.ClientType:s(Z)).SQLITE},{title:r(()=>{var f;return[u(" Not allowed for type "+c(o.sub_type&&("clientTypesMap"in t?t.clientTypesMap:s(Y))[o.sub_type]?(f=("clientTypesMap"in t?t.clientTypesMap:s(Y))[o.sub_type])==null?void 0:f.text:o.sub_type),1)]}),default:r(()=>[a(H,{disabled:(o==null?void 0:o.sub_type)===("ClientType"in t?t.ClientType:s(Z)).SQLITE,onClick:f=>s(R)(o)},{default:r(()=>[a(n,{class:g({"text-current":(o==null?void 0:o.sub_type)===("ClientType"in t?t.ClientType:s(Z)).SQLITE,"text-gray-800":(o==null?void 0:o.sub_type)!==("ClientType"in t?t.ClientType:s(Z)).SQLITE}),icon:"duplicate"},null,8,["class"]),l("span",null,c(t.$t("general.duplicate")),1)]),_:2},1032,["disabled","onClick"])]),_:2},1032,["disabled"]),a(Ge),a(H,{class:"!text-red-500 !hover:bg-red-50",onClick:f=>Ae(o)},{default:r(()=>[a(n,{icon:"delete"}),u(" "+c(t.$t("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:r(()=>[a(re,{size:"small",type:"secondary"},{default:r(()=>[a(n,{icon:"threeDotVertical"})]),_:1})]),_:2},1024)])])],8,Ht))),128))])])):$("",!0)],2),lt(l("div",us,[l("div",ps,[a(Ke,{size:"xlarge"}),l("span",_s,c(t.$t("general.loading")),1)])],512),[[at,s(I)]]),!s(I)&&(!((be=s(C))!=null&&be.length)||!s(k).length)?(d(),y("div",ms,[(xe=s(C))!=null&&xe.length&&!s(k).length?(d(),y("div",fs,[e[22]||(e[22]=l("img",{src:Pt,class:"!w-[164px] flex-none",alt:"No search results found"},null,-1)),u(" "+c(t.$t("title.noResultsMatchedYourSearch")),1)])):(d(),y("div",ys,[a(Qe,{image:("Empty"in t?t.Empty:s(Ie)).PRESENTED_IMAGE_SIMPLE,description:t.$t("labels.noData"),class:"!my-0"},null,8,["image","description"])]))])):$("",!0),s(v).totalRows?(d(),y("div",{key:1,class:g(["flex flex-row justify-center items-center bg-gray-50 min-h-10",{"pointer-events-none":s(I)}])},[l("div",vs,[e[23]||(e[23]=l("div",null," ",-1)),a(qe,{current:s(v).page,"onUpdate:current":[e[7]||(e[7]=o=>s(v).page=o),e[9]||(e[9]=o=>q(void 0,void 0,!1))],"page-size":s(v).pageSize,"onUpdate:pageSize":[e[8]||(e[8]=o=>s(v).pageSize=o),e[10]||(e[10]=o=>q(s(v).page,o,!1))],total:+s(v).totalRows,"show-size-changer":"","use-stored-page-size":!1,"prev-page-tooltip":`${F()}+←`,"next-page-tooltip":`${F()}+→`,"first-page-tooltip":`${F()}+↓`,"last-page-tooltip":`${F()}+↑`},null,8,["current","page-size","total","prev-page-tooltip","next-page-tooltip","first-page-tooltip","last-page-tooltip"]),l("div",gs,c(s(v).totalRows)+" "+c(s(v).totalRows===1?"record":"records"),1)])],2)):$("",!0)]),a(Ze,{visible:s(A),"onUpdate:visible":e[11]||(e[11]=o=>se(A)?A.value=o:null),"entity-name":t.$t("general.connection"),"on-delete":Pe,"delete-label":t.$t("general.delete"),"show-default-delete-msg":!s(P)&&!((we=(he=s(x))==null?void 0:he.sources)!=null&&we.length)},{"entity-preview":r(()=>{var o,f;return[s(P)?(d(),y(ee,{key:0},[l("div",bs,[a(ce,{active:"",class:"h-9 !rounded-md !w-full"})]),l("div",xs,[a(ce,{active:"",class:"h-9 !rounded-md !w-full"})])],64)):s(x)?(d(),y("div",hs,[l("div",ws,[a(ne,{type:s(x).sub_type},null,8,["type"]),l("div",ks,c(s(x).title),1)]),(f=(o=s(x))==null?void 0:o.sources)!=null&&f.length?(d(),y("div",$s,[e[26]||(e[26]=l("div",{class:"mb-1"},"Following external data sources using this connection will also be removed",-1)),l("ul",Cs,[(d(!0),y(ee,null,$e(s(x).sources,(L,z)=>(d(),y("li",{key:z,class:"marker:text-gray-500 !marker:flex !marker:items-center !!marker:-mt-1"},[l("div",Is,[l("div",Ts,[e[24]||(e[24]=u("   ")),a(Fe,{type:"database",class:"!grayscale min-w-4 flex-none -ml-1",style:{filter:"grayscale(100%) brightness(115%)"}})]),a(_,{class:"!truncate !max-w-[45%] flex-none","show-on-truncate-only":""},{title:r(()=>[u(c(L.project_title),1)]),default:r(()=>[u(" "+c(L.project_title),1)]),_:2},1024),e[25]||(e[25]=u(" > ")),a(Je,{class:"!grayscale min-w-4 flex-none",style:{filter:"grayscale(100%) brightness(115%)"}}),a(_,{class:"truncate !max-w-[45%] capitalize","show-on-truncate-only":""},{title:r(()=>[u(c(L.alias),1)]),default:r(()=>[u(" "+c(L.alias),1)]),_:2},1024)])]))),128))]),e[27]||(e[27]=l("div",{class:"mt-2"},"Do you want to proceed anyway?",-1))])):$("",!0)])):$("",!0)]}),_:1},8,["visible","entity-name","delete-label","show-default-delete-msg"]),a(Xe,{visible:s(D).isOpen,"onUpdate:visible":e[13]||(e[13]=o=>s(D).isOpen=o),centered:"",size:"small",onKeydown:e[14]||(e[14]=nt(o=>s(D).isOpen=!1,["esc"]))},{default:r(()=>[l("div",Ds,[l("div",null,[a(n,{icon:"circleCheckSolid",class:"flex-none !text-green-700 mt-0.5 !h-6 !w-6"})]),l("div",Ms,[l("div",Ss,[l("h3",Us,c(s(D).title),1),a(re,{size:"xsmall",type:"text",onClick:e[12]||(e[12]=o=>s(D).isOpen=!1)},{default:r(()=>[a(n,{icon:"close",class:"text-gray-600"})]),_:1})]),l("div",Rs,c(s(D).description),1),e[28]||(e[28]=l("a",{target:"_blank",href:"https://docs.nocodb.com/data-sources/connect-to-data-source/",rel:"noopener noreferrer"}," Learn more ",-1))])])]),_:1},8,["visible"])])}}}),Ls=oe(Es,[["__scopeId","data-v-7ff54616"]]),zs={key:0,class:"flex w-full flex-col nc-workspace-integrations"},Ns={class:"flex gap-2 items-center min-w-0 p-2 h-[var(--topbar-height)] border-b-1 border-gray-200"},Bs={class:"flex-1 nc-breadcrumb nc-no-negative-margin pl-1"},As={class:"nc-breadcrumb-item capitalize"},Ps={class:"nc-breadcrumb-item active"},Os={class:"tab-title","data-testid":"nc-workspace-settings-tab-integrations"},Ws={class:"h-[calc(100vh-92px)]"},js={class:"tab-title","data-testid":"nc-workspace-settings-tab-integrations"},Gs={class:"h-[calc(100vh-92px)] p-6"},Vs=De({__name:"view",setup(le){const{isUIAllowed:C}=Te(),I=Me(),{loadRoles:X}=Te(),{activeWorkspace:v}=te(I),{loadCollaborators:D}=I,{isFromIntegrationPage:B,integrationPaginationData:W,activeViewTab:U,loadIntegrations:K}=Ct(),R=yt(async()=>{var p;return await X(void 0,{},(p=v.value)==null?void 0:p.id),v.value});return vt(()=>{var p;return(p=R.value)==null?void 0:p.title},p=>{if(!p)return;const M=p.charAt(0).toUpperCase()+p.slice(1);gt(M)},{immediate:!0}),Se(()=>{B.value=!0,bt(()=>{var p;return(p=R.value)==null?void 0:p.id}).toMatch(p=>!!p).then(async()=>{await Promise.all([D({includeDeleted:!0},R.value.id),K()])})}),xt(()=>{B.value=!1}),(p,M)=>{var i;const j=Ue,G=wt,A=It,x=ht,P=Ls,S=jt,Q=Tt;return s(R)?(d(),y("div",zs,[l("div",Ns,[l("div",Bs,[l("div",As,c((i=s(R))==null?void 0:i.title),1),a(j,{icon:"ncSlash1",class:"nc-breadcrumb-divider"}),l("h1",Ps,c(p.$t("general.integrations")),1)]),a(G)]),a(S,{activeKey:s(U),"onUpdate:activeKey":M[0]||(M[0]=E=>se(U)?U.value=E:null)},{leftExtra:r(()=>M[1]||(M[1]=[l("div",{class:"w-3"},null,-1)])),default:r(()=>[s(C)("workspaceIntegrations")?(d(),h(x,{key:"integrations",class:"w-full"},{tab:r(()=>[l("div",Os,[a(j,{icon:"integration"}),u(" "+c(p.$t("general.integrations")),1)])]),default:r(()=>[l("div",Ws,[a(A)])]),_:1})):$("",!0),s(C)("workspaceIntegrations")?(d(),h(x,{key:"connections",class:"w-full"},{tab:r(()=>{var E;return[l("div",js,[a(j,{icon:"gitCommit"}),u(" "+c(p.$t("general.connections"))+" ",1),(E=s(W))!=null&&E.totalRows?(d(),y("div",{key:0,class:g(["tab-info flex-none",{"bg-primary-selected":s(U)==="connections","bg-gray-50":s(U)!=="connections"}])},c(s(W).totalRows),3)):$("",!0)])]}),default:r(()=>[l("div",Gs,[a(P)])]),_:1})):$("",!0)]),_:1},8,["activeKey"]),a(Q)])):$("",!0)}}}),Ys=oe(Vs,[["__scopeId","data-v-202a565d"]]),Ks={};function Qs(le,C){const I=Ys;return d(),h(I)}const Go=oe(Ks,[["render",Qs]]);export{Go as default};
