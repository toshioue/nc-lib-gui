import{f as B,N as U,bL as t,fH as h,ay as D,r as p,hp as P,hf as K,ac as O,g as b,d4 as R,gx as z,az as T,i as A,o as a,c as r,P as n,a as G,t as g,S as H,R as L,dd as Q,Q as Y,T as $,aF as u,Y as l,al as q,_ as J}from"./BLdk6lRf.js";const W={key:0,class:"nc-currency-code h-full !bg-gray-100 border-r border-gray-200 px-3 mr-1 flex items-center"},X=["placeholder","disabled"],Z={key:2,class:"nc-cell-field nc-null uppercase"},ee={key:3,class:"nc-cell-field"},ne={key:4},se=B({__name:"Currency",props:{modelValue:{},placeholder:{},hidePrefix:{type:Boolean}},emits:["update:modelValue","save"],setup(I,{emit:M}){const N=I,x=M,{showNull:S}=U(),f=t(h),d=t(D),i=t(P,p(!1)),C=t(K,p(!1)),m=O(N,"modelValue",x),s=b({get:()=>m.value,set:o=>{o===""?m.value=null:m.value=o}}),v=p(),y=b(()=>{var o;return{currency_locale:"en-US",currency_code:"USD",...R((o=f==null?void 0:f.value)==null?void 0:o.meta)}}),E=b(()=>{try{return s.value===null||s.value===void 0||isNaN(s.value)?s.value:new Intl.NumberFormat(y.value.currency_locale||"en-US",{style:"currency",currency:y.value.currency_code||"USD"}).format(s.value)}catch{return s.value}}),F=t(z,p(!1)),c=t(T),j=o=>!F.value&&!i.value&&!c.value&&(o==null?void 0:o.focus()),w=()=>{v.value!==s.value&&(s.value=v.value=s.value??null,x("save")),d.value=!1},k=()=>{w()},V=()=>{/(Firefox|Safari)/.test(navigator.userAgent)&&w()};return A(()=>{v.value=s.value}),(o,e)=>(a(),r(q,null,[n(c)&&!n(i)&&n(d)&&!o.hidePrefix?(a(),r("div",W,[G("span",null,g(n(y).currency_code),1)])):H("",!0),!n(C)&&n(d)||n(c)&&!n(i)&&n(d)?L((a(),r("input",{key:1,ref:j,"onUpdate:modelValue":e[0]||(e[0]=_=>Y(s)?s.value=_:null),type:"number",class:$(["nc-cell-field h-full border-none rounded-md py-1 outline-none focus:outline-none focus:ring-0",n(c)&&!n(i)?"flex flex-1":"w-full"]),placeholder:o.placeholder,disabled:n(C),onBlur:k,onKeydown:[u(V,["enter"]),e[1]||(e[1]=u(l(()=>{},["stop"]),["down"])),e[2]||(e[2]=u(l(()=>{},["stop"]),["left"])),e[3]||(e[3]=u(l(()=>{},["stop"]),["right"])),e[4]||(e[4]=u(l(()=>{},["stop"]),["up"])),e[5]||(e[5]=u(l(()=>{},["stop"]),["delete"]))],onSelectstartCapture:e[6]||(e[6]=l(()=>{},["stop"])),onMousedown:e[7]||(e[7]=l(()=>{},["stop"])),onContextmenu:e[8]||(e[8]=l(()=>{},["stop"]))},null,42,X)),[[Q,n(s)]]):n(s)===null&&n(S)?(a(),r("span",Z,g(o.$t("general.null")),1)):isNaN(n(s))?(a(),r("span",ne)):(a(),r("span",ee,g(n(E)),1))],64))}}),le=J(se,[["__scopeId","data-v-e2b0ed2b"]]);export{le as default};
