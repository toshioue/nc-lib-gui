const __vite__fileDeps=["./DCUWHR5G.js","./DKhUGBot.js","./entry.B8GgT5QA.css","./ItBATpwr.js","./CX4Cv_ut.js","./DEJjMRn_.js","./BQQOEPN4.js","./DX_5E9FR.js","./BOlDoh1A.js","./CUg8TjpL.js","./Pagination.D7qN7qzC.css","./JdDANzIQ.js","./DGy9VVU7.js","./BTAX7aIF.js","./DO1hNe_j.js","./lyxpGZoZ.js","./boyBAVNN.js","./Ce4Hnuew.js","./DrSobHNn.js","./DFT4Rrrq.js","./P2GfGWnR.js","./u8rUVe3y.js","./DyY7ABnl.js","./BY49hpjj.js","./DgXVCOuO.js","./C9SskyTm.js","./Cz8K5PX4.js","./GPQ-Eg6I.js","./BpnlUwoJ.js","./CxxuE4Yq.js","./Bd_WsUAk.js","./D8UTY2yA.js","./D2ktNk99.js","./BjDxmU3z.js","./LinkedItems.BYmrEeHr.css","./B5rihkxQ.js","./B-qzO8jF.js","./UnLinkedItems.B3o594vW.css","./wnhftTZl.js","./B5mlyM8k.js","./LinkRecordDropdown.wdjSyEoY.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as X,bL as r,r as i,hw as F,fG as ee,hv as te,dS as le,h_ as ae,az as oe,he as ne,is as se,cJ as k,L as re,ai as ie,aw as ue,H as B,O as ce,o as _,c as K,b as de,w as E,U as C,P as l,S as b,a as A,R as pe,V as me,T as ve,Y as h,aF as N,d as _e,t as fe,Z as P,a5 as z}from"./DKhUGBot.js";import{a as ke}from"./DrSobHNn.js";import{u as he}from"./JdDANzIQ.js";import{u as ye}from"./BIe2oNDw.js";import{_ as ge}from"./C9SskyTm.js";import"./DGy9VVU7.js";import"./DO1hNe_j.js";import"./lyxpGZoZ.js";import"./boyBAVNN.js";import"./Ce4Hnuew.js";import"./BTAX7aIF.js";import"./DFT4Rrrq.js";import"./P2GfGWnR.js";import"./u8rUVe3y.js";import"./DyY7ABnl.js";import"./BY49hpjj.js";import"./DEJjMRn_.js";import"./CUg8TjpL.js";import"./DgXVCOuO.js";const we=P(()=>z(()=>import("./DCUWHR5G.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]),import.meta.url).then(n=>n.default||n)),Le=P(()=>z(()=>import("./B5rihkxQ.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,36,26,27,28,29,30,31,33,37]),import.meta.url).then(n=>n.default||n)),xe=P(()=>z(()=>import("./wnhftTZl.js"),__vite__mapDeps([38,39,1,2,40]),import.meta.url).then(n=>n.default||n)),Ve={class:"flex w-full group items-center min-h-4"},Ce={class:"block flex-shrink truncate"},be=A("div",{class:"flex-grow"},null,-1),Re=["tabindex","onKeydown"],Ye=X({__name:"Links",setup(n){const p=r(F,i(0)),u=r(ee),$=r(te),M=r(ae,le()),c=r(oe),R=r(ne,i(!1)),y=r(se,i(!1)),I=k(()=>{var e;return((e=u.value)==null?void 0:e.title)||""}),a=i(!1),o=i(!1),d=i(!1),g=i(!1),{isUIAllowed:H}=re(),{t:f}=ie(),{state:m,isNew:D}=ke(),{relatedTableMeta:G,loadRelatedTableMeta:J,relatedTableDisplayValueProp:Y}=he(u,$,D,M.trigger),O=k(()=>{var e,t;return(t=(e=G.value)==null?void 0:e.columns)==null?void 0:t.find(v=>v.title===Y.value)});J();const T=k(()=>{var t,v,w,L,x,V,s,S;if(c!=null&&c.value||D.value)return(v=(t=m.value)==null?void 0:t[I.value])!=null&&v.length?`${+((L=(w=m.value)==null?void 0:w[I.value])==null?void 0:L.length)} ${f("msg.recordsLinked")}`:f("msg.noRecordsLinked");const e=+(p==null?void 0:p.value)||0;return e?e===1?`1 ${((V=(x=u.value)==null?void 0:x.meta)==null?void 0:V.singular)||f("general.link")}`:`${e} ${((S=(s=u.value)==null?void 0:s.meta)==null?void 0:S.plural)||f("general.links")}`:f("msg.noRecordsLinked")}),Z=k(()=>{var e,t;return c!=null&&c.value?(t=(e=m.value)==null?void 0:e[I.value])==null?void 0:t.length:+(p==null?void 0:p.value)||0}),q=()=>{o.value=!1,a.value=!0,g.value=!1},Q=()=>{a.value=!1,o.value=!0},j=()=>{y.value||(o.value=!0,a.value=!1,d.value=!0,g.value=!1)};ye(r(ue,i(!1)),e=>{switch(e.key){case"Enter":if(a.value)return;o.value=!0,d.value=!0,e.stopPropagation();break}});const W=k(()=>{var e;return D.value?((e=m==null?void 0:m.value)==null?void 0:e[u==null?void 0:u.value.title])??[]:[]}),U=()=>{y.value||(a.value=!0,o.value=!1,d.value=!0,g.value=!0)};return B([o,a],()=>{d.value=o.value||a.value}),B(d,e=>{e||(a.value=!1,o.value=!1)},{flush:"post"}),(e,t)=>{const v=ge,w=we,L=Le,x=xe,V=ce("e");return _(),K("div",{class:"nc-cell-field flex w-full group items-center nc-links-wrapper py-1",onDblclick:h(j,["stop"])},[de(x,{"is-open":d.value,"onUpdate:isOpen":t[2]||(t[2]=s=>d.value=s)},{overlay:E(()=>[o.value?(_(),C(w,{key:0,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s),items:l(Z),column:l(O),"cell-value":l(W),onAttachRecord:q},null,8,["modelValue","items","column","cell-value"])):b("",!0),a.value?(_(),C(L,{key:1,modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value=s),column:l(O),"hide-back-btn":g.value,onAttachLinkedRecord:Q},null,8,["modelValue","column","hide-back-btn"])):b("",!0)]),default:E(()=>[A("div",Ve,[A("div",Ce,[pe((_(),C(me(l(y)?"span":"a"),{title:l(T),class:ve(["text-center nc-datatype-link underline-transparent",{"!text-gray-300":!l(T)}]),tabindex:l(R)?-1:0,onClick:h(j,["stop","prevent"]),onKeydown:N(h(j,["stop","prevent"]),["enter"])},{default:E(()=>[_e(fe(l(T)),1)]),_:1},40,["title","class","tabindex","onKeydown"])),[[V,["c:cell:links:modal:open"]]])]),be,l(y)?b("",!0):(_(),K("div",{key:0,tabindex:l(R)?-1:0,class:"!xs:hidden flex group justify-end group-hover:flex items-center",onKeydown:N(h(U,["stop"]),["enter"])},[!l(R)&&l(H)("dataEdit")||l(c)?(_(),C(v,{key:0,class:"select-none !text-md text-gray-700 nc-action-icon nc-plus invisible group-hover:visible group-focus:visible",onClick:h(U,["stop"])})):b("",!0)],40,Re))])]),_:1},8,["is-open"])],32)}}});export{Ye as default};
