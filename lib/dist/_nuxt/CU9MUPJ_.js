import{g0 as w,N as U,r as B,g as N,g1 as R,g2 as j,fU as V,o as D,c as E,a as J}from"./B2hUoZAs.js";function A(a){const v=w(),{user:n}=U(),l=B({}),u="userSortConfig",g="default",p=N(()=>l.value.field?{[l.value.field]:l.value.direction}:{});function I(){var r;try{const e=localStorage.getItem(u),t=e?JSON.parse(e):{};if(t&&y(t))l.value=(r=n.value)!=null&&r.id?t[n.value.id]||{}:t[g]||{};else throw new Error("Invalid sort config stored in local storage")}catch(e){console.error(e),localStorage.removeItem(u),l.value={}}}function f(r){var e;try{r.field&&r.direction?l.value={...r}:l.value={};const t=localStorage.getItem(u),c=t?JSON.parse(t):{};(e=n.value)!=null&&e.id?l.value.field?c[n.value.id]=l.value:delete c[n.value.id]:c[g]=l.value,localStorage.setItem(u,JSON.stringify(c))}catch(t){console.error("Error while saving sort configuration into local storage:",t)}}function k(r,e=l.value){let t=[];a==="Workspace"?t=Object.values(R):a==="Org"?t=Object.values(j):a==="Project"?t=Object.values(V):a==="Organization"&&(t=Object.values(j)),r=v(r);const c=r.findIndex(o=>{var s;return(s=o==null?void 0:o.roles)==null?void 0:s.includes("super")}),i=e.field==="roles"&&c!==-1?r.splice(c,1):null;let d=r.sort((o,s)=>{var O,m,h,S;switch(e.field){case"roles":{const _=(O=o==null?void 0:o.roles)==null?void 0:O.split(",")[0],x=(m=s==null?void 0:s.roles)==null?void 0:m.split(",")[0];return e.direction==="asc"?t.indexOf(_)-t.indexOf(x):t.indexOf(x)-t.indexOf(_)}case"email":case"title":return e.direction==="asc"?(h=o[e.field])==null?void 0:h.localeCompare(s[e.field]):(S=s[e.field])==null?void 0:S.localeCompare(o[e.field]);case"baseCount":case"workspaceCount":case"memberCount":return e.direction==="asc"?o[e.field]-s[e.field]:s[e.field]-o[e.field]}return 0});return i&&i.length&&(e.direction==="desc"?d=[...d,i[0]]:d=[i[0],...d]),d}function y(r,e={field:"email",direction:"asc"}){for(const t in r)if(!Object.keys(r[t]).every(i=>Object.prototype.hasOwnProperty.call(e,i)))return!1;return!0}return{sorts:l,sortDirection:p,loadSorts:I,saveOrUpdate:f,handleGetSortedData:k,toggleSort:r=>{l.value.field===r?f({field:r,...p.value[r]==="asc"?{direction:"desc"}:{}}):f({field:r,direction:"asc"})}}}const P={class:"nc-icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},b=J("path",{fill:"currentColor",d:"M232.49 215.51L185 168a92.12 92.12 0 1 0-17 17l47.53 47.54a12 12 0 0 0 17-17ZM44 112a68 68 0 1 1 68 68a68.07 68.07 0 0 1-68-68"},null,-1),G=[b];function M(a,v){return D(),E("svg",P,[...G])}const K={name:"ph-magnifying-glass-bold",render:M};export{K as _,A as u};
