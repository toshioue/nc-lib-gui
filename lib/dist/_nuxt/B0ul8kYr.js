const __vite__fileDeps=["./YcPO5z91.js","./CrXmAOT5.js","./nEPQs079.js","./entry.B8GgT5QA.css","./B_JbMc-D.js","./boyBAVNN.js","./Cnpdspb1.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{o as a,c as m,a as y,f as W,N as q,bL as c,r as o,ay as Q,aw as Y,hp as Z,az as X,hf as ee,ac as te,hV as ne,hs as le,g as se,H as v,ae as oe,U as x,w as g,P as t,Y as _,b as E,t as w,T as I,S as $,aF as ae,iG as ue,Q as ie,V as re,aI as ce,Z as M,a5 as N,aS as de,_ as pe}from"./nEPQs079.js";import{u as me}from"./B_7Ene6-.js";const fe={class:"nc-icon",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},ve=y("path",{fill:"currentColor",d:"M208 48V16H16v192h32V70.627l160.687 160.686l22.626-22.626L70.627 48zm256 256v137.373L299.313 276.687l-22.626 22.626L441.373 464H304v32h192V304z"},null,-1),_e=[ve];function ye(u,C){return a(),m("svg",fe,[..._e])}const he={name:"cil-fullscreen",render:ye},xe={class:"nc-icon",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},ge=y("path",{fill:"currentColor",d:"M204 181.372L38.628 16H16v22.628L181.372 204H44v32h192V44h-32zM326.628 304H464v-32H272v192h32V326.628L473.372 496H496v-22.628z"},null,-1),Ee=[ge];function we(u,C){return a(),m("svg",xe,[...Ee])}const Ce={name:"cil-fullscreen-exit",render:we},Ve=M(()=>N(()=>import("./YcPO5z91.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(u=>u.default||u)),ke=M(()=>N(()=>import("./Cnpdspb1.js"),__vite__mapDeps([6,2,3]),import.meta.url).then(u=>u.default||u)),Le={key:0,class:"flex flex-row my-1 space-x-1"},be={class:"text-xs"},je={class:"text-xs"},ze={key:0,class:"nc-cell-field text-xs w-full py-1 text-red-500"},Se={key:1,class:"nc-cell-field nc-null uppercase"},Ie=W({__name:"Json",props:{modelValue:{}},emits:["update:modelValue"],setup(u,{emit:C}){const H=u,J=C,{showNull:O}=q(),r=c(Q,o(!1)),P=c(Y,o(!1)),b=c(Z,o(!1)),V=c(X,o(!1)),B=c(ee,o(!1)),i=te(H,"modelValue",J),j=o(),d=o(),R=c(ne,o(!1)),l=o(!1),F=c(le,o(void 0)),f=e=>!e||e==="null"?null:e,s=se({get:()=>j.value,set:e=>{j.value=f(e)===null?null:typeof e=="object"?JSON.stringify(e,null,2):e,V.value&&!l.value&&(i.value=f(e)===null?null:e)}}),A=()=>{d.value=void 0,l.value=!1,r.value=!1,s.value=i.value},D=e=>{try{return JSON.stringify(JSON.parse(e))}catch(n){return console.log(n),e}},z=()=>{l.value=!1,r.value=!1,i.value=f(s.value)===null?null:D(s.value)},S=e=>{try{s.value=f(s.value)===null?null:typeof e=="string"?JSON.stringify(JSON.parse(e),null,2):e}catch{s.value=f(s.value)===null?null:e}};v(i,e=>{S(e)},{immediate:!0}),v([s,r],()=>{try{JSON.parse(s.value),d.value=void 0}catch(e){if(s.value===void 0||s.value===null)return;d.value=e}}),v(r,()=>{l.value=!1,S(i.value)}),me(P,e=>{switch(e.key){case"Enter":if(e.stopPropagation(),e.shiftKey)return!0;r.value?z():r.value=!0;break}});const k=o(null);oe(k,e=>{var n;(n=e.target)!=null&&n.closest(".nc-json-action")||(r.value=!1)}),v(l,()=>{R.value=l.value});const p=e=>{e.stopPropagation()};return v(k,()=>{if(!b.value)return;const e=document.querySelector(".nc-json-expanded-modal");l.value&&(e!=null&&e.parentElement)?(e.parentElement.addEventListener("click",p),e.parentElement.addEventListener("mousedown",p),e.parentElement.addEventListener("mouseup",p)):e!=null&&e.parentElement&&(e.parentElement.removeEventListener("click",p),e.parentElement.removeEventListener("mousedown",p),e.parentElement.removeEventListener("mouseup",p))}),(e,n)=>{const K=Ce,T=he,L=de,U=Ve,G=ke;return a(),x(re(t(l)?ce:"div"),{visible:t(l),"onUpdate:visible":n[7]||(n[7]=h=>ie(l)?l.value=h:null),closable:!1,centered:"",footer:null,"wrap-class-name":t(l)?"!z-1051 nc-json-expanded-modal":null},{default:g(()=>[t(r)&&!t(B)?(a(),m("div",{key:0,class:"flex flex-col w-full",onMousedown:n[4]||(n[4]=_(()=>{},["stop"])),onMouseup:n[5]||(n[5]=_(()=>{},["stop"])),onClick:n[6]||(n[6]=_(()=>{},["stop"]))},[y("div",{class:"flex flex-row justify-between pt-1 pb-2 nc-json-action",onMousedown:n[1]||(n[1]=_(()=>{},["stop"]))},[E(L,{type:"text",size:"small",onClick:n[0]||(n[0]=h=>l.value=!t(l))},{default:g(()=>[t(l)?(a(),x(K,{key:0,class:"h-2.5"})):(a(),x(T,{key:1,class:"h-2.5"}))]),_:1}),!t(V)||t(l)?(a(),m("div",Le,[E(L,{type:"text",size:"small",class:"!rounded-lg",onClick:A},{default:g(()=>[y("div",be,w(e.$t("general.cancel")),1)]),_:1}),E(L,{type:t(l)?"primary":"text",size:"small",class:I(["nc-save-json-value-btn !rounded-lg",{"nc-edit-modal":!t(l)}]),disabled:!!t(d)||t(s)===t(i),onClick:z},{default:g(()=>[y("div",je,w(e.$t("general.save")),1)]),_:1},8,["type","class","disabled"])])):$("",!0)],32),E(U,{ref_key:"inputWrapperRef",ref:k,"model-value":t(s)||"",class:I(["min-w-full w-80",{"expanded-editor":t(l),editor:!t(l)}]),"hide-minimap":!0,"disable-deep-compare":!0,"auto-focus":!t(V)&&!t(b),"onUpdate:modelValue":n[2]||(n[2]=h=>s.value=h),onKeydown:n[3]||(n[3]=ae(_(()=>{},["stop"]),["enter"]))},null,8,["model-value","class","auto-focus"]),t(d)?(a(),m("span",ze,w(t(d).toString()),1)):$("",!0)],32)):t(i)===null&&t(O)?(a(),m("span",Se,w(e.$t("general.null")),1)):(a(),x(G,{key:2,value:t(i)?("stringifyProp"in e?e.stringifyProp:t(ue))(t(i)):"",lines:t(F),class:"nc-cell-field"},null,8,["value","lines"]))]),_:1},40,["visible","wrap-class-name"])}}}),Ne=pe(Ie,[["__scopeId","data-v-87a31c4a"]]);export{Ne as default};
