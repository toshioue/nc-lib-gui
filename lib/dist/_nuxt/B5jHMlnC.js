import{f as V,u as F,N as P,az as g,r as T,g as m,H as v,i as W,l as U,o as X,S as j,w,b as M,P as n,aa as h,a as D,U as O,a8 as $}from"./Cgw6cdOy.js";import{u as B}from"./DzMG5wJt.js";import{u as G}from"./DvfxijkH.js";import{g as L,M as H}from"./OF3g5mdA.js";const c=250,Y=V({__name:"View",setup(q){const b=F().currentRoute,{setLeftSidebarSize:N}=P(),{isMobileMode:u}=g(B()),{isLeftSidebarOpen:i,leftSidebarWidthPercent:f,leftSideBarSize:e,leftSidebarState:t,mobileNormalizedSidebarSize:p}=g(G()),E=T(),o=T(window.innerWidth),d=m({get:()=>e.value.current,set:a=>{e.value.current=a,e.value.old=a}}),{handleSidebarOpenOnMobileForNonViews:_}=B(),x=m(()=>u.value?i.value?0:100:100-f.value);v(d,()=>{f.value=d.value/o.value*100,N({current:d.value,old:e.value.old})});const r=m(()=>u.value?o.value:e.value.old),S=a=>{const l=parseFloat(getComputedStyle(document.documentElement).fontSize);return a*l},C=m(()=>{const a=S(o.value<=1560?20:35),l=S(16);return r.value>a?a:r.value<l?l:r.value});v(i,()=>{e.value.current=e.value.old,i.value?(setTimeout(()=>t.value="openStart",0),setTimeout(()=>t.value="openEnd",c)):(e.value.old=e.value.current,e.value.current=0,t.value="hiddenStart",setTimeout(()=>{t.value="hiddenEnd"},c))});function k(a){u.value||E.value&&t.value!=="openEnd"&&(a.clientX<4&&["hiddenEnd","peekCloseEnd"].includes(t.value)?(t.value="peekOpenStart",setTimeout(()=>{t.value="peekOpenEnd"},c)):a.clientX>r.value+10&&t.value==="peekOpenEnd"&&(t.value="peekCloseOpen",setTimeout(()=>{t.value="peekCloseEnd"},c)))}function z(a){o.value=window.innerWidth,!a&&i.value&&!e.value.current&&!u.value&&(d.value=e.value.old),f.value=d.value/o.value*100,a&&C.value<r.value&&y(f.value)}W(()=>{document.addEventListener("mousemove",k),window.addEventListener("resize",z)}),U(()=>{document.removeEventListener("mousemove",k),window.removeEventListener("resize",z)}),v(b,()=>{b.value.name==="index-index"&&(i.value=!0)}),v(u,()=>{i.value=!u.value}),v(t,()=>{t.value==="peekCloseEnd"&&setTimeout(()=>{t.value="hiddenEnd"},c)}),W(()=>{_()});function y(a){if(u.value)return;const l=a*o.value/100,s=parseFloat(getComputedStyle(document.documentElement).fontSize);if(o.value<=1560&&l>S(20)){e.value.old=20*s,i.value&&(e.value.current=e.value.old);return}const R=l/s;if(R<16){e.value.old=16*s,i.value&&(e.value.current=e.value.old);return}else if(R>35){e.value.old=35*s,i.value&&(e.value.current=e.value.old);return}e.value.old=l,e.value.current=e.value.old}return(a,l)=>(X(),j(n(H),{class:O(["nc-sidebar-content-resizable-wrapper !w-screen h-full",{"hide-resize-bar":!n(i)||n(t)==="openStart"}]),onReady:l[0]||(l[0]=()=>z()),onResize:l[1]||(l[1]=s=>y(s[0].size))},{default:w(()=>[M(n(L),{"min-size":"15%",size:n(p),"max-size":"60%",class:"nc-sidebar-splitpane !sm:max-w-140 relative !overflow-visible flex",style:h({width:`${n(p)}%`,"min-width":`${n(p)}%`})},{default:w(()=>[D("div",{ref_key:"wrapperRef",ref:E,class:O(["nc-sidebar-wrapper relative flex flex-col h-full justify-center !sm:max-w-140 absolute overflow-visible",{mobile:n(u),"minimized-height":!n(i),"hide-sidebar":["hiddenStart","hiddenEnd","peekCloseEnd"].includes(n(t))}]),style:h({width:n(t)==="hiddenEnd"?"0px":`${n(r)}px`,minWidth:n(t)==="hiddenEnd"?"0px":`${n(C)}px`})},[$(a.$slots,"sidebar")],6)]),_:3},8,["size","style"]),M(n(L),{size:n(x),class:"flex-grow",style:h({"min-width":`${n(x)}%`})},{default:w(()=>[$(a.$slots,"content")]),_:3},8,["size","style"])]),_:3},8,["class"]))}});export{Y as default};
