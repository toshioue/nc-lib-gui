import{f as K,r as $,gn as S,ad as Q,bc as X,g as I,cp as Y,H as Z,b1 as ee,aG as te,o as l,c as r,a as d,U as o,a9 as T,P as a,aq as B,av as N,aa as c,a8 as w,t as H,S as j,T as b,d as ae,R as se,aH as ne,b as z,au as V,$ as le,aN as re,_ as de}from"./3QBYHahY.js";const ie=["data-test-id","onClick"],oe=["data-test-id"],ue={key:0,class:"nc-table-extra-row"},he={class:"flex items-center justify-center absolute left-0 top-0 w-full h-full z-10 pointer-events-none"},ce={class:"flex flex-col justify-center items-center gap-2"},me={class:"text-center"},fe={class:"flex-none text-center flex flex-col items-center gap-3"},pe=K({__name:"Table",props:{columns:{default:()=>[]},data:{default:()=>[]},headerRowHeight:{default:"54px"},rowHeight:{default:"54px"},orderBy:{default:()=>({})},multiFieldOrderBy:{type:Boolean,default:!1},bordered:{type:Boolean,default:!0},isDataLoading:{type:Boolean,default:!1},stickyHeader:{type:Boolean,default:!0},stickyFirstColumn:{type:Boolean},headerRowClassName:{default:""},bodyRowClassName:{default:""},headerCellClassName:{default:""},bodyCellClassName:{default:""},customHeaderRow:{type:Function,default:()=>({})},customRow:{type:Function,default:()=>({})}},emits:["update:orderBy"],setup(q,{emit:G}){const y=q,P=G,m=$(),v=$(),E=$(),{height:M,width:W}=S(v),{height:F}=S(E),u=Q(y,"orderBy",P),{columns:C,data:f,isDataLoading:R,customHeaderRow:D,customRow:L}=X(y),A=I(()=>`nc-table-header-row ${y.headerRowClassName}`),U=I(()=>`nc-table-row ${y.headerRowClassName}`),O=Y(),k=$([]),J=t=>{if(!f.value.length||!t)return;const n={undefined:"asc",asc:"desc",desc:void 0};y.multiFieldOrderBy?u.value[t]=n[`${u.value[t]}`]:u.value={[t]:n[`${u.value[t]}`]}};return Z(W,()=>{!v.value||!W.value||ee(()=>{var n;const t=(n=v.value)==null?void 0:n.querySelectorAll("th > div");t&&t.length&&t.forEach((h,p)=>{k.value[p]=h.getBoundingClientRect().width||void 0})})},{immediate:!0}),te(m,"scroll",()=>{var h,p,x,g,e,i;const t=(h=m.value)==null?void 0:h.querySelector("th:nth-of-type(1)"),n=(p=m.value)==null?void 0:p.querySelector("th:nth-of-type(2)");!t||!n||!((x=t==null?void 0:t.getBoundingClientRect())!=null&&x.right)||!((g=n==null?void 0:n.getBoundingClientRect())!=null&&g.left)||((n==null?void 0:n.getBoundingClientRect().left)<(t==null?void 0:t.getBoundingClientRect().right)?(e=m.value)==null||e.classList.add("sticky-border"):(i=m.value)==null||i.classList.remove("sticky-border"))}),(t,n)=>{var g;const h=le,p=re,x=V;return l(),r("div",{class:o(["nc-table-container relative",{bordered:t.bordered,"min-h-120":a(R)}])},[d("div",{ref_key:"tableWrapper",ref:m,class:o(["nc-table-wrapper max-h-full relative nc-scrollbar-thin !overflow-auto",{"sticky-first-column":t.stickyFirstColumn,"h-full":a(f).length}]),style:c({maxHeight:`calc(100% - ${a(F)}px)`})},[d("table",{ref_key:"tableHeader",ref:v,class:o(["w-full max-w-full",{"!sticky top-0 z-5":t.stickyHeader}])},[d("thead",null,[d("tr",T({style:{height:t.headerRowHeight},class:[`${a(A)}`]},a(D)?a(D)(a(C)):{}),[(l(!0),r(B,null,N(a(C),(e,i)=>{var s;return l(),r("th",{key:i,class:o(["nc-table-header-cell",[`${t.headerCellClassName}`,`nc-table-header-cell-${i}`,{"!hover:bg-gray-100 select-none cursor-pointer":e.showOrderBy,"cursor-not-allowed":e.showOrderBy&&!((s=a(f))!=null&&s.length),"!text-gray-700":e.showOrderBy&&(e==null?void 0:e.dataIndex)&&a(u)[e.dataIndex],"flex-1":!e.width&&!e.basis}]]),style:c({width:e.width,flexBasis:e.width?void 0:e.basis,maxWidth:e.width?e.width:void 0}),"data-test-id":`nc-table-header-cell-${e.name||e.key}`,onClick:_=>e.showOrderBy&&(e!=null&&e.dataIndex)?J(e.dataIndex):void 0},[d("div",{class:o(["gap-3",[`${e.justify||""}`]]),style:c({padding:e.padding||"0px 24px",minWidth:`calc(${e.minWidth}px - 2px)`})},[w(t.$slots,"headerCell",{column:e},()=>[d("div",null,H(e.title||e.name||""),1)],!0),e.showOrderBy&&(e!=null&&e.dataIndex)?(l(),r(B,{key:0},[a(u)[e.dataIndex]?(l(),j(h,{key:0,icon:"chevronDown",class:o(["flex-none",{"transform rotate-180":a(u)[e.dataIndex]==="asc"}])},null,8,["class"])):(l(),j(h,{key:1,icon:"chevronUpDown",class:"flex-none"}))],64)):b("",!0)],6)],14,ie)}),128))],16)])],2),a(f).length?(l(),r("table",{key:0,class:"w-full h-full",style:c({maxHeight:`calc(100% - ${a(M)}px)`})},[d("tbody",null,[(l(!0),r(B,null,N(a(f),(e,i)=>(l(),r("tr",T({key:i,style:{height:t.rowHeight},class:[`${a(U)}`,`nc-table-row-${i}`],ref_for:!0},a(L)?a(L)(e,i):{}),[(l(!0),r(B,null,N(a(C),(s,_)=>(l(),r("td",{key:_,class:o(["nc-table-cell",[`${t.bodyCellClassName}`,`nc-table-cell-${i}`,{"flex-1":!s.width&&!s.basis}]]),style:c({width:s.width,flexBasis:s.width?void 0:s.basis,maxWidth:s.width?s.width:void 0}),"data-test-id":`nc-table-cell-${s.name||s.key}`},[d("div",{class:o([`${s.align||"items-center"} ${s.justify||""}`]),style:c({padding:s.padding||"0px 24px",minWidth:`calc(${s.minWidth}px - 2px)`,maxWidth:a(k)[_]?`${a(k)[_]}px`:void 0})},[w(t.$slots,"bodyCell",{column:s,record:e,recordIndex:i},()=>[ae(H(s!=null&&s.dataIndex&&s.key!=="action"?e[s.dataIndex]:""),1)],!0)],6)],14,oe))),128))],16))),128)),a(O).extraRow?(l(),r("tr",ue,[w(t.$slots,"extraRow",{},void 0,!0)])):b("",!0)])],4)):b("",!0)],6),se(d("div",he,[d("div",ce,[z(p,{size:"xlarge"}),d("span",me,H(t.$t("general.loading")),1)])],512),[[ne,a(R)]]),!a(R)&&!((g=a(f))!=null&&g.length)?(l(),r("div",{key:0,class:"flex-none nc-table-empty flex items-center justify-center py-8 px-6 h-full",style:c({maxHeight:`calc(100% - ${t.headerRowHeight} - ${a(F)}px)`})},[d("div",fe,[w(t.$slots,"emptyText",{},()=>[z(x,{image:("Empty"in t?t.Empty:a(V)).PRESENTED_IMAGE_SIMPLE,description:t.$t("labels.noData"),class:"!my-0"},null,8,["image","description"])],!0)])],4)):b("",!0),a(O).tableFooter?(l(),r("div",{key:1,ref_key:"tableFooterRef",ref:E},[w(t.$slots,"tableFooter",{},void 0,!0)],512)):b("",!0)],2)}}}),ge=de(pe,[["__scopeId","data-v-b8ddc1d2"]]);export{ge as _};
