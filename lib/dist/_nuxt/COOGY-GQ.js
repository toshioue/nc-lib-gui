import{e as ae,ab as M,ba as se,r as d,f as N,jt as le,F as oe,a$ as ne,o as u,c as v,N as t,ao as T,a as m,b as h,w as K,O as re,aJ as $,W as y,R as O,a6 as S,a7 as ie,cY as ue,cZ as ce,at as pe,S as fe,d as V,t as H,Q as de,as as D,Y as ve,$ as me,_ as he}from"./DZZ6t_j4.js";import{_ as ye}from"./TJfB7GlU.js";import"./DKN1hQ6S.js";import{I as we}from"./BQuyMdA-.js";import"./0azk-b-q.js";import"./B5RRVMt5.js";import"./DGj1ycqW.js";import"./BQQOEPN4.js";import"./vll-Pnjv.js";import"./DyDFI6NE.js";const _e=["onKeydown"],ge={class:"nc-list-wrapper"},xe={key:0,class:"h-auto !max-h-[247px]"},be=["onClick"],ke={class:"h-full text-center flex items-center justify-center gap-3 mt-4"},$e=ae({__name:"List",props:{value:{},list:{},optionValueKey:{default:"value"},optionLabelKey:{default:"label"},open:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},searchInputPlaceholder:{default:""},showSelectedOption:{type:Boolean,default:!0},itemHeight:{default:38},filterOption:{}},emits:["update:value","update:open","change"],setup(A,{emit:F}){const l=A,E=F,r=M(l,"value",E),c=M(l,"open",E),{optionValueKey:i,optionLabelKey:I}=l,{closeOnSelect:j,showSelectedOption:z}=se(l),R=d(),p=d(""),P=d(),a=d(-1),f=d(!0),L=N(()=>l.list.length>4),o=N(()=>{const e=p.value.toLowerCase();return l.list.filter((s,g)=>{var x,b;return l!=null&&l.filterOption?l.filterOption(e,s,g):(b=(x=s[I])==null?void 0:x.toLowerCase())==null?void 0:b.includes(e)})}),{list:G,containerProps:Q,wrapperProps:U,scrollTo:B}=le(o,{itemHeight:l.itemHeight}),w=(e=!1,s)=>{e&&f.value&&(a.value=-1),s!==void 0&&(a.value=s),f.value&&(f.value=!1)},_=e=>{e!=null&&e[i]&&(r.value=e[i],E("change",e),j.value&&(c.value=!1))},C=(e=!1)=>{if(a.value!==-1){if(!e){B(a.value);return}setTimeout(()=>{B(a.value)},150)}},W=()=>{w(),a.value!==o.value.length-1&&(a.value=Math.min(a.value+1,o.value.length-1),C())},Y=()=>{w(),a.value!==0&&(a.value=Math.max(a.value-1,0),C())},q=()=>{(o.value[a.value]||o.value[0])&&_(o.value[a.value])},J=()=>{c.value&&setTimeout(()=>{var e;(e=P.value)==null||e.focus()},100)},Z=()=>{!c.value||L.value||setTimeout(()=>{var e;(e=R.value)==null||e.focus()},100)};return oe(c,()=>{c.value&&(p.value="",f.value=!0,r.value?(a.value=o.value.findIndex(e=>(e==null?void 0:e[i])===r.value),ne(()=>{C(!0)})):a.value=-1,L.value?J():Z())},{immediate:!0}),(e,s)=>{const g=ve,x=we,b=ye,X=me,ee=D;return u(),v("div",{ref_key:"listRef",ref:R,tabindex:"0",class:"flex flex-col pt-2 w-64 !focus:shadow-none !focus:outline-none",onKeydown:[$(y(W,["prevent"]),["arrow-down"]),$(y(Y,["prevent"]),["arrow-up"]),s[4]||(s[4]=$(y(n=>_(t(o)[t(a)]),["prevent"]),["enter"]))]},[t(L)?(u(),v(T,{key:0},[m("div",{class:"w-full px-2",onClick:s[2]||(s[2]=y(()=>{},["stop"]))},[h(x,{ref_key:"inputRef",ref:P,value:t(p),"onUpdate:value":s[0]||(s[0]=n=>re(p)?p.value=n:null),placeholder:e.searchInputPlaceholder,class:"nc-toolbar-dropdown-search-field-input !pl-2 !pr-1.5","allow-clear":"",bordered:!1,onKeydown:$(y(q,["stop"]),["enter"]),onChange:s[1]||(s[1]=n=>w(!1,0))},{prefix:K(()=>[h(g,{icon:"search",class:"nc-search-icon h-3.5 w-3.5 mr-1"})]),_:1},8,["value","placeholder","onKeydown"])]),h(b)],64)):O("",!0),S(e.$slots,"listHeader",{},void 0,!0),m("div",ge,[t(o).length?(u(),v("div",xe,[m("div",ie(t(Q),{class:"nc-list !h-auto w-full nc-scrollbar-thin px-2 pb-2",style:{maxHeight:"247px !important"}}),[m("div",ue(ce(t(U))),[(u(!0),v(T,null,pe(t(G),({data:n,index:k})=>(u(),v("div",{key:k,class:fe(["flex items-center gap-2 w-full py-2 px-2 hover:bg-gray-100 cursor-pointer rounded-md",[`nc-list-option-${k}`,{"nc-list-option-selected":n[t(i)]===t(r),"bg-gray-100 ":t(f)&&n[t(i)]===t(r),"bg-gray-100 nc-list-option-active":t(a)===k}]]),onMouseover:s[3]||(s[3]=te=>w(!0)),onClick:te=>_(n)},[S(e.$slots,"listItem",{option:n,index:k},()=>[h(X,{class:"truncate flex-1","show-on-truncate-only":""},{title:K(()=>[V(H(n[t(I)]),1)]),default:K(()=>[V(" "+H(n[t(I)]),1)]),_:2},1024),t(z)&&n[t(i)]===t(r)?(u(),de(g,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):O("",!0)],!0)],42,be))),128))],16)],16)])):O("",!0),t(o).length?O("",!0):S(e.$slots,"emptyState",{key:1},()=>[m("div",ke,[h(ee,{image:("Empty"in e?e.Empty:t(D)).PRESENTED_IMAGE_SIMPLE,description:e.$t("labels.noData"),class:"!my-0"},null,8,["image","description"])])],!0)]),S(e.$slots,"listFooter",{},void 0,!0)],40,_e)}}}),Me=he($e,[["__scopeId","data-v-dc5a5955"]]);export{Me as default};
