const __vite__fileDeps=["./CR-m5al9.js","./DZZ6t_j4.js","./entry.DIDWwc7m.css","./QHHXY-Ma.js","./D_MsYLkT.js","./BCJFTkwv.js","./BQQOEPN4.js","./CB1aB6F1.js","./B5RRVMt5.js","./vll-Pnjv.js","./Pagination.D7qN7qzC.css","./Dzpuh1ae.js","./GMLocJHP.js","./BDAIZopQ.js","./bNr_om_C.js","./qW2V2r_p.js","./ByVBARmO.js","./boyBAVNN.js","./CA74dF2b.js","./BCU2uY6p.js","./C3jLTHF4.js","./C4K5fdHe.js","./BYINaHrJ.js","./dfem9Uc_.js","./D9tFZoTQ.js","./Cy6_Pye2.js","./DKN1hQ6S.js","./BQuyMdA-.js","./DGj1ycqW.js","./DyDFI6NE.js","./BLzs_b5A.js","./DXQuLwNn.js","./uskrw1rV.js","./BmtvKY7O.js","./LinkedItems.Cz86hlsq.css","./QEHny6a3.js","./DRJOThhQ.js","./UnLinkedItems.C1GPHhk-.css","./Dj51GQpU.js","./vK-WmZ7a.js","./LinkRecordDropdown.wdjSyEoY.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e as Z,bL as r,r as i,i6 as F,g2 as ee,i5 as te,dJ as le,iw as ae,aD as oe,hK as ne,i_ as se,cQ as k,J as re,ag as ie,aA as ue,F as B,M as ce,o as _,c as N,b as de,w as A,Q as V,N as l,R as b,a as E,P as pe,T as me,S as ve,W as g,aJ as S,d as _e,t as fe,X as P,a4 as z}from"./DZZ6t_j4.js";import{a as ke}from"./CA74dF2b.js";import{u as ge}from"./Dzpuh1ae.js";import{u as ye}from"./EqBqqo9-.js";import{_ as we}from"./Cy6_Pye2.js";import"./GMLocJHP.js";import"./qW2V2r_p.js";import"./ByVBARmO.js";import"./boyBAVNN.js";import"./BDAIZopQ.js";import"./bNr_om_C.js";import"./BCU2uY6p.js";import"./C3jLTHF4.js";import"./C4K5fdHe.js";import"./BYINaHrJ.js";import"./dfem9Uc_.js";import"./BCJFTkwv.js";import"./vll-Pnjv.js";import"./D9tFZoTQ.js";const he=P(()=>z(()=>import("./CR-m5al9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]),import.meta.url).then(n=>n.default||n)),xe=P(()=>z(()=>import("./QEHny6a3.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,36,26,27,28,29,30,31,33,37]),import.meta.url).then(n=>n.default||n)),Le=P(()=>z(()=>import("./Dj51GQpU.js"),__vite__mapDeps([38,39,1,2,40]),import.meta.url).then(n=>n.default||n)),Ce={class:"flex w-full group items-center min-h-4"},Ve={class:"block flex-shrink truncate"},be=["tabindex","onKeydown"],Qe=Z({__name:"Links",setup(n){const p=r(F,i(0)),u=r(ee),M=r(te),$=r(ae,le()),c=r(oe),R=r(ne,i(!1)),y=r(se,i(!1)),I=k(()=>{var e;return((e=u.value)==null?void 0:e.title)||""}),a=i(!1),o=i(!1),d=i(!1),w=i(!1),{isUIAllowed:J}=re(),{t:f}=ie(),{state:m,isNew:D}=ke(),{relatedTableMeta:H,loadRelatedTableMeta:Q,relatedTableDisplayValueProp:W}=ge(u,M,D,$.trigger),K=k(()=>{var e,t;return(t=(e=H.value)==null?void 0:e.columns)==null?void 0:t.find(v=>v.title===W.value)});Q();const T=k(()=>{var t,v,h,x,L,C,s,U;if(c!=null&&c.value||D.value)return(v=(t=m.value)==null?void 0:t[I.value])!=null&&v.length?`${+((x=(h=m.value)==null?void 0:h[I.value])==null?void 0:x.length)} ${f("msg.recordsLinked")}`:f("msg.noRecordsLinked");const e=+(p==null?void 0:p.value)||0;return e?e===1?`1 ${((C=(L=u.value)==null?void 0:L.meta)==null?void 0:C.singular)||f("general.link")}`:`${e} ${((U=(s=u.value)==null?void 0:s.meta)==null?void 0:U.plural)||f("general.links")}`:f("msg.noRecordsLinked")}),X=k(()=>{var e,t;return c!=null&&c.value?(t=(e=m.value)==null?void 0:e[I.value])==null?void 0:t.length:+(p==null?void 0:p.value)||0}),q=()=>{o.value=!1,a.value=!0,w.value=!1},G=()=>{a.value=!1,o.value=!0},j=()=>{y.value||(o.value=!0,a.value=!1,d.value=!0,w.value=!1)};ye(r(ue,i(!1)),e=>{switch(e.key){case"Enter":if(a.value)return;o.value=!0,d.value=!0,e.stopPropagation();break}});const Y=k(()=>{var e;return D.value?((e=m==null?void 0:m.value)==null?void 0:e[u==null?void 0:u.value.title])??[]:[]}),O=()=>{y.value||(a.value=!0,o.value=!1,d.value=!0,w.value=!0)};return B([o,a],()=>{d.value=o.value||a.value}),B(d,e=>{e||(a.value=!1,o.value=!1)},{flush:"post"}),(e,t)=>{const v=we,h=he,x=xe,L=Le,C=ce("e");return _(),N("div",{class:"nc-cell-field flex w-full group items-center nc-links-wrapper py-1",onDblclick:g(j,["stop"])},[de(L,{"is-open":d.value,"onUpdate:isOpen":t[2]||(t[2]=s=>d.value=s)},{overlay:A(()=>[o.value?(_(),V(h,{key:0,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s),items:l(X),column:l(K),"cell-value":l(Y),onAttachRecord:q},null,8,["modelValue","items","column","cell-value"])):b("",!0),a.value?(_(),V(x,{key:1,modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value=s),column:l(K),"hide-back-btn":w.value,onAttachLinkedRecord:G},null,8,["modelValue","column","hide-back-btn"])):b("",!0)]),default:A(()=>[E("div",Ce,[E("div",Ve,[pe((_(),V(me(l(y)?"span":"a"),{title:l(T),class:ve(["text-center nc-datatype-link underline-transparent",{"!text-gray-300":!l(T)}]),tabindex:l(R)?-1:0,onClick:g(j,["stop","prevent"]),onKeydown:S(g(j,["stop","prevent"]),["enter"])},{default:A(()=>[_e(fe(l(T)),1)]),_:1},40,["title","class","tabindex","onKeydown"])),[[C,["c:cell:links:modal:open"]]])]),t[3]||(t[3]=E("div",{class:"flex-grow"},null,-1)),l(y)?b("",!0):(_(),N("div",{key:0,tabindex:l(R)?-1:0,class:"!xs:hidden flex group justify-end group-hover:flex items-center",onKeydown:S(g(O,["stop"]),["enter"])},[!l(R)&&l(J)("dataEdit")||l(c)?(_(),V(v,{key:0,class:"select-none !text-md text-gray-700 nc-action-icon nc-plus invisible group-hover:visible group-focus:visible",onClick:g(O,["stop"])})):b("",!0)],40,be))])]),_:1},8,["is-open"])],32)}}});export{Qe as default};
