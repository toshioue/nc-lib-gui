import{f as ae,ad as B,bc as se,r as f,g as H,j8 as le,H as oe,b1 as ne,o as u,c as v,P as t,aq as M,a as m,b as h,w as K,Q as re,aL as $,Y as y,T as S,a8 as E,a9 as ie,c$ as ue,d0 as ce,av as pe,U as de,d as V,t as N,S as fe,au as D,$ as ve,a1 as me,_ as he}from"./Cgw6cdOy.js";import{_ as ye}from"./C6pQ4eSP.js";import"./Bcy-XIkn.js";import{I as we}from"./DPaOlBFV.js";import"./VVwMOds3.js";import"./C8c9012h.js";import"./BIsWr_mR.js";import"./BQQOEPN4.js";import"./hvq8FVej.js";import"./BZz6iAla.js";const _e=["onKeydown"],ge={class:"nc-list-wrapper"},xe={key:0,class:"h-auto !max-h-[247px]"},be=["onClick"],ke={class:"h-full text-center flex items-center justify-center gap-3 mt-4"},$e=ae({__name:"List",props:{value:{},list:{},optionValueKey:{default:"value"},optionLabelKey:{default:"label"},open:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},searchInputPlaceholder:{default:""},showSelectedOption:{type:Boolean,default:!0},itemHeight:{default:38},filterOption:{}},emits:["update:value","update:open","change"],setup(A,{emit:U}){const l=A,O=U,r=B(l,"value",O),c=B(l,"open",O),{optionValueKey:i,optionLabelKey:L}=l,{closeOnSelect:j,showSelectedOption:q}=se(l),P=f(),p=f(""),R=f(),a=f(-1),d=f(!0),I=H(()=>l.list.length>4),o=H(()=>{const e=p.value.toLowerCase();return l.list.filter((s,g)=>{var x,b;return l!=null&&l.filterOption?l.filterOption(e,s,g):(b=(x=s[L])==null?void 0:x.toLowerCase())==null?void 0:b.includes(e)})}),{list:z,containerProps:F,wrapperProps:G,scrollTo:T}=le(o,{itemHeight:l.itemHeight}),w=(e=!1,s)=>{e&&d.value&&(a.value=-1),s!==void 0&&(a.value=s),d.value&&(d.value=!1)},_=e=>{e!=null&&e[i]&&(r.value=e[i],O("change",e),j.value&&(c.value=!1))},C=(e=!1)=>{if(a.value!==-1){if(!e){T(a.value);return}setTimeout(()=>{T(a.value)},150)}},Q=()=>{w(),a.value!==o.value.length-1&&(a.value=Math.min(a.value+1,o.value.length-1),C())},W=()=>{w(),a.value!==0&&(a.value=Math.max(a.value-1,0),C())},Y=()=>{(o.value[a.value]||o.value[0])&&_(o.value[a.value])},J=()=>{c.value&&setTimeout(()=>{var e;(e=R.value)==null||e.focus()},100)},X=()=>{!c.value||I.value||setTimeout(()=>{var e;(e=P.value)==null||e.focus()},100)};return oe(c,()=>{c.value&&(p.value="",d.value=!0,r.value?(a.value=o.value.findIndex(e=>(e==null?void 0:e[i])===r.value),ne(()=>{C(!0)})):a.value=-1,I.value?J():X())},{immediate:!0}),(e,s)=>{const g=ve,x=we,b=ye,Z=me,ee=D;return u(),v("div",{ref_key:"listRef",ref:P,tabindex:"0",class:"flex flex-col pt-2 w-64 !focus:shadow-none !focus:outline-none",onKeydown:[$(y(Q,["prevent"]),["arrow-down"]),$(y(W,["prevent"]),["arrow-up"]),s[4]||(s[4]=$(y(n=>_(t(o)[t(a)]),["prevent"]),["enter"]))]},[t(I)?(u(),v(M,{key:0},[m("div",{class:"w-full px-2",onClick:s[2]||(s[2]=y(()=>{},["stop"]))},[h(x,{ref_key:"inputRef",ref:R,value:t(p),"onUpdate:value":s[0]||(s[0]=n=>re(p)?p.value=n:null),placeholder:e.searchInputPlaceholder,class:"nc-toolbar-dropdown-search-field-input !pl-2 !pr-1.5","allow-clear":"",bordered:!1,onKeydown:$(y(Y,["stop"]),["enter"]),onChange:s[1]||(s[1]=n=>w(!1,0))},{prefix:K(()=>[h(g,{icon:"search",class:"nc-search-icon h-3.5 w-3.5 mr-1"})]),_:1},8,["value","placeholder","onKeydown"])]),h(b)],64)):S("",!0),E(e.$slots,"listHeader",{},void 0,!0),m("div",ge,[t(o).length?(u(),v("div",xe,[m("div",ie(t(F),{class:"nc-list !h-auto w-full nc-scrollbar-thin px-2 pb-2",style:{maxHeight:"247px !important"}}),[m("div",ue(ce(t(G))),[(u(!0),v(M,null,pe(t(z),({data:n,index:k})=>(u(),v("div",{key:k,class:de(["flex items-center gap-2 w-full py-2 px-2 hover:bg-gray-100 cursor-pointer rounded-md",[`nc-list-option-${k}`,{"nc-list-option-selected":n[t(i)]===t(r),"bg-gray-100 ":t(d)&&n[t(i)]===t(r),"bg-gray-100 nc-list-option-active":t(a)===k}]]),onMouseover:s[3]||(s[3]=te=>w(!0)),onClick:te=>_(n)},[E(e.$slots,"listItem",{option:n,index:k},()=>[h(Z,{class:"truncate flex-1","show-on-truncate-only":""},{title:K(()=>[V(N(n[t(L)]),1)]),default:K(()=>[V(" "+N(n[t(L)]),1)]),_:2},1024),t(q)&&n[t(i)]===t(r)?(u(),fe(g,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):S("",!0)],!0)],42,be))),128))],16)],16)])):S("",!0),t(o).length?S("",!0):E(e.$slots,"emptyState",{key:1},()=>[m("div",ke,[h(ee,{image:("Empty"in e?e.Empty:t(D)).PRESENTED_IMAGE_SIMPLE,description:e.$t("labels.noData"),class:"!my-0"},null,8,["image","description"])])],!0)]),E(e.$slots,"listFooter",{},void 0,!0)],40,_e)}}}),Be=he($e,[["__scopeId","data-v-dc5a5955"]]);export{Be as default};
