const __vite__fileDeps=["./BmPHaZgi.js","./DZZ6t_j4.js","./entry.DIDWwc7m.css","./wMOVDMe3.js","./DZw_XsHm.js","./DGj1ycqW.js","./BQuyMdA-.js","./BQQOEPN4.js","./vll-Pnjv.js","./CB1aB6F1.js","./CXD-Dj4T.js","./AppStore.CxusfNFD.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as te}from"./By7kEk8u.js";import{e as Q,r as h,f as K,o as s,c as y,N as t,Q as x,w as l,a6 as J,a,t as o,ao as re,$ as ce,ap as Te,aq as Ce,ag as de,ar as se,b as i,d as T,V as le,T as G,U as B,R as L,S as Ne,as as ie,at as Me,O as ee,ah as P,ai as X,Z as ue,Y as ae,y as Se,au as Ee,L as pe,F as Ie,_ as Ae,X as Le,a4 as Ue,av as O}from"./DZZ6t_j4.js";import{_ as De}from"./BqKQ8afS.js";import{_ as Pe}from"./Dyl9zJtZ.js";import"./DKN1hQ6S.js";import{I as me}from"./BQuyMdA-.js";import{_ as je}from"./DLDZbX8i.js";import{_ as ze}from"./CoJsQQVC.js";import{u as Re,_ as Ve}from"./K-Jk6Xey.js";import{_ as Ge}from"./DnwRMKX3.js";import{_ as Be}from"./dfem9Uc_.js";import{F as Oe}from"./BYINaHrJ.js";import"./DgixBgIx.js";import"./CXD-Dj4T.js";import"./B5RRVMt5.js";import"./DGj1ycqW.js";import"./BQQOEPN4.js";import"./vll-Pnjv.js";import"./DyDFI6NE.js";import"./oyD85nwD.js";import"./D_MsYLkT.js";import"./BCJFTkwv.js";import"./CB1aB6F1.js";import"./B8iX-Tu_.js";import"./va4LPhtg.js";import"./QHHXY-Ma.js";import"./Bdv7ru7D.js";import"./CXKU6jgO.js";import"./2FgppHLC.js";import"./D9tFZoTQ.js";const qe={class:"w-full"},Fe={key:1,class:"w-full","data-testid":"truncate-label"},He=Q({__name:"TruncateText",props:{placement:{default:"bottom"},length:{default:20}},setup($){const c=h(),d=K(()=>{var m,u,p,f;return((u=(m=c.value)==null?void 0:m.textContent)==null?void 0:u.length)&&((f=(p=c.value)==null?void 0:p.textContent)==null?void 0:f.length)>$.length}),b=K(()=>{var m,u,p,f,k,g;return(u=(m=c.value)==null?void 0:m.textContent)!=null&&u.length&&((p=c.value)==null?void 0:p.textContent.length)>$.length?`${(k=(f=c.value)==null?void 0:f.textContent)==null?void 0:k.substr(0,$.length-3)}...`:(g=c.value)==null?void 0:g.textContent});return(m,u)=>{const p=ce;return s(),y(re,null,[t(d)?(s(),x(p,{key:0,placement:m.placement},{title:l(()=>[J(m.$slots,"default")]),default:l(()=>[a("div",qe,o(t(b)),1)]),_:3},8,["placement"])):(s(),y("div",Fe,[J(m.$slots,"default")])),a("div",{ref_key:"text",ref:c,class:"hidden"},[J(m.$slots,"default")],512)],64)}}}),Xe=""+new URL("api-tokens.DEwwjpuX.png",import.meta.url).href,Ke={class:"flex flex-col"},Qe={"data-rec":"true"},We={class:"nc-content-max-w p-6 h-[calc(100vh_-_100px)] flex flex-col gap-6 overflow-auto nc-scrollbar-thin"},Ye={class:"max-w-202 mx-auto h-full w-full","data-testid":"nc-token-list"},Ze={class:"flex gap-4 items-baseline justify-between"},Je={class:"text-xl text-left font-bold my-0","data-rec":"true"},et={class:"hidden md:block","data-rec":"true"},tt={class:"flex items-center justify-center md:hidden","data-rec":"true"},at={"data-rec":"true"},nt={key:0,class:"mt-6 h-full max-h-[calc(100%-80px)]"},ot={class:"h-full w-full overflow-y-auto rounded-md"},st={class:"flex w-full pl-5 bg-gray-50 border-1 rounded-t-md"},lt={class:"py-3.5 text-gray-500 font-medium text-3.5 w-2/9","data-rec":"true"},it={class:"py-3.5 text-gray-500 font-medium text-3.5 w-2/9 text-start","data-rec":"true"},rt={class:"py-3.5 text-gray-500 font-medium text-3.5 w-3/9 text-start","data-rec":"true"},ct={class:"py-3.5 pl-19 text-gray-500 font-medium text-3.5 w-2/9 text-start","data-rec":"true"},dt={class:"nc-scrollbar-md !overflow-y-auto flex flex-col h-[calc(100%-52px)]"},ut={key:0},pt={class:"flex w-full"},mt={key:0,class:"text-red-500 text-xs font-light mt-1.5 ml-1","data-rec":"true"},_t={class:"flex gap-2 justify-start"},ft={key:1,class:"border-l-1 border-r-1 border-b-1 rounded-b-md justify-center flex items-center"},vt={class:"text-black font-bold text-3.5 text-start w-2/9"},ht={class:"text-gray-500 font-medium text-3.5 text-start w-2/9"},gt={class:"text-gray-500 font-medium text-3.5 text-start w-3/9"},yt={key:1},kt={class:"flex justify-end items-center gap-3 pr-5 text-gray-500 font-medium text-3.5 w-2/9"},xt={key:1,class:"max-w-[40rem] border px-3 py-6 flex flex-col items-center justify-center gap-6 text-center"},wt={class:"text-2xl text-gray-800 font-bold"},bt={class:"text-sm text-gray-700"},$t={class:"hidden md:block","data-rec":"true"},Tt={class:"flex items-center justify-center md:hidden","data-rec":"true"},Ct={key:2,class:"flex items-center justify-center mt-5"},Nt={class:"flex flex-row items-center py-2.25 px-2.5 bg-gray-50 rounded-lg text-gray-700 mb-4"},Mt={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},St=Q({__name:"Token",setup($){const{api:c,isLoading:d}=Te(),{$e:b}=Se(),{copy:m}=Ce(),{t:u}=de(),p=h([]),f=h([]),k=se({isShow:!1,id:""}),g=h(1),w=h(!1),j=h(10),r=u("labels.token"),_=h({description:r}),z=h(""),M=se({total:0,pageSize:10}),I=h(!0),R=()=>{_.value.description=Ee([...f.value.map(e=>(e==null?void 0:e.description)||"")],r)},W=e=>{k.isShow&&k.id===e?(k.isShow=!1,k.id=""):(k.isShow=!0,k.id=e)},Y=async(e=M.total)=>{try{const n=await c.orgTokens.list({query:{limit:e}});if(!n)return;f.value=n.list,R()}catch(n){P.error(await X(n))}},q=(e,n)=>{switch(e){case"add":{f.value=[...f.value,n];break}case"delete":{f.value=[...f.value.filter(C=>C.token!==n.token)];break}}R()},S=async(e=g.value,n=j.value,C=!1)=>{g.value=e;try{const N=await c.orgTokens.list({query:{limit:n,offset:z.value.length===0?(e-1)*n:0}});if(!N){I.value=!1;return}M.total=N.pageInfo.totalRows??0,M.pageSize=10,p.value=N.list,C&&(w.value=!1,_.value={}),f.value.length||await Y(M.total)}catch(N){P.error(await X(N))}finally{I.value&&(I.value=!1)}};S();const E=h(!1),U=h(""),D=h(""),A=h(!1),V=async e=>{var n;try{const C=(n=f.value.find(N=>N.token===e))==null?void 0:n.id;await c.orgTokens.delete(C),await S(),q("delete",{token:e}),!p.value.length&&g.value!==1&&(g.value--,S(g.value))}catch(C){P.error(await X(C))}b("a:account:token:delete"),E.value=!1,D.value="",U.value=""},_e=e=>e?e.length<255:!1,ne=async()=>{if(A.value=_e(_.value.description),!!A.value)try{const e=await c.orgTokens.create(_.value);await S(g.value,j.value,!0),q("add",e)}catch(e){P.error(await X(e))}finally{b("a:api-token:generate")}},fe=async e=>{if(e)try{await m(e),P.info(u("msg.info.copiedToClipboard")),b("c:api-token:copy")}catch(n){P.error(n.message)}},ve=(e,n)=>{D.value=e,U.value=n,E.value=!0},he=e=>_.value.description===r&&(e==null?void 0:e.select()),ge=K(()=>{var n;const e=(n=_.value.description)==null?void 0:n.length;if(e){if(e>255)return u("msg.info.tokenNameMaxLength")}else return u("msg.info.tokenNameNotEmpty")}),ye=()=>{w.value=!1,A.value=!1};return(e,n)=>{const C=Pe,N=te,F=ue,H=ce,ke=me,xe=ie,Z=He,we=je,be=ae,$e=De;return s(),y("div",Ke,[i(N,null,{icon:l(()=>[i(C,{class:"flex-none text-gray-700 h-5 w-5"})]),title:l(()=>[a("span",Qe,o(e.$t("title.tokens")),1)]),_:1}),a("div",We,[a("div",Ye,[a("div",Ze,[a("h6",Je,o(e.$t("title.apiTokens")),1),t(p).length?(s(),x(H,{key:0,disabled:!(("isEeUI"in e?e.isEeUI:t(le))&&t(p).length)},{title:l(()=>[T(o(e.$t("labels.tokenLimit")),1)]),default:l(()=>[i(F,{disabled:t(w)||("isEeUI"in e?e.isEeUI:t(le))&&t(p).length,class:"!rounded-md","data-testid":"nc-token-create",size:"middle",type:"primary",tooltip:"bottom",onClick:n[0]||(n[0]=v=>w.value=!0)},{default:l(()=>[a("span",et,o(e.$t("title.addNewToken")),1),a("span",tt,[(s(),x(G(("iconMap"in e?e.iconMap:t(B)).plus)))])]),_:1},8,["disabled"])]),_:1},8,["disabled"])):L("",!0)]),a("span",at,o(e.$t("msg.apiTokenCreate")),1),!t(I)&&(t(p).length||t(w))?(s(),y("div",nt,[a("div",ot,[a("div",st,[a("span",lt,o(e.$t("title.tokenName")),1),a("span",it,o(e.$t("title.creator")),1),a("span",rt,o(e.$t("labels.token")),1),a("span",ct,o(e.$t("labels.actions")),1)]),a("div",dt,[t(w)?(s(),y("div",ut,[a("div",{class:Ne(["flex gap-5 px-3 py-2.5 text-gray-500 font-medium text-3.5 w-full nc-token-generate border-b-1 border-l-1 border-r-1",{"rounded-b-md":!t(p).length}])},[a("div",pt,[i(ke,{ref:he,value:t(_).description,"onUpdate:value":n[1]||(n[1]=v=>t(_).description=v),"default-value":t(r),type:"text",class:"!rounded-lg !py-1",placeholder:"Token Name","data-testid":"nc-token-input",disabled:t(d),onPressEnter:ne},null,8,["value","default-value","disabled"]),t(A)?L("",!0):(s(),y("span",mt,o(t(ge)),1))]),a("div",_t,[t(d)?L("",!0):(s(),x(F,{key:0,type:"secondary",size:"small",onClick:ye},{default:l(()=>[T(o(e.$t("general.cancel")),1)]),_:1})),i(F,{type:"primary",size:"sm",loading:t(d),"data-testid":"nc-token-save-btn",onClick:ne},{default:l(()=>[T(o(e.$t("general.save")),1)]),_:1},8,["loading"])])],2)])):L("",!0),!t(p).length&&!t(w)?(s(),y("div",ft,[i(xe,{image:("Empty"in e?e.Empty:t(ie)).PRESENTED_IMAGE_SIMPLE,description:e.$t("labels.noToken")},null,8,["image","description"])])):L("",!0),(s(!0),y(re,null,Me(t(p),v=>(s(),y("div",{key:v.id,"data-testid":"nc-token-list",class:"flex pl-5 py-3 justify-between token items-center border-l-1 border-r-1 border-b-1"},[a("span",vt,[i(Z,{placement:"top",length:20},{default:l(()=>[T(o(v.description),1)]),_:2},1024)]),a("span",ht,[i(Z,{placement:"top",length:20},{default:l(()=>[T(o(v.created_by),1)]),_:2},1024)]),a("span",gt,[v.token===t(k).id&&t(k).isShow?(s(),x(Z,{key:0,placement:"top",length:29},{default:l(()=>[T(o(v.token),1)]),_:2},1024)):(s(),y("span",yt,"************************************"))]),a("div",kt,[i(H,{placement:"top"},{title:l(()=>[T(o(e.$t("labels.showOrHide")),1)]),default:l(()=>[(s(),x(G(("iconMap"in e?e.iconMap:t(B)).eye),{class:"nc-toggle-token-visibility hover::cursor-pointer w-h-4 mb-[1.8px]",onClick:oe=>W(v.token)},null,8,["onClick"]))]),_:2},1024),i(H,{placement:"top"},{title:l(()=>[T(o(e.$t("general.copy")),1)]),default:l(()=>[(s(),x(G(("iconMap"in e?e.iconMap:t(B)).copy),{class:"hover::cursor-pointer w-4 h-4 text-gray-600",onClick:oe=>fe(v.token)},null,8,["onClick"]))]),_:2},1024),i(H,{placement:"top"},{title:l(()=>[T(o(e.$t("general.delete")),1)]),default:l(()=>[(s(),x(G(("iconMap"in e?e.iconMap:t(B)).delete),{"data-testid":"nc-token-row-action-icon",class:"nc-delete-icon hover::cursor-pointer w-4 h-4",onClick:oe=>ve(v.token,v.description)},null,8,["onClick"]))]),_:2},1024)])]))),128))])])])):!t(I)&&!t(p).length&&!t(w)?(s(),y("div",xt,[n[6]||(n[6]=a("img",{src:Xe,class:"!w-[22rem] flex-none"},null,-1)),a("div",wt,o(e.$t("placeholder.noTokenCreated")),1),a("div",bt,o(e.$t("placeholder.noTokenCreatedLabel")),1),i(F,{class:"!rounded-lg !py-3 !h-10","data-testid":"nc-token-create",type:"primary",onClick:n[2]||(n[2]=v=>w.value=!0)},{default:l(()=>[a("span",$t,o(e.$t("title.createNewToken")),1),a("span",Tt,[(s(),x(G(("iconMap"in e?e.iconMap:t(B)).plus)))])]),_:1})])):L("",!0),t(M).total>10?(s(),y("div",Ct,[i(we,{current:t(g),"onUpdate:current":n[3]||(n[3]=v=>ee(g)?g.value=v:null),total:t(M).total,"show-less-items":"",onChange:n[4]||(n[4]=v=>S(t(g),t(j)))},null,8,["current","total"])])):L("",!0)]),i($e,{visible:t(E),"onUpdate:visible":n[5]||(n[5]=v=>ee(E)?E.value=v:null),"entity-name":e.$t("labels.token"),"on-delete":()=>V(t(D))},{"entity-preview":l(()=>[a("span",null,[a("div",Nt,[i(be,{icon:"key",class:"nc-view-icon"}),a("div",Mt,o(t(U)),1)])])]),_:1},8,["visible","entity-name","on-delete"])])])}}}),Et={class:"flex flex-col"},It={"data-rec":"true"},At={class:"nc-content-max-w p-6 h-[calc(100vh_-_100px)] flex flex-col gap-6 overflow-auto nc-scrollbar-thin"},Lt={class:"flex flex-col w-150 mx-auto"},Ut={class:"mt-5 flex flex-col border-1 rounded-2xl border-gray-200 p-6 gap-y-2"},Dt={class:"flex font-medium text-base","data-rec":"true"},Pt={class:"flex text-gray-500","data-rec":"true"},jt={class:"flex flex-row mt-4"},zt={class:"flex h-20 mt-1.5"},Rt={class:"text-gray-800 mb-1.5","data-rec":"true"},Vt={class:"text-gray-800 mb-1.5","data-rec":"true"},Gt={class:"flex flex-row w-full justify-end mt-8","data-rec":"true"},Bt=Q({__name:"Profile",setup($){const{user:c}=pe(),{t:d}=de(),b=h(!1),m=h(!1),u=h({title:"",email:""}),{updateUserProfile:p}=Re(),f=h(),k={title:[{required:!0,message:d("msg.error.nameRequired")},{min:2,message:d("msg.error.nameMinLength")},{max:60,message:d("msg.error.nameMaxLength")}]},g=async()=>{var _;if(await f.value.validate()&&!m.value){m.value=!0,b.value=!1;try{await p({attrs:{display_name:(_=u.value)==null?void 0:_.title}})}catch(z){console.error(z)}finally{m.value=!1}}},w=K(()=>{var r;return(r=c.value)==null?void 0:r.email});Ie(()=>{var r;return(r=c.value)==null?void 0:r.display_name},()=>{var r;(r=c.value)!=null&&r.display_name&&(u.value.title=c.value.display_name,u.value.email=c.value.email)},{immediate:!0});const j=async(r,_)=>{b.value=!_};return(r,_)=>{var S,E;const z=ae,M=te,I=Ge,R=me,W=Be,Y=ue,q=Oe;return s(),y("div",Et,[i(M,null,{icon:l(()=>[i(z,{class:"flex-none !h-5 !w-5",icon:"user"})]),title:l(()=>[a("span",It,o(r.$t("labels.profile")),1)]),_:1}),a("div",At,[a("div",Lt,[a("div",Ut,[a("div",Dt,o(r.$t("labels.accountDetails")),1),a("div",Pt,o(r.$t("labels.controlAppearance")),1),a("div",jt,[a("div",zt,[i(I,{size:"xlarge",email:(S=t(c))==null?void 0:S.email,name:(E=t(c))==null?void 0:E.display_name},null,8,["email","name"])]),_[2]||(_[2]=a("div",{class:"flex w-10"},null,-1)),i(q,{ref_key:"formValidator",ref:f,layout:"vertical","no-style":"",model:t(u),class:"flex flex-col w-full",onFinish:g,onValidate:j},{default:l(()=>{var U,D,A;return[a("div",Rt,o(r.$t("general.name")),1),i(W,{name:"title",rules:k.title},{default:l(()=>[i(R,{value:t(u).title,"onUpdate:value":_[0]||(_[0]=V=>t(u).title=V),class:"w-full !rounded-md !py-1.5",placeholder:r.$t("general.name"),"data-testid":"nc-account-settings-rename-input"},null,8,["value","placeholder"])]),_:1},8,["rules"]),a("div",Vt,o(r.$t("labels.accountEmailID")),1),i(R,{value:t(w),"onUpdate:value":_[1]||(_[1]=V=>ee(w)?w.value=V:null),class:"w-full !rounded-md !py-1.5",placeholder:r.$t("labels.email"),disabled:"","data-testid":"nc-account-settings-email-input"},null,8,["value","placeholder"]),a("div",Gt,[i(Y,{type:"primary","html-type":"submit",disabled:t(b)||((U=t(u))==null?void 0:U.title)&&((D=t(u))==null?void 0:D.title)===((A=t(c))==null?void 0:A.display_name),loading:t(m),"data-testid":"nc-account-settings-save",onClick:g},{loading:l(()=>[T(o(r.$t("general.saving")),1)]),default:l(()=>[T(" "+o(r.$t("general.save")),1)]),_:1},8,["disabled","loading"])])]}),_:1},8,["model"])])])])])])}}}),Ot=Le(()=>Ue(()=>import("./BmPHaZgi.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url).then($=>$.default||$)),qt={},Ft={class:"flex flex-col"},Ht={"data-rec":"true"},Xt={class:"nc-content-max-w p-6 h-[calc(100vh_-_100px)] flex flex-col gap-6 overflow-auto nc-scrollbar-thin"};function Kt($,c){const d=ae,b=te,m=Ot;return s(),y("div",Ft,[i(b,null,{icon:l(()=>[i(d,{icon:"appStore",class:"flex-none text-gray-700 text-[20px] h-5 w-5"})]),title:l(()=>[a("span",Ht,o($.$t("title.appStore")),1)]),_:1}),a("div",Xt,[a("div",null,[i(m)])])])}const Qt=Ae(qt,[["render",Kt]]),Wt={key:5},Na=Q({__name:"[page]",setup($){const{appInfo:c}=pe();return(d,b)=>{const m=St,u=ze,p=Ve,f=Bt,k=Qt;return s(),y("div",null,[(d._.provides[O]||d.$route).params.page==="tokens"?(s(),x(m,{key:0})):(d._.provides[O]||d.$route).params.page==="setup"?(s(),x(u,{key:1})):(d._.provides[O]||d.$route).params.page==="audit"?(s(),x(p,{key:2})):(d._.provides[O]||d.$route).params.page==="profile"?(s(),x(f,{key:3})):(d._.provides[O]||d.$route).params.page==="apps"&&!t(c).isCloud?(s(),x(k,{key:4})):(s(),y("span",Wt))])}}});export{Na as default};
