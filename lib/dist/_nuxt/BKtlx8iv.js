import{e as L,ab as $,K as E,gO as U,r as _,f as D,d4 as m,o as g,c as w,b as t,w as o,a as c,d as p,t as d,N as a,ce as B,R as T,O as F,S as P,ao as K,gx as M,gy as O,ah as z,Y as G,Z as j}from"./DZZ6t_j4.js";import{_ as q}from"./Bdv7ru7D.js";import{F as H}from"./BYINaHrJ.js";import{_ as W}from"./DyDFI6NE.js";import{_ as Y}from"./dfem9Uc_.js";import"./D9tFZoTQ.js";import"./vll-Pnjv.js";import"./BQuyMdA-.js";import"./BQQOEPN4.js";import"./BCJFTkwv.js";const v=""+new URL("grid.DUgR9AKo.png",import.meta.url).href,J=""+new URL("gallery.Cd9ckno3.png",import.meta.url).href,X=""+new URL("kanban.C7eL09OH.png",import.meta.url).href,Z=""+new URL("calendar.XdsCSkJk.png",import.meta.url).href,Q={class:"flex flex-col gap-5"},ee={class:"flex flex-row items-center gap-x-2 text-base font-weight-700 text-gray-800"},se={key:0,class:"mb-2 text-sm text-red-500"},ae={class:"flex flex-row justify-end gap-x-2"},te=["src"],_e=L({__name:"AskPassword",props:{modelValue:{type:Boolean},viewType:{}},emits:["update:modelValue"],setup(b,{emit:h}){const u=b,r=$(u,"modelValue",h),y=E(),{loadSharedView:x}=U(),n=_({password:void 0}),l=_(null),f=async()=>{try{await x(y.params.viewId,n.value.password),r.value=!1}catch(e){const s=await M(e);console.error(s.message),s.error===O.INVALID_SHARED_VIEW_PASSWORD?l.value=s.message:z.error(s.message)}},R=e=>{var s;return e&&((s=e==null?void 0:e.focus)==null?void 0:s.call(e))},k=D(()=>{switch(u.viewType){case m.GRID:return v;case m.GALLERY:return J;case m.KANBAN:return X;case m.CALENDAR:return Z;default:return v}});return(e,s)=>{const V=G,I=W,N=Y,S=H,A=j,C=q;return g(),w(K,null,[t(C,{visible:a(r),"onUpdate:visible":s[2]||(s[2]=i=>F(r)?r.value=i:null),c:"",size:"small",class:P({active:a(r)}),"mask-closable":!1,"mask-style":{backgroundColor:"rgba(255, 255, 255, 0.64)",backdropFilter:"blur(8px)"}},{default:o(()=>[c("div",Q,[c("div",ee,[t(V,{icon:"ncKey",class:"!text-base w-5 h-5"}),p(" "+d(e.$t("msg.thisSharedViewIsProtected")),1)]),t(S,{ref:"formRef",model:a(n),name:"create-new-table-form",onFinish:f},{default:o(()=>[t(N,{name:"password",rules:[{required:!0,message:e.$t("msg.error.signUpRules.passwdRequired")}],class:"!mb-0"},{default:o(()=>[t(I,{ref:R,value:a(n).password,"onUpdate:value":s[0]||(s[0]=i=>a(n).password=i),class:"!rounded-lg !text-small","hide-details":"",placeholder:e.$t("msg.enterPassword"),onInput:s[1]||(s[1]=i=>l.value=null)},null,8,["value","placeholder"]),t(B,{name:"layout"},{default:o(()=>[a(l)?(g(),w("div",se,d(a(l)),1)):T("",!0)]),_:1})]),_:1},8,["rules"])]),_:1},8,["model"]),c("div",ae,[t(A,{disabled:!a(n).password,type:"primary",size:"small","html-type":"submit",class:"!px-2","data-testid":"nc-shared-view-password-submit-btn",onClick:f},{loading:o(()=>[p(d(e.$t("msg.verifyingPassword")),1)]),default:o(()=>[p(d(e.$t("objects.view"))+" ",1)]),_:1},8,["disabled"])])])]),_:1},8,["visible","class"]),c("img",{alt:"view image",src:a(k),class:"fixed inset-0 w-full h-full"},null,8,te)],64)}}});export{_e as default};
