import{f as E,M,ai as U,fb as L,aB as l,r as h,dA as T,aF as A,gA as H,B as q,gB as z,at as J,H as G,o as d,c,b as t,w as r,P as s,S as K,T as u,Q,U as O,a as _,d as f,t as m,cg as W,a4 as X,$ as Y,a0 as Z,cc as ee,a5 as se,dJ as ae,gC as te,d9 as oe,_ as re}from"./3QBYHahY.js";import{u as ne}from"./BvNTpA6D.js";import{u as ie}from"./DJaxC30e.js";import{u as le}from"./BteOdwRG.js";import{F as de}from"./DAKhk9t6.js";import{_ as me}from"./ceYq-xax.js";import{_ as pe}from"./Bk0xUMNV.js";import"./CSl6euFG.js";import"./Bj2FvocX.js";import"./DPqnb67u.js";import"./boyBAVNN.js";import"./BYmqikBK.js";import"./T74iQZdg.js";import"./D4iSzjWt.js";import"./CryEDKiL.js";import"./CWtzMcwx.js";import"./wEQwkVjR.js";import"./xnDaHwV-.js";import"./CmN9vPg3.js";import"./BQQOEPN4.js";import"./CGxepfeV.js";const ce=""+new URL("form.DESRCJtL.png",import.meta.url).href,ue={class:"flex flex-col gap-5"},_e={class:"flex flex-row items-center gap-x-2 text-base font-weight-700 text-gray-800"},fe={key:0,class:"mb-2 text-sm text-red-500"},we={class:"flex flex-row justify-end gap-x-2"},ge={key:1,alt:"view image",src:ce,class:"fixed inset-0 w-full h-full"},ve=E({__name:"[viewId]",async setup(be){let w,g;ne("nc-left-sidebar",{hasSidebar:!1});const x=M(),{t:y}=U(),{loadSharedView:p,sharedView:k,sharedViewMeta:I,meta:v,notFound:C,password:S,passwordDlg:o,passwordError:b}=ie(x.params.viewId);if([w,g]=L(()=>p()),await w,g(),!C.value)l(te,ae()),l(oe,v),l(T,h(!0)),l(A,h(!0)),le(k,v,!0),H(I.value.rtl?"rtl":"ltr");else throw q("/error/404"),z({statusCode:404,statusMessage:y("msg.pageNotFound")});const n=J({password:""});G(()=>n.password,()=>{S.value=n.password});const F=e=>{var a;return e&&((a=e==null?void 0:e.focus)==null?void 0:a.call(e))};return(e,a)=>{const V=X,$=Y,B=me,N=pe,P=de,R=Z,j=ee,D=se;return d(),c("div",null,[t(D,null,{default:r(()=>[s(o)?u("",!0):(d(),K(V,{key:0})),t(j,{visible:s(o),"onUpdate:visible":a[1]||(a[1]=i=>Q(o)?o.value=i:null),class:O({active:s(o)}),closable:!1,width:"min(100%, 450px)",centered:"",footer:null,"mask-closable":!1,"wrap-class-name":"nc-modal-shared-form-password-dlg","mask-style":{backgroundColor:"rgba(255, 255, 255, 0.64)",backdropFilter:"blur(8px)"},onClose:a[2]||(a[2]=i=>o.value=!1)},{default:r(()=>[_("div",ue,[_("div",_e,[t($,{icon:"ncKey",class:"!text-base w-5 h-5"}),f(" "+m(e.$t("msg.thisSharedViewIsProtected")),1)]),t(P,{model:s(n),onFinish:s(p)},{default:r(()=>[t(N,{name:"password",rules:[{required:!0,message:e.$t("msg.error.signUpRules.passwdRequired")}],class:"!mb-0"},{default:r(()=>[t(B,{ref:F,value:s(n).password,"onUpdate:value":a[0]||(a[0]=i=>s(n).password=i),class:"!rounded-lg !text-small","hide-details":"",placeholder:e.$t("msg.enterPassword")},null,8,["value","placeholder"]),t(W,{name:"layout"},{default:r(()=>[s(b)?(d(),c("div",fe,m(s(b)),1)):u("",!0)]),_:1})]),_:1},8,["rules"])]),_:1},8,["model","onFinish"]),_("div",we,[t(R,{disabled:!s(n).password,type:"primary",size:"small","html-type":"submit",class:"!px-2","data-testid":"nc-shared-view-password-submit-btn",onClick:s(p)},{loading:r(()=>[f(m(e.$t("msg.verifyingPassword")),1)]),default:r(()=>[f(m(e.$t("objects.view"))+" ",1)]),_:1},8,["disabled","onClick"])])])]),_:1},8,["visible","class"]),s(o)?(d(),c("img",ge)):u("",!0)]),_:1})])}}}),Ae=re(ve,[["__scopeId","data-v-e4fe6d26"]]);export{Ae as default};
