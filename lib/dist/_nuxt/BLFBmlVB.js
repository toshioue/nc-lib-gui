const __vite__fileDeps=["./BKGO7k13.js","./boyBAVNN.js","./3QBYHahY.js","./entry.Ic44fwRn.css","./BHEjdcp1.js","./toggleHighContrast.wojAGmRG.css","./Editor.6PWXOFSt.css","./DWGVxFka.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{o as a,c as m,a as y,f as G,N as W,bN as c,r as o,aE as Q,aC as Y,hG as Z,aF as X,hq as ee,ad as te,i5 as ne,hJ as le,g as se,H as v,af as oe,S as x,w as E,P as t,Y as _,b as g,t as w,U as N,T as $,aL as ae,iU as ie,Q as ue,V as re,Z as I,a6 as J,aV as ce,_ as de}from"./3QBYHahY.js";import{u as pe}from"./DGM-hiY9.js";import{_ as me}from"./C95Svpv6.js";const fe={class:"nc-icon",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},ve=y("path",{fill:"currentColor",d:"M208 48V16H16v192h32V70.627l160.687 160.686l22.626-22.626L70.627 48zm256 256v137.373L299.313 276.687l-22.626 22.626L441.373 464H304v32h192V304z"},null,-1),_e=[ve];function ye(i,C){return a(),m("svg",fe,[..._e])}const he={name:"cil-fullscreen",render:ye},xe={class:"nc-icon",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Ee=y("path",{fill:"currentColor",d:"M204 181.372L38.628 16H16v22.628L181.372 204H44v32h192V44h-32zM326.628 304H464v-32H272v192h32V326.628L473.372 496H496v-22.628z"},null,-1),ge=[Ee];function we(i,C){return a(),m("svg",xe,[...ge])}const Ce={name:"cil-fullscreen-exit",render:we},Ve=I(()=>J(()=>import("./BKGO7k13.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url).then(i=>i.default||i)),ke=I(()=>J(()=>import("./DWGVxFka.js"),__vite__mapDeps([7,2,3]),import.meta.url).then(i=>i.default||i)),Le={key:0,class:"flex flex-row my-1 space-x-1"},be={class:"text-xs"},je={class:"text-xs"},ze={key:0,class:"nc-cell-field text-xs w-full py-1 text-red-500"},Se={key:1,class:"nc-cell-field nc-null uppercase"},Ne=G({__name:"Json",props:{modelValue:{}},emits:["update:modelValue"],setup(i,{emit:C}){const M=i,H=C,{showNull:O}=W(),r=c(Q,o(!1)),P=c(Y,o(!1)),j=c(Z,o(!1)),V=c(X,o(!1)),B=c(ee,o(!1)),u=te(M,"modelValue",H),z=o(),d=o(),R=c(ne,o(!1)),l=o(!1),F=c(le,o(void 0)),f=e=>!e||e==="null"?null:e,s=se({get:()=>z.value,set:e=>{z.value=f(e)===null?null:typeof e=="object"?JSON.stringify(e,null,2):e,V.value&&!l.value&&(u.value=f(e)===null?null:e)}}),A=e=>{try{return JSON.stringify(JSON.parse(e))}catch(n){return console.log(n),e}};function k(e){try{s.value=f(e)===null?null:typeof e=="string"?JSON.stringify(JSON.parse(e),null,2):e}catch{s.value=f(e)===null?null:e}}const D=()=>{d.value=void 0,l.value=!1,r.value=!1,k(u.value)},S=()=>{l.value=!1,r.value=!1,u.value=f(s.value)===null?null:A(s.value)};v(u,e=>{k(e)},{immediate:!0}),v([s,r],()=>{try{JSON.parse(s.value),d.value=void 0}catch(e){if(s.value===void 0||s.value===null)return;d.value=e}}),v(r,()=>{l.value=!1,k(u.value)}),pe(P,e=>{switch(e.key){case"Enter":if(e.stopPropagation(),e.shiftKey)return!0;r.value?S():r.value=!0;break}});const L=o(null);oe(L,e=>{var n;(n=e.target)!=null&&n.closest(".nc-json-action")||(r.value=!1)}),v(l,()=>{R.value=l.value});const p=e=>{e.stopPropagation()};return v(L,()=>{if(!j.value)return;const e=document.querySelector(".nc-json-expanded-modal");l.value&&(e!=null&&e.parentElement)?(e.parentElement.addEventListener("click",p),e.parentElement.addEventListener("mousedown",p),e.parentElement.addEventListener("mouseup",p)):e!=null&&e.parentElement&&(e.parentElement.removeEventListener("click",p),e.parentElement.removeEventListener("mousedown",p),e.parentElement.removeEventListener("mouseup",p))}),(e,n)=>{const K=Ce,T=he,b=ce,U=Ve,q=ke;return a(),x(re(t(l)?me:"div"),{visible:t(l),"onUpdate:visible":n[7]||(n[7]=h=>ue(l)?l.value=h:null),closable:!1,centered:"",footer:null,"wrap-class-name":t(l)?"!z-1051 nc-json-expanded-modal":null},{default:E(()=>[t(r)&&!t(B)?(a(),m("div",{key:0,class:"flex flex-col w-full",onMousedown:n[4]||(n[4]=_(()=>{},["stop"])),onMouseup:n[5]||(n[5]=_(()=>{},["stop"])),onClick:n[6]||(n[6]=_(()=>{},["stop"]))},[y("div",{class:"flex flex-row justify-between pt-1 pb-2 nc-json-action",onMousedown:n[1]||(n[1]=_(()=>{},["stop"]))},[g(b,{type:"text",size:"small",onClick:n[0]||(n[0]=h=>l.value=!t(l))},{default:E(()=>[t(l)?(a(),x(K,{key:0,class:"h-2.5"})):(a(),x(T,{key:1,class:"h-2.5"}))]),_:1}),!t(V)||t(l)?(a(),m("div",Le,[g(b,{type:"text",size:"small",class:"!rounded-lg",onClick:D},{default:E(()=>[y("div",be,w(e.$t("general.cancel")),1)]),_:1}),g(b,{type:t(l)?"primary":"text",size:"small",class:N(["nc-save-json-value-btn !rounded-lg",{"nc-edit-modal":!t(l)}]),disabled:!!t(d)||t(s)===t(u),onClick:S},{default:E(()=>[y("div",je,w(e.$t("general.save")),1)]),_:1},8,["type","class","disabled"])])):$("",!0)],32),g(U,{ref_key:"inputWrapperRef",ref:L,"model-value":t(s)||"",class:N(["min-w-full w-80",{"expanded-editor":t(l),editor:!t(l)}]),"hide-minimap":!0,"disable-deep-compare":!0,"auto-focus":!t(V)&&!t(j),"onUpdate:modelValue":n[2]||(n[2]=h=>s.value=h),onKeydown:n[3]||(n[3]=ae(_(()=>{},["stop"]),["enter"]))},null,8,["model-value","class","auto-focus"]),t(d)?(a(),m("span",ze,w(t(d).toString()),1)):$("",!0)],32)):t(u)===null&&t(O)?(a(),m("span",Se,w(e.$t("general.null")),1)):(a(),x(q,{key:2,value:t(u)?("stringifyProp"in e?e.stringifyProp:t(ie))(t(u)):"",lines:t(F),class:"nc-cell-field"},null,8,["value","lines"]))]),_:1},40,["visible","wrap-class-name"])}}}),Me=de(Ne,[["__scopeId","data-v-0a42af14"]]);export{Me as default};
