const __vite__fileDeps=["./DwSgSB7j.js","./Cgw6cdOy.js","./entry.DxI7QTvq.css","./CZSp73nk.js","./D8rpj5Lr.js","./BcZAlRJW.js","./BQQOEPN4.js","./BohSct8s.js","./C8c9012h.js","./hvq8FVej.js","./Pagination.D7qN7qzC.css","./BStsc-2E.js","./CO8XXsKl.js","./MA4kh5_N.js","./vIgbYHAs.js","./DpDIhxXu.js","./boyBAVNN.js","./D7yS5JAk.js","./r2PN1Hfg.js","./BBXMuneh.js","./B1jnz4_u.js","./DCaZaUH5.js","./DpYA1Dpy.js","./dmcxUY_0.js","./LSbsNkd9.js","./BS-JicVa.js","./Bcy-XIkn.js","./DPaOlBFV.js","./BIsWr_mR.js","./BZz6iAla.js","./JRGWYtLw.js","./CHLXm8Ls.js","./BR5dm4Ez.js","./cCmEAZwU.js","./LinkedItems.Cz86hlsq.css","./BUe6g5rB.js","./DnXfnYY7.js","./UnLinkedItems.C1GPHhk-.css","./_MH4-1Tt.js","./CiTH7PYd.js","./LinkRecordDropdown.wdjSyEoY.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as oe,bN as i,fQ as ne,hO as ae,hP as le,dK as se,ic as re,aF as ie,r as c,hr as ue,iH as ce,L as me,fc as pe,g,aC as de,H as U,o as s,S as v,w as O,P as t,Q as R,T as p,a as M,c as y,aq as z,av as _e,Y as V,b as ve,Z as T,a6 as b,$ as fe,_ as ye}from"./Cgw6cdOy.js";import{_ as ke}from"./GoONWNvD.js";import{a as he}from"./r2PN1Hfg.js";import{u as we}from"./BStsc-2E.js";import{u as Ce}from"./CnN16FGu.js";import"./CCkm5jiV.js";import"./CO8XXsKl.js";import"./D7yS5JAk.js";import"./BBXMuneh.js";import"./vIgbYHAs.js";import"./DpDIhxXu.js";import"./boyBAVNN.js";import"./MA4kh5_N.js";import"./B1jnz4_u.js";import"./DCaZaUH5.js";import"./DpYA1Dpy.js";import"./dmcxUY_0.js";import"./BcZAlRJW.js";import"./hvq8FVej.js";import"./LSbsNkd9.js";const xe=T(()=>b(()=>import("./DwSgSB7j.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]),import.meta.url).then(l=>l.default||l)),Ie=T(()=>b(()=>import("./BUe6g5rB.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,36,26,27,28,29,30,31,33,37]),import.meta.url).then(l=>l.default||l)),Le=T(()=>b(()=>import("./_MH4-1Tt.js"),__vite__mapDeps([38,39,1,2,40]),import.meta.url).then(l=>l.default||l)),ge={class:"nc-cell-field flex items-center gap-1 w-full chips-wrapper min-h-4"},Re={class:"chips flex items-center img-container flex-1 hm-items flex-nowrap min-w-0 overflow-hidden"},Ve={key:0,class:"flex justify-end gap-1 min-h-4 items-center"},Te=oe({__name:"ManyToMany",async setup(l){let A,j;const d=i(ne),B=i(ae),m=i(le),N=i(re,se()),S=i(ie),F=i(ue,c(!1)),k=i(ce,c(!1)),o=c(!1),a=c(!1),u=c(!1),f=c(!1),{isUIAllowed:H}=me(),{state:h,isNew:w,removeLTARRef:$}=he(),{relatedTableMeta:K,loadRelatedTableMeta:Q,relatedTableDisplayValueProp:C,unlink:q}=we(d,B,w,N.trigger);[A,j]=pe(()=>Q()),await A,j();const E=g(()=>{var e;return m!=null&&m.value?(m==null?void 0:m.value)??[]:w.value?((e=h==null?void 0:h.value)==null?void 0:e[d==null?void 0:d.value.title])??[]:[]}),x=g(()=>E.value.reduce((e,n)=>{if(!C.value)return e;const _=n[C.value];return[...e,{value:_,item:n}]},[])),G=async e=>{w.value?await $(e,d.value):await q(e)},Y=()=>{a.value=!1,o.value=!0,f.value=!1},Z=()=>{o.value=!1,a.value=!0},D=()=>{k.value||(a.value=!0,o.value=!1,u.value=!0,f.value=!1)},J=()=>{k.value||(o.value=!0,a.value=!1,u.value=!0,f.value=!0)};Ce(i(de,c(!1)),e=>{switch(e.key){case"Enter":o.value=!0,e.stopPropagation();break}});const I=g(()=>{var e,n;return(n=(e=K.value)==null?void 0:e.columns)==null?void 0:n.find(_=>_.title===C.value)});return U([a,o],()=>{u.value=a.value||o.value}),U(u,e=>{e||(o.value=!1,a.value=!1)},{flush:"post"}),(e,n)=>{const _=ke,P=fe,W=xe,X=Ie,ee=Le;return s(),v(ee,{"is-open":t(u),"onUpdate:isOpen":n[2]||(n[2]=r=>R(u)?u.value=r:null)},{overlay:O(()=>[t(a)?(s(),v(W,{key:0,modelValue:t(a),"onUpdate:modelValue":n[0]||(n[0]=r=>R(a)?a.value=r:null),"cell-value":t(E),column:t(I),onAttachRecord:Y},null,8,["modelValue","cell-value","column"])):p("",!0),t(o)?(s(),v(X,{key:1,modelValue:t(o),"onUpdate:modelValue":n[1]||(n[1]=r=>R(o)?o.value=r:null),column:t(I),"hide-back-btn":t(f),onAttachLinkedRecord:Z},null,8,["modelValue","column","hide-back-btn"])):p("",!0)]),default:O(()=>{var r;return[M("div",ge,[M("div",Re,[t(x)?(s(),y(z,{key:0},[(s(!0),y(z,null,_e(t(x),(L,te)=>(s(),v(_,{key:te,item:L.item,value:L.value,column:t(I),"show-unlink-button":!0,onUnlink:be=>G(L.item)},null,8,["item","value","column","onUnlink"]))),128)),((r=t(x))==null?void 0:r.length)===10?(s(),y("span",{key:0,class:"caption pointer ml-1 grey--text",onClick:V(D,["stop"])}," more... ")):p("",!0)],64)):p("",!0)]),!t(k)||t(S)?(s(),y("div",Ve,[ve(P,{icon:"expand",class:"text-sm nc-action-icon text-gray-500/50 hover:text-gray-500 nc-arrow-expand",onClick:V(D,["stop"])}),!t(F)&&t(H)("dataEdit")?(s(),v(P,{key:0,icon:"plus",class:"text-sm nc-action-icon text-gray-500/50 hover:text-gray-500 nc-plus",onClick:V(J,["stop"])})):p("",!0)])):p("",!0)])]}),_:1},8,["is-open"])}}}),Ze=ye(Te,[["__scopeId","data-v-4bfc4d14"]]);export{Ze as default};
