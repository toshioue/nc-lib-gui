import{f as R,r as d,H as T,o as u,c as f,a as o,t as a,b as l,w as s,d as c,P as t,Q as j,aL as P,T as C,aa as D,aq as K,av as q,S as E,V as G,W as H,gI as Q,b1 as W,$ as J,a0 as O,a1 as X,p as Y,e as Z,_ as ee}from"./3QBYHahY.js";import{_ as te}from"./DHn6lT7K.js";import{u as le}from"./BqSRViGZ.js";import{u as se}from"./C_wbqn43.js";import"./kHOslGNR.js";import{I as ae}from"./CmN9vPg3.js";import"./C726Gdw3.js";import"./BteOdwRG.js";import"./CSl6euFG.js";import"./T74iQZdg.js";import"./Bj2FvocX.js";import"./DPqnb67u.js";import"./boyBAVNN.js";import"./BYmqikBK.js";import"./CL-Lp6PG.js";import"./DGM-hiY9.js";import"./C00NHga8.js";import"./D4iSzjWt.js";import"./BVQBF9Vn.js";import"./CJ26qO3d.js";import"./DAKhk9t6.js";import"./Bk0xUMNV.js";import"./CGxepfeV.js";import"./xnDaHwV-.js";import"./wEQwkVjR.js";import"./C0-Qcoum.js";import"./DPgYHC40.js";import"./BsWDDIqE.js";import"./BQQOEPN4.js";import"./ceYq-xax.js";const oe=_=>(Y("data-v-95ae45e5"),_=_(),Z(),_),ie={class:"py-2 px-2 h-full flex gap-2 flex-col"},ne={class:"flex w-full bg-white border-b-1 py-1 justify-between"},re={class:"font-semibold"},ce={class:"flex-grow bg-white"},pe={class:"text-gray-800 font-semibold"},de={class:"flex bg-white gap-2"},ue={key:0,class:"text-red-500 text-[13px]"},me={class:"font-semibold capitalize sticky top-0 bg-white text-gray-800"},fe={class:"flex w-full items-center gap-2"},_e=oe(()=>o("div",{class:"flex-grow-1"},null,-1)),he={class:"flex gap-2 items-center justify-end"},ve=R({__name:"Url",emits:["update:visible"],setup(_,{emit:V}){const U=V,{openAttachment:I}=le(),{uploadViaUrl:z,updateModelValue:N,attachments:S}=se(),v=()=>{U("update:visible",!1)},w=d(null),n=d([]),A=async()=>{N([...S.value,...n.value]),v()},i=d(""),p=d(!1),F=e=>{n.value.splice(e,1)},r=d(!1),g=d(""),x=async()=>{if(!Q(i.value)){r.value=!1;return}r.value=!0;try{p.value=!0;const e=await z({url:i.value},!0);typeof e!="string"&&(e!=null&&e.length)?(n.value=[...e,...n.value],i.value=""):(r.value=!1,g.value=e)}finally{p.value=!1}await W(()=>{var e;(e=w.value)==null||e.focus()})};return T(i,()=>{r.value=!0}),(e,k)=>{const y=J,m=O,b=X,M=ae,B=te;return u(),f("div",ie,[o("div",ne,[o("h1",re,a(e.$t("title.uploadViaUrl")),1),l(b,null,{title:s(()=>[c(a(e.$t("general.close")),1)]),default:s(()=>[l(m,{type:"secondary",class:"!border-0",size:"xsmall",onClick:v},{default:s(()=>[l(y,{icon:"close"})]),_:1})]),_:1})]),o("div",ce,[o("h1",pe,a(e.$t("labels.addFilesFromUrl")),1),o("div",de,[l(M,{ref_key:"inputRef",ref:w,value:t(i),"onUpdate:value":k[0]||(k[0]=h=>j(i)?i.value=h:null),type:"url",disabled:t(p),class:"flex-grow",placeholder:"www.google.com/hello.png",onKeydown:P(x,["enter"])},null,8,["value","disabled"]),l(m,{disabled:!t(r),loading:t(p),size:"small",class:"!h-10 !px-4",onClick:x},{default:s(()=>[c(a(e.$t("general.upload")),1)]),_:1},8,["disabled","loading"])]),t(i).length>0&&!t(r)?(u(),f("span",ue,a(t(g).length>0?t(g):e.$t("labels.enterValidUrl")),1)):C("",!0),t(n).length>0?(u(),f("div",{key:1,style:D(`height: ${t(r)?"230px":"208px"}`),class:"overflow-y-auto bg-white mt-1 !max-h-[250px]"},[o("h1",me,a(e.$t("objects.files")),1),(u(!0),f(K,null,q(t(n),(h,$)=>(u(),f("div",{key:$,class:"flex w-full items-center mt-2 h-10 px-2 py-1 border-1 rounded-md"},[o("div",fe,[l(y,{icon:"file"}),c(" "+a(h.title)+" ",1),l(b,{class:"hover:underline"},{title:s(()=>[c(a(e.$t("labels.openFile")),1)]),default:s(()=>[l(B,{class:"flex items-center",target:"_blank",onClick:L=>t(I)(h)},{default:s(()=>[(u(),E(G(("iconMap"in e?e.iconMap:t(H)).externalLink),{class:"w-3.5 h-3.5 text-gray-500"}))]),_:2},1032,["onClick"])]),_:2},1024)]),_e,l(b,null,{title:s(()=>[c(a(e.$t("title.removeFile")),1)]),default:s(()=>[l(m,{type:"text",size:"xsmall",onClick:L=>F($)},{default:s(()=>[l(y,{icon:"close"})]),_:2},1032,["onClick"])]),_:2},1024)]))),128))],4)):C("",!0)]),o("div",he,[l(m,{disabled:t(p),type:"secondary",size:"small",onClick:v},{default:s(()=>[c(a(e.$t("labels.cancel")),1)]),_:1},8,["disabled"]),l(m,{disabled:t(p)||t(n).length===0,size:"small",onClick:A},{default:s(()=>[c(a(e.$t("activity.addFiles")),1)]),_:1},8,["disabled"])])])}}}),We=ee(ve,[["__scopeId","data-v-95ae45e5"]]);export{We as default};
