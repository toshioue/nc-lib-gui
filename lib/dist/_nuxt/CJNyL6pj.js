const __vite__fileDeps=["./Cj4l15BV.js","./Cgw6cdOy.js","./entry.DxI7QTvq.css","./DpDIhxXu.js","./QMUtnSs-.js","./DBOeGHNL.js","./MenuItem.C7h59s4s.css","./DuIfwTrz.js","./Bxm040c6.js","./Menu.CQ8GNWeI.css","./BPLrYayE.js","./Dqwep-0C.js","./BBXMuneh.js","./WttlrBnq.js","./S1x-kZdE.js","./DeleteModal.SEMJ_gSK.css","./CpJUN2HL.js","./DFiWgQ57.js","./CO8XXsKl.js","./KNudlHpk.js","./CitraFSq.js","./hvq8FVej.js","./VVwMOds3.js","./BDM5IbZ8.js","./BcpeJQoi.js","./DpOBhFIe.js","./D7yS5JAk.js","./Menu.D4JiISXR.css","./Dn4WscrN.js","./JP8ePeTV.js","./C0xV_Bo1.js","./Bcy-XIkn.js","./DPaOlBFV.js","./BQQOEPN4.js","./C8c9012h.js","./BIsWr_mR.js","./BZz6iAla.js","./ChdiWx0E.js","./CiTH7PYd.js","./DCaZaUH5.js","./DpYA1Dpy.js","./dmcxUY_0.js","./BcZAlRJW.js","./LSbsNkd9.js","./F-dFAGVG.js","./tqKkZMzS.js","./BRorwQ1i.js","./SelectOptions.JaHDUZhn.css","./Dzlf0Q89.js","./toggleHighContrast.wojAGmRG.css","./Dxcud087.js","./DCR3b-PJ.js","./DBJzESM9.js","./D8rpj5Lr.js","./BohSct8s.js","./D933wnC7.js","./CgtJdY-6.js","./DQEz7g1o.js","./BiBN5Lxt.js","./Switch.CEh6YzqD.css","./BttyO-T4.js","./CAuyt8bq.js","./Tabs.DaLSLYpn.css","./C9Sjn86N.js","./BLvTi2Ht.js","./CJBRTPd8.js","./Select.C8Fy0-eI.css","./5xpACL64.js","./ListWithSearch.PmKyjXoQ.css","./Dsqwjc9N.js","./P9ghmVPN.js","./ahvdY77A.js","./index.E0_BHHK8.css","./Ciml79M9.js","./DbRkwnd8.js","./EditOrAddProvider.K7iYHan9.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as ve,ai as fe,a7 as Y,N as me,r as u,bN as O,db as _e,aB as ye,fQ as be,cZ as he,L as ke,da as we,hL as Oe,aF as xe,gV as Ie,hW as Ce,g as _,fs as Z,h_ as ge,d2 as F,df as Te,hX as N,fR as Ee,H as Me,o as i,c as y,a as P,P as e,aq as K,S as g,w as x,d as X,t as j,b as H,T as b,U as D,Q as J,Y as $,Z as U,a6 as z,hY as Re,a1 as De,$ as $e,ag as Le,_ as Ae}from"./Cgw6cdOy.js";import{b as Ve,c as Be,d as Fe,e as Ne,g as ee}from"./DpDIhxXu.js";import{b as Pe}from"./D7yS5JAk.js";const je=U(()=>z(()=>import("./Cj4l15BV.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(d=>d.default||d)),He=U(()=>z(()=>import("./QMUtnSs-.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10,0,3,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url).then(d=>d.default||d)),Ue=U(()=>z(()=>import("./Dn4WscrN.js"),__vite__mapDeps([28,29,1,2,14,15,7,30,31,32,33,21,34,35,36,0,3,11,12,37,38,39,40,41,42,43,44,45,46,47,26,48,49,50,51,52,53,54,55,56,57,58,59,60,20,61,62,24,18,63,16,64,65,66,67,68,69,70,71,72,22,73,74,75]),import.meta.url).then(d=>d.default||d)),ze=["data-test-id"],qe={key:1,class:"text-red-500"},Se={key:0,class:"flex-1"},Ge={key:1},We={class:"nc-edit-or-add-provider-wrapper"},Qe=ve({__name:"VirtualCell",props:{column:{},hideMenu:{type:Boolean},required:{type:[Boolean,Number]},hideIcon:{type:Boolean},isHiddenCol:{type:Boolean}},setup(d){const L=d,{t:T}=fe(),t=Y(L,"column"),te=Y(L,"hideMenu"),{isMobileMode:h}=me(),o=u(!1),r=u(!1),E=u(!1),q=O(_e,u(!1));ye(be,t);const{metas:le}=he(),{isUIAllowed:k,isMetaReadOnly:ae}=ke(),c=O(we,u()),oe=O(Oe,u(!1)),A=O(xe,u(!1)),n=O(Ie,u(!1)),p=O(Ce,u(!1)),V=_(()=>{var l;return(l=c==null?void 0:c.value)==null?void 0:l.title}),S=_(()=>{var l,a,s,v,f,m;return Z(t.value)?(l=t.value)==null?void 0:l.colOptions:(s=(a=t==null?void 0:t.value)==null?void 0:a.colOptions)!=null&&s.fk_relation_column_id?(m=(f=(v=c==null?void 0:c.value)==null?void 0:v.columns)==null?void 0:f.find(w=>{var I,C;return w.id===((C=(I=t==null?void 0:t.value)==null?void 0:I.colOptions)==null?void 0:C.fk_relation_column_id)}))==null?void 0:m.colOptions:null}),se=_(()=>{var l,a,s;return((l=S.value)==null?void 0:l.fk_related_model_id)&&((s=le.value)==null?void 0:s[(a=S.value)==null?void 0:a.fk_related_model_id])}),M=_(()=>{var l;return(l=se.value)==null?void 0:l.title}),ne=_(()=>{var l,a,s,v,f,m,w;return t.value?Ve(t.value)?`'${V.value}' ${T("labels.hasMany")} '${M.value}'`:Be(t.value)?`'${V.value}' & '${M.value}' ${T("labels.manyToMany")}`:Fe(t.value)?`'${(l=t==null?void 0:t.value)==null?void 0:l.title}' ${T("labels.belongsTo")} '${M.value}'`:Ne(t.value)?`'${V.value}' & '${M.value}' ${T("labels.oneToOne")}`:ee(t.value)?`Formula - ${ge((s=(a=t.value)==null?void 0:a.colOptions)==null?void 0:s.formula,(v=c==null?void 0:c.value)==null?void 0:v.columns,(m=(f=t.value)==null?void 0:f.colOptions)==null?void 0:m.formula_raw)}`:((w=t==null?void 0:t.value)==null?void 0:w.title)||"":""}),ie=_(()=>Z(t.value)||ee(t.value)),R=u(null),re=_(()=>{var l,a,s;return t.value.uidt===F.LongText&&((a=Te((l=t==null?void 0:t.value)==null?void 0:l.meta))!=null&&a.richMode)?N.RichText:t.value.uidt===F.LinkToAnotherRecord&&((s=t.value.colOptions)==null?void 0:s.type)===Ee.ONE_TO_ONE?N[F.Links]:t.value.uidt?N[t.value.uidt]:""}),ue=async l=>{R.value=l,o.value=!0},G=u(),W=()=>{R.value=null,o.value=!1};Me(o,l=>{l||(E.value=!1)});const Q=(l,a=!1)=>{q.value||n.value&&(l==null?void 0:l.type)==="dblclick"||p.value||!A.value&&k("fieldEdit")&&!h.value&&(!ae.value||Re.includes(t.value.uidt))&&(a&&(E.value=!0),o.value=!0)},de=l=>{q.value||A.value||!k("fieldEdit")&&!h.value||(l.preventDefault(),l.stopPropagation(),r.value=!r.value)},ce=()=>{var l;o.value=!0,(l=G.value)!=null&&l.isWebHookModalOpen()||(o.value=!1,E.value=!1)},pe=l=>{if(!(h.value||!k("fieldEdit"))){if(r.value)l.preventDefault(),l.stopPropagation();else if(n.value&&!o.value&&!p.value){r.value=!0;return}r.value=!1}};return(l,a)=>{var C;const s=je,v=De,f=$e,m=He,w=Ue,I=Le;return i(),y("div",{class:D(["flex items-center w-full h-full text-small text-gray-500 font-weight-medium group",{"flex-col !items-start justify-center pt-0.5":e(n)&&!e(h)&&!e(p),"bg-gray-100":e(n)&&!e(p)?e(o)||e(r):!1,"nc-cell-expanded-form-header cursor-pointer hover:bg-gray-100":e(n)&&!e(h)&&e(k)("fieldEdit")&&!e(p)}]),onDblclick:Q,onContextmenu:$(de,["right"]),onClick:pe},[P("div",{class:D(["nc-virtual-cell-name-wrapper flex-1 flex items-center",{"max-w-[calc(100%_-_23px)]":!e(n),"max-w-full":e(n)&&!e(p)}])},[e(t)&&!L.hideIcon?(i(),y(K,{key:0},[e(oe)?(i(),g(v,{key:0,class:"flex items-center",placement:"bottom"},{title:x(()=>[X(j(e(re)),1)]),default:x(()=>[H(s)]),_:1})):(i(),g(s,{key:1}))],64)):b("",!0),H(v,{placement:"bottom",class:"truncate name pl-1","show-on-truncate-only":!e(ie)},{title:x(()=>[X(j(e(ne)),1)]),default:x(()=>[P("span",{"data-test-id":e(t).title,class:D({"select-none":e(n)&&!e(p)})},j(e(t).title),11,ze)]),_:1},8,["show-on-truncate-only"]),("isVirtualColRequired"in l?l.isVirtualColRequired:e(Pe))(e(t),((C=e(c))==null?void 0:C.columns)||[])||l.required?(i(),y("span",qe," *")):b("",!0),e(n)&&!e(h)&&e(k)("fieldEdit")&&!e(p)?(i(),g(f,{key:2,icon:"arrowDown",class:D(["flex-none cursor-pointer ml-1 group-hover:visible w-4 h-4",{visible:e(o)||e(r),invisible:!(e(o)||e(r))}])},null,8,["class"])):b("",!0)],2),e(te)?b("",!0):(i(),y(K,{key:0},[e(n)?b("",!0):(i(),y("div",Se)),!e(A)&&e(k)("fieldEdit")?(i(),g(m,{key:1,"is-open":e(r),"onUpdate:isOpen":a[0]||(a[0]=B=>J(r)?r.value=B:null),"is-hidden-col":l.isHiddenCol,virtual:!0,onAddColumn:ue,onEdit:Q},null,8,["is-open","is-hidden-col"])):b("",!0)],64)),H(I,{visible:e(o),"onUpdate:visible":a[4]||(a[4]=B=>J(o)?o.value=B:null),class:"h-full",trigger:["click"],placement:e(n)&&!e(p)?"bottomLeft":"bottomRight","overlay-class-name":`nc-dropdown-edit-column ${e(o)?"active":""}`,onVisibleChange:ce},{overlay:x(()=>[P("div",We,[e(o)?(i(),g(w,{key:0,ref_key:"editOrAddProviderRef",ref:G,column:e(R)?null:e(t),"column-position":e(R),class:"w-full","edit-description":e(E),onSubmit:W,onCancel:W,onClick:a[2]||(a[2]=$(()=>{},["stop"])),onKeydown:a[3]||(a[3]=$(()=>{},["stop"]))},null,8,["column","column-position","edit-description"])):b("",!0)])]),default:x(()=>[e(n)&&!e(p)?(i(),y("div",{key:0,class:"h-[1px]",onDblclick:a[1]||(a[1]=$(()=>{},["stop"]))}," ",32)):(i(),y("div",Ge))]),_:1},8,["visible","placement","overlay-class-name"])],34)}}}),Xe=Ae(Qe,[["__scopeId","data-v-8a7470b8"]]);export{Xe as default};
