const __vite__fileDeps=["./DC9Lhhz2.js","./B2hUoZAs.js","./entry.B8GgT5QA.css","./CaqB49xY.js","./76A3qgsY.js","./i4toF4kp.js","./CwHJfKcC.js","./BQQOEPN4.js","./C9qKCFvP.js","./R1pHeCcp.js","./AppStore.CXRH6YtK.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as Q,ag as ge,ah as he,ai as te,r as m,aj as K,g as ae,o as n,c as f,a,t as o,P as t,U as b,w as r,d as k,b as i,X as Y,V,W as R,S as U,T as ke,ak as ee,al as be,am as we,Q as X,an as D,ao as O,a2 as se,ap as $e,$ as xe,A as Te,aq as Ce,N as oe,H as Me,_ as Ne,Z as Ee,a5 as Se,ar as F}from"./B2hUoZAs.js";import{_ as Ae}from"./FZag7x1_.js";import{_ as Ie}from"./BjshTetX.js";import"./BWYzyVlv.js";import{I as ne}from"./CwHJfKcC.js";import{_ as Ue}from"./CvDoTMIT.js";import{u as Le,_ as De}from"./DX4isZF7.js";import{_ as je}from"./3I_Awkws.js";import{_ as Pe}from"./cvW-uYte.js";import{F as ze}from"./By21eAqY.js";import"./DFYMF386.js";import"./BGKYJ52S.js";import"./i4toF4kp.js";import"./BQQOEPN4.js";import"./C9qKCFvP.js";import"./kd0F6MQ0.js";import"./fmNfCaCg.js";import"./CaxUP45y.js";import"./1orNHd0L.js";import"./R1pHeCcp.js";import"./DRJOl617.js";import"./DEpWCId1.js";import"./BPB61pKE.js";import"./fKrvpb1C.js";const Ve=""+new URL("api-tokens.DEwwjpuX.png",import.meta.url).href,Re={class:"h-full pt-2"},Be={class:"max-w-202 mx-auto px-4 h-full","data-testid":"nc-token-list"},Ge={class:"py-2 flex gap-4 items-baseline justify-between"},qe={class:"text-2xl text-left font-bold","data-rec":"true"},Oe={class:"hidden md:block","data-rec":"true"},Fe={class:"flex items-center justify-center md:hidden","data-rec":"true"},He={"data-rec":"true"},We={key:0,class:"mt-5 h-[calc(100%-13rem)]"},Xe={class:"h-full w-full !overflow-hidden rounded-md"},Qe={class:"flex w-full pl-5 bg-gray-50 border-1 rounded-t-md"},Ze={class:"py-3.5 text-gray-500 font-medium text-3.5 w-2/9","data-rec":"true"},Je={class:"py-3.5 text-gray-500 font-medium text-3.5 w-2/9 text-start","data-rec":"true"},Ke={class:"py-3.5 text-gray-500 font-medium text-3.5 w-3/9 text-start","data-rec":"true"},Ye={class:"py-3.5 pl-19 text-gray-500 font-medium text-3.5 w-2/9 text-start","data-rec":"true"},et={class:"nc-scrollbar-md !overflow-y-auto flex flex-col h-[calc(100%-5rem)]"},tt={key:0},at={class:"flex w-full"},st={key:0,class:"text-red-500 text-xs font-light mt-1.5 ml-1","data-rec":"true"},ot={class:"flex gap-2 justify-start"},nt={key:1,class:"border-l-1 border-r-1 border-b-1 rounded-b-md justify-center flex items-center"},lt={class:"text-black font-bold text-3.5 text-start w-2/9"},it={class:"text-gray-500 font-medium text-3.5 text-start w-2/9"},rt={class:"text-gray-500 font-medium text-3.5 text-start w-3/9"},ct={key:1},dt={class:"flex justify-end items-center gap-3 pr-5 text-gray-500 font-medium text-3.5 w-2/9"},ut={key:1,class:"max-w-[40rem] border px-3 py-6 flex flex-col items-center justify-center gap-6 text-center"},pt=a("img",{src:Ve,class:"!w-[22rem] flex-none"},null,-1),mt={class:"text-2xl text-gray-800 font-bold"},_t={class:"text-sm text-gray-700"},ft={class:"hidden md:block","data-rec":"true"},vt={class:"flex items-center justify-center md:hidden","data-rec":"true"},yt={key:2,class:"flex items-center justify-center mt-5"},gt={class:"flex flex-row items-center py-2.25 px-2.5 bg-gray-50 rounded-lg text-gray-700 mb-4"},ht={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},kt=Q({__name:"Token",setup(S){const{api:p,isLoading:c}=ge(),{$e:T}=Te(),{copy:C}=he(),{t:_}=te(),v=m([]),h=m([]),w=K({isShow:!1,id:""}),y=m(1),g=m(!1),j=m(10),l=_("labels.token"),d=m({description:l}),P=m(""),x=K({total:0,pageSize:10}),A=m(!0),B=()=>{d.value.description=Ce([...h.value.map(e=>(e==null?void 0:e.description)||"")],l)},H=e=>{w.isShow&&w.id===e?(w.isShow=!1,w.id=""):(w.isShow=!0,w.id=e)},G=async(e=x.total)=>{try{const s=await p.orgTokens.list({query:{limit:e}});if(!s)return;h.value=s.list,B()}catch(s){D.error(await O(s))}},z=(e,s)=>{switch(e){case"add":{h.value=[...h.value,s];break}case"delete":{h.value=[...h.value.filter(E=>E.token!==s.token)];break}}B()},M=async(e=y.value,s=j.value,E=!1)=>{y.value=e;try{const $=await p.orgTokens.list({query:{limit:s,offset:P.value.length===0?(e-1)*s:0}});if(!$){A.value=!1;return}x.total=$.pageInfo.totalRows??0,x.pageSize=10,v.value=$.list,E&&(g.value=!1,d.value={}),h.value.length||await G(x.total)}catch($){D.error(await O($))}finally{A.value&&(A.value=!1)}};M();const N=m(!1),L=m(""),I=m(""),q=m(!1),le=async e=>{try{await p.orgTokens.delete(e),await M(),z("delete",{token:e}),!v.value.length&&y.value!==1&&(y.value--,M(y.value))}catch(s){D.error(await O(s))}T("a:account:token:delete"),N.value=!1,I.value="",L.value=""},ie=e=>e?e.length<255:!1,Z=async()=>{if(q.value=ie(d.value.description),!!q.value)try{const e=await p.orgTokens.create(d.value);await M(y.value,j.value,!0),z("add",e)}catch(e){D.error(await O(e))}finally{T("a:api-token:generate")}},re=async e=>{if(e)try{await C(e),D.info(_("msg.info.copiedToClipboard")),T("c:api-token:copy")}catch(s){D.error(s.message)}},ce=(e,s)=>{I.value=e,L.value=s,N.value=!0},de=e=>d.value.description===l&&(e==null?void 0:e.select()),ue=ae(()=>{var s;const e=(s=d.value.description)==null?void 0:s.length;if(e){if(e>255)return _("msg.info.tokenNameMaxLength")}else return _("msg.info.tokenNameNotEmpty")}),pe=()=>{g.value=!1,q.value=!1};return(e,s)=>{const E=se,$=$e,me=ne,_e=ee,W=Ae,fe=Ue,ve=xe,ye=Ie;return n(),f("div",Re,[a("div",Be,[a("div",Ge,[a("h6",qe,o(e.$t("title.apiTokens")),1),t(v).length?(n(),b($,{key:0,disabled:!(("isEeUI"in e?e.isEeUI:t(Y))&&t(v).length)},{title:r(()=>[k(o(e.$t("labels.tokenLimit")),1)]),default:r(()=>[i(E,{disabled:t(g)||("isEeUI"in e?e.isEeUI:t(Y))&&t(v).length,class:"!rounded-md","data-testid":"nc-token-create",size:"middle",type:"primary",tooltip:"bottom",onClick:s[0]||(s[0]=u=>g.value=!0)},{default:r(()=>[a("span",Oe,o(e.$t("title.addNewToken")),1),a("span",Fe,[(n(),b(V(("iconMap"in e?e.iconMap:t(R)).plus)))])]),_:1},8,["disabled"])]),_:1},8,["disabled"])):U("",!0)]),a("span",He,o(e.$t("msg.apiTokenCreate")),1),!t(A)&&(t(v).length||t(g))?(n(),f("div",We,[a("div",Xe,[a("div",Qe,[a("span",Ze,o(e.$t("title.tokenName")),1),a("span",Je,o(e.$t("title.creator")),1),a("span",Ke,o(e.$t("labels.token")),1),a("span",Ye,o(e.$t("labels.actions")),1)]),a("div",et,[t(g)?(n(),f("div",tt,[a("div",{class:ke(["flex gap-5 px-3 py-2.5 text-gray-500 font-medium text-3.5 w-full nc-token-generate border-b-1 border-l-1 border-r-1",{"rounded-b-md":!t(v).length}])},[a("div",at,[i(me,{ref:de,value:t(d).description,"onUpdate:value":s[1]||(s[1]=u=>t(d).description=u),"default-value":t(l),type:"text",class:"!rounded-lg !py-1",placeholder:"Token Name","data-testid":"nc-token-input",disabled:t(c),onPressEnter:Z},null,8,["value","default-value","disabled"]),t(q)?U("",!0):(n(),f("span",st,o(t(ue)),1))]),a("div",ot,[t(c)?U("",!0):(n(),b(E,{key:0,type:"secondary",size:"small",onClick:pe},{default:r(()=>[k(o(e.$t("general.cancel")),1)]),_:1})),i(E,{type:"primary",size:"sm",loading:t(c),"data-testid":"nc-token-save-btn",onClick:Z},{default:r(()=>[k(o(e.$t("general.save")),1)]),_:1},8,["loading"])])],2)])):U("",!0),!t(v).length&&!t(g)?(n(),f("div",nt,[i(_e,{image:("Empty"in e?e.Empty:t(ee)).PRESENTED_IMAGE_SIMPLE,description:e.$t("labels.noToken")},null,8,["image","description"])])):U("",!0),(n(!0),f(be,null,we(t(v),u=>(n(),f("div",{key:u.id,"data-testid":"nc-token-list",class:"flex pl-5 py-3 justify-between token items-center border-l-1 border-r-1 border-b-1"},[a("span",lt,[i(W,{placement:"top",length:20},{default:r(()=>[k(o(u.description),1)]),_:2},1024)]),a("span",it,[i(W,{placement:"top",length:20},{default:r(()=>[k(o(u.created_by),1)]),_:2},1024)]),a("span",rt,[u.token===t(w).id&&t(w).isShow?(n(),b(W,{key:0,placement:"top",length:29},{default:r(()=>[k(o(u.token),1)]),_:2},1024)):(n(),f("span",ct,"************************************"))]),a("div",dt,[i($,{placement:"top"},{title:r(()=>[k(o(e.$t("labels.showOrHide")),1)]),default:r(()=>[(n(),b(V(("iconMap"in e?e.iconMap:t(R)).eye),{class:"nc-toggle-token-visibility hover::cursor-pointer w-h-4 mb-[1.8px]",onClick:J=>H(u.token)},null,8,["onClick"]))]),_:2},1024),i($,{placement:"top"},{title:r(()=>[k(o(e.$t("general.copy")),1)]),default:r(()=>[(n(),b(V(("iconMap"in e?e.iconMap:t(R)).copy),{class:"hover::cursor-pointer w-4 h-4 text-gray-600",onClick:J=>re(u.token)},null,8,["onClick"]))]),_:2},1024),i($,{placement:"top"},{title:r(()=>[k(o(e.$t("general.delete")),1)]),default:r(()=>[(n(),b(V(("iconMap"in e?e.iconMap:t(R)).delete),{"data-testid":"nc-token-row-action-icon",class:"nc-delete-icon hover::cursor-pointer w-4 h-4",onClick:J=>ce(u.token,u.description)},null,8,["onClick"]))]),_:2},1024)])]))),128))])])])):!t(A)&&!t(v).length&&!t(g)?(n(),f("div",ut,[pt,a("div",mt,o(e.$t("placeholder.noTokenCreated")),1),a("div",_t,o(e.$t("placeholder.noTokenCreatedLabel")),1),i(E,{class:"!rounded-lg !py-3 !h-10","data-testid":"nc-token-create",type:"primary",onClick:s[2]||(s[2]=u=>g.value=!0)},{default:r(()=>[a("span",ft,o(e.$t("title.createNewToken")),1),a("span",vt,[(n(),b(V(("iconMap"in e?e.iconMap:t(R)).plus)))])]),_:1})])):U("",!0),t(x).total>10?(n(),f("div",yt,[i(fe,{current:t(y),"onUpdate:current":s[3]||(s[3]=u=>X(y)?y.value=u:null),total:t(x).total,"show-less-items":"",onChange:s[4]||(s[4]=u=>M(t(y),t(j)))},null,8,["current","total"])])):U("",!0)]),i(ye,{visible:t(N),"onUpdate:visible":s[5]||(s[5]=u=>X(N)?N.value=u:null),"entity-name":e.$t("labels.token"),"on-delete":()=>le(t(I))},{"entity-preview":r(()=>[a("span",null,[a("div",gt,[i(ve,{icon:"key",class:"nc-view-icon"}),a("div",ht,o(t(L)),1)])])]),_:1},8,["visible","entity-name","on-delete"])])}}}),bt={class:"flex flex-col items-center"},wt={class:"flex flex-col w-150"},$t={class:"flex font-bold text-xl","data-rec":"true"},xt={class:"mt-5 flex flex-col border-1 rounded-2xl border-gray-200 p-6 gap-y-2"},Tt={class:"flex font-medium text-base","data-rec":"true"},Ct={class:"flex text-gray-500","data-rec":"true"},Mt={class:"flex flex-row mt-4"},Nt={class:"flex h-20 mt-1.5"},Et=a("div",{class:"flex w-10"},null,-1),St={class:"text-gray-800 mb-1.5","data-rec":"true"},At={class:"text-gray-800 mb-1.5","data-rec":"true"},It={class:"flex flex-row w-full justify-end mt-8","data-rec":"true"},Ut=Q({__name:"Profile",setup(S){const{user:p}=oe(),{t:c}=te(),T=m(!1),C=m(!1),_=m({title:"",email:""}),{updateUserProfile:v}=Le(),h=m(),w={title:[{required:!0,message:c("msg.error.nameRequired")},{min:2,message:c("msg.error.nameMinLength")},{max:60,message:c("msg.error.nameMaxLength")}]},y=async()=>{var d;if(await h.value.validate()&&!C.value){C.value=!0,T.value=!1;try{await v({attrs:{display_name:(d=_.value)==null?void 0:d.title}})}catch(P){console.error(P)}finally{C.value=!1}}},g=ae(()=>{var l;return(l=p.value)==null?void 0:l.email});Me(()=>{var l;return(l=p.value)==null?void 0:l.display_name},()=>{var l;(l=p.value)!=null&&l.display_name&&(_.value.title=p.value.display_name,_.value.email=p.value.email)},{immediate:!0});const j=async(l,d)=>{T.value=!d};return(l,d)=>{var G,z;const P=je,x=ne,A=Pe,B=se,H=ze;return n(),f("div",bt,[a("div",wt,[a("div",$t,o(l.$t("labels.profile")),1),a("div",xt,[a("div",Tt,o(l.$t("labels.accountDetails")),1),a("div",Ct,o(l.$t("labels.controlAppearance")),1),a("div",Mt,[a("div",Nt,[i(P,{size:"xlarge",email:(G=t(p))==null?void 0:G.email,name:(z=t(p))==null?void 0:z.display_name},null,8,["email","name"])]),Et,i(H,{ref_key:"formValidator",ref:h,layout:"vertical","no-style":"",model:t(_),class:"flex flex-col w-full",onFinish:y,onValidate:j},{default:r(()=>{var M,N,L;return[a("div",St,o(l.$t("general.name")),1),i(A,{name:"title",rules:w.title},{default:r(()=>[i(x,{value:t(_).title,"onUpdate:value":d[0]||(d[0]=I=>t(_).title=I),class:"w-full !rounded-md !py-1.5",placeholder:l.$t("general.name"),"data-testid":"nc-account-settings-rename-input"},null,8,["value","placeholder"])]),_:1},8,["rules"]),a("div",At,o(l.$t("labels.accountEmailID")),1),i(x,{value:t(g),"onUpdate:value":d[1]||(d[1]=I=>X(g)?g.value=I:null),class:"w-full !rounded-md !py-1.5",placeholder:l.$t("labels.email"),disabled:"","data-testid":"nc-account-settings-email-input"},null,8,["value","placeholder"]),a("div",It,[i(B,{type:"primary","html-type":"submit",disabled:t(T)||((M=t(_))==null?void 0:M.title)&&((N=t(_))==null?void 0:N.title)===((L=t(p))==null?void 0:L.display_name),loading:t(C),"data-testid":"nc-account-settings-save",onClick:y},{loading:r(()=>[k(o(l.$t("general.saving")),1)]),default:r(()=>[k(" "+o(l.$t("general.save")),1)]),_:1},8,["disabled","loading"])])]}),_:1},8,["model"])])])])])}}}),Lt=Ee(()=>Se(()=>import("./DC9Lhhz2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url).then(S=>S.default||S)),Dt={},jt={class:"h-full overflow-y-auto scrollbar-thin-dull pt-2 px-5"},Pt={class:"text-xl mt-4 mb-8 text-left font-weight-bold"};function zt(S,p){const c=Lt;return n(),f("div",jt,[a("div",Pt,o(S.$t("title.appStore")),1),a("div",null,[i(c)])])}const Vt=Ne(Dt,[["render",zt]]),Rt={key:1,class:"h-[calc(100vh_-_4rem)] w-full px-6"},Bt={key:4},pa=Q({__name:"[page]",setup(S){const{appInfo:p}=oe();return(c,T)=>{const C=kt,_=De,v=Ut,h=Vt;return n(),f("div",null,[(c._.provides[F]||c.$route).params.page==="tokens"?(n(),b(C,{key:0})):(c._.provides[F]||c.$route).params.page==="audit"?(n(),f("div",Rt,[i(_)])):(c._.provides[F]||c.$route).params.page==="profile"?(n(),b(v,{key:2})):(c._.provides[F]||c.$route).params.page==="apps"&&!t(p).isCloud?(n(),b(h,{key:3})):(n(),f("span",Bt))])}}});export{pa as default};
