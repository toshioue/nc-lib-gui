const __vite__fileDeps=["./BxwqI2z6.js","./B2hUoZAs.js","./entry.B8GgT5QA.css","./BWYzyVlv.js","./CwHJfKcC.js","./BQQOEPN4.js","./C9qKCFvP.js","./BGKYJ52S.js","./i4toF4kp.js","./kd0F6MQ0.js","./cvW-uYte.js","./1orNHd0L.js","./Params.lHBqIAdp.css","./BRnPf78x.js","./DMylWvyY.js","./Coz9Ftud.js","./CaxUP45y.js","./R1pHeCcp.js","./Headers.BQs9zPQl.css","./BR7Tmhqe.js","./JjoFIP7R.js","./GHAU6jsY.js","./boyBAVNN.js","./BKeeSV8u.js","./CVC42l5u.js","./DerldqwU.js","./MenuItem.C7h59s4s.css","./DfZ7_DBQ.js","./Menu.CQ8GNWeI.css","./e4fIiYA_.js","./BeKg4PXl.js","./Select.Ct6CicDJ.css","./D-yb_G2t.js","./CGFlARNL.js","./fS-pjH0A.js","./DSjSw5ad.js","./BXXS6TCz.js","./D1iILnOh.js","./B_8aIjz8.js","./FieldListAutoCompleteDropdown.B9RfDcmT.css","./DKGZEluf.js","./CEs-fTPr.js","./B3nR1Eu5.js","./Df48od_3.js","./SingleSelect.BmeB4pF9.css","./BOjhQDxh.js","./CY5huSrU.js","./MultiSelect.u_q_s2XC.css","./BxQk1kmM.js","./xq9YlIVR.js","./CjZLV3bP.js","./DateWeekSelector.hHl2dNL4.css","./C80dkAHb.js","./DatePicker.DCSpsu3_.css","./QE4JhtMV.js","./YearPicker.CRuVqaLl.css","./BofvbJjd.js","./mojFMNDD.js","./TimePicker.BLKBFc8w.css","./o7n49Dc8.js","./Rating.tDPS6ox-.css","./D_j6pbUL.js","./C9Sjn86N.js","./Duration.Dl_1fcHT.css","./BbiCYzwg.js","./KChPo3uB.js","./Percent.Bbe9UfL3.css","./DbYhEzJg.js","./Currency.DBXjrMnJ.css","./BGeUBmxt.js","./Decimal.G35sucCw.css","./ydZR65vY.js","./Integer.CjSMiUMb.css","./Cd1RDrCc.js","./Float.BGqcJqPZ.css","./BtjDSNy_.js","./DXDQ_YQg.js","./3I_Awkws.js","./UserIcon.JKLzA6N5.css","./User.NLeV2npS.css","./Bye44sky.js","./ColumnFilter.DQRQpMYg.css","./BBaC4DYH.js","./Bqct0c8C.js","./B093it4u.js","./m0P-hxAq.js","./OX0YKNjC.js","./BAskgGqK.js","./CioeS9VM.js","./D3g8w44u.js","./fmNfCaCg.js","./CvDoTMIT.js","./DRJOl617.js","./CallLog.wBnbDdol.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{aJ as rt,r as g,u as Re,g as U,cG as Le,cH as Se,d4 as Ve,an as Q,ao as ae,A as Ee,o as r,c as k,a as l,f as We,ai as dt,ag as ut,at as ue,cB as pt,bL as ft,d0 as mt,aj as _t,X as yt,H as pe,i as vt,b as n,w as i,R as fe,P as t,aF as ht,Y as Ue,dd as bt,a7 as Ce,t as m,d as H,T as re,cR as K,cS as G,al as P,am as de,U as y,V as J,W as Z,S as b,Q as Ae,aB as kt,aq as gt,a2 as Be,ik as wt,ds as xt,dH as $t,a1 as qt,Z as X,a5 as Y,p as Oe,e as je,_ as Pe,n as Tt,bT as Mt,a_ as Ct,O as Lt,$ as St,dh as Vt}from"./B2hUoZAs.js";import{_ as zt}from"./LH0AgEEv.js";import{_ as Dt}from"./e4fIiYA_.js";import{_ as It}from"./BeKg4PXl.js";import{_ as Ut}from"./aFQEf_70.js";import{f as S}from"./CZHF7Hd-.js";import{F as He}from"./By21eAqY.js";import"./BWYzyVlv.js";import{I as Ht}from"./CwHJfKcC.js";import{C as Rt}from"./DMylWvyY.js";import{_ as Et}from"./cvW-uYte.js";import{S as Wt}from"./CaxUP45y.js";import{_ as At}from"./i4toF4kp.js";import{_ as Bt}from"./BjshTetX.js";import{_ as Ot}from"./pcWi62uI.js";import"./fKrvpb1C.js";import"./C9qKCFvP.js";import"./BGKYJ52S.js";import"./kd0F6MQ0.js";import"./BQQOEPN4.js";import"./Coz9Ftud.js";import"./1orNHd0L.js";import"./R1pHeCcp.js";import"./DFYMF386.js";const ze=rt("webhooksStore",()=>{const d=g([]),T=g(!0),{$api:x,$e:z}=Ee(),u=Re(),N=u.currentRoute,F=U(()=>B({openCreatePage:!0})),R=U(()=>B({openMainPage:!0}));async function E(){const{activeTable:e}=Se();T.value=!0;try{const _=(await x.dbTableWebhook.list(e==null?void 0:e.id)).list;d.value=_.map(f=>(f.notification=Ve(f.notification),f))}catch(_){Q.error(await ae(_))}finally{T.value=!1}}async function ne(e){const _=d.value.findIndex(f=>f.id===e);try{e&&await x.dbTableWebhook.delete(e),d.value.splice(_,1),d.value.length||(d.value=[])}catch(f){Q.error(await ae(f))}}async function W(e){try{const _=await x.dbTableWebhook.create(e.fk_model_id,{...e,title:`${e.title} - Copy`,active:!1});if(_){z("a:webhook:copy");const f=(await x.dbTableWebhookFilter.read(e.id,{})).list;for(const c of f)await x.dbTableWebhookFilter.create(_.id,{comparison_op:c.comparison_op,comparison_sub_op:c.comparison_sub_op,fk_column_id:c.fk_column_id,fk_parent_id:c.fk_parent_id,is_group:c.is_group,logical_op:c.logical_op,value:c.value});_.notification=Ve(_.notification),d.value=[_,...d.value]}}catch(_){Q.error(await ae(_))}}async function A({hook:e}){const{activeTable:_}=Se();if(!_)throw new Error("activeTable is not defined");typeof e.notification=="string"&&(e.notification=JSON.parse(e.notification));let f=e;try{let c;f.id?c=await x.dbTableWebhook.update(f.id,{...f,notification:{...f.notification,payload:f.notification.payload}}):(c=await x.dbTableWebhook.create(_.id,{...f,notification:{...f.notification,payload:f.notification.payload}}),d.value.push(c)),c&&typeof c.notification=="string"&&(c.notification=JSON.parse(c.notification)),!f.id&&c&&(f={...f,...c}),d.value=d.value.map(q=>q.id===f.id?f:q)}catch(c){throw Q.error(await ae(c)),console.error(c),c}return z("a:webhook:add",{operation:f.operation,condition:f.condition,notification:f.notification.type}),f}function B({hookId:e,openCreatePage:_,openMainPage:f}){const{activeView:c}=Le();if(!c)throw new Error("activeView is not defined");if(!f&&!_&&!e)throw new Error("hook id is not defined");return{name:"index-typeOrId-baseId-index-index-viewId-viewTitle-slugs",params:{typeOrId:N.value.params.typeOrId,baseId:N.value.params.baseId,viewId:N.value.params.viewId,viewTitle:c.id,slugs:f?["webhook"]:["webhook",_?"create":e]}}}return{hooks:d,loadHooksList:E,deleteHook:ne,copyHook:W,saveHooks:A,navigateToWebhook:async({hookId:e,openCreatePage:_,openMainPage:f})=>{const{activeView:c}=Le();c&&await u.push(B({hookId:e,openCreatePage:_,openMainPage:f}))},createWebhookUrl:F,webhookMainUrl:R,isHooksLoading:T,navigateToWebhookRoute:B}}),jt={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Pt=l("path",{fill:"currentColor",d:"M11 17V7H4v10zm0-14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm5.5 0h5A1.5 1.5 0 0 1 23 4.5v3A1.5 1.5 0 0 1 21.5 9H18l-3 3V4.5A1.5 1.5 0 0 1 16.5 3"},null,-1),Nt=[Pt];function Ft(d,T){return r(),k("svg",jt,[...Nt])}const Kt={name:"mdi-cellphone-message",render:Ft},Gt={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Jt=l("path",{fill:"currentColor",d:"M12.04 2c-5.46 0-9.91 4.45-9.91 9.91c0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21c5.46 0 9.91-4.45 9.91-9.91c0-2.65-1.03-5.14-2.9-7.01A9.82 9.82 0 0 0 12.04 2m.01 1.67c2.2 0 4.26.86 5.82 2.42a8.23 8.23 0 0 1 2.41 5.83c0 4.54-3.7 8.23-8.24 8.23c-1.48 0-2.93-.39-4.19-1.15l-.3-.17l-3.12.82l.83-3.04l-.2-.32a8.2 8.2 0 0 1-1.26-4.38c.01-4.54 3.7-8.24 8.25-8.24M8.53 7.33c-.16 0-.43.06-.66.31c-.22.25-.87.86-.87 2.07c0 1.22.89 2.39 1 2.56c.14.17 1.76 2.67 4.25 3.73c.59.27 1.05.42 1.41.53c.59.19 1.13.16 1.56.1c.48-.07 1.46-.6 1.67-1.18s.21-1.07.15-1.18c-.07-.1-.23-.16-.48-.27c-.25-.14-1.47-.74-1.69-.82c-.23-.08-.37-.12-.56.12c-.16.25-.64.81-.78.97c-.15.17-.29.19-.53.07c-.26-.13-1.06-.39-2-1.23c-.74-.66-1.23-1.47-1.38-1.72c-.12-.24-.01-.39.11-.5c.11-.11.27-.29.37-.44c.13-.14.17-.25.25-.41c.08-.17.04-.31-.02-.43c-.06-.11-.56-1.35-.77-1.84c-.2-.48-.4-.42-.56-.43c-.14 0-.3-.01-.47-.01"},null,-1),Zt=[Jt];function Qt(d,T){return r(),k("svg",Gt,[...Zt])}const Xt={name:"mdi-whatsapp",render:Qt},Yt={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},eo=l("path",{fill:"currentColor",d:"M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8"},null,-1),to=[eo];function oo(d,T){return r(),k("svg",Yt,[...to])}const ao={name:"mdi-chat",render:oo},no={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},lo=l("path",{fill:"currentColor",d:"m22 24l-5.25-5l.63 2H4.5A2.5 2.5 0 0 1 2 18.5v-15A2.5 2.5 0 0 1 4.5 1h15A2.5 2.5 0 0 1 22 3.5V24M12 6.8c-2.68 0-4.56 1.15-4.56 1.15c1.03-.92 2.83-1.45 2.83-1.45l-.17-.17c-1.69.03-3.22 1.2-3.22 1.2c-1.72 3.59-1.61 6.69-1.61 6.69c1.4 1.81 3.48 1.68 3.48 1.68l.71-.9c-1.25-.27-2.04-1.38-2.04-1.38S9.3 14.9 12 14.9s4.58-1.28 4.58-1.28s-.79 1.11-2.04 1.38l.71.9s2.08.13 3.48-1.68c0 0 .11-3.1-1.61-6.69c0 0-1.53-1.17-3.22-1.2l-.17.17s1.8.53 2.83 1.45c0 0-1.88-1.15-4.56-1.15m-2.07 3.79c.65 0 1.18.57 1.17 1.27c0 .69-.52 1.27-1.17 1.27c-.64 0-1.16-.58-1.16-1.27c0-.7.51-1.27 1.16-1.27m4.17 0c.65 0 1.17.57 1.17 1.27c0 .69-.52 1.27-1.17 1.27c-.64 0-1.16-.58-1.16-1.27c0-.7.51-1.27 1.16-1.27Z"},null,-1),io=[lo];function so(d,T){return r(),k("svg",no,[...io])}const co={name:"mdi-discord",render:so},ro={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},uo=l("path",{fill:"currentColor",d:"M19.19 8.77q-.46 0-.86-.17q-.39-.17-.69-.47t-.47-.69q-.17-.4-.17-.86q0-.45.17-.85t.47-.69q.3-.3.69-.47q.4-.18.86-.17q.45-.01.85.17q.4.17.7.47q.29.29.47.69q.17.4.17.85q0 .46-.17.86q-.17.39-.47.69t-.7.47t-.85.17m0-3.12q-.39 0-.69.27q-.25.27-.25.66t.25.67q.3.25.69.25t.66-.25q.28-.25.28-.67q0-.39-.28-.66q-.27-.27-.66-.27M22 10.33V15q0 .63-.24 1.2q-.26.57-.67.99q-.43.43-1 .67q-.59.25-1.21.25q-.38 0-.76-.11q-.39-.07-.71-.25q-.24.79-.71 1.44t-1.1 1.11t-1.39.7q-.76.27-1.58.27q-.96 0-1.81-.33q-.82-.33-1.5-.94q-.66-.57-1.09-1.36q-.44-.8-.57-1.74H2.83q-.33 0-.59-.25q-.24-.24-.24-.58V7.73q0-.34.24-.59q.26-.24.59-.24H10q-.29-.6-.29-1.25q0-.61.23-1.15q.22-.5.62-.92q.4-.39.94-.62q.5-.23 1.12-.23q.61 0 1.14.23t.93.62q.4.42.62.92q.23.54.23 1.15q0 .6-.23 1.14q-.22.53-.62.92q-.4.4-.93.63t-1.14.23q-.15 0-.31-.02q-.15-.02-.31-.05v.9h9.06q.39 0 .67.27q.27.27.27.66M12.63 4q-.35 0-.63.11q-.33.13-.56.36q-.22.23-.35.53q-.13.31-.13.65q0 .35.13.65t.35.53q.23.22.56.36q.28.13.63.13q.34 0 .64-.13q.3-.14.53-.36q.23-.23.36-.53q.14-.3.14-.65q0-.34-.14-.65q-.13-.3-.36-.53t-.53-.36q-.3-.11-.64-.11m-4.85 6.18h1.88V8.62H4.34v1.56h1.88v5h1.56m8.6 1.09v-5.62H12v5.42q0 .34-.24.58q-.26.25-.59.25H8.92q.13.67.47 1.25q.34.57.82.99q.48.41 1.1.65q.61.21 1.32.21q.77 0 1.45-.27q.68-.3 1.2-.81q.51-.51.8-1.19q.3-.68.3-1.46M20.75 15v-4.35h-3.12v5.71q.25.25.57.38q.3.12.68.12q.39 0 .73-.15t.59-.4q.26-.25.4-.6q.15-.34.15-.71"},null,-1),po=[uo];function fo(d,T){return r(),k("svg",ro,[...po])}const mo={name:"mdi-microsoft-teams",render:fo},_o={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},yo=l("path",{fill:"currentColor",d:"M6 15a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2h2zm1 0a2 2 0 0 1 2-2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2a2 2 0 0 1-2-2zm2-8a2 2 0 0 1-2-2a2 2 0 0 1 2-2a2 2 0 0 1 2 2v2zm0 1a2 2 0 0 1 2 2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2a2 2 0 0 1 2-2zm8 2a2 2 0 0 1 2-2a2 2 0 0 1 2 2a2 2 0 0 1-2 2h-2zm-1 0a2 2 0 0 1-2 2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2a2 2 0 0 1 2 2zm-2 8a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2v-2zm0-1a2 2 0 0 1-2-2a2 2 0 0 1 2-2h5a2 2 0 0 1 2 2a2 2 0 0 1-2 2z"},null,-1),vo=[yo];function ho(d,T){return r(),k("svg",_o,[...vo])}const bo={name:"mdi-slack",render:ho},ko=X(()=>Y(()=>import("./BxwqI2z6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url).then(d=>d.default||d)),go=X(()=>Y(()=>import("./BRnPf78x.js"),__vite__mapDeps([13,1,2,14,15,6,16,11,5,17,7,3,4,8,9,10,18]),import.meta.url).then(d=>d.default||d)),wo=X(()=>Y(()=>import("./BR7Tmhqe.js"),__vite__mapDeps([19,20,1,2,21,22]),import.meta.url).then(d=>d.default||d)),xo=X(()=>Y(()=>import("./BKeeSV8u.js"),__vite__mapDeps([23,1,2,16,11,5,17,7,6]),import.meta.url).then(d=>d.default||d)),$o=X(()=>Y(()=>import("./CVC42l5u.js").then(d=>d.C),__vite__mapDeps([24,1,2,25,26,27,28,29,30,16,11,5,17,7,6,31,32,33,34,35,36,37,38,39,40,41,42,43,15,44,45,46,14,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81]),import.meta.url).then(d=>d.default||d)),qo=X(()=>Y(()=>import("./BBaC4DYH.js"),__vite__mapDeps([82,1,2]),import.meta.url).then(d=>d.default||d)),To=X(()=>Y(()=>import("./Bqct0c8C.js"),__vite__mapDeps([83,1,2,84,85,86,87,88,89,90,91,16,11,5,17,7,6,92,93]),import.meta.url).then(d=>d.default||d)),De=d=>(Oe("data-v-c0fb2ad0"),d=d(),je(),d),Mo={class:"flex nc-webhook-header pb-3 gap-x-2 items-start"},Co={class:"flex flex-1"},Lo={class:"flex flex-grow px-1.5 py-0.125 items-center rounded-md border-gray-200 bg-gray-50 outline-gray-200",style:{"outline-style":"solid","outline-width":"thin"}},So=["placeholder"],Vo={class:"flex flex-row gap-2"},zo={class:"flex items-center px-1"},Do={class:"flex items-center px-1"},Io={class:"flex flex-row"},Uo={class:"form-field-header"},Ho={class:"flex items-center gap-2 justify-between"},Ro={class:"flex items-center gap-2"},Eo={class:"flex-1"},Wo=De(()=>l("div",null,"Action",-1)),Ao={class:"flex items-center gap-2 justify-between"},Bo=De(()=>l("div",null,"Link",-1)),Oo={class:"rounded-lg border-1 p-6"},jo={key:0,class:"text-gray-600"},Po={class:"flex items-center"},No=De(()=>l("br",null,null,-1)),Fo={class:"my-3"},Ko={href:"https://docs.nocodb.com/automation/webhook/create-webhook/#webhook-with-custom-payload-",target:"_blank",rel:"noopener"},Go={key:0,class:"nc-webhook-calllog flex w-1/2"},Jo=We({__name:"Editor",props:{hook:{}},emits:["close","delete"],setup(d,{emit:T}){const x=d,z=T,{t:u}=dt(),{$e:N}=Ee(),{api:F,isLoading:R}=ut(),{hooks:E}=ue(ze()),{base:ne}=ue(pt()),W=ft(mt,g()),A=g(),B=He.useForm,ee=u("labels.webhook");let e=_t({id:"",title:ee,event:void 0,operation:void 0,eventOperation:void 0,notification:{type:"URL",payload:{method:"POST",body:"{{ json event }}",headers:[{}],parameters:[{}],path:""}},condition:!1,active:!0,version:"v2"});const _=g(e.version==="v1"||yt),f=g("params"),c=g(),q=g(),M=g([]),te=g([]),O=g([]),C=g([]),le=g(),me=g({Email:[{key:"to",label:u("labels.toAddress"),placeholder:u("labels.toAddress"),type:"SingleLineText",required:!0},{key:"subject",label:u("labels.subject"),placeholder:u("labels.subject"),type:"SingleLineText",required:!0},{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Slack:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],"Microsoft Teams":[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Discord:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Mattermost:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Twilio:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0},{key:"to",label:u("labels.commaSeparatedMobileNumber"),placeholder:u("labels.commaSeparatedMobileNumber"),type:"LongText",required:!0}],"Whatsapp Twilio":[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0},{key:"to",label:u("labels.commaSeparatedMobileNumber"),placeholder:u("labels.commaSeparatedMobileNumber"),type:"LongText",required:!0}]}),_e=g(!1),ie=U(()=>!1),ye=g([{text:[u("general.after"),u("general.insert")],value:["after","insert"]},{text:[u("general.after"),u("general.update")],value:["after","update"]},{text:[u("general.after"),u("general.delete")],value:["after","delete"]},{text:[u("general.after"),u("general.bulkInsert")],value:["after","bulkInsert"]},{text:[u("general.after"),u("general.bulkUpdate")],value:["after","bulkUpdate"]},{text:[u("general.after"),u("general.bulkDelete")],value:["after","bulkDelete"]}]),ve=U(()=>[{type:"URL",text:u("datatype.URL")},{type:"Email",text:u("datatype.Email")},{type:"Slack",text:u("general.slack")},{type:"Microsoft Teams",text:u("general.microsoftTeams")},{type:"Discord",text:u("general.discord")},{type:"Mattermost",text:u("general.matterMost")},{type:"Twilio",text:u("general.twilio")},{type:"Whatsapp Twilio",text:u("general.whatsappTwilio")}]),ge=[{title:"GET"},{title:"POST"},{title:"DELETE"},{title:"PUT"},{title:"HEAD"},{title:"PATCH"}],p=U(()=>({title:[S()],eventOperation:[S()],"notification.type":[S()],...e.notification.type==="URL"&&{"notification.payload.method":[S()],"notification.payload.path":[S()]},...e.notification.type==="Email"&&{"notification.payload.to":[S()],"notification.payload.subject":[S()],"notification.payload.body":[S()]},...["Slack","Microsoft Teams","Discord","Mattermost"].includes(e.notification.type)&&{"notification.payload.channels":[S()],"notification.payload.body":[S()]},...(e.notification.type==="Twilio"||e.notification.type==="Whatsapp Twilio")&&{"notification.payload.body":[S()],"notification.payload.to":[S()]}})),{validate:$,validateInfos:w}=B(e,p),j=U(()=>{const s=o=>{for(const v in o)if(typeof o[v]=="object"){if(!s(o[v]))return!1}else if(o&&v==="validateStatus"&&o[v]==="error")return!1;return!0};return e&&s(w)});function he(s=!1){if(s&&(e.notification.payload={},["Slack","Microsoft Teams","Discord","Mattermost"].includes(e.notification.type)&&(e.notification.payload.channels=[],e.notification.payload.body="")),e.notification.type==="Slack"&&(M.value=c.value&&c.value.Slack&&c.value.Slack.parsedInput||[]),e.notification.type==="Microsoft Teams"&&(te.value=c.value&&c.value["Microsoft Teams"]&&c.value["Microsoft Teams"].parsedInput||[]),e.notification.type==="Discord"&&(O.value=c.value&&c.value.Discord&&c.value.Discord.parsedInput||[]),e.notification.type==="Mattermost"&&(C.value=c.value&&c.value.Mattermost&&c.value.Mattermost.parsedInput||[]),e.notification.type==="URL"){const o=e.notification.payload.body;e.notification.payload.body=o?o==="{{ json data }}"?"{{ json event }}":o:"{{ json event }}",e.notification.payload.parameters=e.notification.payload.parameters||[{}],e.notification.payload.headers=e.notification.payload.headers||[{}],e.notification.payload.method=e.notification.payload.method||"POST",e.notification.payload.auth=e.notification.payload.auth||""}}function we(s){const o=s.notification;Object.assign(e,{...s,notification:{...o,payload:o.payload}})}function xe(){const{notification:{payload:s={},type:o={}}={}}=e;Object.assign(e,{...e,notification:{type:o,payload:s}}),e.notification.payload=s;const v=g(null);switch(e.notification.type){case"Slack":v.value=M.value;break;case"Microsoft Teams":v.value=te.value;break;case"Discord":v.value=O.value;break;case"Mattermost":v.value=C.value;break}v&&(e.notification.payload.webhook_url=e.notification.payload.webhook_url&&e.notification.payload.webhook_url.map(D=>{var oe;return(oe=v.value)==null?void 0:oe.find(ce=>D.webhook_url===ce.webhook_url)})),e.notification.type==="URL"&&(e.notification.payload=e.notification.payload||{},e.notification.payload.parameters=e.notification.payload.parameters||[{}],e.notification.payload.headers=e.notification.payload.headers||[{}],e.notification.payload.method=e.notification.payload.method||"POST")}async function $e(){try{const s=(await F.plugin.webhookList({query:{base_id:ne.value.id}})).list;c.value=s.reduce((o,v)=>{const D={title:"",tags:[],parsedInput:{},...v};return D.tags=v.tags?v.tags.split(","):[],D.parsedInput=Ve(v.input),o[D.title]=D,o},{})}catch(s){Q.error(await ae(s))}}const be=U(()=>e.eventOperation&&!e.eventOperation.includes("bulk"));async function qe(){R.value=!0;try{await $()}catch{Q.error(u("msg.error.invalidForm")),R.value=!1;return}try{let s;e.id?s=await F.dbTableWebhook.update(e.id,{...e,notification:{...e.notification,payload:e.notification.payload}}):(s=await F.dbTableWebhook.create(W.value.id,{...e,notification:{...e.notification,payload:e.notification.payload}}),E.value.push(s)),s&&typeof s.notification=="string"&&(s.notification=JSON.parse(s.notification)),!e.id&&s&&(e={...e,...s}),le.value&&await le.value.applyChanges(e.id,!1,be.value),E.value=E.value.map(o=>o.id===e.id?e:o),z("close")}catch(s){Q.error(await ae(s))}finally{R.value=!1}N("a:webhook:add",{operation:e.operation,condition:e.condition,notification:e.notification.type})}async function se(){await q.value.testWebhook()}const h=s=>gt([...s.map(o=>(o==null?void 0:o.title)||"")],ee);return pe(()=>e.eventOperation,()=>{if(!e.eventOperation)return;const[s,o]=e.eventOperation.split(" ");e.event=s,e.operation=o}),pe(()=>x.hook,()=>{x.hook?(we(x.hook),xe()):e.title=h(E.value)},{immediate:!0}),vt(async()=>{await $e(),e.event&&e.operation?e.eventOperation=`${e.event} ${e.operation}`:e.eventOperation=ye.value[0].value.join(" "),he(),setTimeout(()=>{var s,o;e.id===""&&((s=A.value)==null||s.click(),(o=A.value)==null||o.select())},50)}),(s,o)=>{const v=Et,D=Be,oe=Wt,ce=It,L=wt,Fe=bo,Ke=mo,Ge=co,Je=ao,Ze=Xt,Qe=Kt,I=xt,Ie=Ht,Xe=ko,Te=$t,Ye=go,et=wo,tt=Ut,ke=xo,ot=At,at=Rt,nt=$o,lt=qt,it=qo,st=He,ct=To;return r(),k(P,null,[l("div",Mo,[l("div",Co,[n(v,Ce(t(w).title,{class:"flex flex-grow"}),{default:i(()=>[l("div",Lo,[fe(l("input",{ref_key:"titleDomRef",ref:A,"onUpdate:modelValue":o[0]||(o[0]=a=>t(e).title=a),class:"flex flex-grow text-lg font-medium capitalize outline-none bg-inherit nc-text-field-hook-title",placeholder:s.$t("placeholder.webhookTitle"),contenteditable:!0,onBlur:o[1]||(o[1]=a=>_e.value=!1),onFocus:o[2]||(o[2]=a=>_e.value=!0),onKeydown:o[3]||(o[3]=ht(Ue(a=>{var V;return(V=t(A))==null?void 0:V.blur()},["prevent"]),["enter"]))},null,40,So),[[bt,t(e).title]])])]),_:1},16)]),l("div",Vo,[n(D,{class:"nc-btn-webhook-test",type:"secondary",size:"small",onClick:se},{default:i(()=>[l("div",zo,m(s.$t("activity.testWebhook")),1)]),_:1}),n(D,{class:"nc-btn-webhook-save",type:"primary",loading:t(R),size:"small",disabled:!t(j),onClick:Ue(qe,["prevent"])},{loading:i(()=>[H(m(s.$t("general.saving")),1)]),default:i(()=>[l("div",Do,m(s.$t("general.save")),1)]),_:1},8,["loading","disabled"])])]),l("div",Io,[l("div",{class:re(["nc-webhook-form flex flex-col",{"w-1/2":t(ie),"w-full":!t(ie)}])},[n(st,{model:t(e),name:"create-or-edit-webhook"},{default:i(()=>[n(v,null,{default:i(()=>[l("div",Uo,m(s.$t("general.event")),1),n(I,{type:"flex",gutter:[16,16]},{default:i(()=>[n(L,{span:12},{default:i(()=>[n(v,K(G(t(w).eventOperation)),{default:i(()=>[n(ce,{value:t(e).eventOperation,"onUpdate:value":o[4]||(o[4]=a=>t(e).eventOperation=a),size:"large",placeholder:s.$t("general.event"),class:"nc-text-field-hook-event capitalize","dropdown-class-name":"nc-dropdown-webhook-event"},{default:i(()=>[(r(!0),k(P,null,de(t(ye),(a,V)=>(r(),y(oe,{key:V,class:"capitalize",value:a.value.join(" "),disabled:t(e).version==="v1"&&["bulkInsert","bulkUpdate","bulkDelete"].includes(a.value[1])},{default:i(()=>[l("div",Ho,[l("div",null,m(a.text.join(" ")),1),t(e).eventOperation===a.value.join(" ")?(r(),y(J(t(Z).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):b("",!0)])]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["value","placeholder"])]),_:1},16)]),_:1}),n(L,{span:12},{default:i(()=>[n(v,K(G(t(w)["notification.type"])),{default:i(()=>[n(ce,{value:t(e).notification.type,"onUpdate:value":o[5]||(o[5]=a=>t(e).notification.type=a),size:"large",class:"nc-select-hook-notification-type",placeholder:s.$t("general.notification"),"dropdown-class-name":"nc-dropdown-webhook-notification",onChange:o[6]||(o[6]=a=>he(!0))},{default:i(()=>[(r(!0),k(P,null,de(t(ve),(a,V)=>(r(),y(oe,{key:V,value:a.type},{default:i(()=>[l("div",Ro,[a.type==="URL"?(r(),y(J(t(Z).link),{key:0,class:"mr-2"})):b("",!0),a.type==="Email"?(r(),y(J(t(Z).email),{key:1,class:"mr-2"})):b("",!0),a.type==="Slack"?(r(),y(Fe,{key:2,class:"mr-2"})):b("",!0),a.type==="Microsoft Teams"?(r(),y(Ke,{key:3,class:"mr-2"})):b("",!0),a.type==="Discord"?(r(),y(Ge,{key:4,class:"mr-2"})):b("",!0),a.type==="Mattermost"?(r(),y(Je,{key:5,class:"mr-2"})):b("",!0),a.type==="Whatsapp Twilio"?(r(),y(Ze,{key:6,class:"mr-2"})):b("",!0),a.type==="Twilio"?(r(),y(Qe,{key:7,class:"mr-2"})):b("",!0),l("div",Eo,m(a.text),1),t(e).notification.type===a.type?(r(),y(J(t(Z).check),{key:8,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):b("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},16)]),_:1})]),_:1}),t(e).notification.type==="URL"?(r(),y(I,{key:0,class:"mb-5",type:"flex",gutter:[16,0]},{default:i(()=>[n(L,{span:6},{default:i(()=>[Wo,n(ce,{value:t(e).notification.payload.method,"onUpdate:value":o[7]||(o[7]=a=>t(e).notification.payload.method=a),size:"large",class:"nc-select-hook-url-method","dropdown-class-name":"nc-dropdown-hook-notification-url-method"},{default:i(()=>[(r(),k(P,null,de(ge,(a,V)=>n(oe,{key:V,value:a.title},{default:i(()=>[l("div",Ao,[l("div",null,m(a.title),1),t(e).notification.payload.method===a.title?(r(),y(J(t(Z).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):b("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),n(L,{span:18},{default:i(()=>[Bo,n(v,K(G(t(w)["notification.payload.path"])),{default:i(()=>[n(Ie,{value:t(e).notification.payload.path,"onUpdate:value":o[8]||(o[8]=a=>t(e).notification.payload.path=a),size:"large",placeholder:"http://example.com",class:"nc-text-field-hook-url-path !rounded-md"},null,8,["value"])]),_:1},16)]),_:1}),n(L,{span:24},{default:i(()=>[n(tt,{activeKey:t(f),"onUpdate:activeKey":o[12]||(o[12]=a=>Ae(f)?f.value=a:null),type:"card",closeable:"false",class:"border-1 !pb-2 !rounded-lg"},{default:i(()=>[n(Te,{key:"params",tab:s.$t("title.parameter"),"force-render":""},{default:i(()=>[n(Xe,{modelValue:t(e).notification.payload.parameters,"onUpdate:modelValue":o[9]||(o[9]=a=>t(e).notification.payload.parameters=a),class:"p-4"},null,8,["modelValue"])]),_:1},8,["tab"]),n(Te,{key:"headers",tab:s.$t("title.headers"),class:"nc-tab-headers"},{default:i(()=>[n(Ye,{modelValue:t(e).notification.payload.headers,"onUpdate:modelValue":o[10]||(o[10]=a=>t(e).notification.payload.headers=a),class:"!p-4"},null,8,["modelValue"])]),_:1},8,["tab"]),t(_)?(r(),y(Te,{key:"body",tab:"Body"},{default:i(()=>[n(et,{modelValue:t(e).notification.payload.body,"onUpdate:modelValue":o[11]||(o[11]=a=>t(e).notification.payload.body=a),"disable-deep-compare":"",validate:!1,class:"min-h-60 max-h-80"},null,8,["modelValue"])]),_:1})):b("",!0)]),_:1},8,["activeKey"])]),_:1})]),_:1})):b("",!0),t(e).notification.type==="Slack"?(r(),y(I,{key:1,type:"flex"},{default:i(()=>[n(L,{span:24},{default:i(()=>[n(v,K(G(t(w)["notification.payload.channels"])),{default:i(()=>[n(ke,{modelValue:t(e).notification.payload.channels,"onUpdate:modelValue":o[13]||(o[13]=a=>t(e).notification.payload.channels=a),"selected-channel-list":t(e).notification.payload.channels,"available-channel-list":t(M),placeholder:s.$t("placeholder.selectSlackChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)]),_:1})]),_:1})):b("",!0),t(e).notification.type==="Microsoft Teams"?(r(),y(I,{key:2,type:"flex"},{default:i(()=>[n(L,{span:24},{default:i(()=>[n(v,K(G(t(w)["notification.payload.channels"])),{default:i(()=>[n(ke,{modelValue:t(e).notification.payload.channels,"onUpdate:modelValue":o[14]||(o[14]=a=>t(e).notification.payload.channels=a),"selected-channel-list":t(e).notification.payload.channels,"available-channel-list":t(te),placeholder:s.$t("placeholder.selectTeamsChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)]),_:1})]),_:1})):b("",!0),t(e).notification.type==="Discord"?(r(),y(I,{key:3,type:"flex"},{default:i(()=>[n(L,{span:24},{default:i(()=>[n(v,K(G(t(w)["notification.payload.channels"])),{default:i(()=>[n(ke,{modelValue:t(e).notification.payload.channels,"onUpdate:modelValue":o[15]||(o[15]=a=>t(e).notification.payload.channels=a),"selected-channel-list":t(e).notification.payload.channels,"available-channel-list":t(O),placeholder:s.$t("placeholder.selectDiscordChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)]),_:1})]),_:1})):b("",!0),t(e).notification.type==="Mattermost"?(r(),y(I,{key:4,type:"flex"},{default:i(()=>[n(L,{span:24},{default:i(()=>[n(v,K(G(t(w)["notification.payload.channels"])),{default:i(()=>[n(ke,{modelValue:t(e).notification.payload.channels,"onUpdate:modelValue":o[16]||(o[16]=a=>t(e).notification.payload.channels=a),"selected-channel-list":t(e).notification.payload.channels,"available-channel-list":t(C),placeholder:s.$t("placeholder.selectMattermostChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)]),_:1})]),_:1})):b("",!0),t(me)[t(e).notification.type]&&t(e).notification.payload?(r(),y(I,{key:5,type:"flex"},{default:i(()=>[(r(!0),k(P,null,de(t(me)[t(e).notification.type],(a,V)=>(r(),y(L,{key:V,span:24},{default:i(()=>[a.type==="LongText"?(r(),y(v,Ce({key:0,ref_for:!0},t(w)[`notification.payload.${a.key}`]),{default:i(()=>[n(ot,{value:t(e).notification.payload[a.key],"onUpdate:value":Me=>t(e).notification.payload[a.key]=Me,placeholder:a.label,size:"large"},null,8,["value","onUpdate:value","placeholder"])]),_:2},1040)):(r(),y(v,Ce({key:1,ref_for:!0},t(w)[`notification.payload.${a.key}`]),{default:i(()=>[n(Ie,{value:t(e).notification.payload[a.key],"onUpdate:value":Me=>t(e).notification.payload[a.key]=Me,placeholder:a.label,size:"large"},null,8,["value","onUpdate:value","placeholder"])]),_:2},1040))]),_:2},1024))),128))]),_:1})):b("",!0),fe(n(I,{class:"mb-5",type:"flex"},{default:i(()=>[n(L,{span:24},{default:i(()=>[l("div",Oo,[n(at,{checked:!!t(e).condition,class:"nc-check-box-hook-condition","onUpdate:checked":o[17]||(o[17]=a=>t(e).condition=a)},{default:i(()=>[H(m(s.$t("activity.onCondition")),1)]),_:1},8,["checked"]),t(e).condition?(r(),y(nt,{key:0,ref_key:"filterRef",ref:le,class:"!p-0 mt-4","auto-save":!1,"show-loading":!1,"hook-id":t(e).id,"web-hook":!0,"onUpdate:filtersLength":o[18]||(o[18]=a=>t(e).condition=a>0)},null,8,["hook-id"])):b("",!0)])]),_:1})]),_:1},512),[[kt,t(be)]]),n(I,null,{default:i(()=>[n(L,{span:24},{default:i(()=>[t(_)?(r(),k("div",jo,[l("div",Po,[l("em",null,[H(m(s.$t("msg.webhookBodyMsg1"))+" ",1),l("strong",null,m(s.$t("msg.webhookBodyMsg2")),1),H(" "+m(s.$t("msg.webhookBodyMsg3")),1)]),n(lt,{bottom:""},{title:i(()=>[l("span",null,[l("strong",null,m(s.$t("general.data")),1),H(" : "+m(s.$t("title.rowData"))+" ",1),No])]),default:i(()=>[(r(),y(J(t(Z).info),{class:"ml-2"}))]),_:1})]),l("div",Fo,[l("a",Ko,m(s.$t("labels.docReference")),1)])])):b("",!0),n(it,{ref_key:"webhookTestRef",ref:q,hook:{...t(e),notification:{...t(e).notification,payload:t(e).notification.payload}}},null,8,["hook"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])],2),t(ie)?(r(),k("div",Go,[n(ct,{hook:t(e)},null,8,["hook"])])):b("",!0)])],64)}}}),Zo=Pe(Jo,[["__scopeId","data-v-c0fb2ad0"]]),Qo=""+new URL("webhooks.MDbFG3zt.png",import.meta.url).href,Ne=d=>(Oe("data-v-f9b574ea"),d=d(),je(),d),Xo={class:"flex flex-row items-center gap-x-1"},Yo={class:"flex flex-row ml-2"},ea=Ne(()=>l("div",{class:"flex text-gray-400"},"/",-1)),ta={class:"flex link"},oa={class:"flex flex-row items-center justify-between w-full text-brand-500"},aa={class:"ml-1"},na={key:0,class:"flex flex-col h-full w-full items-center"},la={key:0,class:"flex flex-col px-1.5 py-2.5 ml-1 h-full items-center gap-y-6 text-center"},ia=Ne(()=>l("img",{src:Qo,class:"!w-[24rem] flex-none"},null,-1)),sa={class:"text-gray-700 font-bold text-2xl"},ca={class:"text-gray-700 max-w-[24rem]"},ra={class:"flex flex-row items-center justify-between w-full"},da={class:"ml-1"},ua={key:1,class:"flex flex-col pb-2 mt-3 mb-2.5 w-full max-w-200"},pa={class:"flex flex-row nc-view-sidebar-webhook-header pl-3 pr-2 !py-2.5"},fa={class:"nc-view-sidebar-webhook-item-toggle header"},ma={class:"nc-view-sidebar-webhook-item-title header"},_a={class:"nc-view-sidebar-webhook-item-event header"},ya={class:"nc-view-sidebar-webhook-item-action header"},va={class:"nc-view-sidebar-webhook-item-toggle"},ha=["onClick"],ba={class:"text-inherit group-hover:text-black capitalize"},ka={class:"nc-view-sidebar-webhook-item-event capitalize"},ga={class:"nc-view-sidebar-webhook-item-action !"},wa={class:"flex flex-col p-1.5 items-start"},xa={class:"flex items-center gap-x-1"},$a={class:"flex items-center justify-start gap-x-1 !text-red-500"},qa={key:1,class:"flex w-full pr-4 justify-center"},Ta={class:"flex flex-col mt-4 p-8 mb-4 border-1 rounded-2xl w-full max-w-200",style:{height:"fit-content"}},Ma={key:1,class:"h-full w-full flex flex-col justify-center items-center",style:{height:"calc(100vh - (var(--topbar-height) * 2))"}},Ca={key:0,class:"flex flex-row items-center py-2 px-3 bg-gray-50 rounded-lg text-gray-700 mb-4"},La={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-2.5",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},Sa=We({__name:"Webhooks",setup(d){const x=Re().currentRoute,{hooks:z,webhookMainUrl:u,isHooksLoading:N}=ue(ze()),{loadHooksList:F,deleteHook:R,copyHook:E,saveHooks:ne,navigateToWebhook:W}=ze(),{activeView:A}=ue(Le()),B=g(null),{activeTable:ee}=ue(Se()),e=Tt(Mt,{style:{fontSize:"2.5rem"},spin:!0}),_=g(""),f=U(()=>z.value.find(p=>p.id===_.value)),c=g(void 0),q=U(()=>{if(c.value)return z.value.find(p=>p.id===c.value)}),M=g(!1),te=g(!1),O=g(!1),C=g(!1),le=async p=>{if(!O.value){O.value=!0;try{await E(p)}finally{O.value=!1}}},me=p=>{_.value=p,M.value=!0},_e=async()=>{if(te.value=!0,!!_.value)try{await R(_.value)}finally{te.value=!1,M.value=!1,_.value=""}},ie=p=>{W({hookId:p})};pe(M,()=>{M.value&&Ct(()=>{var p,$;($=(p=B.value)==null?void 0:p.$el)==null||$.focus()})}),pe(()=>{var p;return(p=ee.value)==null?void 0:p.id},async()=>{var p;(p=ee.value)!=null&&p.id&&(c.value=void 0,await F())},{immediate:!0});const ye=async p=>{p.active=!p.active,await ne({hook:p})},ve=async()=>{W({openCreatePage:!0})},ge=()=>{W({openMainPage:!0})};return pe(()=>x.value.params.slugs,async()=>{if(!x.value.params.slugs){C.value=!1,c.value=void 0;return}x.value.params.slugs[1]==="create"?C.value=!0:C.value=!1,c.value=x.value.params.slugs&&x.value.params.slugs[1]||void 0},{immediate:!0}),(p,$)=>{const w=St,j=Be,he=zt,we=Ot,xe=Dt,$e=Zo,be=Vt,qe=Bt,se=Lt("e");return r(),k(P,null,[t(A)&&!t(N)?(r(),k("div",{key:t(c),class:"flex flex-col pt-3 pb-12 border-gray-50 pl-3 pr-0 nc-view-sidebar-webhook nc-scrollbar-md",style:{height:"calc(100vh - (var(--topbar-height) * 2))"}},[l("div",{class:re(["flex flex-row justify-between w-full min-h-8 mb-8",{"!items-start mt-1":!t(c)&&!t(C)}])},[l("div",Xo,[t(C)||t(c)?(r(),y(j,{key:0,type:"text",size:"xsmall",onClick:$[0]||($[0]=h=>t(W)({openMainPage:!0}))},{default:i(()=>[n(w,{icon:"arrowLeft"})]),_:1})):b("",!0),l("div",Yo,[n(he,{class:"link",to:t(u)},{default:i(()=>[H(m(p.$t("objects.webhooks")),1)]),_:1},8,["to"])]),t(q)||t(C)?(r(),k(P,{key:1},[ea,l("div",ta,m(t(q)?t(q).title:p.$t("general.create")),1)],64)):b("",!0),t(q)?(r(),k("div",{key:2,class:re(["flex text-xs px-1.5 py-1 rounded-md ml-1",{"bg-green-200 text-green-800":t(q).active,"bg-gray-100 text-gray-500":!t(q).active}])},m(t(q).active?p.$t("general.active"):p.$t("general.inactive")),3)):b("",!0)]),!t(c)&&!t(C)?fe((r(),y(j,{key:0,class:"mr-4 max-w-40",type:"secondary",size:"small",onClick:$[1]||($[1]=h=>ve())},{default:i(()=>[l("div",oa,[l("span",aa,m(p.$t("activity.newWebhook")),1),n(w,{icon:"plus"})])]),_:1})),[[se,["c:actions:webhook"]]]):b("",!0)],2),!t(c)&&!t(C)?(r(),k("div",na,[t(z).length===0?(r(),k("div",la,[ia,l("div",sa,m(p.$t("msg.createWebhookMsg1")),1),l("div",ca,m(p.$t("msg.createWebhookMsg2")),1),fe((r(),y(j,{class:"flex max-w-40",type:"primary",onClick:$[2]||($[2]=h=>ve())},{default:i(()=>[l("div",ra,[l("span",da,m(p.$t("activity.newWebhook")),1),n(w,{icon:"plus"})])]),_:1})),[[se,["c:actions:webhook"]]])])):(r(),k("div",ua,[l("div",pa,[l("div",fa,m(p.$t("general.activate")),1),l("div",ma,m(p.$t("general.title")),1),l("div",_a,m(p.$t("general.event")),1),l("div",ya,m(p.$t("general.action")),1)]),(r(!0),k(P,null,de(t(z),h=>(r(),k("div",{key:h.id,class:"nc-view-sidebar-webhook-item"},[l("div",{class:re(["flex flex-row w-full items-center pl-3 pr-2 py-2 hover:bg-gray-50 rounded-lg cursor-pointer group text-gray-600",{"bg-brand-50 !text-brand-500 hover:bg-brand-50":h.id===t(c)}])},[l("div",va,[fe(n(we,{size:"small",checked:!!h.active,class:"min-w-4",onChange:s=>ye(h)},null,8,["checked","onChange"]),[[se,["c:actions:webhook"]]])]),l("div",{class:"nc-view-sidebar-webhook-item-title font-medium flex flex-row items-center",onClick:s=>ie(h.id)},[l("div",ba,m(h==null?void 0:h.title),1)],8,ha),l("div",ka,m(h==null?void 0:h.event)+" "+m(h==null?void 0:h.operation),1),l("div",ga,[n(xe,{trigger:["click"],"overlay-class-name":"!rounded-md"},{overlay:i(()=>[l("div",wa,[n(j,{type:"text",class:"w-full !rounded-md !px-2",loading:t(O),centered:!1,onClick:s=>le(h)},{loading:i(()=>[H(m(p.$t("general.duplicating")),1)]),default:i(()=>[l("div",xa,[n(w,{icon:"duplicate"}),H(" "+m(p.$t("general.duplicate")),1)])]),_:2},1032,["loading","onClick"]),n(j,{type:"text",class:"w-full !rounded-md !px-2",centered:!1,onClick:s=>me(h.id)},{default:i(()=>[l("div",$a,[n(w,{icon:"delete"}),H(" "+m(p.$t("general.delete")),1)])]),_:2},1032,["onClick"])])]),default:i(()=>[n(j,{size:"xsmall",type:"text",class:re(["nc-btn-webhook-more !text-gray-500 !hover:text-gray-800",{"!hover:bg-brand-100":h.id===t(c),"!hover:bg-gray-200":h.id!==t(c)}])},{default:i(()=>[n(w,{icon:"threeDotVertical",class:"text-inherit"})]),_:2},1032,["class"])]),_:2},1024)])],2)]))),128))]))])):(r(),k("div",qa,[l("div",Ta,[(r(),y($e,{key:t(c),hook:t(q),onClose:ge,onDelete:$[3]||($[3]=h=>M.value=!0)},null,8,["hook"]))])]))])):(r(),k("div",Ma,[n(be,{size:"large",indicator:t(e)},null,8,["indicator"])])),n(qe,{visible:t(M),"onUpdate:visible":$[4]||($[4]=h=>Ae(M)?M.value=h:null),"entity-name":p.$t("objects.webhook"),"on-delete":_e},{"entity-preview":i(()=>[t(f)?(r(),k("div",Ca,[(r(),y(J(("iconMap"in p?p.iconMap:t(Z)).hook),{class:"text-gray-600"})),l("div",La,m(t(f).title),1)])):b("",!0)]),_:1},8,["visible","entity-name"])],64)}}}),tn=Pe(Sa,[["__scopeId","data-v-f9b574ea"]]);export{tn as default};
