var B=Object.defineProperty;var J=(s,a,n)=>a in s?B(s,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[a]=n;var d=(s,a,n)=>(J(s,typeof a!="symbol"?a+"":a,n),n);import{d as _}from"./boyBAVNN.js";import{e as z,ba as k,f as I,r as j,g as T,ds as E,F as D,o as F,c as P,_ as L}from"./DZZ6t_j4.js";import{e as c,l as w}from"./CwK0k4WN.js";const m=class m{constructor(a,n){d(this,"placeholder");d(this,"editor");d(this,"domNode",null);this.placeholder=a,this.editor=n,n.onDidChangeModelContent(()=>this.onDidChangeModelContent()),this.onDidChangeModelContent()}onDidChangeModelContent(){this.editor.getValue()===""?this.editor.addContentWidget(this):this.editor.removeContentWidget(this)}getId(){return m.ID}getDomNode(){return this.domNode||(this.domNode=document.createElement("div"),this.domNode.classList.add("formula-placeholder"),this.domNode.style.width="max-content",this.domNode.textContent=this.placeholder,this.editor.applyFontInfo(this.domNode)),this.domNode}getPosition(){return{position:{lineNumber:1,column:1},preference:[c.ContentWidgetPositionPreference.EXACT]}}dispose(){this.editor.removeContentWidget(this)}};d(m,"ID","editor.widget.placeholderHint");let y=m;const W=z({__name:"Editor",props:{modelValue:{default:""},hideMinimap:{type:Boolean},lang:{default:"json"},validate:{type:Boolean,default:!0},disableDeepCompare:{type:Boolean,default:!1},placeholder:{},readOnly:{type:Boolean},autoFocus:{type:Boolean,default:!0},monacoConfig:{default:()=>({})},monacoCustomTheme:{default:()=>({})}},emits:["update:modelValue"],setup(s,{expose:a,emit:n}){const f=s,C=n,{modelValue:u}=k(f),{hideMinimap:V,lang:l,validate:M,disableDeepCompare:b,readOnly:N,autoFocus:x,monacoConfig:p,monacoCustomTheme:v,placeholder:S}=f,i=I({get:()=>typeof u.value=="object"?JSON.stringify(u.value,null,2):u.value??"",set:t=>{if(typeof u.value=="object")try{C("update:modelValue",typeof t=="object"?t:JSON.parse(t))}catch(o){console.error(o)}else C("update:modelValue",t)}}),h=j(!0),g=j();let e;const O=(t=p.tabSize||2)=>{try{const o=JSON.parse(e==null?void 0:e.getValue());e.setValue(JSON.stringify(o,null,t))}catch(o){console.error("Failed to parse and format JSON:",o)}};return a({format:O,isValid:h}),T(async()=>{if(g.value&&l){const t=c.createModel(i.value,l);l==="json"&&w.json.jsonDefaults.setDiagnosticsOptions({validate:M});let o=!1;Object.keys(v).length&&(c.defineTheme("custom",v),o=!0),e=c.create(g.value,{model:t,contextmenu:!1,theme:o?"custom":"vs",foldingStrategy:"indentation",selectOnLineNumbers:!0,language:f.lang,scrollbar:{verticalScrollbarSize:1,horizontalScrollbarSize:1},lineNumbers:"off",tabSize:p.tabSize||2,automaticLayout:!0,readOnly:N,bracketPairColorization:{enabled:!0,independentColorPoolPerBracketType:!0},minimap:{enabled:!V},...l==="json"?{detectIndentation:!1,insertSpaces:!0}:{},...p}),e.onDidChangeModelContent(async()=>{try{if(h.value=!0,b||l!=="json")i.value=e.getValue();else{const r=JSON.parse(e.getValue());(!r||!_(i.value,r))&&(i.value=r)}}catch(r){h.value=!1,console.log(r)}}),S&&new y(S,e),!E()&&x&&e.focus(),l==="json"&&O()}}),D(i,t=>{if(!e||!t)return;const o=e==null?void 0:e.getValue();!b&&l==="json"?(!o||!_(JSON.parse(t),JSON.parse(o)))&&e.setValue(t):o!==t&&e.setValue(t)}),D(()=>N,t=>{e&&e.updateOptions({readOnly:t})}),(t,o)=>(F(),P("div",{ref_key:"root",ref:g},null,512))}}),q=L(W,[["__scopeId","data-v-8fca036f"]]);export{q as default};
