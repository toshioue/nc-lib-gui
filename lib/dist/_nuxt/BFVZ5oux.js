const __vite__fileDeps=["./BWUwunpe.js","./DKhUGBot.js","./entry.B8GgT5QA.css","./_3l2HvaK.js","./CcZku21G.js","./DUVew6I_.js","./LockType.ndmCgkkH.css","./CnE6xPjt.js","./CGLN1jgb.js","./CSWf2nuO.js","./DZMsOWET.js","./u8rUVe3y.js","./DyY7ABnl.js","./BY49hpjj.js","./DEJjMRn_.js","./CUg8TjpL.js","./DgXVCOuO.js","./Cz8K5PX4.js","./GPQ-Eg6I.js","./BQQOEPN4.js","./BOlDoh1A.js","./BpnlUwoJ.js","./CxxuE4Yq.js","./BqRqK2Ui.js","./CNjr3NNT.js","./Du3cTDPI.js","./CzWiRRCe.js","./BKoTI3Jv.js","./D4MBJuiu.js","./BjAi9enL.js","./DX_5E9FR.js","./BumrnQO2.js","./CX4Cv_ut.js","./BaseLogo.BjMH04Ym.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as be,cI as ke,ac as Ie,ag as Ae,o as l,U as b,w as o,P as e,c as d,b as n,a as g,t as c,S as V,Q as Ne,an as ce,ao as Le,c_ as Me,A as De,cP as je,at as we,cG as ge,ba as Ke,r as S,ai as Re,g as X,cZ as r,aj as qe,eJ as Ye,H as He,eb as Qe,a_ as We,i as Ze,cU as J,cV as Je,O as Fe,al as p,d as _,aF as Xe,am as te,V as Se,W as Ee,R as ne,ap as Te,$ as Ge,a2 as Be,aI as ea,p as Oe,e as Pe,_ as Ue,L as aa,bL as la,fB as ta,cB as oa,fC as z,ah as ia,T as sa,a9 as na,Z as he,a5 as $e}from"./DKhUGBot.js";import{_ as ca}from"./DOSyHa8b.js";import{_ as da}from"./jbOQaGBo.js";import{_ as ra}from"./C600yAEI.js";import{i as ua}from"./DFT4Rrrq.js";import"./Cz8K5PX4.js";import{I as _a}from"./GPQ-Eg6I.js";import{S as ma}from"./CX4Cv_ut.js";import{F as pa}from"./DyY7ABnl.js";import{_ as fa}from"./BY49hpjj.js";import{_ as va}from"./GAfEgWrt.js";import{_ as ya}from"./Cx8swDhG.js";import{_ as wa}from"./DsZKLylN.js";import{_ as ga}from"./CyGutrdy.js";import{u as ba}from"./CX32jp6d.js";const ka={key:0,class:"flex flex-row items-center py-2 px-3 bg-gray-50 rounded-lg text-gray-700"},ha={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-3",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},wl=be({__name:"ViewDelete",props:{modelValue:{type:Boolean},view:{}},emits:["update:modelValue","deleted"],setup(h,{emit:oe}){const f=h,R=oe,{refreshCommandPalette:E}=ke(),{view:Q}=f,B=Ie(f,"modelValue",R),{api:ie}=Ae(),{$e:O}=De();async function ee(){if(f.view)try{await ie.dbView.delete(f.view.id),B.value=!1,R("deleted"),O("a:view:delete",{view:f.view.type})}catch(y){ce.error(await Le(y))}finally{E()}}return(y,x)=>{const j=Me,M=ca;return l(),b(M,{visible:e(B),"onUpdate:visible":x[0]||(x[0]=ae=>Ne(B)?B.value=ae:null),"entity-name":y.$t("objects.view"),"on-delete":ee},{"entity-preview":o(()=>[e(Q)?(l(),d("div",ka,[n(j,{meta:f.view,class:"nc-view-icon w-4 min-h-4"},null,8,["meta"]),g("div",ha,c(e(Q).title),1)])):V("",!0)]),_:1},8,["visible","entity-name"])}}}),ze=h=>(Oe("data-v-6755968f"),h=h(),Pe(),h),$a={class:"flex w-full flex-row justify-between items-center"},xa={class:"flex font-bold text-base gap-x-3 items-center"},Va=["href"],Ca={class:"mt-1"},Ia=["title"],Aa={class:"flex-1 flex items-center gap-1 max-w-[calc(100%_-_24px)]"},Na=["title"],La={class:"flex-1 flex items-center gap-1 max-w-[calc(100%_-_24px)]"},Ma={class:"text-gray-800"},Da={class:"flex w-full gap-2 justify-between items-center"},Ra={class:"flex gap-2 items-center"},Fa=ze(()=>g("div",{class:"flex-1"},null,-1)),Sa={key:1,class:"flex flex-row p-4 border-gray-200 border-1 gap-x-4 rounded-lg w-full"},Ea={class:"text-gray-500 flex gap-4"},Ta={class:"flex flex-col gap-1"},Ga=ze(()=>g("h2",{class:"font-semibold text-sm mb-0 text-gray-800"},"Suitable fields not present",-1)),Ba={class:"text-gray-500 font-default text-sm"},Oa={class:"flex flex-row w-full justify-end gap-x-2 mt-5"},Pa=be({__name:"ViewCreate",props:{modelValue:{type:Boolean},type:{},title:{},selectedViewId:{default:void 0},groupingFieldColumnId:{default:void 0},geoDataFieldColumnId:{default:void 0},tableId:{},calendarRange:{default:void 0},coverImageColumnId:{default:void 0}},emits:["update:modelValue","created"],setup(h,{emit:oe}){const f=h,R=oe,{metas:E,getMeta:Q}=je(),{viewsByTable:B}=we(ge()),{refreshCommandPalette:ie}=ke(),{selectedViewId:O,groupingFieldColumnId:ee,geoDataFieldColumnId:y,tableId:x,coverImageColumnId:j}=Ke(f),M=S(),ae=S(),de=S(),W=Ie(f,"modelValue",R),{t:I}=Re(),{api:K}=Ae(),le=S(!1),se=X(()=>B.value.get(x.value)??[]),q=S(!0),re={[r.KANBAN]:I("msg.warning.kanbanNoFields"),[r.MAP]:I("msg.warning.mapNoFields"),[r.CALENDAR]:I("msg.warning.calendarNoFields")},a=qe({title:f.title||"",type:f.type,copy_from_id:null,fk_grp_col_id:null,fk_geo_data_col_id:null,calendar_range:f.calendarRange||[],fk_cover_image_col_id:null}),k=S([]),ue=[{required:!0,message:`${I("labels.viewName")} ${I("general.required").toLowerCase()}`},{validator:(t,u)=>new Promise((v,A)=>{se.value.every(C=>C.title!==u)?v(!0):A(new Error("View name should be unique"))}),message:"View name should be unique"}],fe=[{required:!0,message:`${I("general.groupingField")} ${I("general.required")}`}],ve=[{required:!0,message:`${I("general.geoDataField")} ${I("general.required")}`}],_e=X(()=>({[r.GRID]:"grid",[r.GALLERY]:"gallery",[r.FORM]:"form",[r.KANBAN]:"kanban",[r.MAP]:"map",[r.CALENDAR]:"calendar"})[f.type]);Ye(ye),He(()=>f.type,t=>{a.type=t});function ye(){a.title=`${Qe(_e.value)}`;const t=se.value.filter(u=>u.title.startsWith(a.title)).length;t&&(a.title=`${a.title}-${t}`),O.value&&(a.copy_from_id=O==null?void 0:O.value),We(()=>{var v;const u=(v=ae.value)==null?void 0:v.$el;u&&(u.focus(),u.select())})}async function s(){var u;let t=null;try{t=await((u=de.value)==null?void 0:u.validateFields())}catch(v){console.error(v)}if(a.title&&(a.title=a.title.trim()),t&&a.type){if(!x.value)return;try{let v=null;switch(le.value=!0,a.type){case r.GRID:v=await K.dbView.gridCreate(x.value,a);break;case r.GALLERY:v=await K.dbView.galleryCreate(x.value,a);break;case r.FORM:v=await K.dbView.formCreate(x.value,a);break;case r.KANBAN:v=await K.dbView.kanbanCreate(x.value,a);break;case r.MAP:v=await K.dbView.mapCreate(x.value,a);break;case r.CALENDAR:v=await K.dbView.calendarCreate(x.value,{...a,calendar_range:a.calendar_range.map(A=>({fk_from_column_id:A.fk_from_column_id,fk_to_column_id:A.fk_to_column_id}))});break}v&&R("created",v)}catch(v){ce.error(v.message)}finally{await ie()}W.value=!1,setTimeout(()=>{le.value=!1},500)}}const $=S(!1);return Ze(async()=>{var t,u,v,A,C,T;if([r.GALLERY,r.KANBAN,r.MAP,r.CALENDAR].includes(f.type)){$.value=!0;try{if(M.value=await Q(x.value),f.type===r.MAP&&(k.value=M.value.columns.filter(m=>m.uidt===J.GeoData).map(m=>({value:m.id,label:m.title})),y.value?a.fk_geo_data_col_id=y.value:(t=k.value)!=null&&t.length?a.fk_geo_data_col_id=(v=(u=k.value)==null?void 0:u[0])==null?void 0:v.value:q.value=!1),f.type===r.GALLERY){k.value=[{value:null,label:"No Image"},...(M.value.columns||[]).filter(w=>w.uidt===J.Attachment).map(w=>({value:w.id,label:w.title,uidt:w.uidt}))];const m=(A=M.value.columns||[])==null?void 0:A.filter(w=>w.uidt===J.Lookup),G=new Set,P=async(w,N,Z)=>{var i,D,L,H,me,xe,Ve;const F=Z||(i=M.value)!=null&&i.id?(H=(L=E.value[Z||((D=M.value)==null?void 0:D.id)])==null?void 0:L.columns)==null?void 0:H.find(U=>{var pe;return U.id===((pe=N==null?void 0:N.colOptions)==null?void 0:pe.fk_relation_column_id)}):void 0;if((me=F==null?void 0:F.colOptions)!=null&&me.fk_related_model_id){await Q(F.colOptions.fk_related_model_id);const U=(Ve=(xe=E.value[F.colOptions.fk_related_model_id])==null?void 0:xe.columns)==null?void 0:Ve.find(pe=>{var Ce;return pe.id===((Ce=N==null?void 0:N.colOptions)==null?void 0:Ce.fk_lookup_column_id)});U&&ua(U)?G.add(w.id):U&&(U==null?void 0:U.uidt)===J.Lookup&&await P(w,U,F.colOptions.fk_related_model_id)}};await Promise.allSettled(m.map(w=>P(w,w)));const Y=m.filter(w=>G.has(w==null?void 0:w.id)).map(w=>({value:w.id,label:w.title,uidt:w.uidt}));k.value=[...k.value,...Y],j.value?a.fk_cover_image_col_id=j.value:k.value.length>1&&!a.copy_from_id?a.fk_cover_image_col_id=k.value[1].value:a.fk_cover_image_col_id=null}f.type===r.KANBAN&&(k.value=M.value.columns.filter(m=>m.uidt===J.SingleSelect).map(m=>({value:m.id,label:m.title,uidt:m.uidt})),ee.value?a.fk_grp_col_id=ee.value:(C=k.value)!=null&&C.length?a.fk_grp_col_id=k.value[0].value:q.value=!1,j.value?a.fk_cover_image_col_id=j.value:k.value.length>1&&!a.copy_from_id?a.fk_cover_image_col_id=k.value[1].value:a.fk_cover_image_col_id=null),f.type===r.CALENDAR&&(k.value=M.value.columns.filter(m=>m.uidt===J.Date||m.uidt===J.DateTime&&!Je(m)).map(m=>({value:m.id,label:m.title,uidt:m.uidt})),(T=k.value)!=null&&T.length?a.calendar_range.length===0&&(a.calendar_range=[{fk_from_column_id:k.value[0].value,fk_to_column_id:null}]):q.value=!1)}catch(m){console.error(m)}finally{$.value=!1}}}),(t,u)=>{const v=Me,A=_a,C=fa,T=da,m=Te,G=Ge,P=ma,Y=ra,w=pa,N=Be,Z=ea,F=Fe("e");return l(),b(Z,{visible:e(W),"onUpdate:visible":u[5]||(u[5]=i=>Ne(W)?W.value=i:null),class:"nc-view-create-modal","show-separator":!1,size:[e(r).MAP].includes(e(a).type)?"medium":"small"},{header:o(()=>[g("div",$a,[g("div",xa,[n(v,{meta:{type:e(a).type},class:"nc-view-icon !text-[24px] !leading-6 max-h-6 max-w-6"},null,8,["meta"]),e(a).type===e(r).GRID?(l(),d(p,{key:0},[e(a).copy_from_id?(l(),d(p,{key:0},[_(c(t.$t("labels.duplicateGridView")),1)],64)):(l(),d(p,{key:1},[_(c(t.$t("labels.createGridView")),1)],64))],64)):e(a).type===e(r).GALLERY?(l(),d(p,{key:1},[e(a).copy_from_id?(l(),d(p,{key:0},[_(c(t.$t("labels.duplicateGalleryView")),1)],64)):(l(),d(p,{key:1},[_(c(t.$t("labels.createGalleryView")),1)],64))],64)):e(a).type===e(r).FORM?(l(),d(p,{key:2},[e(a).copy_from_id?(l(),d(p,{key:0},[_(c(t.$t("labels.duplicateFormView")),1)],64)):(l(),d(p,{key:1},[_(c(t.$t("labels.createFormView")),1)],64))],64)):e(a).type===e(r).KANBAN?(l(),d(p,{key:3},[e(a).copy_from_id?(l(),d(p,{key:0},[_(c(t.$t("labels.duplicateKanbanView")),1)],64)):(l(),d(p,{key:1},[_(c(t.$t("labels.createKanbanView")),1)],64))],64)):e(a).type===e(r).CALENDAR?(l(),d(p,{key:4},[e(a).copy_from_id?(l(),d(p,{key:0},[_(c(t.$t("labels.duplicateCalendarView")),1)],64)):(l(),d(p,{key:1},[_(c(t.$t("labels.createCalendarView")),1)],64))],64)):(l(),d(p,{key:5},[e(a).copy_from_id?(l(),d(p,{key:0},[_(c(t.$t("labels.duplicateMapView")),1)],64)):(l(),d(p,{key:1},[_(c(t.$t("labels.duplicateView")),1)],64))],64))]),e(a).copy_from_id?V("",!0):(l(),d("a",{key:0,class:"text-sm !text-gray-600 !font-default !hover:text-gray-600",href:`https://docs.nocodb.com/views/view-types/${e(_e)}`,target:"_blank"}," Docs ",8,Va))])]),default:o(()=>[g("div",Ca,[e(q)?(l(),b(w,{key:0,ref_key:"formValidator",ref:de,model:e(a),layout:"vertical",class:"flex flex-col gap-y-5"},{default:o(()=>[n(C,{rules:ue,name:"title"},{default:o(()=>[n(A,{ref_key:"inputEl",ref:ae,value:e(a).title,"onUpdate:value":u[0]||(u[0]=i=>e(a).title=i),placeholder:t.$t("labels.viewName"),autofocus:"",class:"nc-input-sm nc-input-shadow",onKeydown:Xe(s,["enter"])},null,8,["value","placeholder"])]),_:1}),e(a).type===e(r).GALLERY&&!e(a).copy_from_id?(l(),b(C,{key:0,label:`${t.$t("labels.coverImageField")}`,name:"fk_cover_image_col_id"},{default:o(()=>[n(Y,{value:e(a).fk_cover_image_col_id,"onUpdate:value":u[1]||(u[1]=i=>e(a).fk_cover_image_col_id=i),disabled:e($),loading:e($),"dropdown-match-select-width":"","not-found-content":t.$t("placeholder.selectGroupFieldNotFound"),placeholder:t.$t("placeholder.selectCoverImageField"),class:"nc-select-shadow w-full nc-gallery-cover-image-field-select"},{default:o(()=>[(l(!0),d(p,null,te(e(k),i=>(l(),b(P,{key:i.value,value:i.value},{default:o(()=>[g("div",{class:"w-full flex gap-2 items-center justify-between",title:i.label},[g("div",Aa,[i.value?(l(),b(T,{key:0,column:i,class:"!ml-0"},null,8,["column"])):V("",!0),n(m,{class:"flex-1 max-w-[calc(100%_-_20px)] truncate","show-on-truncate-only":""},{title:o(()=>[_(c(i.label),1)]),default:o(()=>[_(c(i.label),1)]),_:2},1024)]),e(a).fk_cover_image_col_id===i.value?(l(),b(G,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):V("",!0)],8,Ia)]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","loading","not-found-content","placeholder"])]),_:1},8,["label"])):V("",!0),e(a).type===e(r).KANBAN&&!e(a).copy_from_id?(l(),b(C,{key:1,label:t.$t("general.groupingField"),rules:fe,name:"fk_grp_col_id"},{default:o(()=>[n(Y,{value:e(a).fk_grp_col_id,"onUpdate:value":u[2]||(u[2]=i=>e(a).fk_grp_col_id=i),disabled:e($),loading:e($),"dropdown-match-select-width":"","not-found-content":t.$t("placeholder.selectGroupFieldNotFound"),placeholder:t.$t("placeholder.selectGroupField"),class:"nc-select-shadow w-full nc-kanban-grouping-field-select"},{default:o(()=>[(l(!0),d(p,null,te(e(k),i=>(l(),b(P,{key:i.value,value:i.value},{default:o(()=>[g("div",{class:"w-full flex gap-2 items-center justify-between",title:i.label},[g("div",La,[n(T,{column:i,class:"!ml-0"},null,8,["column"]),n(m,{class:"flex-1 max-w-[calc(100%_-_20px)] truncate","show-on-truncate-only":""},{title:o(()=>[_(c(i.label),1)]),default:o(()=>[_(c(i.label),1)]),_:2},1024)]),e(a).fk_grp_col_id===i.value?(l(),b(G,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):V("",!0)],8,Na)]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","loading","not-found-content","placeholder"])]),_:1},8,["label"])):V("",!0),e(a).type===e(r).MAP?(l(),b(C,{key:2,label:t.$t("general.geoDataField"),rules:ve,name:"fk_geo_data_col_id"},{default:o(()=>[n(Y,{value:e(a).fk_geo_data_col_id,"onUpdate:value":u[3]||(u[3]=i=>e(a).fk_geo_data_col_id=i),disabled:e($),loading:e($),"not-found-content":t.$t("placeholder.selectGeoFieldNotFound"),options:e(k),placeholder:t.$t("placeholder.selectGeoField"),class:"nc-select-shadow w-full"},null,8,["value","disabled","loading","not-found-content","options","placeholder"])]),_:1},8,["label"])):V("",!0),e(a).type===e(r).CALENDAR&&!e(a).copy_from_id?(l(!0),d(p,{key:3},te(e(a).calendar_range,(i,D)=>(l(),d("div",{key:`range-${D}`,class:"flex w-full items-center gap-2"},[g("span",Ma,c(t.$t("labels.organiseBy")),1),n(Y,{value:i.fk_from_column_id,"onUpdate:value":L=>i.fk_from_column_id=L,disabled:e($),loading:e($),class:"nc-select-shadow nc-from-select"},{default:o(()=>[(l(!0),d(p,null,te([...e(k)].filter(L=>{if(D===0)return!0;const H=e(k).find(me=>me.value===e(a).calendar_range[0].fk_from_column_id);return(H==null?void 0:H.uidt)===L.uidt}),(L,H)=>(l(),b(P,{key:H,class:"w-40",value:L.value},{default:o(()=>[g("div",Da,[g("div",Ra,[n(T,{column:L,class:"!ml-0"},null,8,["column"]),n(m,{class:"truncate flex-1 max-w-18",placement:"top","show-on-truncate-only":""},{title:o(()=>[_(c(L.label),1)]),default:o(()=>[_(" "+c(L.label),1)]),_:2},1024)]),Fa,L.value===i.fk_from_column_id?(l(),b(Se(("iconMap"in t?t.iconMap:e(Ee)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary min-w-4 h-4"})):V("",!0)])]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value","disabled","loading"])]))),128)):V("",!0)]),_:1},8,["model"])):e(q)?V("",!0):(l(),d("div",Sa,[g("div",Ea,[n(G,{class:"min-w-6 h-6 text-orange-500",icon:"alertTriangle"}),g("div",Ta,[Ga,g("span",Ba,c(re[e(a).type]),1)])])])),g("div",Oa,[n(N,{type:"secondary",size:"small",onClick:u[4]||(u[4]=i=>W.value=!1)},{default:o(()=>[_(c(t.$t("general.cancel")),1)]),_:1}),ne((l(),b(N,{disabled:!e(q),loading:e(le),type:"primary",size:"small",onClick:s},{loading:o(()=>[_(c(t.$t("labels.creatingView")),1)]),default:o(()=>[_(c(t.$t("labels.createView"))+" ",1)]),_:1},8,["disabled","loading"])),[[F,[e(a).copy_from_id?"a:view:duplicate":"a:view:create"]]])])])]),_:1},8,["visible","size"])}}}),Ua=Ue(Pa,[["__scopeId","data-v-6755968f"]]),za=he(()=>$e(()=>import("./BWUwunpe.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(h=>h.default||h)),ja=he(()=>$e(()=>import("./DUVew6I_.js"),__vite__mapDeps([5,1,2,6]),import.meta.url).then(h=>h.default||h)),Ka=he(()=>$e(()=>import("./CnE6xPjt.js"),__vite__mapDeps([7,8,1,2,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]),import.meta.url).then(h=>h.default||h)),qa=h=>(Oe("data-v-5a69e7ea"),h=h(),Pe(),h),Ya={class:"flex text-xs font-bold text-gray-500 ml-1"},Ha={class:"nc-base-menu-item group"},Qa={class:"flex py-3 px-4 font-bold uppercase text-xs text-gray-500"},Wa={class:"nc-base-menu-item group nc-view-context-download-option"},Za={class:"flex flex-row items-center gap-x-3"},Ja={class:"nc-base-menu-item flex !flex-shrink group !py-1 !px-1 rounded-md bg-brand-50"},Xa=qa(()=>g("div",{class:"flex flex-grow"},null,-1)),el={class:"flex py-3 px-4 font-bold uppercase text-xs text-gray-500"},al={key:1},ll=be({__name:"ViewActionMenu",props:{view:{},table:{},inSidebar:{type:Boolean,default:!1}},emits:["rename","closeModal","delete"],setup(h,{emit:oe}){const f=h,R=oe,{isUIAllowed:E,isDataReadOnly:Q}=aa(),B=la(ta,S(!1)),{$api:ie,$e:O}=De(),{t:ee}=Re(),y=X(()=>f.view),x=X(()=>f.table),{viewsByTable:j}=we(ge()),{loadViews:M,navigateToView:ae}=ge(),{base:de}=we(oa()),{refreshCommandPalette:W}=ke(),I=X(()=>{var s;return((s=y.value)==null?void 0:s.lock_type)||z.Collaborative}),K=X(()=>j.value.get(x.value.id)),le=S(!1),se=X(()=>{var s;return(s=x.value)==null?void 0:s.source_id}),q=()=>{R("rename")},re=["csv","excel"],a=re.reduce((s,$)=>(s[$]=S(!1),s),{}),k=s=>{I.value!==z.Locked&&(R("closeModal"),s.value=!0)};async function ue(s){if(O("a:grid:lockmenu",{lockType:s,sidebar:f.inSidebar}),!!y.value){if(s==="personal")return ce.info(ee("msg.toast.futureRelease"));try{y.value.lock_type=s,await ie.dbView.update(y.value.id,{lock_type:s}),ce.success(`Successfully Switched to ${s} view`)}catch($){ce.error(await Le($))}R("closeModal")}}function fe(){R("closeModal");const s=S(!0),{close:$}=ba(Ua,{modelValue:s,title:y.value.title,type:y.value.type,tableId:x.value.id,selectedViewId:y.value.id,groupingFieldColumnId:y.value.view.fk_grp_col_id,views:K,calendarRange:y.value.view.calendar_range,coverImageColumnId:y.value.view.fk_cover_image_col_id,"onUpdate:modelValue":t,onCreated:async u=>{t(),W(),await M({force:!0,tableId:x.value.id}),ae({view:u,tableId:x.value.id,baseId:de.value.id,hardReload:u.type===r.FORM}),O("a:view:create",{view:u.type,sidebar:f.inSidebar})}});function t(){s.value=!1,$(1e3)}}const{copy:ve}=ia(),_e=async()=>{await ve(y.value.id),le.value=!0},ye=async()=>{R("delete")};return(s,$)=>{const t=Ge,u=Be,v=Te,A=va,C=ya,T=wa,m=za,G=ja,P=na,Y=Ka,w=ga,N=Fe("e");return e(y)?(l(),b(w,{key:0,"data-testid":`view-sidebar-view-actions-${e(y).alias||e(y).title}`,class:"!min-w-70","data-id":"toolbar-actions"},{default:o(()=>{var Z,F;return[n(v,null,{title:o(()=>[_(c(s.$t("labels.clickToCopyViewID")),1)]),default:o(()=>{var i;return[g("div",{class:"flex items-center justify-between p-2 mx-1.5 rounded-md cursor-pointer hover:bg-gray-100 group",onClick:_e},[g("div",Ya,c(s.$t("labels.viewIdColon",{viewId:(i=e(y))==null?void 0:i.id})),1),n(u,{class:"!group-hover:bg-gray-100",size:"xsmall",type:"secondary"},{default:o(()=>[e(le)?(l(),b(t,{key:0,class:"max-h-4 min-w-4",icon:"check"})):(l(),b(t,{key:1,class:"max-h-4 min-w-4",else:"",icon:"copy"}))]),_:1})])]}),_:1}),!((Z=e(y))!=null&&Z.is_default)&&e(E)("viewCreateOrEdit")?(l(),d(p,{key:0},[n(A),e(I)!==e(z).Locked?(l(),b(C,{key:0,onClick:q},{default:o(()=>[n(t,{icon:"rename"}),_(" "+c(s.$t("activity.renameView")),1)]),_:1})):(l(),b(v,{key:1},{title:o(()=>[_(c(s.$t("msg.info.disabledAsViewLocked")),1)]),default:o(()=>[n(C,{class:"!cursor-not-allowed !text-gray-400"},{default:o(()=>[n(t,{icon:"rename"}),_(" "+c(s.$t("activity.renameView")),1)]),_:1})]),_:1})),n(C,{onClick:fe},{default:o(()=>[n(t,{class:"nc-view-copy-icon",icon:"duplicate"}),_(" "+c(s.$t("labels.duplicateView")),1)]),_:1})],64)):V("",!0),e(y).type!==e(r).FORM?(l(),d(p,{key:1},[n(A),e(E)("csvTableImport")&&!e(B)&&!e(Q)?(l(),b(T,{key:"upload"},{title:o(()=>[ne((l(),d("div",Ha,[n(t,{icon:"upload"}),_(" "+c(s.$t("general.upload")),1)])),[[N,["c:navdraw:preview-as",{sidebar:f.inSidebar}]]])]),expandIcon:o(()=>[]),default:o(()=>[g("div",Qa,c(s.$t("activity.uploadData")),1),(l(!0),d(p,null,te(e(a),(i,D)=>(l(),d(p,null,[e(E)(`${D}TableImport`)&&!e(B)?(l(),b(C,{key:D,onClick:L=>k(i)},{default:o(()=>[ne((l(),d("div",{class:sa([{disabled:e(I)===e(z).Locked},"nc-base-menu-item"])},[(l(),b(Se(("iconMap"in s?s.iconMap:e(Ee)).cloudUpload))),_(" "+c(`${s.$t("general.upload")} ${D.toUpperCase()}`),1)],2)),[[N,[`a:upload:${D}`,{sidebar:f.inSidebar}]]])]),_:2},1032,["onClick"])):V("",!0)],64))),256))]),_:1})):V("",!0),n(T,{key:"download"},{title:o(()=>[ne((l(),d("div",Wa,[n(t,{icon:"download"}),_(" "+c(s.$t("general.download")),1)])),[[N,["c:download",{sidebar:f.inSidebar}]]])]),expandIcon:o(()=>[]),default:o(()=>[n(m)]),_:1})],64)):V("",!0),e(E)("viewCreateOrEdit")?(l(),d(p,{key:2},[n(A),n(T,{key:"lock-type",class:"scrollbar-thin-dull max-h-90vh overflow-auto !py-0"},{title:o(()=>[ne((l(),d("div",Za,[g("div",null,c(s.$t("labels.viewMode")),1),g("div",Ja,[n(G,{type:e(I),class:"flex nc-view-actions-lock-type !text-brand-500 !flex-shrink","hide-tick":""},null,8,["type"])]),Xa])),[[N,["c:navdraw:preview-as",{sidebar:f.inSidebar}]]])]),expandIcon:o(()=>[]),default:o(()=>[g("div",el,c(s.$t("labels.viewMode")),1),n(P,{class:"!mx-1 !py-2 !rounded-md nc-view-action-lock-subaction"},{default:o(()=>[n(G,{type:e(z).Collaborative,onClick:$[0]||($[0]=i=>ue(e(z).Collaborative))},null,8,["type"])]),_:1}),n(P,{class:"!mx-1 !py-2 !rounded-md nc-view-action-lock-subaction"},{default:o(()=>[n(G,{type:e(z).Locked,onClick:$[1]||($[1]=i=>ue(e(z).Locked))},null,8,["type"])]),_:1})]),_:1})],64)):V("",!0),!e(y).is_default&&e(E)("viewCreateOrEdit")?(l(),d(p,{key:3},[n(A),e(I)===e(z).Locked?(l(),b(v,{key:0},{title:o(()=>[_(c(s.$t("msg.info.disabledAsViewLocked")),1)]),default:o(()=>[n(C,{class:"!cursor-not-allowed !text-gray-400"},{default:o(()=>[n(t,{class:"nc-view-delete-icon",icon:"delete"}),_(" "+c(s.$t("general.deleteEntity",{entity:s.$t("objects.view")})),1)]),_:1})]),_:1})):(l(),b(C,{key:1,class:"!hover:bg-red-50 !text-red-500",onClick:ye},{default:o(()=>[n(t,{class:"nc-view-delete-icon",icon:"delete"}),_(" "+c(s.$t("general.deleteEntity",{entity:s.$t("objects.view")})),1)]),_:1}))],64)):V("",!0),(F=e(x))!=null&&F.base_id&&e(se)?(l(),d(p,{key:4},te(re,i=>n(Y,{key:i,modelValue:e(a)[i].value,"onUpdate:modelValue":D=>e(a)[i].value=D,"import-data-only":!0,"import-type":i,"base-id":e(x).base_id,"source-id":e(se)},null,8,["modelValue","onUpdate:modelValue","import-type","base-id","source-id"])),64)):V("",!0)]}),_:1},8,["data-testid"])):(l(),d("span",al))}}}),gl=Ue(ll,[["__scopeId","data-v-5a69e7ea"]]);export{Ua as _,gl as a,wl as b};
