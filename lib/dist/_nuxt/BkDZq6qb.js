import{e as N,ax as $,cL as H,bL as v,r as p,d6 as L,dz as U,d8 as D,cX as O,L as S,M as T,o as c,Q as g,w as f,a as o,W as P,t as x,c as W,ao as z,at as A,b as G,d as F,N as i,T as y,U as k,R as Q,P as X,O as Y,jk as C,gf as Z,gc as q,ah as J,ai as K,Z as ee,Y as se,ae,y as oe,_ as te}from"./DZZ6t_j4.js";import{u as ie}from"./BlrQG98t.js";const ne={class:"flex items-center gap-0.5"},ce={class:"w-full bg-white shadow-lg p-1.5 menu-filter-dropdown border-1 border-gray-200 rounded-lg overflow-hidden w-[160px]","data-testid":"nc-height-menu"},re={class:"text-xs text-gray-500 px-3 pt-2 pb-1 select-none"},le=["onClick"],de={class:"flex items-center gap-2"},he=N({__name:"RowHeight",setup(ue){const R=[{icon:"heightShort",heightClass:"short"},{icon:"heightMedium",heightClass:"medium"},{icon:"heightTall",heightClass:"tall"},{icon:"heightExtra",heightClass:"extra"}],{isSharedBase:M}=$(H()),s=v(L,p()),j=v(U,p(!1)),I=v(D,p(!1)),{$api:V}=oe(),{addUndo:E,defineViewScope:B}=O(),{user:_}=S(),n=p(!1),w=async(e,t=!1)=>{var r,l,d;if((r=s.value)!=null&&r.id){if(e===s.value.view.row_height)return;t||E({redo:{fn:a=>w(a,!0),args:[e]},undo:{fn:a=>w(a,!0),args:[s.value.view.row_height||0]},scope:B({view:s.value})});try{!j.value&&!M.value&&!(C(((l=_.value)==null?void 0:l.roles)??{})[Z.VIEWER]||C(((d=_.value)==null?void 0:d.roles)??{})[q.VIEWER])&&await V.dbView.gridUpdate(s.value.id,{row_height:e}),s.value.view.row_height=e,n.value=!1}catch(a){J.error(await K(a)||"There was an error while updating view!")}}};return ie(n),(e,t)=>{const r=ee,l=se,d=ae,a=T("e");return c(),g(d,{visible:i(n),"onUpdate:visible":t[1]||(t[1]=h=>Y(n)?n.value=h:null),"offset-y":"",class:"",trigger:["click"],"overlay-class-name":"nc-dropdown-height-menu"},{overlay:f(()=>[o("div",ce,[o("div",{class:"flex flex-col w-full text-sm",onClick:t[0]||(t[0]=P(()=>{},["stop"]))},[o("div",re,x(e.$t("objects.rowHeight")),1),(c(),W(z,null,A(R,(h,u)=>{var m,b;return o("div",{key:u,class:"nc-row-height-option",onClick:pe=>w(u)},[o("div",de,[G(l,{icon:h.icon,class:"nc-row-height-icon"},null,8,["icon"]),F(" "+x(e.$t(`objects.heightClass.${h.heightClass}`)),1)]),(u===0?!((m=i(s))==null?void 0:m.view).row_height:((b=i(s))==null?void 0:b.view).row_height===u)?(c(),g(y(("iconMap"in e?e.iconMap:i(k)).check),{key:0,class:"text-primary w-4 h-4"})):Q("",!0)],8,le)}),64))])])]),default:f(()=>[o("div",null,[X((c(),g(r,{disabled:i(I),class:"nc-height-menu-btn nc-toolbar-btn !border-0 !h-7 !px-1.5 !min-w-7",size:"small",type:"secondary"},{default:f(()=>[o("div",ne,[(c(),g(y(("iconMap"in e?e.iconMap:i(k)).rowHeight),{class:"!h-3.75 !w-3.75"}))])]),_:1},8,["disabled"])),[[a,["c:row-height"]]])])]),_:1},8,["visible"])}}}),ve=te(he,[["__scopeId","data-v-bcfc01c5"]]);export{ve as default};
