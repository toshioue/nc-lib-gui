const __vite__fileDeps=["./CN2NVkkR.js","./3QBYHahY.js","./entry.Ic44fwRn.css","./x4yn_iAa.js","./CrMlMZHm.js","./BsWDDIqE.js","./CmN9vPg3.js","./BQQOEPN4.js","./xnDaHwV-.js","./3ezdMRmZ.js","./CsJPQclb.js","./AppStore.CxusfNFD.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as te}from"./DEDKhbvL.js";import{f as K,r as h,g as X,o as s,c as y,P as t,S as x,w as l,a8 as Y,a,t as n,aq as re,a1 as ce,ar as Te,as as Ce,ai as de,at as se,b as i,d as T,X as le,V as G,W as B,T as A,U as Ne,au as ie,av as Me,Q as ee,aj as D,ak as W,a0 as ue,$ as ae,A as Se,aw as Ee,N as pe,H as Ie,_ as Ae,Z as Ue,a6 as Le,ax as O}from"./3QBYHahY.js";import{_ as De}from"./BkiSZLeF.js";import{_ as Pe}from"./Dh2ffZi_.js";import"./kHOslGNR.js";import{I as me}from"./CmN9vPg3.js";import{_ as je}from"./BITed4Cc.js";import{_ as ze}from"./DFhZSQoS.js";import{u as Ve,_ as Re}from"./BeaxC1ZC.js";import{_ as Ge}from"./DmzaAQYu.js";import{_ as Be}from"./Bk0xUMNV.js";import{F as Oe}from"./DAKhk9t6.js";import"./CJ26qO3d.js";import"./CsJPQclb.js";import"./DPgYHC40.js";import"./BsWDDIqE.js";import"./BQQOEPN4.js";import"./xnDaHwV-.js";import"./ceYq-xax.js";import"./DiZ67kIC.js";import"./BEpKpjF5.js";import"./CGxepfeV.js";import"./3ezdMRmZ.js";import"./B6ykf4kl.js";import"./DAXlGTGR.js";import"./BSepFqtU.js";import"./C95Svpv6.js";import"./CdQRhxEe.js";import"./B4uVmeYG.js";import"./DkE_qgY_.js";import"./wEQwkVjR.js";const qe={class:"w-full"},He={key:1,class:"w-full","data-testid":"truncate-label"},Fe=K({__name:"TruncateText",props:{placement:{default:"bottom"},length:{default:20}},setup($){const c=h(),d=X(()=>{var m,u,p,_;return((u=(m=c.value)==null?void 0:m.textContent)==null?void 0:u.length)&&((_=(p=c.value)==null?void 0:p.textContent)==null?void 0:_.length)>$.length}),b=X(()=>{var m,u,p,_,k,g;return(u=(m=c.value)==null?void 0:m.textContent)!=null&&u.length&&((p=c.value)==null?void 0:p.textContent.length)>$.length?`${(k=(_=c.value)==null?void 0:_.textContent)==null?void 0:k.substr(0,$.length-3)}...`:(g=c.value)==null?void 0:g.textContent});return(m,u)=>{const p=ce;return s(),y(re,null,[t(d)?(s(),x(p,{key:0,placement:m.placement},{title:l(()=>[Y(m.$slots,"default")]),default:l(()=>[a("div",qe,n(t(b)),1)]),_:3},8,["placement"])):(s(),y("div",He,[Y(m.$slots,"default")])),a("div",{ref_key:"text",ref:c,class:"hidden"},[Y(m.$slots,"default")],512)],64)}}}),We=""+new URL("api-tokens.DEwwjpuX.png",import.meta.url).href,Xe={class:"flex flex-col"},Ke={"data-rec":"true"},Qe={class:"nc-content-max-w p-6 h-[calc(100vh_-_100px)] flex flex-col gap-6 overflow-auto nc-scrollbar-thin"},Ze={class:"max-w-202 mx-auto h-full w-full","data-testid":"nc-token-list"},Je={class:"flex gap-4 items-baseline justify-between"},Ye={class:"text-xl text-left font-bold my-0","data-rec":"true"},et={class:"hidden md:block","data-rec":"true"},tt={class:"flex items-center justify-center md:hidden","data-rec":"true"},at={"data-rec":"true"},ot={key:0,class:"mt-6 h-full max-h-[calc(100%-80px)]"},nt={class:"h-full w-full overflow-y-auto rounded-md"},st={class:"flex w-full pl-5 bg-gray-50 border-1 rounded-t-md"},lt={class:"py-3.5 text-gray-500 font-medium text-3.5 w-2/9","data-rec":"true"},it={class:"py-3.5 text-gray-500 font-medium text-3.5 w-2/9 text-start","data-rec":"true"},rt={class:"py-3.5 text-gray-500 font-medium text-3.5 w-3/9 text-start","data-rec":"true"},ct={class:"py-3.5 pl-19 text-gray-500 font-medium text-3.5 w-2/9 text-start","data-rec":"true"},dt={class:"nc-scrollbar-md !overflow-y-auto flex flex-col h-[calc(100%-52px)]"},ut={key:0},pt={class:"flex w-full"},mt={key:0,class:"text-red-500 text-xs font-light mt-1.5 ml-1","data-rec":"true"},_t={class:"flex gap-2 justify-start"},ft={key:1,class:"border-l-1 border-r-1 border-b-1 rounded-b-md justify-center flex items-center"},vt={class:"text-black font-bold text-3.5 text-start w-2/9"},ht={class:"text-gray-500 font-medium text-3.5 text-start w-2/9"},gt={class:"text-gray-500 font-medium text-3.5 text-start w-3/9"},yt={key:1},kt={class:"flex justify-end items-center gap-3 pr-5 text-gray-500 font-medium text-3.5 w-2/9"},xt={key:1,class:"max-w-[40rem] border px-3 py-6 flex flex-col items-center justify-center gap-6 text-center"},wt=a("img",{src:We,class:"!w-[22rem] flex-none"},null,-1),bt={class:"text-2xl text-gray-800 font-bold"},$t={class:"text-sm text-gray-700"},Tt={class:"hidden md:block","data-rec":"true"},Ct={class:"flex items-center justify-center md:hidden","data-rec":"true"},Nt={key:2,class:"flex items-center justify-center mt-5"},Mt={class:"flex flex-row items-center py-2.25 px-2.5 bg-gray-50 rounded-lg text-gray-700 mb-4"},St={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},Et=K({__name:"Token",setup($){const{api:c,isLoading:d}=Te(),{$e:b}=Se(),{copy:m}=Ce(),{t:u}=de(),p=h([]),_=h([]),k=se({isShow:!1,id:""}),g=h(1),w=h(!1),P=h(10),r=u("labels.token"),f=h({description:r}),j=h(""),C=se({total:0,pageSize:10}),S=h(!0),z=()=>{f.value.description=Ee([..._.value.map(e=>(e==null?void 0:e.description)||"")],r)},Q=e=>{k.isShow&&k.id===e?(k.isShow=!1,k.id=""):(k.isShow=!0,k.id=e)},Z=async(e=C.total)=>{try{const o=await c.orgTokens.list({query:{limit:e}});if(!o)return;_.value=o.list,z()}catch(o){D.error(await W(o))}},q=(e,o)=>{switch(e){case"add":{_.value=[..._.value,o];break}case"delete":{_.value=[..._.value.filter(R=>R.token!==o.token)];break}}z()},N=async(e=g.value,o=P.value,R=!1)=>{g.value=e;try{const I=await c.orgTokens.list({query:{limit:o,offset:j.value.length===0?(e-1)*o:0}});if(!I){S.value=!1;return}C.total=I.pageInfo.totalRows??0,C.pageSize=10,p.value=I.list,R&&(w.value=!1,f.value={}),_.value.length||await Z(C.total)}catch(I){D.error(await W(I))}finally{S.value&&(S.value=!1)}};N();const M=h(!1),U=h(""),L=h(""),E=h(!1),V=async e=>{try{await c.orgTokens.delete(e),await N(),q("delete",{token:e}),!p.value.length&&g.value!==1&&(g.value--,N(g.value))}catch(o){D.error(await W(o))}b("a:account:token:delete"),M.value=!1,L.value="",U.value=""},_e=e=>e?e.length<255:!1,oe=async()=>{if(E.value=_e(f.value.description),!!E.value)try{const e=await c.orgTokens.create(f.value);await N(g.value,P.value,!0),q("add",e)}catch(e){D.error(await W(e))}finally{b("a:api-token:generate")}},fe=async e=>{if(e)try{await m(e),D.info(u("msg.info.copiedToClipboard")),b("c:api-token:copy")}catch(o){D.error(o.message)}},ve=(e,o)=>{L.value=e,U.value=o,M.value=!0},he=e=>f.value.description===r&&(e==null?void 0:e.select()),ge=X(()=>{var o;const e=(o=f.value.description)==null?void 0:o.length;if(e){if(e>255)return u("msg.info.tokenNameMaxLength")}else return u("msg.info.tokenNameNotEmpty")}),ye=()=>{w.value=!1,E.value=!1};return(e,o)=>{const R=Pe,I=te,H=ue,F=ce,ke=me,xe=ie,J=Fe,we=je,be=ae,$e=De;return s(),y("div",Xe,[i(I,null,{icon:l(()=>[i(R,{class:"flex-none text-gray-700 h-5 w-5"})]),title:l(()=>[a("span",Ke,n(e.$t("title.tokens")),1)]),_:1}),a("div",Qe,[a("div",Ze,[a("div",Je,[a("h6",Ye,n(e.$t("title.apiTokens")),1),t(p).length?(s(),x(F,{key:0,disabled:!(("isEeUI"in e?e.isEeUI:t(le))&&t(p).length)},{title:l(()=>[T(n(e.$t("labels.tokenLimit")),1)]),default:l(()=>[i(H,{disabled:t(w)||("isEeUI"in e?e.isEeUI:t(le))&&t(p).length,class:"!rounded-md","data-testid":"nc-token-create",size:"middle",type:"primary",tooltip:"bottom",onClick:o[0]||(o[0]=v=>w.value=!0)},{default:l(()=>[a("span",et,n(e.$t("title.addNewToken")),1),a("span",tt,[(s(),x(G(("iconMap"in e?e.iconMap:t(B)).plus)))])]),_:1},8,["disabled"])]),_:1},8,["disabled"])):A("",!0)]),a("span",at,n(e.$t("msg.apiTokenCreate")),1),!t(S)&&(t(p).length||t(w))?(s(),y("div",ot,[a("div",nt,[a("div",st,[a("span",lt,n(e.$t("title.tokenName")),1),a("span",it,n(e.$t("title.creator")),1),a("span",rt,n(e.$t("labels.token")),1),a("span",ct,n(e.$t("labels.actions")),1)]),a("div",dt,[t(w)?(s(),y("div",ut,[a("div",{class:Ne(["flex gap-5 px-3 py-2.5 text-gray-500 font-medium text-3.5 w-full nc-token-generate border-b-1 border-l-1 border-r-1",{"rounded-b-md":!t(p).length}])},[a("div",pt,[i(ke,{ref:he,value:t(f).description,"onUpdate:value":o[1]||(o[1]=v=>t(f).description=v),"default-value":t(r),type:"text",class:"!rounded-lg !py-1",placeholder:"Token Name","data-testid":"nc-token-input",disabled:t(d),onPressEnter:oe},null,8,["value","default-value","disabled"]),t(E)?A("",!0):(s(),y("span",mt,n(t(ge)),1))]),a("div",_t,[t(d)?A("",!0):(s(),x(H,{key:0,type:"secondary",size:"small",onClick:ye},{default:l(()=>[T(n(e.$t("general.cancel")),1)]),_:1})),i(H,{type:"primary",size:"sm",loading:t(d),"data-testid":"nc-token-save-btn",onClick:oe},{default:l(()=>[T(n(e.$t("general.save")),1)]),_:1},8,["loading"])])],2)])):A("",!0),!t(p).length&&!t(w)?(s(),y("div",ft,[i(xe,{image:("Empty"in e?e.Empty:t(ie)).PRESENTED_IMAGE_SIMPLE,description:e.$t("labels.noToken")},null,8,["image","description"])])):A("",!0),(s(!0),y(re,null,Me(t(p),v=>(s(),y("div",{key:v.id,"data-testid":"nc-token-list",class:"flex pl-5 py-3 justify-between token items-center border-l-1 border-r-1 border-b-1"},[a("span",vt,[i(J,{placement:"top",length:20},{default:l(()=>[T(n(v.description),1)]),_:2},1024)]),a("span",ht,[i(J,{placement:"top",length:20},{default:l(()=>[T(n(v.created_by),1)]),_:2},1024)]),a("span",gt,[v.token===t(k).id&&t(k).isShow?(s(),x(J,{key:0,placement:"top",length:29},{default:l(()=>[T(n(v.token),1)]),_:2},1024)):(s(),y("span",yt,"************************************"))]),a("div",kt,[i(F,{placement:"top"},{title:l(()=>[T(n(e.$t("labels.showOrHide")),1)]),default:l(()=>[(s(),x(G(("iconMap"in e?e.iconMap:t(B)).eye),{class:"nc-toggle-token-visibility hover::cursor-pointer w-h-4 mb-[1.8px]",onClick:ne=>Q(v.token)},null,8,["onClick"]))]),_:2},1024),i(F,{placement:"top"},{title:l(()=>[T(n(e.$t("general.copy")),1)]),default:l(()=>[(s(),x(G(("iconMap"in e?e.iconMap:t(B)).copy),{class:"hover::cursor-pointer w-4 h-4 text-gray-600",onClick:ne=>fe(v.token)},null,8,["onClick"]))]),_:2},1024),i(F,{placement:"top"},{title:l(()=>[T(n(e.$t("general.delete")),1)]),default:l(()=>[(s(),x(G(("iconMap"in e?e.iconMap:t(B)).delete),{"data-testid":"nc-token-row-action-icon",class:"nc-delete-icon hover::cursor-pointer w-4 h-4",onClick:ne=>ve(v.token,v.description)},null,8,["onClick"]))]),_:2},1024)])]))),128))])])])):!t(S)&&!t(p).length&&!t(w)?(s(),y("div",xt,[wt,a("div",bt,n(e.$t("placeholder.noTokenCreated")),1),a("div",$t,n(e.$t("placeholder.noTokenCreatedLabel")),1),i(H,{class:"!rounded-lg !py-3 !h-10","data-testid":"nc-token-create",type:"primary",onClick:o[2]||(o[2]=v=>w.value=!0)},{default:l(()=>[a("span",Tt,n(e.$t("title.createNewToken")),1),a("span",Ct,[(s(),x(G(("iconMap"in e?e.iconMap:t(B)).plus)))])]),_:1})])):A("",!0),t(C).total>10?(s(),y("div",Nt,[i(we,{current:t(g),"onUpdate:current":o[3]||(o[3]=v=>ee(g)?g.value=v:null),total:t(C).total,"show-less-items":"",onChange:o[4]||(o[4]=v=>N(t(g),t(P)))},null,8,["current","total"])])):A("",!0)]),i($e,{visible:t(M),"onUpdate:visible":o[5]||(o[5]=v=>ee(M)?M.value=v:null),"entity-name":e.$t("labels.token"),"on-delete":()=>V(t(L))},{"entity-preview":l(()=>[a("span",null,[a("div",Mt,[i(be,{icon:"key",class:"nc-view-icon"}),a("div",St,n(t(U)),1)])])]),_:1},8,["visible","entity-name","on-delete"])])])}}}),It={class:"flex flex-col"},At={"data-rec":"true"},Ut={class:"nc-content-max-w p-6 h-[calc(100vh_-_100px)] flex flex-col gap-6 overflow-auto nc-scrollbar-thin"},Lt={class:"flex flex-col w-150 mx-auto"},Dt={class:"mt-5 flex flex-col border-1 rounded-2xl border-gray-200 p-6 gap-y-2"},Pt={class:"flex font-medium text-base","data-rec":"true"},jt={class:"flex text-gray-500","data-rec":"true"},zt={class:"flex flex-row mt-4"},Vt={class:"flex h-20 mt-1.5"},Rt=a("div",{class:"flex w-10"},null,-1),Gt={class:"text-gray-800 mb-1.5","data-rec":"true"},Bt={class:"text-gray-800 mb-1.5","data-rec":"true"},Ot={class:"flex flex-row w-full justify-end mt-8","data-rec":"true"},qt=K({__name:"Profile",setup($){const{user:c}=pe(),{t:d}=de(),b=h(!1),m=h(!1),u=h({title:"",email:""}),{updateUserProfile:p}=Ve(),_=h(),k={title:[{required:!0,message:d("msg.error.nameRequired")},{min:2,message:d("msg.error.nameMinLength")},{max:60,message:d("msg.error.nameMaxLength")}]},g=async()=>{var f;if(await _.value.validate()&&!m.value){m.value=!0,b.value=!1;try{await p({attrs:{display_name:(f=u.value)==null?void 0:f.title}})}catch(j){console.error(j)}finally{m.value=!1}}},w=X(()=>{var r;return(r=c.value)==null?void 0:r.email});Ie(()=>{var r;return(r=c.value)==null?void 0:r.display_name},()=>{var r;(r=c.value)!=null&&r.display_name&&(u.value.title=c.value.display_name,u.value.email=c.value.email)},{immediate:!0});const P=async(r,f)=>{b.value=!f};return(r,f)=>{var N,M;const j=ae,C=te,S=Ge,z=me,Q=Be,Z=ue,q=Oe;return s(),y("div",It,[i(C,null,{icon:l(()=>[i(j,{class:"flex-none !h-5 !w-5",icon:"user"})]),title:l(()=>[a("span",At,n(r.$t("labels.profile")),1)]),_:1}),a("div",Ut,[a("div",Lt,[a("div",Dt,[a("div",Pt,n(r.$t("labels.accountDetails")),1),a("div",jt,n(r.$t("labels.controlAppearance")),1),a("div",zt,[a("div",Vt,[i(S,{size:"xlarge",email:(N=t(c))==null?void 0:N.email,name:(M=t(c))==null?void 0:M.display_name},null,8,["email","name"])]),Rt,i(q,{ref_key:"formValidator",ref:_,layout:"vertical","no-style":"",model:t(u),class:"flex flex-col w-full",onFinish:g,onValidate:P},{default:l(()=>{var U,L,E;return[a("div",Gt,n(r.$t("general.name")),1),i(Q,{name:"title",rules:k.title},{default:l(()=>[i(z,{value:t(u).title,"onUpdate:value":f[0]||(f[0]=V=>t(u).title=V),class:"w-full !rounded-md !py-1.5",placeholder:r.$t("general.name"),"data-testid":"nc-account-settings-rename-input"},null,8,["value","placeholder"])]),_:1},8,["rules"]),a("div",Bt,n(r.$t("labels.accountEmailID")),1),i(z,{value:t(w),"onUpdate:value":f[1]||(f[1]=V=>ee(w)?w.value=V:null),class:"w-full !rounded-md !py-1.5",placeholder:r.$t("labels.email"),disabled:"","data-testid":"nc-account-settings-email-input"},null,8,["value","placeholder"]),a("div",Ot,[i(Z,{type:"primary","html-type":"submit",disabled:t(b)||((U=t(u))==null?void 0:U.title)&&((L=t(u))==null?void 0:L.title)===((E=t(c))==null?void 0:E.display_name),loading:t(m),"data-testid":"nc-account-settings-save",onClick:g},{loading:l(()=>[T(n(r.$t("general.saving")),1)]),default:l(()=>[T(" "+n(r.$t("general.save")),1)]),_:1},8,["disabled","loading"])])]}),_:1},8,["model"])])])])])])}}}),Ht=Ue(()=>Le(()=>import("./CN2NVkkR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url).then($=>$.default||$)),Ft={},Wt={class:"flex flex-col"},Xt={"data-rec":"true"},Kt={class:"nc-content-max-w p-6 h-[calc(100vh_-_100px)] flex flex-col gap-6 overflow-auto nc-scrollbar-thin"};function Qt($,c){const d=ae,b=te,m=Ht;return s(),y("div",Wt,[i(b,null,{icon:l(()=>[i(d,{icon:"appStore",class:"flex-none text-gray-700 text-[20px] h-5 w-5"})]),title:l(()=>[a("span",Xt,n($.$t("title.appStore")),1)]),_:1}),a("div",Kt,[a("div",null,[i(m)])])])}const Zt=Ae(Ft,[["render",Qt]]),Jt={key:5},Ea=K({__name:"[page]",setup($){const{appInfo:c}=pe();return(d,b)=>{const m=Et,u=ze,p=Re,_=qt,k=Zt;return s(),y("div",null,[(d._.provides[O]||d.$route).params.page==="tokens"?(s(),x(m,{key:0})):(d._.provides[O]||d.$route).params.page==="setup"?(s(),x(u,{key:1})):(d._.provides[O]||d.$route).params.page==="audit"?(s(),x(p,{key:2})):(d._.provides[O]||d.$route).params.page==="profile"?(s(),x(_,{key:3})):(d._.provides[O]||d.$route).params.page==="apps"&&!t(c).isCloud?(s(),x(k,{key:4})):(s(),y("span",Jt))])}}});export{Ea as default};
