import{f as _,N as B,bN as t,fP as P,aE as h,r as p,hG as D,hq as K,ad as O,g as b,de as R,gU as q,aF as G,i as T,o as a,c as r,P as n,a as z,t as g,T as A,R as L,dm as Q,Q as Y,U as $,aL as u,Y as l,aq as H,_ as J}from"./3QBYHahY.js";const W={key:0,class:"nc-currency-code h-full !bg-gray-100 border-r border-gray-200 px-3 mr-1 flex items-center"},X=["placeholder","disabled"],Z={key:2,class:"nc-cell-field nc-null uppercase"},ee={key:3,class:"nc-cell-field"},ne={key:4},se=_({__name:"Currency",props:{modelValue:{},placeholder:{},hidePrefix:{type:Boolean}},emits:["update:modelValue","save"],setup(I,{emit:N}){const E=I,x=N,{showNull:M}=B(),f=t(P),d=t(h),i=t(D,p(!1)),C=t(K,p(!1)),m=O(E,"modelValue",x),s=b({get:()=>m.value,set:o=>{o===""?m.value=null:m.value=o}}),v=p(),y=b(()=>{var o;return{currency_locale:"en-US",currency_code:"USD",...R((o=f==null?void 0:f.value)==null?void 0:o.meta)}}),F=b(()=>{try{return s.value===null||s.value===void 0||isNaN(s.value)?s.value:new Intl.NumberFormat(y.value.currency_locale||"en-US",{style:"currency",currency:y.value.currency_code||"USD"}).format(s.value)}catch{return s.value}}),S=t(q,p(!1)),c=t(G),j=o=>!S.value&&!i.value&&!c.value&&(o==null?void 0:o.focus()),w=()=>{v.value!==s.value&&(s.value=v.value=s.value??null,x("save")),d.value=!1},k=()=>{w()},U=()=>{/(Firefox|Safari)/.test(navigator.userAgent)&&w()};return T(()=>{v.value=s.value}),(o,e)=>(a(),r(H,null,[n(c)&&!n(i)&&n(d)&&!o.hidePrefix?(a(),r("div",W,[z("span",null,g(n(y).currency_code),1)])):A("",!0),!n(C)&&n(d)||n(c)&&!n(i)&&n(d)?L((a(),r("input",{key:1,ref:j,"onUpdate:modelValue":e[0]||(e[0]=V=>Y(s)?s.value=V:null),type:"number",class:$(["nc-cell-field h-full border-none rounded-md py-1 outline-none focus:outline-none focus:ring-0",n(c)&&!n(i)?"flex flex-1":"w-full"]),placeholder:o.placeholder,disabled:n(C),onBlur:k,onKeydown:[u(U,["enter"]),e[1]||(e[1]=u(l(()=>{},["stop"]),["down"])),e[2]||(e[2]=u(l(()=>{},["stop"]),["left"])),e[3]||(e[3]=u(l(()=>{},["stop"]),["right"])),e[4]||(e[4]=u(l(()=>{},["stop"]),["up"])),e[5]||(e[5]=u(l(()=>{},["stop"]),["delete"]))],onSelectstartCapture:e[6]||(e[6]=l(()=>{},["stop"])),onMousedown:e[7]||(e[7]=l(()=>{},["stop"])),onContextmenu:e[8]||(e[8]=l(()=>{},["stop"]))},null,42,X)),[[Q,n(s)]]):n(s)===null&&n(M)?(a(),r("span",Z,g(o.$t("general.null")),1)):isNaN(n(s))?(a(),r("span",ne)):(a(),r("span",ee,g(n(F)),1))],64))}}),le=J(se,[["__scopeId","data-v-e2b0ed2b"]]);export{le as default};
