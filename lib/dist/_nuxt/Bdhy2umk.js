import{e as L,r as d,F as T,o as m,c as f,a as o,t as a,b as l,w as s,d as c,N as t,O as j,aJ as S,R as $,a8 as D,ao as K,at as P,Q as Z,T as E,U as G,gZ as J,a$ as O,Y as Q,Z as Y,$ as q,_ as H}from"./DZZ6t_j4.js";import{_ as W}from"./CyRMlOXW.js";import{u as X}from"./RXURfzjs.js";import{u as ee}from"./TIQ2_Moa.js";import"./DKN1hQ6S.js";import{I as te}from"./BQuyMdA-.js";import"./0QUe8GCE.js";import"./B05h-4V9.js";import"./GMLocJHP.js";import"./CA74dF2b.js";import"./qW2V2r_p.js";import"./ByVBARmO.js";import"./boyBAVNN.js";import"./BDAIZopQ.js";import"./Bgw0NQgX.js";import"./EqBqqo9-.js";import"./C00NHga8.js";import"./C4K5fdHe.js";import"./C3XbZq4f.js";import"./DgixBgIx.js";import"./BYINaHrJ.js";import"./dfem9Uc_.js";import"./BCJFTkwv.js";import"./vll-Pnjv.js";import"./D9tFZoTQ.js";import"./C0-Qcoum.js";import"./B5RRVMt5.js";import"./DGj1ycqW.js";import"./BQQOEPN4.js";import"./DyDFI6NE.js";const le={class:"py-2 px-2 h-full flex gap-2 flex-col"},se={class:"flex w-full bg-white border-b-1 py-1 justify-between"},ae={class:"font-semibold"},oe={class:"flex-grow bg-white"},ie={class:"text-gray-800 font-semibold"},ne={class:"flex bg-white gap-2"},re={key:0,class:"text-red-500 text-[13px]"},ce={class:"font-semibold capitalize sticky top-0 bg-white text-gray-800"},pe={class:"flex w-full items-center gap-2"},de={class:"flex gap-2 items-center justify-end"},me=L({__name:"Url",emits:["update:visible"],setup(ue,{emit:C}){const U=C,{openAttachment:V}=X(),{uploadViaUrl:N,updateModelValue:z,attachments:F}=ee(),h=()=>{U("update:visible",!1)},w=d(null),n=d([]),A=async()=>{z([...F.value,...n.value]),h()},i=d(""),p=d(!1),M=e=>{n.value.splice(e,1)},r=d(!1),g=d(""),x=async()=>{if(!J(i.value)){r.value=!1;return}r.value=!0;try{p.value=!0;const e=await N({url:i.value},!0);typeof e!="string"&&(e!=null&&e.length)?(n.value=[...e,...n.value],i.value=""):(r.value=!1,g.value=e)}finally{p.value=!1}await O(()=>{var e;(e=w.value)==null||e.focus()})};return T(i,()=>{r.value=!0}),(e,_)=>{const y=Q,u=Y,b=q,B=te,R=W;return m(),f("div",le,[o("div",se,[o("h1",ae,a(e.$t("title.uploadViaUrl")),1),l(b,null,{title:s(()=>[c(a(e.$t("general.close")),1)]),default:s(()=>[l(u,{type:"secondary",class:"!border-0",size:"xsmall",onClick:h},{default:s(()=>[l(y,{icon:"close"})]),_:1})]),_:1})]),o("div",oe,[o("h1",ie,a(e.$t("labels.addFilesFromUrl")),1),o("div",ne,[l(B,{ref_key:"inputRef",ref:w,value:t(i),"onUpdate:value":_[0]||(_[0]=v=>j(i)?i.value=v:null),type:"url",disabled:t(p),class:"flex-grow",placeholder:"www.google.com/hello.png",onKeydown:S(x,["enter"])},null,8,["value","disabled"]),l(u,{disabled:!t(r),loading:t(p),size:"small",class:"!h-10 !px-4",onClick:x},{default:s(()=>[c(a(e.$t("general.upload")),1)]),_:1},8,["disabled","loading"])]),t(i).length>0&&!t(r)?(m(),f("span",re,a(t(g).length>0?t(g):e.$t("labels.enterValidUrl")),1)):$("",!0),t(n).length>0?(m(),f("div",{key:1,style:D(`height: ${t(r)?"230px":"208px"}`),class:"overflow-y-auto bg-white mt-1 !max-h-[250px]"},[o("h1",ce,a(e.$t("objects.files")),1),(m(!0),f(K,null,P(t(n),(v,k)=>(m(),f("div",{key:k,class:"flex w-full items-center mt-2 h-10 px-2 py-1 border-1 rounded-md"},[o("div",pe,[l(y,{icon:"file"}),c(" "+a(v.title)+" ",1),l(b,{class:"hover:underline"},{title:s(()=>[c(a(e.$t("labels.openFile")),1)]),default:s(()=>[l(R,{class:"flex items-center",target:"_blank",onClick:I=>t(V)(v)},{default:s(()=>[(m(),Z(E(("iconMap"in e?e.iconMap:t(G)).externalLink),{class:"w-3.5 h-3.5 text-gray-500"}))]),_:2},1032,["onClick"])]),_:2},1024)]),_[1]||(_[1]=o("div",{class:"flex-grow-1"},null,-1)),l(b,null,{title:s(()=>[c(a(e.$t("title.removeFile")),1)]),default:s(()=>[l(u,{type:"text",size:"xsmall",onClick:I=>M(k)},{default:s(()=>[l(y,{icon:"close"})]),_:2},1032,["onClick"])]),_:2},1024)]))),128))],4)):$("",!0)]),o("div",de,[l(u,{disabled:t(p),type:"secondary",size:"small",onClick:h},{default:s(()=>[c(a(e.$t("labels.cancel")),1)]),_:1},8,["disabled"]),l(u,{disabled:t(p)||t(n).length===0,size:"small",onClick:A},{default:s(()=>[c(a(e.$t("activity.addFiles")),1)]),_:1},8,["disabled"])])])}}}),Ee=H(me,[["__scopeId","data-v-95ae45e5"]]);export{Ee as default};
