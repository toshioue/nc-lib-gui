const __vite__fileDeps=["./DDp3Vqr0.js","./DKhUGBot.js","./entry.B8GgT5QA.css","./lyxpGZoZ.js","./BInREqof.js","./Cx8swDhG.js","./MenuItem.C7h59s4s.css","./Burj4haU.js","./CyGutrdy.js","./Menu.CQ8GNWeI.css","./YfoePngN.js","./DL47xb_5.js","./DFT4Rrrq.js","./DOSyHa8b.js","./Clu_wjSJ.js","./DeleteModal.SEMJ_gSK.css","./D-d1Vlq3.js","./DGy9VVU7.js","./BqRqK2Ui.js","./CNjr3NNT.js","./CUg8TjpL.js","./CzWiRRCe.js","./D009Cmxe.js","./BMlI7u7p.js","./BDyus9Cs.js","./Ce4Hnuew.js","./Menu.D_rr_iPw.css","./DEmMk44y.js","./BE1_LBl_.js","./BuIhGPvc.js","./Cz8K5PX4.js","./GPQ-Eg6I.js","./BQQOEPN4.js","./BOlDoh1A.js","./BpnlUwoJ.js","./CxxuE4Yq.js","./SpRAMPoI.js","./B5mlyM8k.js","./u8rUVe3y.js","./DyY7ABnl.js","./BY49hpjj.js","./DEJjMRn_.js","./DgXVCOuO.js","./DKmEfV3N.js","./BtAVuBkh.js","./B6Ky1gTN.js","./SelectOptions.JaHDUZhn.css","./BuggOm2-.js","./DPW1f6my.js","./D_FwWME_.js","./CX4Cv_ut.js","./DX_5E9FR.js","./gHfFefeo.js","./B0emH2s-.js","./C9s6MY6c.js","./DNxjIm4c.js","./Switch.CEh6YzqD.css","./C9Sjn86N.js","./BkUIf4Fh.js","./G7I_n9Op.js","./Cx8Z_l6r.js","./C600yAEI.js","./Select.Ct6CicDJ.css","./B6zJhUZ3.js","./CX32jp6d.js","./EditOrAddProvider.CRN0tnY2.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as de,ai as ce,ab as G,N as pe,r as p,bL as I,d1 as ve,av as me,fG as fe,cP as _e,L as ye,d0 as be,hs as he,az as ke,gw as we,hH as Ie,g as _,fw as J,hL as xe,cU as B,d4 as Ce,hI as F,fH as Oe,o as i,c as y,a as N,P as e,al as K,U as T,w as x,d as Q,t as P,b as j,S as b,T as L,Q as W,Y as D,Z as U,a5 as z,hJ as Te,ap as ge,$ as Ee,af as Me,_ as $e}from"./DKhUGBot.js";import{b as Le,c as De,d as Re,e as Ae,g as Y}from"./lyxpGZoZ.js";import{b as Ve}from"./Ce4Hnuew.js";const Be=U(()=>z(()=>import("./DDp3Vqr0.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(u=>u.default||u)),Fe=U(()=>z(()=>import("./BInREqof.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10,0,3,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url).then(u=>u.default||u)),Ne=U(()=>z(()=>import("./DEmMk44y.js"),__vite__mapDeps([27,28,1,2,14,15,7,29,30,31,32,20,33,34,35,36,37,38,39,40,41,42,43,44,45,46,25,47,48,49,50,51,52,53,0,3,11,12,23,17,54,55,56,57,58,59,19,60,61,62,63,64,65]),import.meta.url).then(u=>u.default||u)),Pe=["data-test-id"],je={key:1,class:"text-red-500"},Ue={key:0,class:"flex-1"},ze={key:1},He={class:"nc-edit-or-add-provider-wrapper"},Se=de({__name:"VirtualCell",props:{column:{},hideMenu:{type:Boolean},required:{type:[Boolean,Number]},hideIcon:{type:Boolean},isHiddenCol:{type:Boolean}},setup(u){const R=u,{t:g}=ce(),t=G(R,"column"),Z=G(R,"hideMenu"),{isMobileMode:h}=pe(),s=p(!1),r=p(!1),H=I(ve,p(!1));me(fe,t);const{metas:X}=_e(),{isUIAllowed:k,isMetaReadOnly:ee}=ye(),d=I(be,p()),te=I(he,p(!1)),A=I(ke,p(!1)),n=I(we,p(!1)),c=I(Ie,p(!1)),V=_(()=>{var l;return(l=d==null?void 0:d.value)==null?void 0:l.title}),S=_(()=>{var l,o,a,v,m,f;return J(t.value)?(l=t.value)==null?void 0:l.colOptions:(a=(o=t==null?void 0:t.value)==null?void 0:o.colOptions)!=null&&a.fk_relation_column_id?(f=(m=(v=d==null?void 0:d.value)==null?void 0:v.columns)==null?void 0:m.find(w=>{var C,O;return w.id===((O=(C=t==null?void 0:t.value)==null?void 0:C.colOptions)==null?void 0:O.fk_relation_column_id)}))==null?void 0:f.colOptions:null}),le=_(()=>{var l,o,a;return((l=S.value)==null?void 0:l.fk_related_model_id)&&((a=X.value)==null?void 0:a[(o=S.value)==null?void 0:o.fk_related_model_id])}),E=_(()=>{var l;return(l=le.value)==null?void 0:l.title}),oe=_(()=>{var l,o,a,v,m,f,w;return t.value?Le(t.value)?`'${V.value}' ${g("labels.hasMany")} '${E.value}'`:De(t.value)?`'${V.value}' & '${E.value}' ${g("labels.manyToMany")}`:Re(t.value)?`'${(l=t==null?void 0:t.value)==null?void 0:l.title}' ${g("labels.belongsTo")} '${E.value}'`:Ae(t.value)?`'${V.value}' & '${E.value}' ${g("labels.oneToOne")}`:Y(t.value)?`Formula - ${xe((a=(o=t.value)==null?void 0:o.colOptions)==null?void 0:a.formula,(v=d==null?void 0:d.value)==null?void 0:v.columns,(f=(m=t.value)==null?void 0:m.colOptions)==null?void 0:f.formula_raw)}`:((w=t==null?void 0:t.value)==null?void 0:w.title)||"":""}),ae=_(()=>J(t.value)||Y(t.value)),M=p(null),se=_(()=>{var l,o,a;return t.value.uidt===B.LongText&&((o=Ce((l=t==null?void 0:t.value)==null?void 0:l.meta))!=null&&o.richMode)?F.RichText:t.value.uidt===B.LinkToAnotherRecord&&((a=t.value.colOptions)==null?void 0:a.type)===Oe.ONE_TO_ONE?F[B.Links]:t.value.uidt?F[t.value.uidt]:""}),ne=async l=>{M.value=l,s.value=!0},q=()=>{M.value=null,s.value=!1},ie=l=>{H.value||n.value&&(l==null?void 0:l.type)==="dblclick"||c.value||!A.value&&k("fieldEdit")&&!h.value&&(!ee.value||Te.includes(t.value.uidt))&&(s.value=!0)},re=l=>{H.value||A.value||!k("fieldEdit")&&!h.value||(l.preventDefault(),l.stopPropagation(),r.value=!r.value)},ue=l=>{if(!(h.value||!k("fieldEdit"))){if(r.value)l.preventDefault(),l.stopPropagation();else if(n.value&&!s.value&&!c.value){r.value=!0;return}r.value=!1}};return(l,o)=>{var O;const a=Be,v=ge,m=Ee,f=Fe,w=Ne,C=Me;return i(),y("div",{class:L(["flex items-center w-full h-full text-small text-gray-500 font-weight-medium group",{"flex-col !items-start justify-center pt-0.5":e(n)&&!e(h)&&!e(c),"bg-gray-100":e(n)&&!e(c)?e(s)||e(r):!1,"nc-cell-expanded-form-header cursor-pointer hover:bg-gray-100":e(n)&&!e(h)&&e(k)("fieldEdit")&&!e(c)}]),onDblclick:ie,onContextmenu:D(re,["right"]),onClick:ue},[N("div",{class:L(["nc-virtual-cell-name-wrapper flex-1 flex items-center",{"max-w-[calc(100%_-_23px)]":!e(n),"max-w-full":e(n)&&!e(c)}])},[e(t)&&!R.hideIcon?(i(),y(K,{key:0},[e(te)?(i(),T(v,{key:0,class:"flex items-center",placement:"bottom"},{title:x(()=>[Q(P(e(se)),1)]),default:x(()=>[j(a)]),_:1})):(i(),T(a,{key:1}))],64)):b("",!0),j(v,{placement:"bottom",class:"truncate name pl-1","show-on-truncate-only":!e(ae)},{title:x(()=>[Q(P(e(oe)),1)]),default:x(()=>[N("span",{"data-test-id":e(t).title,class:L({"select-none":e(n)&&!e(c)})},P(e(t).title),11,Pe)]),_:1},8,["show-on-truncate-only"]),("isVirtualColRequired"in l?l.isVirtualColRequired:e(Ve))(e(t),((O=e(d))==null?void 0:O.columns)||[])||l.required?(i(),y("span",je," *")):b("",!0),e(n)&&!e(h)&&e(k)("fieldEdit")&&!e(c)?(i(),T(m,{key:2,icon:"arrowDown",class:L(["flex-none cursor-pointer ml-1 group-hover:visible w-4 h-4",{visible:e(s)||e(r),invisible:!(e(s)||e(r))}])},null,8,["class"])):b("",!0)],2),e(Z)?b("",!0):(i(),y(K,{key:0},[e(n)?b("",!0):(i(),y("div",Ue)),!e(A)&&e(k)("fieldEdit")?(i(),T(f,{key:1,"is-open":e(r),"onUpdate:isOpen":o[0]||(o[0]=$=>W(r)?r.value=$:null),"is-hidden-col":l.isHiddenCol,virtual:!0,onAddColumn:ne,onEdit:o[1]||(o[1]=$=>s.value=!0)},null,8,["is-open","is-hidden-col"])):b("",!0)],64)),j(C,{visible:e(s),"onUpdate:visible":o[5]||(o[5]=$=>W(s)?s.value=$:null),class:"h-full",trigger:["click"],placement:e(n)&&!e(c)?"bottomLeft":"bottomRight","overlay-class-name":`nc-dropdown-edit-column ${e(s)?"active":""}`},{overlay:x(()=>[N("div",He,[e(s)?(i(),T(w,{key:0,column:e(M)?null:e(t),"column-position":e(M),class:"w-full",onSubmit:q,onCancel:q,onClick:o[3]||(o[3]=D(()=>{},["stop"])),onKeydown:o[4]||(o[4]=D(()=>{},["stop"]))},null,8,["column","column-position"])):b("",!0)])]),default:x(()=>[e(n)&&!e(c)?(i(),y("div",{key:0,class:"h-[1px]",onDblclick:o[2]||(o[2]=D(()=>{},["stop"]))}," ",32)):(i(),y("div",ze))]),_:1},8,["visible","placement","overlay-class-name"])],34)}}}),Ke=$e(Se,[["__scopeId","data-v-62a06176"]]);export{Ke as default};
