import{e as B,K as E,ag as L,ft as M,az as l,r as b,dz as T,aD as U,gR as q,z as H,gS as J,ar as K,F as A,o as d,c,b as t,w as r,N as s,Q as G,R as u,O,S as Q,a as _,d as f,t as m,ce as Y,a2 as Z,Y as W,Z as X,ca as ee,a3 as se,dJ as ae,gT as te,d7 as oe,_ as re}from"./DZZ6t_j4.js";import{u as ne}from"./9kNwGLxE.js";import{u as ie}from"./bNr_om_C.js";import{u as le}from"./B05h-4V9.js";import{F as de}from"./BYINaHrJ.js";import{_ as me}from"./DyDFI6NE.js";import{_ as pe}from"./dfem9Uc_.js";import"./GMLocJHP.js";import"./qW2V2r_p.js";import"./ByVBARmO.js";import"./boyBAVNN.js";import"./BDAIZopQ.js";import"./CA74dF2b.js";import"./BCU2uY6p.js";import"./C3jLTHF4.js";import"./C4K5fdHe.js";import"./D9tFZoTQ.js";import"./vll-Pnjv.js";import"./BQuyMdA-.js";import"./BQQOEPN4.js";import"./BCJFTkwv.js";const ce=""+new URL("form.DESRCJtL.png",import.meta.url).href,ue={class:"flex flex-col gap-5"},_e={class:"flex flex-row items-center gap-x-2 text-base font-weight-700 text-gray-800"},fe={key:0,class:"mb-2 text-sm text-red-500"},we={class:"flex flex-row justify-end gap-x-2"},ge={key:1,alt:"view image",src:ce,class:"fixed inset-0 w-full h-full"},ve=B({__name:"[viewId]",async setup(he){let w,g;ne("nc-left-sidebar",{hasSidebar:!1});const x=E(),{t:y}=L(),{loadSharedView:p,sharedView:k,sharedViewMeta:I,meta:v,notFound:S,password:C,passwordDlg:o,passwordError:h}=ie(x.params.viewId);if([w,g]=M(()=>p()),await w,g(),!S.value)l(te,ae()),l(oe,v),l(T,b(!0)),l(U,b(!0)),le(k,v,!0),q(I.value.rtl?"rtl":"ltr");else throw H("/error/404"),J({statusCode:404,statusMessage:y("msg.pageNotFound")});const n=K({password:""});A(()=>n.password,()=>{C.value=n.password});const F=e=>{var a;return e&&((a=e==null?void 0:e.focus)==null?void 0:a.call(e))};return(e,a)=>{const N=Z,R=W,V=me,$=pe,P=de,j=X,D=ee,z=se;return d(),c("div",null,[t(z,null,{default:r(()=>[s(o)?u("",!0):(d(),G(N,{key:0})),t(D,{visible:s(o),"onUpdate:visible":a[1]||(a[1]=i=>O(o)?o.value=i:null),class:Q({active:s(o)}),closable:!1,width:"min(100%, 450px)",centered:"",footer:null,"mask-closable":!1,"wrap-class-name":"nc-modal-shared-form-password-dlg","mask-style":{backgroundColor:"rgba(255, 255, 255, 0.64)",backdropFilter:"blur(8px)"},onClose:a[2]||(a[2]=i=>o.value=!1)},{default:r(()=>[_("div",ue,[_("div",_e,[t(R,{icon:"ncKey",class:"!text-base w-5 h-5"}),f(" "+m(e.$t("msg.thisSharedViewIsProtected")),1)]),t(P,{model:s(n),onFinish:s(p)},{default:r(()=>[t($,{name:"password",rules:[{required:!0,message:e.$t("msg.error.signUpRules.passwdRequired")}],class:"!mb-0"},{default:r(()=>[t(V,{ref:F,value:s(n).password,"onUpdate:value":a[0]||(a[0]=i=>s(n).password=i),class:"!rounded-lg !text-small","hide-details":"",placeholder:e.$t("msg.enterPassword")},null,8,["value","placeholder"]),t(Y,{name:"layout"},{default:r(()=>[s(h)?(d(),c("div",fe,m(s(h)),1)):u("",!0)]),_:1})]),_:1},8,["rules"])]),_:1},8,["model","onFinish"]),_("div",we,[t(j,{disabled:!s(n).password,type:"primary",size:"small","html-type":"submit",class:"!px-2","data-testid":"nc-shared-view-password-submit-btn",onClick:s(p)},{loading:r(()=>[f(m(e.$t("msg.verifyingPassword")),1)]),default:r(()=>[f(m(e.$t("objects.view"))+" ",1)]),_:1},8,["disabled","onClick"])])])]),_:1},8,["visible","class"]),s(o)?(d(),c("img",ge)):u("",!0)]),_:1})])}}}),Ue=re(ve,[["__scopeId","data-v-e4fe6d26"]]);export{Ue as default};
