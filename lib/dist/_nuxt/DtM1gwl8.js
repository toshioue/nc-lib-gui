import{f as H,ba as Q,r as w,g as k,i as Y,H as j,O as q,o as i,c as m,a as u,b as v,w as y,P as t,Q as z,aF as f,Y as p,d as S,t as x,S as N,al as G,am as W,R as J,T as $,U as X,$ as Z,ap as ee,p as te,e as oe,_ as se}from"./B2hUoZAs.js";import{_ as ne}from"./B4WiVz4N.js";import{_ as ae}from"./CGB_6kIS.js";import"./BWYzyVlv.js";import{I as le}from"./CwHJfKcC.js";const ce=c=>(te("data-v-557b6cc4"),c=c(),oe(),c),re=["onKeydown"],ie={class:"nc-field-list-wrapper flex-col w-full max-h-100 nc-scrollbar-thin !overflow-y-auto px-2 pb-2"},pe={key:0,class:"px-2 py-6 text-gray-500 flex flex-col items-center gap-6"},ue=ce(()=>u("img",{src:ae,class:"!w-[164px] flex-none",alt:"No search results found"},null,-1)),de=["onClick"],me=H({__name:"FieldListWithSearch",props:{isParentOpen:{type:Boolean},toolbarMenu:{},searchInputPlaceholder:{},selectedOptionId:{},options:{},showSelectedOption:{type:Boolean}},emits:["selected"],setup(c,{emit:B}){const M=c,E=B,{isParentOpen:g,toolbarMenu:T,searchInputPlaceholder:K,selectedOptionId:R,options:b,showSelectedOption:h}=Q(M),l=w(""),a=k(()=>{var e;return((e=b.value)==null?void 0:e.filter(s=>{var r;return(r=s.title)==null?void 0:r.toLowerCase().includes(l.value.toLowerCase())}))??[]}),C=w(),o=w(-1),I=k(()=>{switch(T.value){case"groupBy":return{selectOptionEvent:["c:group-by:add:column:select"],optionClassName:"nc-group-by-column-search-item"};case"sort":return{selectOptionEvent:["c:sort:add:column:select"],optionClassName:"nc-sort-column-search-item"};case"globalSearch":return{selectOptionEvent:["c:search:field:select"],optionClassName:""};default:return{selectOptionEvent:void 0,optionClassName:""}}}),d=e=>{e&&E("selected",e)},O=()=>{const e=document.querySelector(".nc-field-list-option-active");e&&setTimeout(()=>{e==null||e.scrollIntoView({behavior:"smooth",block:"center"})},50)},F=()=>{o.value=Math.min(o.value+1,a.value.length-1),O()},P=()=>{o.value=Math.max(o.value-1,0),O()},V=()=>{(a.value[o.value]||a.value[0])&&d(a.value[o.value])};return Y(()=>{l.value="",o.value=-1}),j(g,()=>{g.value&&(l.value="",setTimeout(()=>{var e;(e=C.value)==null||e.focus()},100))},{immediate:!0}),(e,s)=>{const r=Z,D=le,L=ne,A=ee,U=q("e");return i(),m("div",{class:"flex flex-col pt-2 w-64",onKeydown:[f(p(F,["prevent"]),["arrow-down"]),f(p(P,["prevent"]),["arrow-up"]),s[3]||(s[3]=f(p(n=>d(t(a)[t(o)]),["prevent"]),["enter"]))]},[u("div",{class:"w-full pb-2 px-2",onClick:s[2]||(s[2]=p(()=>{},["stop"]))},[v(D,{ref_key:"inputRef",ref:C,value:t(l),"onUpdate:value":s[0]||(s[0]=n=>z(l)?l.value=n:null),placeholder:t(K)||e.$t("placeholder.searchFields"),class:"nc-toolbar-dropdown-search-field-input",onKeydown:f(p(V,["stop"]),["enter"]),onChange:s[1]||(s[1]=n=>o.value=0)},{prefix:y(()=>[v(r,{icon:"search",class:"nc-search-icon h-3.5 w-3.5 mr-1"})]),_:1},8,["value","placeholder","onKeydown"])]),u("div",ie,[t(a).length?N("",!0):(i(),m("div",pe,[ue,S(" "+x(t(b).length?e.$t("title.noResultsMatchedYourSearch"):"The list is empty"),1)])),(i(!0),m(G,null,W(t(a),(n,_)=>J((i(),m("div",{key:_,class:$(["flex w-full py-[5px] items-center justify-between px-2 hover:bg-gray-100 cursor-pointer rounded-md",[`${t(I).optionClassName}`,`nc-field-list-option-${_}`,{"bg-gray-100 nc-field-list-option-active":t(o)===_}]]),onClick:ve=>d(n)},[u("div",{class:$(["flex items-center gap-x-1.5",{"max-w-[calc(100%_-_28px)]":t(h),"max-w-full":!t(h)}])},[v(L,{column:n,class:"!w-3.5 !h-3.5 !text-gray-500"},null,8,["column"]),v(A,{class:"truncate","show-on-truncate-only":""},{title:y(()=>[S(x(n.title),1)]),default:y(()=>[u("span",null,x(n.title),1)]),_:2},1024)],2),t(h)&&n.id===t(R)?(i(),X(r,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):N("",!0)],10,de)),[[U,t(I).selectOptionEvent]])),128))])],40,re)}}}),xe=se(me,[["__scopeId","data-v-557b6cc4"]]);export{xe as _};
