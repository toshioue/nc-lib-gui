import{e as F,u as V,L as P,ax as g,r as T,f as m,F as v,g as W,k as X,o as j,Q as D,w,b as L,N as a,a8 as h,a as G,S as M,a6 as O}from"./DZZ6t_j4.js";import{u as $}from"./DS_HXCWn.js";import{u as Q}from"./CMIIcM5i.js";import{g as B,M as U}from"./B0udi9ji.js";const c=250,Y=F({__name:"View",setup(q){const b=V().currentRoute,{setLeftSidebarSize:N}=P(),{isMobileMode:u}=g($()),{isLeftSidebarOpen:i,leftSidebarWidthPercent:f,leftSideBarSize:e,leftSidebarState:t,mobileNormalizedSidebarSize:p}=g(Q()),E=T(),o=T(window.innerWidth),d=m({get:()=>e.value.current,set:n=>{e.value.current=n,e.value.old=n}}),{handleSidebarOpenOnMobileForNonViews:_}=$(),x=m(()=>u.value?i.value?0:100:100-f.value);v(d,()=>{f.value=d.value/o.value*100,N({current:d.value,old:e.value.old})});const r=m(()=>u.value?o.value:e.value.old),S=n=>{const l=parseFloat(getComputedStyle(document.documentElement).fontSize);return n*l},k=m(()=>{const n=S(o.value<=1560?20:35),l=S(16);return r.value>n?n:r.value<l?l:r.value});v(i,()=>{e.value.current=e.value.old,i.value?(setTimeout(()=>t.value="openStart",0),setTimeout(()=>t.value="openEnd",c)):(e.value.old=e.value.current,e.value.current=0,t.value="hiddenStart",setTimeout(()=>{t.value="hiddenEnd"},c))});function C(n){u.value||E.value&&t.value!=="openEnd"&&(n.clientX<4&&["hiddenEnd","peekCloseEnd"].includes(t.value)?(t.value="peekOpenStart",setTimeout(()=>{t.value="peekOpenEnd"},c)):n.clientX>r.value+10&&t.value==="peekOpenEnd"&&(t.value="peekCloseOpen",setTimeout(()=>{t.value="peekCloseEnd"},c)))}function z(n){o.value=window.innerWidth,!n&&i.value&&!e.value.current&&!u.value&&(d.value=e.value.old),f.value=d.value/o.value*100,n&&k.value<r.value&&y(f.value)}W(()=>{document.addEventListener("mousemove",C),window.addEventListener("resize",z)}),X(()=>{document.removeEventListener("mousemove",C),window.removeEventListener("resize",z)}),v(b,()=>{b.value.name==="index-index"&&(i.value=!0)}),v(u,()=>{i.value=!u.value}),v(t,()=>{t.value==="peekCloseEnd"&&setTimeout(()=>{t.value="hiddenEnd"},c)}),W(()=>{_()});function y(n){if(u.value)return;const l=n*o.value/100,s=parseFloat(getComputedStyle(document.documentElement).fontSize);if(o.value<=1560&&l>S(20)){e.value.old=20*s,i.value&&(e.value.current=e.value.old);return}const R=l/s;if(R<16){e.value.old=16*s,i.value&&(e.value.current=e.value.old);return}else if(R>35){e.value.old=35*s,i.value&&(e.value.current=e.value.old);return}e.value.old=l,e.value.current=e.value.old}return(n,l)=>(j(),D(a(U),{class:M(["nc-sidebar-content-resizable-wrapper !w-screen h-full",{"hide-resize-bar":!a(i)||a(t)==="openStart"}]),onReady:l[0]||(l[0]=()=>z()),onResize:l[1]||(l[1]=s=>y(s[0].size))},{default:w(()=>[L(a(B),{"min-size":"15%",size:a(p),"max-size":"60%",class:"nc-sidebar-splitpane !sm:max-w-140 relative !overflow-visible flex",style:h({width:`${a(p)}%`,"min-width":`${a(p)}%`})},{default:w(()=>[G("div",{ref_key:"wrapperRef",ref:E,class:M(["nc-sidebar-wrapper relative flex flex-col h-full justify-center !sm:max-w-140 absolute overflow-visible",{mobile:a(u),"minimized-height":!a(i),"hide-sidebar":["hiddenStart","hiddenEnd","peekCloseEnd"].includes(a(t))}]),style:h({width:a(t)==="hiddenEnd"?"0px":`${a(r)}px`,minWidth:a(t)==="hiddenEnd"?"0px":`${a(k)}px`})},[O(n.$slots,"sidebar")],6)]),_:3},8,["size","style"]),L(a(B),{size:a(x),class:"flex-grow",style:h({"min-width":`${a(x)}%`})},{default:w(()=>[O(n.$slots,"content")]),_:3},8,["size","style"])]),_:3},8,["class"]))}});export{Y as default};
