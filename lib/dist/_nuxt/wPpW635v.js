const __vite__fileDeps=["./BIhr-Z4C.js","./DZZ6t_j4.js","./entry.DIDWwc7m.css","./ByVBARmO.js","./C4K5fdHe.js","./VirtualCell.BYk4C8Tn.css","./DG2ZH8TR.js","./CA74dF2b.js","./GMLocJHP.js","./qW2V2r_p.js","./boyBAVNN.js","./BDAIZopQ.js","./Cell.DUBzJZSm.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e as G,cW as Q,bL as _,r as m,g2 as X,d7 as R,i6 as q,iu as J,i1 as V,az as A,f as g,F as j,c$ as n,g3 as w,i_ as K,ir as Y,o as a,c as r,a as x,N as e,ao as b,f$ as Z,at as H,Q as O,b as ee,S as k,t as P,R as I,a8 as le,X as F,a4 as M}from"./DZZ6t_j4.js";import{i as d,H as z}from"./C4K5fdHe.js";import{u as te}from"./EEzJqQ4V.js";import"./EqBqqo9-.js";const ae=F(()=>M(()=>import("./BIhr-Z4C.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(f=>f.default||f)),ne=F(()=>M(()=>import("./DG2ZH8TR.js"),__vite__mapDeps([6,1,2,7,8,9,3,10,11,4,12]),import.meta.url).then(f=>f.default||f)),oe={key:0,class:"flex h-full"},ie={key:0},se={key:0,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},ue={key:1,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},pe=G({__name:"Lookup",setup(f){const{metas:L,getMeta:W}=Q(),S=_(X,m()),N=_(R,m()),v=_(q,m()),$=_(J,m(!1)),E=m(1),o=_(V,m(1));A(V,E);const y=g(()=>{var l,i,s,c;return(l=N.value)!=null&&l.id?(c=(s=L.value[(i=N.value)==null?void 0:i.id])==null?void 0:s.columns)==null?void 0:c.find(u=>{var h,B;return u.id===((B=(h=S.value)==null?void 0:h.colOptions)==null?void 0:B.fk_relation_column_id)}):void 0});j(y,async l=>{l&&l.colOptions&&await W(l.colOptions.fk_related_model_id)},{immediate:!0});const C=g(()=>{var l;if(y.value&&((l=y.value)!=null&&l.colOptions))return L.value[y.value.colOptions.fk_related_model_id]}),t=g(()=>{var l,i;return(i=(l=C.value)==null?void 0:l.columns)==null?void 0:i.find(s=>{var c,u;return s.id===((u=(c=S.value)==null?void 0:c.colOptions)==null?void 0:u.fk_lookup_column_id)})});j([t,o],()=>{t.value&&!d(t.value)?E.value=1:E.value=o.value});const p=g(()=>{var l,i,s;return v.value?((l=t.value)==null?void 0:l.uidt)===n.Attachment&&[w.BELONGS_TO,w.ONE_TO_ONE].includes((s=(i=y.value)==null?void 0:i.colOptions)==null?void 0:s.type)?[v.value]:Array.isArray(v.value)?v.value.filter(c=>c!==null):[v.value]:[]});A(R,C),A(K,m(!0)),A(Y,m(!0));const{showEditNonEditableFieldWarning:D,showClearNonEditableFieldWarning:U,activateShowEditNonEditableFieldWarning:T}=te();return(l,i)=>{const s=ae,c=ne;return a(),r("div",{class:"nc-cell-field h-full w-full nc-lookup-cell",tabindex:"-1",style:le({height:e($)||e(t)&&("isAttachment"in l?l.isAttachment:e(d))(e(t))?void 0:e(o)?`${e(o)===1?("rowHeightInPx"in l?l.rowHeightInPx:e(z))[1]-4:("rowHeightInPx"in l?l.rowHeightInPx:e(z))[`${e(o)}`]-18}px`:"2.85rem"}),onDblclick:i[0]||(i[0]=(...u)=>e(T)&&e(T)(...u))},[x("div",{class:k(["h-full w-full flex gap-1",{"!overflow-x-auto nc-cell-lookup-scroll nc-scrollbar-x-md !overflow-y-hidden":e(o)===1}])},[e(t)?(a(),r(b,{key:0},[e(Z)(e(t))&&e(t).uidt!==e(n).Rollup?(a(),r("div",oe,[e(t).uidt!==e(n).LinkToAnotherRecord||e(t).uidt===e(n).LinkToAnotherRecord&&[e(w).BELONGS_TO,e(w).ONE_TO_ONE].includes(e(t).colOptions.type)?(a(!0),r(b,{key:0},H(e(p),(u,h)=>(a(),O(s,{key:h,"edit-enabled":!1,"model-value":u,column:e(t),"read-only":!0},null,8,["model-value","column"]))),128)):(a(),O(s,{key:1,"edit-enabled":!1,"read-only":!0,"model-value":e(p),column:e(t)},null,8,["model-value","column"]))])):(a(),r(b,{key:1},[("isAttachment"in l?l.isAttachment:e(d))(e(t))&&e(p)[0]&&!Array.isArray(e(p)[0])&&typeof e(p)[0]=="object"?(a(),r("div",ie,[ee(c,{"model-value":e(p),column:e(t),"edit-enabled":!1,"read-only":!0},null,8,["model-value","column"])])):(a(),r("div",{key:1,class:k(["max-h-full max-w-full w-full nc-cell-lookup-scroll",{"nc-scrollbar-md ":e(o)!==1&&!("isAttachment"in l?l.isAttachment:e(d))(e(t))}])},[x("div",{class:k(["flex gap-1.5 w-full h-full py-[3px]",{"flex-wrap":e(o)!==1&&!("isAttachment"in l?l.isAttachment:e(d))(e(t)),"!overflow-x-auto nc-cell-lookup-scroll nc-scrollbar-x-md !overflow-y-hidden":e(o)===1||("isAttachment"in l?l.isAttachment:e(d))(e(t)),"items-center":e(o)===1,"items-start":e(o)!==1}])},[(a(!0),r(b,null,H(e(p),(u,h)=>(a(),r("div",{key:h,class:k(["flex-none",{"bg-gray-100 rounded-full":!("isAttachment"in l?l.isAttachment:e(d))(e(t)),"border-gray-200 rounded border-1":![e(n).Attachment,e(n).MultiSelect,e(n).SingleSelect,e(n).User,e(n).CreatedBy,e(n).LastModifiedBy].includes(e(t).uidt),"min-h-0 min-w-0":("isAttachment"in l?l.isAttachment:e(d))(e(t))}])},[e(t).uidt===e(n).Rollup?(a(),O(s,{key:0,"edit-enabled":!1,"read-only":!0,"model-value":u,column:e(t),class:"px-2"},null,8,["model-value","column"])):(a(),O(c,{key:1,"model-value":u,column:e(t),"edit-enabled":!1,virtual:!0,"read-only":!0,class:k([`${[e(n).MultiSelect,e(n).SingleSelect,e(n).User].includes(e(t).uidt)?"pl-2":("isAttachment"in l?l.isAttachment:e(d))(e(t))?"":"px-2"}`,{"min-h-0 min-w-0":("isAttachment"in l?l.isAttachment:e(d))(e(t)),"!w-auto ":!("isAttachment"in l?l.isAttachment:e(d))(e(t))}])},null,8,["model-value","column","class"]))],2))),128))],2),e(D)?(a(),r("div",se,P(l.$t("msg.info.computedFieldEditWarning")),1)):I("",!0),e(U)?(a(),r("div",ue,P(l.$t("msg.info.computedFieldDeleteWarning")),1)):I("",!0)],2))],64))],64)):I("",!0)],2)],36)}}});export{pe as default};
