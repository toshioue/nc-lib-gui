const __vite__fileDeps=["./BV5EkxN-.js","./3QBYHahY.js","./entry.Ic44fwRn.css","./DPqnb67u.js","./nWAP4Eii.js","./DdUr8XSo.js","./MenuItem.C7h59s4s.css","./DiJvWPjA.js","./PcgFfkcK.js","./Menu.CQ8GNWeI.css","./DYjqK71k.js","./CtMydB5S.js","./D4iSzjWt.js","./BkiSZLeF.js","./CJ26qO3d.js","./DeleteModal.SEMJ_gSK.css","./CsJPQclb.js","./BteOdwRG.js","./CSl6euFG.js","./Dg1gNFnz.js","./Ci1lK5Ee.js","./xnDaHwV-.js","./CyuhXrst.js","./B4iQZBP5.js","./CfxEkdGP.js","./DzvpY9ZV.js","./BYmqikBK.js","./Menu.D4JiISXR.css","./CQ-VsiIK.js","./CKo3fFqv.js","./WrawXyJR.js","./kHOslGNR.js","./CmN9vPg3.js","./BQQOEPN4.js","./DPgYHC40.js","./BsWDDIqE.js","./ceYq-xax.js","./xWA_7i9p.js","./Kma333Sh.js","./CWtzMcwx.js","./DAKhk9t6.js","./Bk0xUMNV.js","./CGxepfeV.js","./wEQwkVjR.js","./DvDgJkhr.js","./Ddy65kPJ.js","./ChSCnN6E.js","./SelectOptions.JaHDUZhn.css","./BHEjdcp1.js","./toggleHighContrast.wojAGmRG.css","./CfC0eoFh.js","./BITed4Cc.js","./DiZ67kIC.js","./BEpKpjF5.js","./3ezdMRmZ.js","./B6ykf4kl.js","./og6cBSyd.js","./4uOUlFJU.js","./DD1BMgnW.js","./Switch.CEh6YzqD.css","./0DGTjfkJ.js","./2yzrrcqg.js","./Tabs.DaLSLYpn.css","./C9Sjn86N.js","./CTSlxRce.js","./D7hrRKCy.js","./Select.C8Fy0-eI.css","./BLIqcdwb.js","./ListWithSearch.PmKyjXoQ.css","./CtQJu3r-.js","./DHn6lT7K.js","./C95Svpv6.js","./index.E0_BHHK8.css","./D_owt2V3.js","./BVQBF9Vn.js","./EditOrAddProvider.K7iYHan9.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as ve,ai as fe,a7 as Q,N as me,r as u,bN as O,da as _e,aB as ye,fP as be,cY as he,L as ke,d9 as we,hK as Oe,aF as xe,gU as Ie,hV as Ce,g as _,fr as Y,hZ as ge,d1 as F,de as Te,hW as N,fQ as Ee,H as Me,o as i,c as y,a as P,P as e,aq as Z,S as g,w as x,d as X,t as j,b as U,T as b,U as R,Q as J,Y as $,Z as H,a6 as z,hX as De,a1 as Re,$ as $e,ag as Ae,_ as Le}from"./3QBYHahY.js";import{b as Ve,c as Be,d as Fe,e as Ne,g as ee}from"./DPqnb67u.js";import{b as Pe}from"./BYmqikBK.js";const je=H(()=>z(()=>import("./BV5EkxN-.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(d=>d.default||d)),Ue=H(()=>z(()=>import("./nWAP4Eii.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10,0,3,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url).then(d=>d.default||d)),He=H(()=>z(()=>import("./CQ-VsiIK.js"),__vite__mapDeps([28,29,1,2,14,15,7,30,31,32,33,21,34,35,36,0,3,11,12,37,38,39,40,41,42,43,44,45,46,47,26,48,49,50,51,52,53,54,55,56,57,58,59,60,20,61,62,24,18,63,16,64,65,66,67,68,69,70,71,72,22,73,74,75]),import.meta.url).then(d=>d.default||d)),ze=["data-test-id"],qe={key:1,class:"text-red-500"},Se={key:0,class:"flex-1"},Ge={key:1},We={class:"nc-edit-or-add-provider-wrapper"},Ke=ve({__name:"VirtualCell",props:{column:{},hideMenu:{type:Boolean},required:{type:[Boolean,Number]},hideIcon:{type:Boolean},isHiddenCol:{type:Boolean}},setup(d){const A=d,{t:T}=fe(),t=Q(A,"column"),te=Q(A,"hideMenu"),{isMobileMode:h}=me(),o=u(!1),r=u(!1),E=u(!1),q=O(_e,u(!1));ye(be,t);const{metas:le}=he(),{isUIAllowed:k,isMetaReadOnly:ae}=ke(),c=O(we,u()),oe=O(Oe,u(!1)),L=O(xe,u(!1)),n=O(Ie,u(!1)),p=O(Ce,u(!1)),V=_(()=>{var l;return(l=c==null?void 0:c.value)==null?void 0:l.title}),S=_(()=>{var l,a,s,v,f,m;return Y(t.value)?(l=t.value)==null?void 0:l.colOptions:(s=(a=t==null?void 0:t.value)==null?void 0:a.colOptions)!=null&&s.fk_relation_column_id?(m=(f=(v=c==null?void 0:c.value)==null?void 0:v.columns)==null?void 0:f.find(w=>{var I,C;return w.id===((C=(I=t==null?void 0:t.value)==null?void 0:I.colOptions)==null?void 0:C.fk_relation_column_id)}))==null?void 0:m.colOptions:null}),se=_(()=>{var l,a,s;return((l=S.value)==null?void 0:l.fk_related_model_id)&&((s=le.value)==null?void 0:s[(a=S.value)==null?void 0:a.fk_related_model_id])}),M=_(()=>{var l;return(l=se.value)==null?void 0:l.title}),ne=_(()=>{var l,a,s,v,f,m,w;return t.value?Ve(t.value)?`'${V.value}' ${T("labels.hasMany")} '${M.value}'`:Be(t.value)?`'${V.value}' & '${M.value}' ${T("labels.manyToMany")}`:Fe(t.value)?`'${(l=t==null?void 0:t.value)==null?void 0:l.title}' ${T("labels.belongsTo")} '${M.value}'`:Ne(t.value)?`'${V.value}' & '${M.value}' ${T("labels.oneToOne")}`:ee(t.value)?`Formula - ${ge((s=(a=t.value)==null?void 0:a.colOptions)==null?void 0:s.formula,(v=c==null?void 0:c.value)==null?void 0:v.columns,(m=(f=t.value)==null?void 0:f.colOptions)==null?void 0:m.formula_raw)}`:((w=t==null?void 0:t.value)==null?void 0:w.title)||"":""}),ie=_(()=>Y(t.value)||ee(t.value)),D=u(null),re=_(()=>{var l,a,s;return t.value.uidt===F.LongText&&((a=Te((l=t==null?void 0:t.value)==null?void 0:l.meta))!=null&&a.richMode)?N.RichText:t.value.uidt===F.LinkToAnotherRecord&&((s=t.value.colOptions)==null?void 0:s.type)===Ee.ONE_TO_ONE?N[F.Links]:t.value.uidt?N[t.value.uidt]:""}),ue=async l=>{D.value=l,o.value=!0},G=u(),W=()=>{D.value=null,o.value=!1};Me(o,l=>{l||(E.value=!1)});const K=(l,a=!1)=>{q.value||n.value&&(l==null?void 0:l.type)==="dblclick"||p.value||!L.value&&k("fieldEdit")&&!h.value&&(!ae.value||De.includes(t.value.uidt))&&(a&&(E.value=!0),o.value=!0)},de=l=>{q.value||L.value||!k("fieldEdit")&&!h.value||(l.preventDefault(),l.stopPropagation(),r.value=!r.value)},ce=()=>{var l;o.value=!0,(l=G.value)!=null&&l.isWebHookModalOpen()||(o.value=!1,E.value=!1)},pe=l=>{if(!(h.value||!k("fieldEdit"))){if(r.value)l.preventDefault(),l.stopPropagation();else if(n.value&&!o.value&&!p.value){r.value=!0;return}r.value=!1}};return(l,a)=>{var C;const s=je,v=Re,f=$e,m=Ue,w=He,I=Ae;return i(),y("div",{class:R(["flex items-center w-full h-full text-small text-gray-500 font-weight-medium group",{"flex-col !items-start justify-center pt-0.5":e(n)&&!e(h)&&!e(p),"bg-gray-100":e(n)&&!e(p)?e(o)||e(r):!1,"nc-cell-expanded-form-header cursor-pointer hover:bg-gray-100":e(n)&&!e(h)&&e(k)("fieldEdit")&&!e(p)}]),onDblclick:K,onContextmenu:$(de,["right"]),onClick:pe},[P("div",{class:R(["nc-virtual-cell-name-wrapper flex-1 flex items-center",{"max-w-[calc(100%_-_23px)]":!e(n),"max-w-full":e(n)&&!e(p)}])},[e(t)&&!A.hideIcon?(i(),y(Z,{key:0},[e(oe)?(i(),g(v,{key:0,class:"flex items-center",placement:"bottom"},{title:x(()=>[X(j(e(re)),1)]),default:x(()=>[U(s)]),_:1})):(i(),g(s,{key:1}))],64)):b("",!0),U(v,{placement:"bottom",class:"truncate name pl-1","show-on-truncate-only":!e(ie)},{title:x(()=>[X(j(e(ne)),1)]),default:x(()=>[P("span",{"data-test-id":e(t).title,class:R({"select-none":e(n)&&!e(p)})},j(e(t).title),11,ze)]),_:1},8,["show-on-truncate-only"]),("isVirtualColRequired"in l?l.isVirtualColRequired:e(Pe))(e(t),((C=e(c))==null?void 0:C.columns)||[])||l.required?(i(),y("span",qe," *")):b("",!0),e(n)&&!e(h)&&e(k)("fieldEdit")&&!e(p)?(i(),g(f,{key:2,icon:"arrowDown",class:R(["flex-none cursor-pointer ml-1 group-hover:visible w-4 h-4",{visible:e(o)||e(r),invisible:!(e(o)||e(r))}])},null,8,["class"])):b("",!0)],2),e(te)?b("",!0):(i(),y(Z,{key:0},[e(n)?b("",!0):(i(),y("div",Se)),!e(L)&&e(k)("fieldEdit")?(i(),g(m,{key:1,"is-open":e(r),"onUpdate:isOpen":a[0]||(a[0]=B=>J(r)?r.value=B:null),"is-hidden-col":l.isHiddenCol,virtual:!0,onAddColumn:ue,onEdit:K},null,8,["is-open","is-hidden-col"])):b("",!0)],64)),U(I,{visible:e(o),"onUpdate:visible":a[4]||(a[4]=B=>J(o)?o.value=B:null),class:"h-full",trigger:["click"],placement:e(n)&&!e(p)?"bottomLeft":"bottomRight","overlay-class-name":`nc-dropdown-edit-column ${e(o)?"active":""}`,onVisibleChange:ce},{overlay:x(()=>[P("div",We,[e(o)?(i(),g(w,{key:0,ref_key:"editOrAddProviderRef",ref:G,column:e(D)?null:e(t),"column-position":e(D),class:"w-full","edit-description":e(E),onSubmit:W,onCancel:W,onClick:a[2]||(a[2]=$(()=>{},["stop"])),onKeydown:a[3]||(a[3]=$(()=>{},["stop"]))},null,8,["column","column-position","edit-description"])):b("",!0)])]),default:x(()=>[e(n)&&!e(p)?(i(),y("div",{key:0,class:"h-[1px]",onDblclick:a[1]||(a[1]=$(()=>{},["stop"]))}," ",32)):(i(),y("div",Ge))]),_:1},8,["visible","placement","overlay-class-name"])],34)}}}),Xe=Le(Ke,[["__scopeId","data-v-8a7470b8"]]);export{Xe as default};
