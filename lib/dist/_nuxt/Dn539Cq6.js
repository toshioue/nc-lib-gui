import{f as W,bN as v,da as l,ai as V,cZ as tt,a7 as rt,az as B,cN as C,aA as st,r as nt,g as it,o as et,c as at,t as ut,P as ft,U as ct,hR as ot,hS as pt,df as d,cs as c,ct as _t,cu as mt,_ as dt}from"./Cgw6cdOy.js";import{c as yt}from"./C9Sjn86N.js";import{f as gt,k as kt,j as bt,G as Dt,d as Nt,m as St,e as Yt,n as ht,t as At,u as Bt,s as Ct,w as Mt,p as $t,x as Ot,c as Tt,i as Ut,C as jt}from"./BBXMuneh.js";import{a as Ft,i as Rt,l as Lt,f as Ht,g as It}from"./DpDIhxXu.js";const Pt=W({__name:"PlainCell",props:{column:{},modelValue:{},bold:{type:[Number,Boolean,null]},italic:{type:[Number,Boolean,null]},underline:{type:[Number,Boolean,null]}},setup(M){var Y,h,A;const $=M,a=v(l),{t:b}=V(),{metas:D}=tt(),p=rt($,"column"),{sqlUis:g}=B(C()),O=st(),{basesUser:T}=B(O),{isXcdbBase:U,isMssql:j,isMysql:F}=C(),R=nt((Y=p.value)!=null&&Y.source_id&&g.value[(h=p.value)==null?void 0:h.source_id]?g.value[(A=p.value)==null?void 0:A.source_id]:Object.values(g.value)[0]),_=it(()=>p.value&&R.value.getAbstractType(p.value)),L=t=>!!t&&t!=="0"&&t!==0&&t!=="false",H=(t,r)=>t?t?Array.isArray(t)?t.join(", "):t.toString():F(r.source_id)?t.toString().split(",").join(", "):t.split(", "):"",N=(t,r,s)=>{var i;const n=s?"YYYY-MM-DD HH:mm:ss":((i=d(r.meta))==null?void 0:i.date_format)??"YYYY-MM-DD";return!t||!c(t).isValid()?"":c(/^\d+$/.test(String(t))?+t:t).format(n)},I=t=>t&&c(t).isValid()?c(t.toString(),"YYYY").format("YYYY"):"",P=(t,r)=>{var f,e;if(!t||!c(t).isValid())return"";const s=((f=d(r==null?void 0:r.meta))==null?void 0:f.date_format)??_t[0],n=((e=d(r==null?void 0:r.meta))==null?void 0:e.time_format)??mt[0],i=`${s} ${n}`;return U(r.source_id)?j(r.source_id)?c(t,i).format(i):c(t).utc().local().format(i):c(/^\d+$/.test(t)?+t:t,i).format(i)},x=t=>{if(!t)return"";let r=c(t);return r.isValid()||(r=c(t,"HH:mm:ss")),r.isValid()||(r=c(`1999-01-01 ${t}`)),r.isValid()?r.format("HH:mm"):""},q=(t,r)=>{var n;const s=((n=d(r.meta))==null?void 0:n.duration)||0;return yt(t,s)},J=t=>t?`${t}%`:"",X=(t,r)=>{const s={currency_locale:"en-US",currency_code:"USD",...d(r.meta)};try{return t==null||isNaN(t)?t??"":new Intl.NumberFormat(s.currency_locale||"en-US",{style:"currency",currency:s.currency_code||"USD"}).format(+t)}catch{return t}},S=t=>{if(!t)return"";const r=a!=null&&a.value.base_id?T.value.get(a==null?void 0:a.value.base_id)||[]:[];return typeof t=="string"?t.split(",").map(n=>{const i=r.find(u=>u.id===n||u.email===n);return i?i.display_name||i.email:n.id}).join(", "):Array.isArray(t)?t.map(s=>{const n=r.find(i=>i.id===s.id||i.email===s.email);return n?n.display_name||n.email:s.id}).join(", "):t?t.display_name||t.email:""},w=(t,r)=>{if(!t||isNaN(Number(t)))return"";const s=d(r.meta);return Number(t).toFixed((s==null?void 0:s.precision)??1)},z=t=>!t||isNaN(Number(t))?"":Number(t),G=(t,r)=>{var n;return(typeof r.meta=="string"?JSON.parse(r.meta).richMode:(n=r.meta)==null?void 0:n.richMode)?(t==null?void 0:t.replace(/[*_~\[\]]|<\/?[^>]+(>|$)/g,""))||"":t||""},E=(t,r)=>{var i,u,f;const s=r.colOptions;if(["count","avg","sum","countDistinct","sumDistinct","avgDistinct"].includes(s.rollup_function))return t;{const e=s.fk_relation_column_id?(u=(i=a==null?void 0:a.value.columns)==null?void 0:i.find(k=>k.id===s.fk_relation_column_id))==null?void 0:u.colOptions:null,m=(e==null?void 0:e.fk_related_model_id)&&((f=D.value)==null?void 0:f[e.fk_related_model_id]),o=m==null?void 0:m.columns.find(k=>k.id===s.fk_rollup_column_id);return y(t,o)}},Z=(t,r)=>{var f,e,m;const s=r.colOptions,n=s.fk_relation_column_id?(e=(f=a==null?void 0:a.value.columns)==null?void 0:f.find(o=>o.id===s.fk_relation_column_id))==null?void 0:e.colOptions:null,i=(n==null?void 0:n.fk_related_model_id)&&((m=D.value)==null?void 0:m[n.fk_related_model_id]),u=i==null?void 0:i.columns.find(o=>o.id===s.fk_lookup_column_id);return Array.isArray(t)?t.map(o=>y(o,u)).join(", "):y(t,u)},K=t=>Array.isArray(t)?t.map(r=>`${r.title}`).join(", "):t,Q=(t,r)=>{var n,i;typeof r.meta=="string"&&(r.meta=JSON.parse(r.meta));const s=+t||0;return s?s===1?`1 ${((n=r==null?void 0:r.meta)==null?void 0:n.singular)||b("general.link")}`:`${s} ${((i=r==null?void 0:r.meta)==null?void 0:i.plural)||b("general.links")}`:""},y=(t,r)=>{var s,n,i,u;if(!r)return"";if(gt(r)){const[f,e]=(t||"").split(";");return f&&e?`${f}; ${e}`:t}return kt(r)?G(t,r):bt(r,_)?L(t)?"Checked":"Unchecked":Dt(r)?H(t,r):Nt(r,_)?N(t,r):St(r,_)?I(t):Yt(r,_)?P(t,r):ht(r,_)?x(t):At(r)?q(t,r):Bt(r)?J(t):Ct(r)?X(t,r):Mt(r)?S(t):$t(r)?w(t,r):Ot(r,_)?z(t):Tt(r)?JSON.stringify(t,null,2):Ft(r)?E(t,r):Rt(r)||Lt(r.uidt,r.colOptions)?Z(t,r):ot(r)?N(t,r,!0):pt(r)?S(t):Ut(r)?K(t):Ht(r)?Q(t,r):It(r)&&((s=r==null?void 0:r.meta)!=null&&s.display_type)?y(t,{uidt:(n=r==null?void 0:r.meta)==null?void 0:n.display_type,...(i=r==null?void 0:r.meta)==null?void 0:i.display_column_meta}):jt(r)?r.colOptions.type==="url"?t:(u=r.colOptions)==null?void 0:u.label:t};return(t,r)=>(et(),at("span",{class:ct(["plain-cell before:px-1",{"!font-bold":t.bold,italic:t.italic,underline:t.underline}]),"data-testid":"nc-plain-cell"},ut(y(t.modelValue,ft(p))),3))}}),wt=dt(Pt,[["__scopeId","data-v-91ea188b"]]);export{wt as default};
