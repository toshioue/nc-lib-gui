import{f as $,ad as L,M as U,gA as E,r as _,g as D,d7 as m,o as g,c as w,b as t,w as o,a as d,d as p,t as c,P as a,cg as T,T as B,Q as P,U as F,aq as M,gk as j,gl as q,aj as z,$ as G,a0 as K}from"./Cgw6cdOy.js";import{_ as H}from"./ahvdY77A.js";import{F as O}from"./DpYA1Dpy.js";import{_ as W}from"./BZz6iAla.js";import{_ as J}from"./dmcxUY_0.js";import"./LSbsNkd9.js";import"./hvq8FVej.js";import"./DPaOlBFV.js";import"./BQQOEPN4.js";import"./BcZAlRJW.js";const v=""+new URL("grid.DUgR9AKo.png",import.meta.url).href,Q=""+new URL("gallery.Cd9ckno3.png",import.meta.url).href,X=""+new URL("kanban.C7eL09OH.png",import.meta.url).href,Y=""+new URL("calendar.XdsCSkJk.png",import.meta.url).href,Z={class:"flex flex-col gap-5"},ee={class:"flex flex-row items-center gap-x-2 text-base font-weight-700 text-gray-800"},se={key:0,class:"mb-2 text-sm text-red-500"},ae={class:"flex flex-row justify-end gap-x-2"},te=["src"],_e=$({__name:"AskPassword",props:{modelValue:{type:Boolean},viewType:{}},emits:["update:modelValue"],setup(b,{emit:h}){const u=b,r=L(u,"modelValue",h),y=U(),{loadSharedView:x}=E(),n=_({password:void 0}),l=_(null),f=async()=>{try{await x(y.params.viewId,n.value.password),r.value=!1}catch(e){const s=await j(e);console.error(s.message),s.error===q.INVALID_SHARED_VIEW_PASSWORD?l.value=s.message:z.error(s.message)}},k=e=>{var s;return e&&((s=e==null?void 0:e.focus)==null?void 0:s.call(e))},R=D(()=>{switch(u.viewType){case m.GRID:return v;case m.GALLERY:return Q;case m.KANBAN:return X;case m.CALENDAR:return Y;default:return v}});return(e,s)=>{const V=G,I=W,N=J,A=O,C=K,S=H;return g(),w(M,null,[t(S,{visible:a(r),"onUpdate:visible":s[2]||(s[2]=i=>P(r)?r.value=i:null),c:"",size:"small",class:F({active:a(r)}),"mask-closable":!1,"mask-style":{backgroundColor:"rgba(255, 255, 255, 0.64)",backdropFilter:"blur(8px)"}},{default:o(()=>[d("div",Z,[d("div",ee,[t(V,{icon:"ncKey",class:"!text-base w-5 h-5"}),p(" "+c(e.$t("msg.thisSharedViewIsProtected")),1)]),t(A,{ref:"formRef",model:a(n),name:"create-new-table-form",onFinish:f},{default:o(()=>[t(N,{name:"password",rules:[{required:!0,message:e.$t("msg.error.signUpRules.passwdRequired")}],class:"!mb-0"},{default:o(()=>[t(I,{ref:k,value:a(n).password,"onUpdate:value":s[0]||(s[0]=i=>a(n).password=i),class:"!rounded-lg !text-small","hide-details":"",placeholder:e.$t("msg.enterPassword"),onInput:s[1]||(s[1]=i=>l.value=null)},null,8,["value","placeholder"]),t(T,{name:"layout"},{default:o(()=>[a(l)?(g(),w("div",se,c(a(l)),1)):B("",!0)]),_:1})]),_:1},8,["rules"])]),_:1},8,["model"]),d("div",ae,[t(C,{disabled:!a(n).password,type:"primary",size:"small","html-type":"submit",class:"!px-2","data-testid":"nc-shared-view-password-submit-btn",onClick:f},{loading:o(()=>[p(c(e.$t("msg.verifyingPassword")),1)]),default:o(()=>[p(c(e.$t("objects.view"))+" ",1)]),_:1},8,["disabled"])])])]),_:1},8,["visible","class"]),d("img",{alt:"view image",src:a(R),class:"fixed inset-0 w-full h-full"},null,8,te)],64)}}});export{_e as default};
