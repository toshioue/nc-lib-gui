const __vite__fileDeps=["./C5wuhVxs.js","./Cgw6cdOy.js","./entry.DxI7QTvq.css","./WttlrBnq.js","./S1x-kZdE.js","./DeleteModal.SEMJ_gSK.css","./CpJUN2HL.js","./zKWQxcjd.js","./Overlay.BGbSKdGB.css","./DFiWgQ57.js","./CO8XXsKl.js","./BcWX645D.js","./C00NHga8.js","./r2PN1Hfg.js","./vIgbYHAs.js","./DpDIhxXu.js","./boyBAVNN.js","./D7yS5JAk.js","./BtFqRdSP.js","./CnN16FGu.js","./BBXMuneh.js","./DbRkwnd8.js","./Bcy-XIkn.js","./DPaOlBFV.js","./BQQOEPN4.js","./hvq8FVej.js","./C8c9012h.js","./BIsWr_mR.js","./BZz6iAla.js","./DpYA1Dpy.js","./dmcxUY_0.js","./BcZAlRJW.js","./LSbsNkd9.js","./C0-Qcoum.js","./Carousel.DMLiu2dh.css","./DXof0zKo.js","./B8UlVDE2.js","./C6pnOEba.js","./KNudlHpk.js","./CitraFSq.js","./Checkbox.M_COpns0.css","./ahvdY77A.js","./JRGWYtLw.js","./CHLXm8Ls.js","./Modal.BzRymNZb.css","./CFqrwqvG.js","./Dw67C2wu.js","./DBOeGHNL.js","./MenuItem.C7h59s4s.css","./Bxm040c6.js","./Menu.CQ8GNWeI.css","./AttachFile.BiaJAWPG.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{o as f,c as q,a as I,fh as Wn,fi as Yn,f as yn,ai as vn,r as v,at as Tn,ae as qn,i as Kn,S as H,w as A,t as ae,b as N,P as t,d as xe,Q as dt,a0 as An,gA as Xn,bN as X,hr as Zn,dB as Jn,aF as Qn,da as En,fQ as ea,aE as ta,az as na,cN as aa,ar as oa,gg as ia,N as wn,g as xn,H as Dt,A as la,df as sa,aj as Le,i2 as un,gL as mn,fa as ra,gU as ca,gW as ua,hM as ma,hN as fa,gV as pa,gQ as da,hL as ha,aC as fn,iM as _a,fM as ga,hK as ya,L as va,T as me,aq as ft,av as pn,V as ke,U as we,W as Xe,aa as pt,aL as dn,Y as Nt,Z as it,a6 as lt,a1 as Ta,$ as Aa}from"./Cgw6cdOy.js";import{_ as Ea}from"./zKWQxcjd.js";import{a as wa}from"./DFiWgQ57.js";import{u as xa}from"./BcWX645D.js";import{a as bn}from"./r2PN1Hfg.js";import{a as ba}from"./BtFqRdSP.js";import{u as Sa}from"./CnN16FGu.js";import{i as kt,e as Ra}from"./C00NHga8.js";import{H as hn}from"./BBXMuneh.js";import{u as Ia}from"./CO8XXsKl.js";import{u as Ca}from"./DbRkwnd8.js";import{e as La}from"./D7yS5JAk.js";import{_ as Ma}from"./S1x-kZdE.js";import"./Bcy-XIkn.js";import{I as Na}from"./DPaOlBFV.js";import{F as Oa}from"./DpYA1Dpy.js";import{_ as Da}from"./dmcxUY_0.js";import{S as ka}from"./C0-Qcoum.js";const Pa={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},za=I("path",{fill:"currentColor",d:"M19 19H8q-.825 0-1.412-.587T6 17V3q0-.825.588-1.412T8 1h7l6 6v10q0 .825-.587 1.413T19 19M14 8V3H8v14h11V8zM4 23q-.825 0-1.412-.587T2 21V7h2v14h11v2zM8 3v5zv14z"},null,-1),Fa=[za];function Ha(d,Z){return f(),q("svg",Pa,[...Fa])}const Ua={name:"material-symbols-file-copy-outline",render:Ha},$a={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ba=I("path",{fill:"currentColor",d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zM6 20V4h7v5h5v11z"},null,-1),Va=[Ba];function Ga(d,Z){return f(),q("svg",$a,[...Va])}const Sn={name:"ic-outline-insert-drive-file",render:Ga},ja={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Wa=I("path",{fill:"currentColor",d:"M18 15.75q0 2.6-1.825 4.425T11.75 22t-4.425-1.825T5.5 15.75V6.5q0-1.875 1.313-3.187T10 2t3.188 1.313T14.5 6.5v8.75q0 1.15-.8 1.95t-1.95.8t-1.95-.8t-.8-1.95V6h2v9.25q0 .325.213.538t.537.212t.538-.213t.212-.537V6.5q-.025-1.05-.737-1.775T10 4t-1.775.725T7.5 6.5v9.25q-.025 1.775 1.225 3.013T11.75 20q1.75 0 2.975-1.237T16 15.75V6h2z"},null,-1),Ya=[Wa];function qa(d,Z){return f(),q("svg",ja,[...Ya])}const Ka={name:"material-symbols-attach-file",render:qa};var Ot={exports:{}};/*! @license DOMPurify 3.0.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.8/LICENSE */var _n;function gn(){return _n||(_n=1,function(d,Z){(function(de,re){d.exports=re()})(Wn,function(){const{entries:de,setPrototypeOf:re,isFrozen:he,getPrototypeOf:ce,getOwnPropertyDescriptor:$}=Object;let{freeze:_,seal:R,create:E}=Object,{apply:x,construct:w}=typeof Reflect<"u"&&Reflect;_||(_=function(o){return o}),R||(R=function(o){return o}),x||(x=function(o,h,m){return o.apply(h,m)}),w||(w=function(o,h){return new o(...h)});const O=D(Array.prototype.forEach),b=D(Array.prototype.pop),fe=D(Array.prototype.push),J=D(String.prototype.toLowerCase),Q=D(String.prototype.toString),_e=D(String.prototype.match),K=D(String.prototype.replace),Ve=D(String.prototype.indexOf),Pe=D(String.prototype.trim),k=D(RegExp.prototype.test),ge=Me(TypeError);function D(u){return function(o){for(var h=arguments.length,m=new Array(h>1?h-1:0),V=1;V<h;V++)m[V-1]=arguments[V];return x(u,o,m)}}function Me(u){return function(){for(var o=arguments.length,h=new Array(o),m=0;m<o;m++)h[m]=arguments[m];return w(u,h)}}function r(u,o){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:J;re&&re(u,null);let m=o.length;for(;m--;){let V=o[m];if(typeof V=="string"){const G=h(V);G!==V&&(he(o)||(o[m]=G),V=G)}u[V]=!0}return u}function ze(u){for(let o=0;o<u.length;o++)$(u,o)===void 0&&(u[o]=null);return u}function ee(u){const o=E(null);for(const[h,m]of de(u))$(u,h)!==void 0&&(Array.isArray(m)?o[h]=ze(m):m&&typeof m=="object"&&m.constructor===Object?o[h]=ee(m):o[h]=m);return o}function ue(u,o){for(;u!==null;){const m=$(u,o);if(m){if(m.get)return D(m.get);if(typeof m.value=="function")return D(m.value)}u=ce(u)}function h(m){return console.warn("fallback value for",m),null}return h}const ie=_(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ye=_(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ne=_(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),be=_(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Oe=_(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ze=_(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Fe=_(["#text"]),Se=_(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Re=_(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ve=_(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),g=_(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),c=R(/\{\{[\w\W]*|[\w\W]*\}\}/gm),y=R(/<%[\w\W]*|[\w\W]*%>/gm),T=R(/\${[\w\W]*}/gm),C=R(/^data-[\-\w.\u00B7-\uFFFF]/),P=R(/^aria-[\-\w]+$/),B=R(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),U=R(/^(?:\w+script|data):/i),z=R(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),pe=R(/^html$/i);var He=Object.freeze({__proto__:null,MUSTACHE_EXPR:c,ERB_EXPR:y,TMPLIT_EXPR:T,DATA_ATTR:C,ARIA_ATTR:P,IS_ALLOWED_URI:B,IS_SCRIPT_OR_DATA:U,ATTR_WHITESPACE:z,DOCTYPE_NAME:pe});const s=function(){return typeof window>"u"?null:window},L=function(o,h){if(typeof o!="object"||typeof o.createPolicy!="function")return null;let m=null;const V="data-tt-policy-suffix";h&&h.hasAttribute(V)&&(m=h.getAttribute(V));const G="dompurify"+(m?"#"+m:"");try{return o.createPolicy(G,{createHTML(De){return De},createScriptURL(De){return De}})}catch{return console.warn("TrustedTypes policy "+G+" could not be created."),null}};function a(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s();const o=l=>a(l);if(o.version="3.0.8",o.removed=[],!u||!u.document||u.document.nodeType!==9)return o.isSupported=!1,o;let{document:h}=u;const m=h,V=m.currentScript,{DocumentFragment:G,HTMLTemplateElement:De,Node:Je,Element:st,NodeFilter:Qe,NamedNodeMap:ht=u.NamedNodeMap||u.MozNamedAttrMap,HTMLFormElement:_t,DOMParser:p,trustedTypes:Ae}=u,Te=st.prototype,Rn=ue(Te,"cloneNode"),In=ue(Te,"nextSibling"),Cn=ue(Te,"childNodes"),gt=ue(Te,"parentNode");if(typeof De=="function"){const l=h.createElement("template");l.content&&l.content.ownerDocument&&(h=l.content.ownerDocument)}let oe,et="";const{implementation:yt,createNodeIterator:Ln,createDocumentFragment:Mn,getElementsByTagName:Nn}=h,{importNode:On}=m;let Ee={};o.isSupported=typeof de=="function"&&typeof gt=="function"&&yt&&yt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:vt,ERB_EXPR:Tt,TMPLIT_EXPR:At,DATA_ATTR:Dn,ARIA_ATTR:kn,IS_SCRIPT_OR_DATA:Pn,ATTR_WHITESPACE:Pt}=He;let{IS_ALLOWED_URI:zt}=He,j=null;const Ft=r({},[...ie,...ye,...Ne,...Oe,...Fe]);let W=null;const Ht=r({},[...Se,...Re,...ve,...g]);let F=Object.seal(E(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),tt=null,Et=null,Ut=!0,wt=!0,$t=!1,Bt=!0,Ge=!1,Ue=!1,xt=!1,bt=!1,je=!1,rt=!1,ct=!1,Vt=!0,Gt=!1;const zn="user-content-";let St=!0,nt=!1,We={},Ye=null;const jt=r({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Wt=null;const Yt=r({},["audio","video","img","source","image","track"]);let Rt=null;const qt=r({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ut="http://www.w3.org/1998/Math/MathML",mt="http://www.w3.org/2000/svg",Ie="http://www.w3.org/1999/xhtml";let qe=Ie,It=!1,Ct=null;const Fn=r({},[ut,mt,Ie],Q);let at=null;const Hn=["application/xhtml+xml","text/html"],Un="text/html";let Y=null,Ke=null;const $n=h.createElement("form"),Kt=function(e){return e instanceof RegExp||e instanceof Function},Lt=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ke&&Ke===e)){if((!e||typeof e!="object")&&(e={}),e=ee(e),at=Hn.indexOf(e.PARSER_MEDIA_TYPE)===-1?Un:e.PARSER_MEDIA_TYPE,Y=at==="application/xhtml+xml"?Q:J,j="ALLOWED_TAGS"in e?r({},e.ALLOWED_TAGS,Y):Ft,W="ALLOWED_ATTR"in e?r({},e.ALLOWED_ATTR,Y):Ht,Ct="ALLOWED_NAMESPACES"in e?r({},e.ALLOWED_NAMESPACES,Q):Fn,Rt="ADD_URI_SAFE_ATTR"in e?r(ee(qt),e.ADD_URI_SAFE_ATTR,Y):qt,Wt="ADD_DATA_URI_TAGS"in e?r(ee(Yt),e.ADD_DATA_URI_TAGS,Y):Yt,Ye="FORBID_CONTENTS"in e?r({},e.FORBID_CONTENTS,Y):jt,tt="FORBID_TAGS"in e?r({},e.FORBID_TAGS,Y):{},Et="FORBID_ATTR"in e?r({},e.FORBID_ATTR,Y):{},We="USE_PROFILES"in e?e.USE_PROFILES:!1,Ut=e.ALLOW_ARIA_ATTR!==!1,wt=e.ALLOW_DATA_ATTR!==!1,$t=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Bt=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ge=e.SAFE_FOR_TEMPLATES||!1,Ue=e.WHOLE_DOCUMENT||!1,je=e.RETURN_DOM||!1,rt=e.RETURN_DOM_FRAGMENT||!1,ct=e.RETURN_TRUSTED_TYPE||!1,bt=e.FORCE_BODY||!1,Vt=e.SANITIZE_DOM!==!1,Gt=e.SANITIZE_NAMED_PROPS||!1,St=e.KEEP_CONTENT!==!1,nt=e.IN_PLACE||!1,zt=e.ALLOWED_URI_REGEXP||B,qe=e.NAMESPACE||Ie,F=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Kt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(F.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Kt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(F.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(F.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ge&&(wt=!1),rt&&(je=!0),We&&(j=r({},Fe),W=[],We.html===!0&&(r(j,ie),r(W,Se)),We.svg===!0&&(r(j,ye),r(W,Re),r(W,g)),We.svgFilters===!0&&(r(j,Ne),r(W,Re),r(W,g)),We.mathMl===!0&&(r(j,Oe),r(W,ve),r(W,g))),e.ADD_TAGS&&(j===Ft&&(j=ee(j)),r(j,e.ADD_TAGS,Y)),e.ADD_ATTR&&(W===Ht&&(W=ee(W)),r(W,e.ADD_ATTR,Y)),e.ADD_URI_SAFE_ATTR&&r(Rt,e.ADD_URI_SAFE_ATTR,Y),e.FORBID_CONTENTS&&(Ye===jt&&(Ye=ee(Ye)),r(Ye,e.FORBID_CONTENTS,Y)),St&&(j["#text"]=!0),Ue&&r(j,["html","head","body"]),j.table&&(r(j,["tbody"]),delete tt.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw ge('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ge('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');oe=e.TRUSTED_TYPES_POLICY,et=oe.createHTML("")}else oe===void 0&&(oe=L(Ae,V)),oe!==null&&typeof et=="string"&&(et=oe.createHTML(""));_&&_(e),Ke=e}},Xt=r({},["mi","mo","mn","ms","mtext"]),Zt=r({},["foreignobject","desc","title","annotation-xml"]),Bn=r({},["title","style","font","a","script"]),Jt=r({},[...ye,...Ne,...be]),Qt=r({},[...Oe,...Ze]),Vn=function(e){let n=gt(e);(!n||!n.tagName)&&(n={namespaceURI:qe,tagName:"template"});const i=J(e.tagName),S=J(n.tagName);return Ct[e.namespaceURI]?e.namespaceURI===mt?n.namespaceURI===Ie?i==="svg":n.namespaceURI===ut?i==="svg"&&(S==="annotation-xml"||Xt[S]):!!Jt[i]:e.namespaceURI===ut?n.namespaceURI===Ie?i==="math":n.namespaceURI===mt?i==="math"&&Zt[S]:!!Qt[i]:e.namespaceURI===Ie?n.namespaceURI===mt&&!Zt[S]||n.namespaceURI===ut&&!Xt[S]?!1:!Qt[i]&&(Bn[i]||!Jt[i]):!!(at==="application/xhtml+xml"&&Ct[e.namespaceURI]):!1},$e=function(e){fe(o.removed,{element:e});try{e.parentNode.removeChild(e)}catch{e.remove()}},Mt=function(e,n){try{fe(o.removed,{attribute:n.getAttributeNode(e),from:n})}catch{fe(o.removed,{attribute:null,from:n})}if(n.removeAttribute(e),e==="is"&&!W[e])if(je||rt)try{$e(n)}catch{}else try{n.setAttribute(e,"")}catch{}},en=function(e){let n=null,i=null;if(bt)e="<remove></remove>"+e;else{const ne=_e(e,/^[\r\n\t ]+/);i=ne&&ne[0]}at==="application/xhtml+xml"&&qe===Ie&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const S=oe?oe.createHTML(e):e;if(qe===Ie)try{n=new p().parseFromString(S,at)}catch{}if(!n||!n.documentElement){n=yt.createDocument(qe,"template",null);try{n.documentElement.innerHTML=It?et:S}catch{}}const te=n.body||n.documentElement;return e&&i&&te.insertBefore(h.createTextNode(i),te.childNodes[0]||null),qe===Ie?Nn.call(n,Ue?"html":"body")[0]:Ue?n.documentElement:te},tn=function(e){return Ln.call(e.ownerDocument||e,e,Qe.SHOW_ELEMENT|Qe.SHOW_COMMENT|Qe.SHOW_TEXT,null)},Gn=function(e){return e instanceof _t&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof ht)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},nn=function(e){return typeof Je=="function"&&e instanceof Je},Ce=function(e,n,i){Ee[e]&&O(Ee[e],S=>{S.call(o,n,i,Ke)})},an=function(e){let n=null;if(Ce("beforeSanitizeElements",e,null),Gn(e))return $e(e),!0;const i=Y(e.nodeName);if(Ce("uponSanitizeElement",e,{tagName:i,allowedTags:j}),e.hasChildNodes()&&!nn(e.firstElementChild)&&k(/<[/\w]/g,e.innerHTML)&&k(/<[/\w]/g,e.textContent))return $e(e),!0;if(!j[i]||tt[i]){if(!tt[i]&&ln(i)&&(F.tagNameCheck instanceof RegExp&&k(F.tagNameCheck,i)||F.tagNameCheck instanceof Function&&F.tagNameCheck(i)))return!1;if(St&&!Ye[i]){const S=gt(e)||e.parentNode,te=Cn(e)||e.childNodes;if(te&&S){const ne=te.length;for(let le=ne-1;le>=0;--le)S.insertBefore(Rn(te[le],!0),In(e))}}return $e(e),!0}return e instanceof st&&!Vn(e)||(i==="noscript"||i==="noembed"||i==="noframes")&&k(/<\/no(script|embed|frames)/i,e.innerHTML)?($e(e),!0):(Ge&&e.nodeType===3&&(n=e.textContent,O([vt,Tt,At],S=>{n=K(n,S," ")}),e.textContent!==n&&(fe(o.removed,{element:e.cloneNode()}),e.textContent=n)),Ce("afterSanitizeElements",e,null),!1)},on=function(e,n,i){if(Vt&&(n==="id"||n==="name")&&(i in h||i in $n))return!1;if(!(wt&&!Et[n]&&k(Dn,n))){if(!(Ut&&k(kn,n))){if(!W[n]||Et[n]){if(!(ln(e)&&(F.tagNameCheck instanceof RegExp&&k(F.tagNameCheck,e)||F.tagNameCheck instanceof Function&&F.tagNameCheck(e))&&(F.attributeNameCheck instanceof RegExp&&k(F.attributeNameCheck,n)||F.attributeNameCheck instanceof Function&&F.attributeNameCheck(n))||n==="is"&&F.allowCustomizedBuiltInElements&&(F.tagNameCheck instanceof RegExp&&k(F.tagNameCheck,i)||F.tagNameCheck instanceof Function&&F.tagNameCheck(i))))return!1}else if(!Rt[n]){if(!k(zt,K(i,Pt,""))){if(!((n==="src"||n==="xlink:href"||n==="href")&&e!=="script"&&Ve(i,"data:")===0&&Wt[e])){if(!($t&&!k(Pn,K(i,Pt,"")))){if(i)return!1}}}}}}return!0},ln=function(e){return e.indexOf("-")>0},sn=function(e){Ce("beforeSanitizeAttributes",e,null);const{attributes:n}=e;if(!n)return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W};let S=n.length;for(;S--;){const te=n[S],{name:ne,namespaceURI:le,value:Be}=te,ot=Y(ne);let se=ne==="value"?Be:Pe(Be);if(i.attrName=ot,i.attrValue=se,i.keepAttr=!0,i.forceKeepAttr=void 0,Ce("uponSanitizeAttribute",e,i),se=i.attrValue,i.forceKeepAttr||(Mt(ne,e),!i.keepAttr))continue;if(!Bt&&k(/\/>/i,se)){Mt(ne,e);continue}Ge&&O([vt,Tt,At],cn=>{se=K(se,cn," ")});const rn=Y(e.nodeName);if(on(rn,ot,se)){if(Gt&&(ot==="id"||ot==="name")&&(Mt(ne,e),se=zn+se),oe&&typeof Ae=="object"&&typeof Ae.getAttributeType=="function"&&!le)switch(Ae.getAttributeType(rn,ot)){case"TrustedHTML":{se=oe.createHTML(se);break}case"TrustedScriptURL":{se=oe.createScriptURL(se);break}}try{le?e.setAttributeNS(le,ne,se):e.setAttribute(ne,se),b(o.removed)}catch{}}}Ce("afterSanitizeAttributes",e,null)},jn=function l(e){let n=null;const i=tn(e);for(Ce("beforeSanitizeShadowDOM",e,null);n=i.nextNode();)Ce("uponSanitizeShadowNode",n,null),!an(n)&&(n.content instanceof G&&l(n.content),sn(n));Ce("afterSanitizeShadowDOM",e,null)};return o.sanitize=function(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=null,i=null,S=null,te=null;if(It=!l,It&&(l="<!-->"),typeof l!="string"&&!nn(l))if(typeof l.toString=="function"){if(l=l.toString(),typeof l!="string")throw ge("dirty is not a string, aborting")}else throw ge("toString is not a function");if(!o.isSupported)return l;if(xt||Lt(e),o.removed=[],typeof l=="string"&&(nt=!1),nt){if(l.nodeName){const Be=Y(l.nodeName);if(!j[Be]||tt[Be])throw ge("root node is forbidden and cannot be sanitized in-place")}}else if(l instanceof Je)n=en("<!---->"),i=n.ownerDocument.importNode(l,!0),i.nodeType===1&&i.nodeName==="BODY"||i.nodeName==="HTML"?n=i:n.appendChild(i);else{if(!je&&!Ge&&!Ue&&l.indexOf("<")===-1)return oe&&ct?oe.createHTML(l):l;if(n=en(l),!n)return je?null:ct?et:""}n&&bt&&$e(n.firstChild);const ne=tn(nt?l:n);for(;S=ne.nextNode();)an(S)||(S.content instanceof G&&jn(S.content),sn(S));if(nt)return l;if(je){if(rt)for(te=Mn.call(n.ownerDocument);n.firstChild;)te.appendChild(n.firstChild);else te=n;return(W.shadowroot||W.shadowrootmode)&&(te=On.call(m,te,!0)),te}let le=Ue?n.outerHTML:n.innerHTML;return Ue&&j["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&k(pe,n.ownerDocument.doctype.name)&&(le="<!DOCTYPE "+n.ownerDocument.doctype.name+`>
`+le),Ge&&O([vt,Tt,At],Be=>{le=K(le,Be," ")}),oe&&ct?oe.createHTML(le):le},o.setConfig=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lt(l),xt=!0},o.clearConfig=function(){Ke=null,xt=!1},o.isValidAttribute=function(l,e,n){Ke||Lt({});const i=Y(l),S=Y(e);return on(i,S,n)},o.addHook=function(l,e){typeof e=="function"&&(Ee[l]=Ee[l]||[],fe(Ee[l],e))},o.removeHook=function(l){if(Ee[l])return b(Ee[l])},o.removeHooks=function(l){Ee[l]&&(Ee[l]=[])},o.removeAllHooks=function(){Ee={}},o}var M=a();return M})}(Ot)),Ot.exports}var Xa=window.DOMPurify||(window.DOMPurify=gn().default||gn());const Za=Yn(Xa),Ja={class:"flex flex-col items-center justify-center h-full p-6"},Qa={class:"text-lg font-semibold self-start mb-5"},eo={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},to=yn({__name:"RenameFile",props:{title:{}},emits:["rename","cancel"],setup(d,{emit:Z}){const de=d,re=Z,{t:he}=vn(),ce=v(),$=v(!0),_=Tn({title:de.title});function R(w){$.value=!1,re("rename",w)}const E={title:[{required:!0,message:he("labels.titleRequired")}]};function x(){$.value=!1,re("cancel")}return qn("Escape",x),Kn(()=>{ce.value.select(),ce.value.focus()}),(w,O)=>{const b=Na,fe=Da,J=An,Q=Oa,_e=Ma;return f(),H(_e,{visible:t($),"onUpdate:visible":O[2]||(O[2]=K=>dt($)?$.value=K:null),class:"nc-attachment-rename-modal",size:"small"},{default:A(()=>[I("div",Ja,[I("div",Qa,ae(w.$t("title.renameFile")),1),N(Q,{class:"w-full h-full","no-style":"",model:t(_),onFinish:O[1]||(O[1]=K=>R(t(_).title))},{default:A(()=>[N(fe,{class:"w-full !mb-0",name:"title",rules:E.title},{default:A(()=>[N(b,{ref_key:"inputEl",ref:ce,value:t(_).title,"onUpdate:value":O[0]||(O[0]=K=>t(_).title=K),class:"w-full nc-input-sm nc-input-shadow",placeholder:w.$t("general.rename")},null,8,["value","placeholder"])]),_:1},8,["rules"]),I("div",eo,[N(J,{key:"back","html-type":"back",size:"small",type:"secondary"},{default:A(()=>[xe(ae(w.$t("general.cancel")),1)]),_:1}),N(J,{key:"submit","html-type":"submit",size:"small",type:"primary"},{default:A(()=>[xe(ae(w.$t("general.confirm")),1)]),_:1})])]),_:1},8,["model"])])]),_:1},8,["visible"])}}}),no={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ao=I("path",{fill:"currentColor",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-9.5 8.5c0 .8-.7 1.5-1.5 1.5H7v2H5.5V9H8c.8 0 1.5.7 1.5 1.5zm5 2c0 .8-.7 1.5-1.5 1.5h-2.5V9H13c.8 0 1.5.7 1.5 1.5zm4-3H17v1h1.5V13H17v2h-1.5V9h3zm-6.5 0h1v3h-1zm-5 0h1v1H7z"},null,-1),oo=[ao];function io(d,Z){return f(),q("svg",no,[...oo])}const lo={name:"mdi-pdf-box",render:io},so={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ro=I("path",{fill:"currentColor",d:"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-.65-10l-2.1 9h-1.4l-1.8-6.79l-1.8 6.79h-1.4l-2.2-9h1.5l1.4 6.81l1.8-6.81h1.3l1.8 6.81l1.4-6.81z"},null,-1),co=[ro];function uo(d,Z){return f(),q("svg",so,[...co])}const mo={name:"mdi-file-word-outline",render:uo},fo={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},po=I("path",{fill:"currentColor",d:"M9.8 13.4h2.5c1.5 0 2.16-.28 2.8-.82c.64-.55.9-1.33.9-2.35c0-.97-.25-1.73-.9-2.35c-.65-.59-1.27-.88-2.8-.88H8v10h1.8zM19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-9.2 9V8.4h2.3c.66 0 1.17.25 1.5.6s.5.72.5 1.24c0 .56-.18.95-.5 1.26s-.7.5-1.38.5z"},null,-1),ho=[po];function _o(d,Z){return f(),q("svg",fo,[...ho])}const go={name:"mdi-file-powerpoint-box",render:_o},yo={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},vo=I("path",{fill:"currentColor",d:"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-5.1-5.5l2.9 4.5H14l-2-3.4l-2 3.4H8.2l2.9-4.5L8.2 10H10l2 3.4l2-3.4h1.8z"},null,-1),To=[vo];function Ao(d,Z){return f(),q("svg",yo,[...To])}const Eo={name:"mdi-file-excel-outline",render:Ao},[wo,ui]=Ia(d=>{const{$api:Z}=la(),de=Z.instance.defaults.baseURL,{row:re}=bn(),{fetchSharedViewAttachment:he}=Xn(),ce=X(Zn,v(!1)),{t:$}=vn(),_=X(Jn,v(!1)),R=X(Qn,v(!1)),E=X(En,v()),x=X(ea,v()),w=X(ta,v(!1)),O=v([]),b=v([]),fe=v(!1),J=v(!1),Q=v(),_e=v(null),K=v(!1),{base:Ve}=na(aa()),{api:Pe,isLoading:k}=oa(),{files:ge,open:D}=ia({reset:!0}),Me=v(!1),{appInfo:r}=wn(),ze={...r.value.ee&&{maxNumberOfAttachments:Math.max(1,+r.value.ncMaxAttachmentsAllowed||50)||50,maxAttachmentSize:Math.max(1,+r.value.ncAttachmentFieldSize||20)||20,supportedAttachmentMimeTypes:["*"]}},ee=async()=>{_e.value||(_e.value=await navigator.mediaDevices.getUserMedia({video:!0})),K.value=!0},ue=()=>{var c;(c=_e.value)==null||c.getTracks().forEach(y=>y.stop()),_e.value=null},ie=xn(()=>_.value&&R.value?O.value:b.value),ye=v(Array.from({length:ie.value.length},()=>!1));function Ne(c){_.value?(O.value.splice(c,1),b.value.splice(c,1),ye.value.splice(c,1),d(O.value)):(b.value.splice(c,1),ye.value.splice(c,1),d(JSON.stringify(b.value)))}async function be(c,y){var U,z,pe,He;if(!c.length&&!(y!=null&&y.length))return;const T={...ze,...sa((U=x==null?void 0:x.value)==null?void 0:U.meta)},C=[],P=[],B=[];for(const s of c.length?c:y||[]){if(r.value.ee){if(ie.value.length+(c.length||(y==null?void 0:y.length)||0)>T.maxNumberOfAttachments){Le.error(`You can only upload at most ${T.maxNumberOfAttachments} file${T.maxNumberOfAttachments>1?"s":""} to this cell.`);return}if(s!=null&&s.size&&s.size>T.maxAttachmentSize*1024*1024){Le.error(`The size of ${(s==null?void 0:s.name)||(s==null?void 0:s.fileName)} exceeds the maximum file size ${T.maxAttachmentSize} MB.`);continue}if(!T.supportedAttachmentMimeTypes.includes("*")&&!T.supportedAttachmentMimeTypes.includes(s.type||s.mimetype)&&!T.supportedAttachmentMimeTypes.includes((z=(s==null?void 0:s.type)||s.mimetype)==null?void 0:z.split("/")[0])){Le.error(`${(s==null?void 0:s.name)||(s==null?void 0:s.fileName)} has the mime type ${(s==null?void 0:s.type)||(s==null?void 0:s.mimetype)} which is not allowed in this column.`);continue}}if(c.length)P.push(s);else{const L=un(s.fileName??"",[...b.value,...B].map(a=>(a==null?void 0:a.title)||(a==null?void 0:a.fileName)),(s==null?void 0:s.type)||(s==null?void 0:s.mimetype)||"");B.push({...s,fileName:L,title:L})}}if(P.length&&_.value&&R.value){const s=await Promise.all(Array.from(P).map(L=>new Promise(a=>{const M={...L,file:L,title:L.name,mimetype:L.type};if(kt(L.name,L.mimetype??L.type)){const u=new FileReader;u.onload=o=>{var h;M.data=(h=o.target)==null?void 0:h.result,a(M)},u.onerror=()=>{a(M)},u.readAsDataURL(L)}else a(M)})));return b.value=[...b.value,...s],d(b.value)}else if(_.value&&R.value)return b.value=[...b.value,...B],d(b.value);if(c.length)try{const s=await Pe.storage.upload({path:[mn,Ve.value.id,(pe=E.value)==null?void 0:pe.id,(He=x.value)==null?void 0:He.id].join("/")},{files:P});for(const L of s)C.push({...L,title:un(L==null?void 0:L.title,[...b.value,...C].map(a=>(a==null?void 0:a.title)||(a==null?void 0:a.fileName)),L==null?void 0:L.mimetype)})}catch(s){Le.error(s.message||$("msg.error.internalError"))}else if(B.length){const s=Oe(B);if(!s)return;C.push(...s)}d(JSON.stringify([...b.value,...C]))}async function Oe(c,y=!1){var C,P;const T=Array.isArray(c)?c:[c];try{return await Pe.storage.uploadByUrl({path:[mn,Ve.value.id,(C=E.value)==null?void 0:C.id,(P=x.value)==null?void 0:P.id].join("/")},T)}catch(B){return console.log(B),y?"File couldn't be uploaded. Verify URL & try again.":(Le.error("File couldn't be uploaded. Verify URL & try again."),null)}}async function Ze(c,y,T){return new Promise(C=>{Me.value=!0;const{close:P}=Ca(to,{title:c.title,onRename:B=>{b.value[y].title=B,d(JSON.stringify(b.value)),P(),T&&(Q.value={...c,title:B}),Me.value=!1,C(!0)},onCancel:()=>{P(),Me.value=!1,C(!0)}})})}async function Fe(c,y){var T,C,P;if(!ce.value)if(c)await be(c);else{y.preventDefault();const B=Za.sanitize(((T=y.dataTransfer)==null?void 0:T.getData("text/html"))??"")??"",U=Ra(B)??"";if(!U){Le.error($("msg.error.draggedContentIsNotTypeOfImage"));return}const z=await ve(U);z!=null&&z.mimetype?await be([],[{...z,url:U,fileName:`image.${(C=z==null?void 0:z.mimetype)==null?void 0:C.split("/")[1]}`,title:`image.${(P=z==null?void 0:z.mimetype)==null?void 0:P.split("/")[1]}`}]):Le.error($("msg.error.fieldToParseImageData"))}}async function Se(){await Promise.all(ye.value.map(async(c,y)=>c&&await Re(ie.value[y]))),ye.value=Array.from({length:ie.value.length},()=>!1)}async function Re(c){if(!E.value||!x.value)return;const y=E.value.id,T=x.value.id,C=La(t(re).row,E.value.columns),P=c.url||c.path;y&&T&&C&&P?await(_.value?()=>he(T,C,P):()=>Z.dbDataTableRow.attachmentDownload(y,T,C,{urlOrPath:P}))().then(U=>{U!=null&&U.path?window.open(`${de}/${U.path}`,"_blank"):U!=null&&U.url?window.open(U.url,"_blank"):Le.error("Failed to download file")}):Le.error("Failed to download file")}async function ve(c){var y;try{const T=await fetch(c);if(T.ok){if((y=T.headers.get("content-type"))!=null&&y.startsWith("image/"))return{mimetype:T.headers.get("content-type")||void 0,size:+(T.headers.get("content-length")||0)||void 0};if(c.slice(c.lastIndexOf(".")+1).toLowerCase().length)return{mimetype:`image/${c.slice(c.lastIndexOf(".")+1).toLowerCase()}`,size:+(T.headers.get("content-length")||0)||void 0}}}catch(T){console.log(T)}}const g=c=>{switch(c){case"mdi-pdf-box":return lo;case"mdi-file-word-outline":return mo;case"mdi-file-powerpoint-box":return go;case"mdi-file-excel-outline":return Eo;default:return Sn}};return Dt(ge,c=>c&&be(c)),{attachments:b,visibleItems:ie,isPublic:_,isForm:R,isReadonly:ce,meta:E,column:x,editEnabled:w,isLoading:k,api:Pe,open:()=>D(),onDrop:Fe,modalRendered:fe,modalVisible:J,FileIcon:g,removeFile:Ne,renameFile:Ze,downloadAttachment:Re,updateModelValue:d,selectedFile:Q,uploadViaUrl:Oe,selectedVisibleItems:ye,storedFiles:O,bulkDownloadAttachments:Se,defaultAttachmentMeta:ze,startCamera:ee,stopCamera:ue,videoStream:_e,permissionGranted:K,isRenameModalOpen:Me}},"useAttachmentCell");function xo(d,Z,de,re=!1){const he=v(!1);function ce(E){E.stopImmediatePropagation(),E.preventDefault(),he.value=!0}async function $(E){E.stopImmediatePropagation(),E.preventDefault(),he.value=!1;const x=t(Z);if(x.length<2)return;const{newIndex:w=0,oldIndex:O=0}=E;w!==O&&(x.splice(w,0,...x.splice(O,1)),de(x))}let _;const R=E=>{_=new ka(E,{handle:".nc-attachment",ghostClass:"ghost",onStart:ce,onEnd:$})};return ra(E=>{const x=t(d);E(()=>{x&&(_!=null&&_.el)&&_.destroy()}),x&&!t(re)&&R(x)}),{dragging:he,initSortable:R}}const bo=it(()=>lt(()=>import("./C5wuhVxs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]),import.meta.url).then(d=>d.default||d)),So=it(()=>lt(()=>import("./DXof0zKo.js"),__vite__mapDeps([35,1,2]),import.meta.url).then(d=>d.default||d)),Ro=it(()=>lt(()=>import("./B8UlVDE2.js"),__vite__mapDeps([36,1,2,37,38,39,25,40,3,4,5,6,41,9,10,11,12,42,43,7,8,13,14,15,16,17,18,19,20,21,22,23,24,26,27,28,29,30,31,32,33,44]),import.meta.url).then(d=>d.default||d)),Io=it(()=>lt(()=>import("./CFqrwqvG.js"),__vite__mapDeps([45,3,1,2,4,5,6]),import.meta.url).then(d=>d.default||d)),Co=it(()=>lt(()=>import("./Dw67C2wu.js"),__vite__mapDeps([46,1,2,47,48,49,50,41,5,7,8,9,10,11,13,14,15,16,17,18,19,12,20,21,4,22,23,24,25,26,27,28,29,30,31,32,33,51]),import.meta.url).then(d=>d.default||d)),Lo={key:0,class:"form-attachment-cell"},Mo={class:"flex items-center !text-xs gap-1 justify-center"},No={class:"text-[10px]"},Oo={key:1,class:"grid mt-2 gap-2 grid-cols-2"},Do=["title"],ko={class:"flex-none hide-ui transition-all transition-ease-in-out !h-5 gap-0.5 pb-2 flex items-center bg-white"},Po={"data-rec":"true"},zo={class:"flex items-center !text-xs gap-1 justify-center"},Fo={class:"text-[10px]"},Ho={class:"text-center w-full"},Uo={key:0},$o=["onClick"],Bo=["onClick"],Vo={class:"flex flex-row items-center py-2.25 px-2.5 bg-gray-50 rounded-lg text-gray-700 mb-4"},Go={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},jo=yn({__name:"index",props:{modelValue:{},rowIndex:{}},emits:["update:modelValue"],setup(d,{emit:Z}){const de=Z,re=X(ca,v()),he=v(),ce=v(),$=X(ua,re.value),_=X(ma,v(!1)),R=X(fa,v(!1)),E=X(pa,v(!1)),x=X(da,v(!1)),w=X(ha,v(!1)),{isSharedForm:O}=wa(),{isMobileMode:b}=wn(),{getPossibleAttachmentSrc:fe}=xa(),{isPublic:J,isForm:Q,column:_e,modalRendered:K,downloadAttachment:Ve,renameFile:Pe,modalVisible:k,attachments:ge,visibleItems:D,onDrop:Me,isLoading:r,FileIcon:ze,selectedFile:ee,isReadonly:ue,storedFiles:ie,removeFile:ye}=wo(Re),{dragging:Ne}=xo(ce,D,Re,ue),be=X(fn,v(!1)),{state:Oe,row:Ze}=bn(),Fe=X(En,v());!J.value&&!Q.value&&Fe.value&&ba(Fe,Ze);const{isOverDropZone:Se}=_a($,Me);Dt(()=>d.modelValue,async a=>{if(a)try{const M=((typeof a=="string"?JSON.parse(a):a)||[]).filter(Boolean);J.value&&Q.value?ie.value=M:ge.value=M}catch(M){console.error(M),J.value&&Q.value?ie.value=[]:ge.value=[]}else J.value&&Q.value?ie.value=[]:ge.value=[]},{immediate:!0});function Re(a){de("update:modelValue",a)}ga("Escape",()=>{k.value=!1,Se.value=!1}),Dt(()=>ie.value.length||0,()=>{Oe.value[_e.value.title]=ie.value});const ve=v(!1);Sa(X(fn,v(!1)),a=>{var M;if(!k.value&&a.key==="Enter"&&!ue.value&&!ee.value){if(ve.value)return;a.stopPropagation(),!k.value&&!b.value?(K.value=!0,k.value=!0):(M=document.querySelector(".nc-attachment-modal.active .nc-attach-file"))==null||M.click()}});const g=X(ya,v()),c=()=>{ve.value=!0},y=a=>{a.stopPropagation(),c()},T=()=>{b.value||(K.value=!0,k.value=!0)},C=a=>{b.value&&!E.value||!b.value&&(_.value||R.value)&&!E.value||(ee.value=a)},P=a=>{x.value||(y(a),a.stopPropagation())},B=a=>{x.value&&(y(a),a.stopPropagation())},{isUIAllowed:U}=va(),z=v(!1),pe=Tn({title:"",i:0});function He(a,M){z.value=!0,pe.i=M,pe.title=a}const s=a=>{ye(a),z.value=!1,pe.i=0,pe.title=""},L=xn(()=>{if(Q.value||E.value)return"small";switch(g.value){case 1:return"tiny";case 2:return"tiny";case 4:return"small";case 6:return"small";default:return"tiny"}});return(a,M)=>{const u=Ka,o=An,h=bo,m=So,V=Sn,G=Ta,De=Ua,Je=Ea,st=Ro,Qe=Aa,ht=Io,_t=Co;return f(),q(ft,null,[t(E)||t(Q)?(f(),q("div",Lo,[N(o,{"data-testid":"attachment-cell-file-picker-button",type:"secondary",size:"small",onClick:y},{default:A(()=>[I("div",Mo,[N(u,{class:"text-gray-500 text-tiny"}),I("span",No,ae(a.$t("activity.addFiles")),1)])]),_:1}),t(ee)?(f(),H(h,{key:0})):me("",!0),t(D).length>0?(f(),q("div",Oo,[(f(!0),q(ft,null,pn(t(D),(p,Ae)=>(f(),q("div",{key:`${p==null?void 0:p.title}-${Ae}`,class:"nc-attachment-item group gap-2 flex border-1 rounded-md border-gray-200 flex-col relative"},[I("div",{class:we([[t(Ne)?"cursor-move":"cursor-pointer"],"nc-attachment h-full flex justify-center items-center overflow-hidden"])},[("isImage"in a?a.isImage:t(kt))(p.title,p.mimetype)?(f(),H(m,{key:0,srcs:t(fe)(p,"small"),"object-fit":"cover",class:"!w-full !h-42 object-cover !m-0 rounded-t-[5px] justify-center",onClick:Te=>C(p)},null,8,["srcs","onClick"])):p.icon?(f(),H(ke(t(ze)(p.icon)),{key:1,height:45,width:45,onClick:Te=>ee.value=p},null,8,["onClick"])):(f(),H(V,{key:2,height:45,width:45,onClick:Te=>ee.value=p},null,8,["onClick"]))],2),I("div",{class:"relative px-1 flex",title:p.title},[N(G,{"show-on-truncate-only":"",class:"flex-auto truncate w-full text-[13px] items-center text-sm line-height-4"},{title:A(()=>[xe(ae(p.title),1)]),default:A(()=>[xe(ae(p.title)+" ",1)]),_:2},1024),I("div",ko,[N(G,{placement:"bottom"},{title:A(()=>[xe(ae(a.$t("title.downloadFile")),1)]),default:A(()=>[N(o,{class:"!p-0 !w-5 !h-5 text-gray-500 !min-w-[fit-content]",size:"xsmall",type:"text",onClick:Te=>t(Ve)(p)},{default:A(()=>[(f(),H(ke(("iconMap"in a?a.iconMap:t(Xe)).download),{class:"!text-xs h-13px w-13px"}))]),_:2},1032,["onClick"])]),_:2},1024),!t(O)||!t(ue)&&t(U)("dataEdit")&&!t(J)?(f(),H(G,{key:0,placement:"bottom"},{title:A(()=>[xe(ae(a.$t("title.renameFile")),1)]),default:A(()=>[N(o,{size:"xsmall",class:"!p-0 nc-attachment-rename !h-5 !w-5 !text-gray-500 !min-w-[fit-content]",type:"text",onClick:Te=>t(Pe)(p,Ae)},{default:A(()=>[(f(),H(ke(("iconMap"in a?a.iconMap:t(Xe)).rename),{class:"text-xs h-13px w-13px"}))]),_:2},1032,["onClick"])]),_:2},1024)):me("",!0),t(ue)?me("",!0):(f(),H(G,{key:1,placement:"bottom"},{title:A(()=>[xe(ae(a.$t("title.removeFile")),1)]),default:A(()=>[N(o,{class:"!p-0 !h-5 !w-5 !text-red-500 nc-attachment-remove !min-w-[fit-content]",size:"xsmall",type:"text",onClick:Te=>He(p.title,Ae)},{default:A(()=>[t(O)||t(U)("dataEdit")&&!t(J)?(f(),H(ke(("iconMap"in a?a.iconMap:t(Xe)).delete),{key:0,class:"text-xs h-13px w-13px"})):me("",!0)]),_:2},1032,["onClick"])]),_:2},1024))])],8,Do)]))),128))])):me("",!0)])):(f(),q("div",{key:1,ref_key:"attachmentCellRef",ref:he,style:pt({height:`max(${!t(g)||t(g)===1?("rowHeightInPx"in a?a.rowHeightInPx:t(hn))[1]-10:("rowHeightInPx"in a?a.rowHeightInPx:t(hn))[`${t(g)}`]-18}px, ${t(w)?"22px":"32px"})`}),class:we(["nc-attachment-cell relative group flex color-transition gap-2 flex items-center w-full xs:min-h-12 xs:max-h-32",{"justify-center":!t(be),"justify-between":t(be)}])},[t(ee)?(f(),H(h,{key:0})):me("",!0),!t(ue)&&!t(Ne)&&t($)?(f(),H(Je,{key:1,modelValue:t(Se),"onUpdate:modelValue":M[0]||(M[0]=p=>dt(Se)?Se.value=p:null),inline:"",target:t($),"data-rec":"true",class:"nc-attachment-cell-dropzone text-white text-lg bg-gray-600/75 flex text-sm items-center justify-center gap-2"},{default:A(()=>[N(De),xe(" "+ae(a.$t("labels.dropHere")),1)]),_:1},8,["modelValue","target"])):me("",!0),!t(ue)&&t(be)&&!t(D).length?(f(),q("div",{key:2,class:we([{"sm:mx-auto sm:px-4 xs:w-full xs:min-w-8":!t(D).length},"group cursor-pointer py-1 flex gap-1 items-center rounded border-none"]),tabindex:"0",onKeydown:[dn(P,["enter"]),dn(B,["space"])]},[t(r)?(f(),H(ke(("iconMap"in a?a.iconMap:t(Xe)).reload),{key:0,class:we({"animate-infinite animate-spin":t(r)})},null,8,["class"])):me("",!0),N(G,{placement:"bottom",class:"xs:w-full"},{title:A(()=>[I("span",Po,ae(a.$t("activity.attachmentDrop")),1)]),default:A(()=>[N(o,{type:"secondary",size:"xsmall","data-testid":"attachment-cell-file-picker-button",class:"!px-2 !h-5.5 !min-w-[fit-content]",onClick:Nt(y,["stop"])},{default:A(()=>[I("div",zo,[N(u,{class:"text-gray-500 text-tiny"}),I("span",Fo,ae(a.$t("activity.addFiles")),1)])]),_:1})]),_:1})],34)):me("",!0),t(D).length>0?(f(),q(ft,{key:3},[I("div",{ref_key:"sortableRef",ref:ce,class:we([{"justify-center":!t(_)&&!t(R),"py-1":t(g)===1,"py-1.5 !gap-4 ":t(g)!==1},"nc-attachment-wrapper flex cursor-pointer w-full items-center flex-wrap gap-3 nc-scrollbar-thin mt-0 items-start px-[1px]"]),style:pt({maxHeight:`max(100%, ${t(w)?"22px":"32px"})`})},[(f(!0),q(ft,null,pn(t(D),(p,Ae)=>(f(),H(G,{key:p.url||p.title,placement:"bottom",class:"nc-attachment-item"},{title:A(()=>[I("div",Ho,ae(p.title),1)]),default:A(()=>[("isImage"in a?a.isImage:t(kt))(p.title,p.mimetype??p.type)?(f(),q("div",Uo,[I("div",{class:"nc-attachment flex items-center flex-col flex-wrap justify-center flex-auto",onClick:()=>C(p)},[N(m,{alt:p.title||`#${Ae}`,class:we(["rounded",{"h-5.5":!t(w)&&(!t(g)||t(g)===1),"h-4.5":t(w)&&(!t(g)||t(g)===1),"h-8":t(g)===2,"h-16.8":t(g)===4,"h-20.8":t(g)===6}]),srcs:t(fe)(p,t(L))},null,8,["alt","class","srcs"])],8,$o)])):(f(),q("div",{key:1,class:we(["nc-attachment flex items-center justify-center px-4",{"h-5.5":!t(w)&&(!t(g)||t(g)===1),"h-4.5":t(w)&&(!t(g)||t(g)===1),"h-8":t(g)===2,"h-16.8":t(g)===4,"h-20.8 !w-30":t(g)===6}]),onClick:Te=>C(p)},[p.icon?(f(),H(ke(t(ze)(p.icon)),{key:0})):(f(),H(V,{key:1}))],10,Bo))]),_:2},1024))),128))],6),N(G,{placement:"bottom",class:we(["nc-action-icon !absolute hidden right-0 nc-text-area-expand-btn !group-hover:block z-3",{"top-0":t(w)&&!(!t(g)||t(g)===1),"top-1":!t(w)}]),style:pt(t(w)&&(!t(g)||t(g)===1)?{top:"50%",transform:"translateY(-50%)"}:void 0)},{title:A(()=>[xe(ae(a.$t("activity.viewAttachment")),1)]),default:A(()=>[N(o,{type:"secondary",size:"xsmall","data-testid":"attachment-cell-file-picker-button",class:"!p-0 !w-5 !h-5 !min-w-[fit-content]",onClick:Nt(T,["stop"])},{default:A(()=>[t(r)?(f(),H(ke(("iconMap"in a?a.iconMap:t(Xe)).reload),{key:0,class:we({"animate-infinite animate-spin":t(r)})},null,8,["class"])):(f(),H(ke(("iconMap"in a?a.iconMap:t(Xe)).expand),{key:1,class:"transform !group-hover:text-grey-800 text-gray-700 text-xs"}))]),_:1})]),_:1},8,["class","style"]),N(G,{placement:"bottom",class:we(["nc-action-icon !absolute hidden left-0 nc-text-area-expand-btn !group-hover:block z-3",{"top-0":t(w)&&!(!t(g)||t(g)===1),"top-1":!t(w)}]),style:pt(t(w)&&(!t(g)||t(g)===1)?{top:"50%",transform:"translateY(-50%)"}:void 0)},{title:A(()=>[xe(ae(a.$t("activity.addFiles")),1)]),default:A(()=>[N(o,{type:"secondary",size:"xsmall","data-testid":"attachment-cell-file-picker-button",class:"!p-0 !w-5 !h-5 !min-w-[fit-content]",onClick:Nt(y,["stop"])},{default:A(()=>[N(u,{class:"text-gray-500 text-tiny !group-hover:text-grey-800 text-gray-700"})]),_:1})]),_:1},8,["class","style"])],64)):me("",!0),t(K)?(f(),H(st,{key:4})):me("",!0)],6)),t(Q)||t(E)?(f(),H(ht,{key:2,visible:t(z),"onUpdate:visible":M[1]||(M[1]=p=>dt(z)?z.value=p:null),"entity-name":"File","on-delete":()=>s(t(pe).i)},{"entity-preview":A(()=>[I("span",null,[I("div",Vo,[N(Qe,{icon:"file",class:"nc-view-icon"}),I("div",Go,ae(t(pe).title),1)])])]),_:1},8,["visible","on-delete"])):me("",!0),t(ve)?(f(),H(_t,{key:3,value:t(ve),"onUpdate:value":M[2]||(M[2]=p=>dt(ve)?ve.value=p:null)},null,8,["value"])):me("",!0)],64)}}}),mi=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"}));export{Ua as _,xo as a,Sn as b,mi as i,ui as u};
