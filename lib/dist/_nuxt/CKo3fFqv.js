const __vite__fileDeps=["./X3SBmoPb.js","./3QBYHahY.js","./entry.Ic44fwRn.css","./2yzrrcqg.js","./Tabs.DaLSLYpn.css","./AdvanceColorPicker.BztCsLjV.css","./Cy6djby-.js","./CWFUjbDo.js","./DdUr8XSo.js","./MenuItem.C7h59s4s.css","./PcgFfkcK.js","./Menu.CQ8GNWeI.css","./Kma333Sh.js","./D7hrRKCy.js","./BEpKpjF5.js","./CGxepfeV.js","./BQQOEPN4.js","./3ezdMRmZ.js","./DPgYHC40.js","./xnDaHwV-.js","./Select.C8Fy0-eI.css","./DMimqSFg.js","./BV5EkxN-.js","./DPqnb67u.js","./CtMydB5S.js","./D4iSzjWt.js","./CfxEkdGP.js","./CSl6euFG.js","./FieldListAutoCompleteDropdown.B9RfDcmT.css","./Bt6TDbeH.js","./DGM-hiY9.js","./CI9Dknfq.js","./0DGTjfkJ.js","./Ci1lK5Ee.js","./SingleSelect.BmeB4pF9.css","./BcLlH2U_.js","./CNtEbMQ_.js","./Dg1gNFnz.js","./MultiSelect.u_q_s2XC.css","./Br97zOmN.js","./6yFCeHM-.js","./CRLT1BlI.js","./DateWeekSelector.Cg_ptNCJ.css","./cW5_x0lr.js","./DatePicker.Lfes7IF6.css","./CgGRcmqz.js","./YearPicker.CRuVqaLl.css","./Dq3zcGy9.js","./DFA1iJCE.js","./TimePicker.BLKBFc8w.css","./C4NkiKp9.js","./Rating.tDPS6ox-.css","./BrM32iTX.js","./C9Sjn86N.js","./Duration.Dl_1fcHT.css","./xjLhZbTD.js","./CdYx1kPu.js","./Percent.Bbe9UfL3.css","./BT04iVBh.js","./Currency.DBXjrMnJ.css","./C0j1q3Yn.js","./Decimal.G35sucCw.css","./ccYJAzcu.js","./Integer.CjSMiUMb.css","./Itk_4Ub9.js","./Float.BGqcJqPZ.css","./CZtdcH_f.js","./yhBK-xu8.js","./DmzaAQYu.js","./UserIcon.DEVmGavY.css","./User.Cb8PWh8F.css","./BteOdwRG.js","./ColumnFilter.CQ1nWe2M.css","./Bfk_gX8L.js","./xWA_7i9p.js","./CWtzMcwx.js","./DAKhk9t6.js","./Bk0xUMNV.js","./wEQwkVjR.js","./DvDgJkhr.js","./Ddy65kPJ.js","./ChSCnN6E.js","./kHOslGNR.js","./CmN9vPg3.js","./BsWDDIqE.js","./ceYq-xax.js","./SelectOptions.JaHDUZhn.css","./Cc8awia0.js","./RichLongTextDefaultValue.WUdV6DkU.css","./CC9TCuLb.js","./DHsWytsD.js","./Badge.D0-UrqG9.css","./T74iQZdg.js","./Bj2FvocX.js","./boyBAVNN.js","./BYmqikBK.js","./-VIMLpA0.js","./Cs-k6wm5.js","./og6cBSyd.js","./DbU9XkQ5.js","./BOhVjQ6W.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Xl=Object.defineProperty;var Ql=(p,D,w)=>D in p?Xl(p,D,{enumerable:!0,configurable:!0,writable:!0,value:w}):p[D]=w;var Gt=(p,D,w)=>(Ql(p,typeof D!="symbol"?D+"":D,w),w);import{f as ye,ad as ke,o as l,S as u,w as n,a,Y as xe,V as Z,P as e,W as ve,d as E,a8 as Yl,b as o,t as C,Q as le,a0 as Ct,bc as Bt,r as W,L as Ft,g as se,hW as ot,i as Ye,d1 as m,c as y,aL as _t,T as k,aq as Y,av as pe,U as ge,hX as ut,$ as Ie,iq as ft,bN as We,d9 as lt,hs as Yt,ex as Zl,ir as Jl,is as en,it as tn,fZ as ln,aa as at,a9 as be,dc as nn,p as Zt,e as Jt,b1 as el,_ as Ke,a6 as Ze,cs as Pt,ct as vl,ai as Je,a1 as rt,gb as Tt,dD as It,H as Be,iu as st,Z as nt,iv as on,az as gt,cM as Dt,cY as yt,hZ as gl,g1 as an,iw as Qt,fN as pt,ix as sn,n as Mt,fO as tt,iy as yl,fH as un,iz as hl,a3 as rn,fr as Rt,d2 as tl,F as ll,fQ as vt,iA as cn,a7 as bl,cQ as kl,iB as dn,X as Et,iC as mn,d6 as pn,aB as _n,cB as fn,O as vn,R as $t,iD as gn,d7 as yn,fb as hn,iE as bn,co as kn,N as wn,aF as xn,hM as $n,gC as Cn,aj as rl,iF as Tn,dm as In,cg as Dn,A as Mn}from"./3QBYHahY.js";import{_ as Sn}from"./CJ26qO3d.js";import{_ as On}from"./DiJvWPjA.js";import{_ as Ln}from"./WrawXyJR.js";import"./kHOslGNR.js";import{I as nl}from"./CmN9vPg3.js";import St from"./BV5EkxN-.js";import Ot from"./CtMydB5S.js";import{a as Fe,_ as Un,u as An}from"./xWA_7i9p.js";import{g as cl,i as dl,u as En}from"./BYmqikBK.js";import{e as Nt,l as Wt,K as ml,R as pl,P as Nn}from"./BHEjdcp1.js";import{a as Rn,_ as Bn,L as Fn}from"./CfC0eoFh.js";import{_ as we}from"./Bk0xUMNV.js";import{S as Le,_ as Ue}from"./BEpKpjF5.js";import{_ as ct}from"./4uOUlFJU.js";import{_ as ol}from"./Kma333Sh.js";import{R as al,_ as sl}from"./0DGTjfkJ.js";import{_ as Pn}from"./2yzrrcqg.js";import{a as wl}from"./CfxEkdGP.js";import{d as Vn}from"./C9Sjn86N.js";import{_ as il}from"./CsJPQclb.js";import{_ as qn}from"./CTSlxRce.js";import{_ as jn}from"./D7hrRKCy.js";import{_ as zn}from"./DD1BMgnW.js";import{_ as Kn}from"./BLIqcdwb.js";import{u as Hn,_ as Gn}from"./CtQJu3r-.js";import{_ as Wn}from"./CyuhXrst.js";import{u as Xn}from"./D_owt2V3.js";import{u as Qn}from"./DvDgJkhr.js";import{u as Yn}from"./BVQBF9Vn.js";import{k as _l,i as Xt,c as Zn}from"./D4iSzjWt.js";import{F as Jn}from"./DAKhk9t6.js";import{_ as eo}from"./BsWDDIqE.js";const to=a("div",{class:"flex flex-row pb-2 mb-4 font-medium text-lg border-b-1 border-gray-50 text-gray-800"},"Field Type Change",-1),lo={class:"mb-3 text-gray-800"},no={class:"flex item-center gap-2 mb-4"},oo={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},ao=ye({__name:"ColumnUpdateConfirm",props:{visible:{type:Boolean},saving:{type:Boolean}},emits:["submit","cancel","update:visible"],setup(p,{emit:D}){const w=p,P=D,t=ke(w,"visible",P);return(i,_)=>{const M=Ct,x=Sn;return l(),u(x,{visible:e(t),"onUpdate:visible":_[3]||(_[3]=c=>le(t)?t.value=c:null),size:"small"},{default:n(()=>[a("div",{class:"flex flex-col p-6",onClick:_[2]||(_[2]=xe(()=>{},["stop"]))},[to,a("div",lo,[a("div",no,[(l(),u(Z(("iconMap"in i?i.iconMap:e(ve)).warning),{id:"nc-selected-item-icon",class:"text-yellow-500 w-10 h-10"})),E(" This action cannot be undone. Converting data types may result in data loss. Proceed with caution! ")])]),Yl(i.$slots,"entity-preview"),a("div",oo,[o(M,{type:"secondary",onClick:_[0]||(_[0]=c=>t.value=!1)},{default:n(()=>[E(C(i.$t("general.cancel")),1)]),_:1}),o(M,{key:"submit",autofocus:"",type:"primary","html-type":"submit",loading:i.saving,"data-testid":"nc-delete-modal-delete-btn",onClick:_[1]||(_[1]=c=>P("submit"))},{loading:n(()=>[E(" Saving... ")]),default:n(()=>[E(" Update ")]),_:1},8,["loading"])])])]),_:3},8,["visible"])}}}),so=["onKeydown"],io={class:"nc-column-list-wrapper flex-col w-full max-h-[290px] nc-scrollbar-thin !overflow-y-auto px-2"},uo={key:0,class:"px-2 py-6 text-gray-500 flex flex-col items-center gap-6"},ro=a("img",{src:Ln,class:"!w-[164px] flex-none",alt:"No search results found"},null,-1),co=["data-testid","onClick"],mo={class:"flex gap-2 items-center"},po={class:"flex-1 text-sm"},_o={key:0,class:"!text-xs !text-gray-300"},fo=ye({__name:"UITypesOptionsWithSearch",props:{options:{}},emits:["selected"],setup(p,{emit:D}){const w=p,P=D,{options:t}=Bt(w),i=W(""),{isMetaReadOnly:_}=Ft(),M=se(()=>{var f;return((f=t.value)==null?void 0:f.filter(O=>O.name.toLowerCase().includes(i.value.toLowerCase())||ot[O.name]&&ot[O.name].toLowerCase().includes(i.value.toLowerCase())))??[]}),x=W(),c=W(-1),S=f=>_.value&&!ut.includes(f),T=f=>{!f||S(f)||P("selected",f)},Q=()=>{const f=document.querySelector(".nc-column-list-option-active");f&&setTimeout(()=>{f==null||f.scrollIntoView({behavior:"smooth",block:"center"})},50)},V=()=>{c.value=Math.min(c.value+1,M.value.length-1),Q()},q=()=>{c.value=Math.max(c.value-1,0),Q()},d=()=>{(M.value[c.value]||M.value[0])&&T(M.value[c.value].name)};return Ye(()=>{i.value="",c.value=t.value.findIndex(f=>f.name===m.SingleLineText)}),(f,O)=>{const B=Ie,j=nl,ce=On;return l(),y("div",{class:"flex-1 border-1 border-gray-200 rounded-lg flex flex-col py-2","data-testid":"nc-column-uitypes-options-list-wrapper",onKeydown:[_t(xe(V,["prevent"]),["arrow-down"]),_t(xe(q,["prevent"]),["arrow-up"]),O[3]||(O[3]=_t(xe(F=>T(e(M)[e(c)].name),["prevent"]),["enter"]))]},[a("div",{class:"w-full pb-2 px-2",onClick:O[2]||(O[2]=xe(()=>{},["stop"]))},[o(j,{ref_key:"inputRef",ref:x,value:e(i),"onUpdate:value":O[0]||(O[0]=F=>le(i)?i.value=F:null),placeholder:"Search field type",class:"nc-column-type-search-input nc-toolbar-dropdown-search-field-input",onKeydown:_t(xe(d,["stop"]),["enter"]),onChange:O[1]||(O[1]=F=>c.value=0)},{prefix:n(()=>[o(B,{icon:"search",class:"nc-search-icon h-4 w-4 mr-1"})]),_:1},8,["value","onKeydown"])]),a("div",io,[e(M).length?k("",!0):(l(),y("div",uo,[ro,E(" "+C(e(t).length?f.$t("title.noResultsMatchedYourSearch"):"The list is empty"),1)])),(l(!0),y(Y,null,pe(e(M),(F,ie)=>(l(),u(ce,{key:ie,message:f.$t("tooltip.typeNotAllowed"),enabled:S(F.name)},{default:n(()=>[a("div",{class:ge(["flex w-full py-2 items-center justify-between px-2 rounded-md",[`nc-column-list-option-${ie}`,{"hover:bg-gray-100 cursor-pointer":!S(F.name),"bg-gray-100 nc-column-list-option-active":e(c)===ie&&!S(F.name),"!text-gray-400 cursor-not-allowed":S(F.name)}]]),"data-testid":F.name,onClick:U=>T(F.name)},[a("div",mo,[(l(),u(Z(F.icon),{class:ge(["w-4 h-4",S(F.name)?"!text-gray-400":"text-gray-700"])},null,8,["class"])),a("div",po,C(e(ot)[F.name]),1),F.deprecated?(l(),y("span",_o,"("+C(f.$t("general.deprecated"))+")",1)):k("",!0)])],10,co)]),_:2},1032,["message","enabled"]))),128))])],40,so)}}}),vo=Object.keys(ft);function fl(p,D){let w=!1,P=!1,t=!1;for(let i=0;i<D;i++){const _=p[i];if(t){t=!1;continue}if(_==="\\"){t=!0;continue}_==="'"&&!P?w=!w:_==='"'&&!w&&(P=!P)}return P||w}class go{constructor(){Gt(this,"trie");Gt(this,"suggestions");this.trie={},this.suggestions=[]}newNode(){return{value:[],isLeaf:!1,children:{}}}add(D){Object.keys(this.trie).length===0&&(this.trie=this.newNode());let w=this.trie;for(const P of D.text.toLowerCase())P in w.children||(w.children[P]=this.newNode()),w=w.children[P];w.value=w.value||[],w.value.push(D),w.isLeaf=!0}find(D){Object.keys(this.trie).length===0&&(this.trie=this.newNode());let w=this.trie;for(const P of D)if(P in w.children)w=w.children[P];else return null;return w}traverse(D){D.isLeaf&&this.suggestions.push(...D.value);for(const w in D.children)this.traverse(D.children[w])}complete(D,w=null){this.suggestions=[];const P=this.find(D.toLowerCase());if(!P||Object.keys(P).length===0)return this.suggestions;this.suggestions.push(...P.value);const t=P.children;let i=0;for(const _ in t)if(this.traverse(t[_]),i++,w&&i===w)break;return this.suggestions}}const yo=Object.keys(ft),ho={base:"vs",inherit:!0,rules:[{token:"string",foreground:"#007b77",fontStyle:"bold"},{token:"keyword",foreground:"#00921d",fontStyle:"bold"},{token:"number",foreground:"#9c6200",fontStyle:"bold"},{token:"operator",foreground:"#000000"},{token:"identifier",foreground:"#8541f9",fontStyle:"bold"},{token:"delimiter.parenthesis",foreground:"#333333",fontStyle:"bold"},{token:"delimiter.brace",foreground:"#8541f9",fontStyle:"bold"},{token:"invalid",foreground:"#000000"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editorCursor.foreground":"#3366FF","editor.selectionBackground":"#3366FF50",focusBorder:"#ffffff"}},bo=p=>(p=p.map(w=>`{${w}}`),{defaultToken:"invalid",keywords:yo,identifiers:p,brackets:[{open:"(",close:")",token:"delimiter.parenthesis"},{open:"{",close:"}",token:"delimiter.brace"}],tokenizer:{root:[[/"/,{token:"string.quote",bracket:"@open",next:"@dblString"}],[/'/,{token:"string.quote",bracket:"@open",next:"@sglString"}],[new RegExp(`\\{(${p.join("|").replace(/[{}]/g,"")})\\}`),{cases:{"@identifiers":"identifier","@default":"invalid"}}],[/[a-zA-Z_]\w*/,{cases:{"@keywords":"keyword","@default":"invalid"}}],[/\d+/,"number"],[/[-+/*=<>!]+/,"operator"],[/[{}()]/,"@brackets"],[/[ \t\r\n]+/,"white"]],dblString:[[/[^\\"]+/,"string"],[/\\./,"string.escape"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],sglString:[[/[^\\']+/,"string"],[/\\./,"string.escape"],[/'/,{token:"string.quote",bracket:"@close",next:"@pop"}]]}}),ko={brackets:[["{","}"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},it={name:"formula",theme:ho,generateLanguageDefinition:bo,languageConfiguration:ko},xl=p=>(Zt("data-v-412451d9"),p=p(),Jt(),p),wo={class:"pr-3"},xo={class:"flex flex-row w-full justify-between pb-2 border-b-1"},$o={class:"flex items-center gap-x-1 font-semibold text-lg text-gray-600"},Co={class:"flex flex-col max-h-120 nc-scrollbar-thin pr-2"},To={class:"flex mt-3 text-[13px] leading-6"},Io=xl(()=>a("div",{class:"text-gray-500 uppercase text-[11px] mt-3 mb-2"},"Syntax",-1)),Do={class:"bg-white rounded-md py-1 text-[13px] mono-font leading-6 px-2 border-1"},Mo=xl(()=>a("div",{class:"text-gray-500 uppercase text-[11px] mt-3 mb-2"},"Examples",-1)),So={class:"flex flex-row mt-3 mb-3 justify-end pr-3"},Oo=["href"],Lo={key:0,class:"border-b-1 bg-gray-50 px-3 py-1 uppercase text-gray-600 text-xs font-semibold sticky top-0 z-10"},Uo={key:0,class:"ml-5 text-gray-400 text-xs"},Ao={key:0,class:"border-b-1 bg-gray-50 px-3 py-1 uppercase text-gray-600 text-xs font-semibold sticky top-0 z-10"},Eo={class:"flex items-center gap-x-1 justify-between"},No={class:"flex items-center gap-x-1 rounded-md px-1 h-5"},Ro={class:"text-small leading-[18px] text-gray-800 font-weight-500"},Bo=ye({__name:"FormulaInputHelper",props:{error:{type:Boolean},value:{},label:{},editorHeight:{},suggestionHeight:{default:"large"},disableSuggestionHeaders:{type:Boolean,default:!1}},emits:["update:value"],setup(p,{emit:D}){const w=p,P=D,{error:t,suggestionHeight:i,editorHeight:_}=Bt(w),M=ke(w,"value",P),x=[m.QrCode,m.Barcode,m.Button],{sqlUi:c,column:S,fromTableExplorer:T,validateInfos:Q}=Fe(),V=We(lt,W()),q=se(()=>{var I,L;return((L=(I=V==null?void 0:V.value)==null?void 0:I.columns)==null?void 0:L.filter(te=>!(x.includes(te.uidt)||Yt(te,V.value))))||[]}),d=W(),f=W(0),O=W(!0),B=vo,j=["+","-","*","/",">","<","==","<=",">=","!=","&"],ce=W(!1),F=W([]),ie=W([]),U=W(""),$=W(0),ne={column:0,function:1,op:2},de=se(()=>{const I=c.value.getUnsupportedFnList();return[...B.map(L=>({text:`${L}()`,type:"function",description:ft[L].description,syntax:ft[L].syntax,examples:ft[L].examples,docsUrl:ft[L].docsUrl,unsupported:I.includes(L)})),...q.value.filter(L=>{var te;return L.uidt===m.LinkToAnotherRecord&&L.system?!1:S?((te=S.value)==null?void 0:te.id)!==L.id:!0}).map(L=>({text:L.title,type:"column",icon:cl(L.uidt)?Zl(cl(L.uidt)):void 0,uidt:L.uidt})),...j.map(L=>({text:L,type:"op"}))].sort((L,te)=>L.unsupported&&!te.unsupported?1:!L.unsupported&&te.unsupported?-1:0)}),R=W(de.value),g=se(()=>{const I=new go;for(const L of de.value)I.add(L);return I}),h=se(()=>R.value.filter(I=>I&&I.type!=="column")),N=se(()=>R.value.filter(I=>I&&I.type==="column")),z=W();let X;function Ae(){const I=X.getModel(),L=X.getPosition();if(!I||!L)return null;const te=I.getWordAtPosition(L);return te==null?void 0:te.word}const _e=nn(function(){Xe()},250);Ye(async()=>{if(z.value){const I=Nt.createModel(M.value,"formula");Wt.register({id:it.name}),Nt.defineTheme(it.name,it.theme),Wt.setMonarchTokensProvider(it.name,it.generateLanguageDefinition(q.value.map(L=>L.title.replace(/@/g,"")))),Wt.setLanguageConfiguration(it.name,it.languageConfiguration),Nt.addKeybindingRules([{keybinding:ml.DownArrow,when:"editorTextFocus"},{keybinding:ml.UpArrow,when:"editorTextFocus"}]),X=Nt.create(z.value,{model:I,contextmenu:!1,theme:"formula",selectOnLineNumbers:!1,language:"formula",roundedSelection:!1,scrollBeyondLastLine:!1,lineNumbers:"off",glyphMargin:!1,folding:!1,wordWrap:"on",wrappingStrategy:"advanced","bracketPairColorization.enabled":!1,padding:{top:8,bottom:8},lineDecorationsWidth:8,lineNumbersMinChars:0,renderLineHighlight:"none",renderIndentGuides:!1,scrollbar:{horizontal:"hidden"},tabSize:2,automaticLayout:!1,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,matchBrackets:"never",minimap:{enabled:!1}}),X.layout({width:339,height:120}),X.onDidChangeModelContent(async()=>{M.value=X.getValue(),await _e()}),X.onDidChangeCursorPosition(()=>{const L=X.getPosition(),te=X.getModel();if(!L||!te)return;const b=te.getValue(),K=te.getOffsetAt(L);fl(b,K)?(ce.value=!1,R.value=[]):Xe();const ue=(re,J)=>{const he=new RegExp(`\\b(?<!['"])(\\w+)\\s*\\(`,"g"),Me=/"/g,qe=[];let Qe=!1,Se;for(;(Se=he.exec(re))!==null&&!(Se.index>J);){if(!Qe){const Oe={name:Se[1],start:Se.index,end:he.lastIndex};let v=1,s=-1,r=-1;for(let ee=he.lastIndex;ee<re.length;ee++){if(re[ee]==="(")v++;else if(re[ee]===")"&&(v--,v===0)){Oe.end=ee+1;break}if(s===-1&&["(",",","{"].includes(re[ee])||s!==-1&&["(",",","{"].includes(re[ee])?s=ee:s!==-1&&["}",",",")"].includes(re[ee])&&(r=ee,s=-1),ee>=J){if(v>0){Oe.end=ee+1;break}const fe=ue(re.substring(Oe.start+Se[1].length+1,ee),J-Oe.start-Se[1].length-1);if(fe)return fe;qe.push(Oe);break}}r!==-1&&r<J&&(Oe.end=r+1),qe.push(Oe)}let je;for(;(je=Me.exec(re))!==null&&je.index<Se.index;)Qe=!Qe}const Ne=qe.filter(je=>je.start<=J&&je.end>=J);return Ne.length>0?Ne[Ne.length-1].name:null},ae=ue(b,K);d.value=de.value.find(re=>re.text===`${ae}()`)||void 0}),X.focus()}}),Jl(z,I=>{const L=I[0],{height:te}=L.contentRect;X.layout({width:339,height:te})});function De(I,L,te=!1){const b=I.getPosition();if(!b)return;const K=new pl(b.lineNumber,b.column,b.lineNumber,b.column);if(I.executeEdits("",[{range:K,text:L,forceMoveMarkers:!0}]),!te){const ue=new Nn(b.lineNumber,b.column+L.length-1);I.setPosition(ue)}I.focus()}function oe(I){var ae;const L=((ae=U.value)==null?void 0:ae.length)||0;if(!(I!=null&&I.text))return;const te=I.text,b=X.getPosition();if(!b)return;const K=Math.max(1,b.column-L),ue=new pl(b.lineNumber,K,b.lineNumber,b.column);X.executeEdits("",[{range:ue,text:"",forceMoveMarkers:!0}]),I.type==="function"?De(X,te):I.type==="column"?De(X,`{${te}}`,!0):De(X,te,!0),ce.value=!1,U.value="",I.type==="function"||I.type==="op"?R.value=de.value.filter(re=>re.type==="column"):R.value=de.value}function Ce(){var ue;const I=X==null?void 0:X.getPosition();if(!I||!X)return!1;const L=(ue=X.getModel())==null?void 0:ue.getLineContent(I.lineNumber);if(!L)return!1;const te=L.substring(0,I.column-1),b=(te.match(/\(/g)||[]).length,K=(te.match(/\)/g)||[]).length;return b>K}function Xe(){var ae;if(!X)return;const I=X.getModel(),L=X.getPosition();if(!I||!L)return;const te=I.getValue(),b=I.getOffsetAt(L);if(fl(te,b)){ce.value=!1,R.value=[];return}Ce()||(f.value=1),$.value=0,R.value=[];const ue=(Ae()??"").split(/\W+/);U.value=ue.pop()||"",R.value=(ae=g.value.complete(U.value))==null?void 0:ae.sort((re,J)=>ne[re.type]-ne[J.type]),Ce()?(R.value=R.value.sort((re,J)=>re.type==="column"?-1:J.type==="column"?1:0),$.value=0,f.value=-1):O.value||(O.value=!0),ce.value=!!R.value.length}function Ge(){if(R.value&&$.value>-1&&$.value<de.value.length)if($.value<h.value.length){if(h.value[$.value].unsupported)return;oe(h.value[$.value])}else oe(N.value[$.value+h.value.length]);$.value=0}function et(){R.value&&($.value=--$.value>-1?$.value:R.value.length-1,d.value=h.value[$.value],Ve())}function Pe(){R.value&&($.value=++$.value%R.value.length,d.value=h.value[$.value],Ve())}function Ve(){el(()=>{if(ie.value[$.value])try{ie.value[$.value].$el.scrollIntoView({block:"nearest",inline:"start"})}catch{}})}const $e=W({top:"0px",left:"344px"});Ye(()=>{en.plugins.register(tn),ln(()=>z.value).toBeTruthy().then(()=>{setTimeout(()=>{var L;const I=(L=z.value)==null?void 0:L.getBoundingClientRect();I&&($e.value.top=`${I.top-75}px`,T!=null&&T.value||I.left>352?$e.value.left=`${I.left-344}px`:$e.value.left=`${I.right+8}px`)},250)})});const Ee=I=>{switch(I.stopPropagation(),I.key){case"ArrowUp":{I.preventDefault(),et();break}case"ArrowDown":{I.preventDefault(),Pe();break}case"Enter":{I.preventDefault(),Ge();break}}};return(I,L)=>{const te=Ie,b=Ct,K=we,ue=Rn,ae=Bn,re=Fn;return l(),y(Y,null,[e(d)&&!e(d).unsupported&&e(d).type==="function"?(l(),y("div",{key:0,class:"w-84 fixed bg-white z-10 pl-3 pt-3 border-1 shadow-md rounded-xl",style:at({left:e($e).left,top:e($e).top})},[a("div",wo,[a("div",xo,[a("div",$o,[(l(),u(Z(("iconMap"in I?I.iconMap:e(ve)).function),{class:"text-lg"})),E(" "+C(e(d).text),1)]),o(b,{type:"text",size:"small",class:"!h-7 !w-7 !min-w-0",onClick:L[0]||(L[0]=J=>d.value=void 0)},{default:n(()=>[o(te,{icon:"close"})]),_:1})])]),a("div",Co,[a("div",To,C(e(d).description),1),Io,a("div",Do,C(e(d).syntax),1),Mo,(l(!0),y(Y,null,pe(e(d).examples,(J,he)=>(l(),y("div",{key:J,class:ge(["bg-gray-100 mono-font text-[13px] leading-6 py-1 px-2",{"border-t-1  border-gray-200":he!==0,"rounded-b-md":he===e(d).examples.length-1&&e(d).examples.length!==1,"rounded-t-md":he===0&&e(d).examples.length!==1,"rounded-md":e(d).examples.length===1}])},C(J),3))),128))]),a("div",So,[e(d).docsUrl?(l(),y("a",{key:0,target:"_blank",rel:"noopener noreferrer",href:e(d).docsUrl},[o(b,{type:"text",size:"small",class:"!text-gray-400 !hover:text-gray-700 !text-xs"},{default:n(()=>[E("View in Docs "),o(te,{icon:"openInNew",class:"ml-1"})]),_:1})],8,Oo)):k("",!0)])],4)):k("",!0),o(K,be({label:I.label,required:""},e(Q).formula_raw),{default:n(()=>[a("div",{ref_key:"monacoRoot",ref:z,style:at({height:e(_)??"100px"}),class:ge([{"!border-red-500 formula-error":e(t),"!focus-within:border-brand-500 formula-success":!e(t)},"formula-monaco"]),onKeydown:xe(Ee,["stop"])},null,38)]),_:1},16,["label"]),a("div",{class:ge([{"h-[250px]":e(i)==="large","h-[150px]":e(i)==="medium","h-[125px]":e(i)==="small"},"overflow-auto flex flex-col nc-suggestion-list nc-scrollbar-thin border-1 border-gray-200 rounded-lg mt-4"])},[e(h)&&e(O)?(l(),y("div",{key:0,style:at({order:e(f)===-1?2:1})},[I.disableSuggestionHeaders?k("",!0):(l(),y("div",Lo," Formulas ")),o(re,{"data-source":e(h),locale:{emptyText:I.$t("msg.formula.noSuggestedFormulaFound")}},{renderItem:n(({item:J,index:he})=>[o(ae,{ref:Me=>{e(ie)[he]=Me},class:ge(["cursor-pointer !overflow-hidden hover:bg-gray-50",{"!bg-gray-100":e($)===he,"cursor-not-allowed":J.unsupported}]),onClick:xe(Me=>!J.unsupported&&oe(J),["prevent","stop"]),onMouseenter:Me=>d.value=J},{default:n(()=>[o(ue,null,{title:n(()=>[a("div",{class:ge(["flex items-center gap-x-1",{"text-gray-400":J.unsupported}])},[J.type==="function"?(l(),u(Z(("iconMap"in I?I.iconMap:e(ve)).function),{key:0,class:"w-4 h-4 !text-gray-600"})):k("",!0),J.type==="op"?(l(),u(Z(("iconMap"in I?I.iconMap:e(ve)).calculator),{key:1,class:"w-4 h-4 !text-gray-600"})):k("",!0),J.type==="column"?(l(),u(Z(J.icon),{key:2,class:"w-4 h-4 !text-gray-600"})):k("",!0),a("span",{class:ge(["text-small leading-[18px]",{"text-gray-800":!J.unsupported}])},C(J.text),3)],2),J.unsupported?(l(),y("div",Uo,C(I.$t("msg.formulaNotSupported")),1)):k("",!0)]),_:2},1024)]),_:2},1032,["class","onClick","onMouseenter"])]),_:1},8,["data-source","locale"])],4)):k("",!0),e(N)?(l(),y("div",{key:1,style:at({order:e(f)===1?2:1})},[I.disableSuggestionHeaders?k("",!0):(l(),y("div",Ao," Fields ")),o(re,{ref_key:"variableListRef",ref:F,"data-source":e(N),locale:{emptyText:I.$t("msg.formula.noSuggestedFieldFound")},class:"!overflow-hidden"},{renderItem:n(({item:J,index:he})=>[o(ae,{ref:Me=>{e(ie)[he+e(h).length]=Me},class:ge([{"!bg-gray-100":e($)===he+e(h).length},"cursor-pointer hover:bg-gray-50"]),onClick:xe(Me=>oe(J),["prevent","stop"])},{default:n(()=>[o(ue,{class:"nc-variable-list-item"},{title:n(()=>[a("div",Eo,[a("div",No,[(l(),u(Z(J.icon),{class:"w-4 h-4 !text-gray-600"})),a("span",Ro,C(J.text),1)]),o(b,{size:"small",type:"text",class:"nc-variable-list-item-use-field-btn !h-7 px-3 !text-small invisible"},{default:n(()=>[E(C(I.$t("general.use"))+" "+C(I.$t("objects.field").toLowerCase()),1)]),_:1})])]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:1},8,["data-source","locale"])],4)):k("",!0)],2)],64)}}}),$l=Ke(Bo,[["__scopeId","data-v-412451d9"]]),Cl=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYR","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUP","CVE","CYP","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHC","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","ROL","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDD","SEK","SGD","SHP","SIT","SKK","SLL","SOS","SRD","STD","SYP","SZL","THB","TJS","TMM","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","USS","UYU","UZS","VEB","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XFO","XFU","XOF","XPD","XPF","XPT","XTS","XXX","YER","ZAR","ZMK","ZWD"];function Fo(p){return Cl.includes(p)}async function Po(){const{all:p}=await Ze(()=>import("./CSMLYy8G.js"),[],import.meta.url);return p.filter(D=>Tl(D.tag)).map(D=>({text:`${D.name} (${D.tag})`,value:D.tag}))}function Tl(p){try{return Intl.NumberFormat.supportedLocalesOf(p).length>0}catch{return!1}}const Vo=[1,2,3,4,5,6,7,8],xt=[{full:"mdi-star",empty:"mdi-star-outline"},{full:"mdi-heart",empty:"mdi-heart-outline"},{full:"mdi-moon-full",empty:"mdi-moon-new"},{full:"mdi-thumb-up",empty:"mdi-thumb-up-outline"},{full:"mdi-flag",empty:"mdi-flag-outline"}],Il=[{value:"CODE128",label:"CODE128"},{value:"upc",label:"UPC"},{value:"EAN13",label:"EAN-13"},{value:"EAN8",label:"EAN-8"},{value:"EAN5",label:"EAN-5"},{value:"EAN2",label:"EAN-2"},{value:"CODE39",label:"CODE39"},{value:"ITF14",label:"ITF-14"},{value:"MSI",label:"MSI"},{value:"PHARMACODE",label:"PHARMACODE"},{value:"CODABAR",label:"CODABAR"}],qo={barcodeFormat:Il[0].value},jo={iconIdx:0,icon:{checked:"mdi-check-bold",unchecked:"mdi-crop-square"},color:"#777"},zo={currency_locale:"en-US",currency_code:"USD"},Ko={date_format:Pt[0]},Ho={date_format:Pt[0],time_format:vl[0],is12hrFormat:!1},Go={precision:Vo[0],isLocaleString:!1},Wo={duration:0},Xo={isLocaleString:!1},Qo={is_progress:!1},Yo={iconIdx:0,icon:{full:"mdi-star",empty:"mdi-star-outline"},color:"#fcb401",max:5},Zo={is12hrFormat:!1},Jo={is_multi:!1,notify:!1},He={[m.Checkbox]:jo,[m.Currency]:zo,[m.Date]:Ko,[m.DateTime]:Ho,[m.Decimal]:Go,[m.Duration]:Wo,[m.Number]:Xo,[m.Percent]:Qo,[m.Rating]:Yo,[m.Time]:Zo,[m.User]:Jo,[m.Barcode]:qo},ea={class:"flex gap-2 w-full truncate items-center"},ta={class:"flex gap-2 w-full justify-between items-center"},la={class:"text-[#FB8C00]"},Dl=ye({__name:"CurrencyOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const w=p,P=D,{t}=Je(),i=ke(w,"value",P),_={"meta.currency_locale":[{validator:(d,f)=>new Promise((O,B)=>{if(!Tl(f))return B(new Error(t("msg.invalidLocale")));O()})}],"meta.currency_code":[{validator:(d,f)=>new Promise((O,B)=>{if(!Fo(f))return B(new Error(t("msg.invalidCurrencyCode")));O()})}]},{setAdditionalValidations:M,validateInfos:x,isPg:c}=Fe();M({..._});const S=Cl||[],T=W([]),Q=se(()=>i.value.dt==="money"),V=se(()=>Q.value&&c.value?t("msg.postgresHasItsOwnCurrencySettings"):"");function q(d,f){return f.value.toUpperCase().includes(d.toUpperCase())}return i.value.meta={...He[m.Currency],...i.value.meta||{}},Po().then(d=>{T.value.push(...d)}),(d,f)=>{const O=Ie,B=rt,j=Le,ce=Ue,F=we,ie=Tt,U=It;return l(),u(U,{gutter:8},{default:n(()=>[o(ie,{span:12},{default:n(()=>[o(F,be(e(x)["meta.currency_locale"],{label:d.$t("title.currencyLocale")}),{default:n(()=>[o(ce,{value:e(i).meta.currency_locale,"onUpdate:value":f[0]||(f[0]=$=>e(i).meta.currency_locale=$),class:"w-52","show-search":"","filter-option":q,disabled:e(Q)&&e(c),"dropdown-class-name":"nc-dropdown-currency-cell-locale"},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(T),($,ne)=>(l(),u(j,{key:ne,value:$.value},{default:n(()=>[a("div",ea,[o(B,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[E(C($.text),1)]),default:n(()=>[E(" "+C($.text),1)]),_:2},1024),e(i).meta.currency_locale===$.value?(l(),u(Z(("iconMap"in d?d.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])]),_:1}),o(ie,{span:12},{default:n(()=>[o(F,be(e(x)["meta.currency_code"],{label:d.$t("title.currencyCode")}),{default:n(()=>[o(ce,{value:e(i).meta.currency_code,"onUpdate:value":f[1]||(f[1]=$=>e(i).meta.currency_code=$),class:"w-52","show-search":"","filter-option":q,disabled:e(Q)&&e(c),"dropdown-class-name":"nc-dropdown-currency-cell-code"},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(S),($,ne)=>(l(),u(j,{key:ne,value:$},{default:n(()=>[a("div",ta,[E(C($)+" ",1),e(i).meta.currency_code===$?(l(),u(Z(("iconMap"in d?d.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])]),_:1}),e(Q)&&e(c)?(l(),u(ie,{key:0},{default:n(()=>[a("span",la,C(e(V)),1)]),_:1})):k("",!0)]),_:1})}}}),na={class:"flex gap-2 w-full justify-between items-center"},oa={class:"flex items-center gap-1"},aa={class:"text-sm text-gray-800 select-none"},Ml=ye({__name:"DecimalOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const w=p,P=D,t=[1,2,3,4,5,6,7,8],{t:i}=Je(),_={1:i("placeholder.decimal1"),2:i("placeholder.decimal2"),3:i("placeholder.decimal3"),4:i("placeholder.decimal4"),5:i("placeholder.decimal5"),6:i("placeholder.decimal6"),7:i("placeholder.decimal7"),8:i("placeholder.decimal8")},M=ke(w,"value",P);M.value.meta={...He[m.Decimal],...M.value.meta||{}};const x=S=>{M.value.dtxs=Math.max(S,M.value.dtxs)},{isMetaReadOnly:c}=Ft();return(S,T)=>{const Q=Ie,V=Le,q=Ue,d=we,f=ct;return l(),y(Y,null,[o(d,{label:S.$t("placeholder.precision")},{default:n(()=>{var O;return[(O=e(M).meta)!=null&&O.precision?(l(),u(q,{key:0,value:e(M).meta.precision,"onUpdate:value":T[0]||(T[0]=B=>e(M).meta.precision=B),disabled:e(c),"dropdown-class-name":"nc-dropdown-decimal-format",onChange:x},{suffixIcon:n(()=>[o(Q,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),y(Y,null,pe(t,(B,j)=>o(V,{key:j,value:B},{default:n(()=>[a("div",na,[E(C(_[B])+" ",1),e(M).meta.precision===B?(l(),u(Z(("iconMap"in S?S.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value","disabled"])):k("",!0)]}),_:1},8,["label"]),o(d,null,{default:n(()=>[a("div",oa,[e(M).meta?(l(),u(f,{key:0,checked:e(M).meta.isLocaleString,"onUpdate:checked":T[1]||(T[1]=O=>e(M).meta.isLocaleString=O)},{default:n(()=>[a("div",aa,C(S.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked"])):k("",!0)])]),_:1})],64)}}}),sa={class:"flex flex-col"},ia={class:"flex items-center gap-1"},ua={class:"text-sm text-gray-800 select-none"},Sl=ye({__name:"PercentOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D),i={},{setAdditionalValidations:_}=Fe();return _({...i}),t.value.meta={...He[m.Percent],...t.value.meta||{}},(M,x)=>{const c=ct,S=we;return l(),y("div",sa,[o(S,null,{default:n(()=>[a("div",ia,[e(t).meta?(l(),u(c,{key:0,checked:e(t).meta.is_progress,"onUpdate:checked":x[0]||(x[0]=T=>e(t).meta.is_progress=T)},{default:n(()=>[a("div",ua,C(M.$t("labels.displayAsProgress")),1)]),_:1},8,["checked"])):k("",!0)])]),_:1})])}}}),ra=nt(()=>Ze(()=>import("./X3SBmoPb.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(p=>p.default||p)),ca={class:"flex gap-2 w-full truncate items-center"},da={class:"flex-1 flex items-center text-gray-700 gap-2 children:h-4 children:w-4"},ma={class:"flex-1 flex items-center gap-2 children:h-4 children:w-4"},pa={class:"flex gap-2 w-full justify-between items-center nc-dropdown-rating-max-option"},_a=ye({__name:"RatingOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D),i=se({get:()=>t.value.meta.color,set:x=>{t.value.meta.color=x}}),_=W(!1);t.value.meta={...He[m.Rating],...t.value.meta||{}};const M=xt.findIndex(x=>x.full===t.value.meta.icon.full&&x.empty===t.value.meta.icon.empty);return t.value.meta.iconIdx=M===-1?0:M,Be(()=>t.value.meta.iconIdx,x=>{t.value.meta.icon=xt[x]}),(x,c)=>{const S=Ie,T=Le,Q=Ue,V=we,q=Tt,d=ra,f=ol,O=It;return l(),u(O,{gutter:8},{default:n(()=>[o(q,{span:8},{default:n(()=>[o(V,{label:x.$t("labels.icon")},{default:n(()=>[o(Q,{value:e(t).meta.iconIdx,"onUpdate:value":c[0]||(c[0]=B=>e(t).meta.iconIdx=B),class:"w-52","dropdown-class-name":"nc-dropdown-rating-icon"},{suffixIcon:n(()=>[o(S,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe("iconList"in x?x.iconList:e(xt),(B,j)=>(l(),u(T,{key:j,value:j},{default:n(()=>[a("div",ca,[a("div",da,[(l(),u(Z(("getMdiIcon"in x?x.getMdiIcon:e(st))(B.full)))),(l(),u(Z(("getMdiIcon"in x?x.getMdiIcon:e(st))(B.empty))))]),e(t).meta.iconIdx===j?(l(),u(Z(("iconMap"in x?x.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(q,{span:8},{default:n(()=>[o(V,{label:x.$t("general.colour")},{default:n(()=>[o(f,{visible:e(_),"onUpdate:visible":c[3]||(c[3]=B=>le(_)?_.value=B:null),placement:"bottom","auto-close":!1,class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",null,[o(d,{modelValue:e(i),"onUpdate:modelValue":c[1]||(c[1]=B=>le(i)?i.value=B:null),"is-open":e(_),onInput:c[2]||(c[2]=B=>e(t).meta.color=B)},null,8,["modelValue","is-open"])])]),default:n(()=>[a("div",{class:ge(["flex-1 border-1 border-gray-300 rounded-lg h-8 px-[11px] flex items-center justify-between transition-all cursor-pointer",{"border-brand-500 shadow-selected":e(_)}])},[a("div",ma,[(l(),u(Z(("getMdiIcon"in x?x.getMdiIcon:e(st))(("iconList"in x?x.iconList:e(xt))[e(t).meta.iconIdx].full)),{style:at({color:e(t).meta.color})},null,8,["style"])),(l(),u(Z(("getMdiIcon"in x?x.getMdiIcon:e(st))(("iconList"in x?x.iconList:e(xt))[e(t).meta.iconIdx].empty)),{style:at({color:e(t).meta.color})},null,8,["style"]))]),o(S,{icon:"arrowDown",class:"text-gray-700 h-4 w-4"})],2)]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1}),o(q,{span:8},{default:n(()=>[o(V,{label:x.$t("labels.max")},{default:n(()=>[o(Q,{value:e(t).meta.max,"onUpdate:value":c[4]||(c[4]=B=>e(t).meta.max=B),"data-testid":"nc-dropdown-rating-max",class:"w-52","dropdown-class-name":"nc-dropdown-rating-color"},{suffixIcon:n(()=>[o(S,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),y(Y,null,pe([1,2,3,4,5,6,7,8,9,10],(B,j)=>o(T,{key:j,value:B},{default:n(()=>[a("div",pa,[E(C(B)+" ",1),e(t).meta.max===B?(l(),u(Z(("iconMap"in x?x.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),Ol=Ke(_a,[["__scopeId","data-v-3e12a89c"]]),fa={class:"flex flex-col gap-2"},va={class:"flex items-center gap-2 children:flex-1"},ga=ye({__name:"TimeOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D);return t.value.meta={...He[m.Time],...t.value.meta??{}},(i,_)=>{const M=al,x=sl,c=we;return l(),y("div",fa,[a("div",va,[o(c,null,{default:n(()=>[e(t).meta?(l(),u(x,{key:0,value:e(t).meta.is12hrFormat,"onUpdate:value":_[0]||(_[0]=S=>e(t).meta.is12hrFormat=S),class:"nc-time-form-layout"},{default:n(()=>[o(M,{value:!0},{default:n(()=>[E("12 Hrs")]),_:1}),o(M,{value:!1},{default:n(()=>[E("24 Hrs")]),_:1})]),_:1},8,["value"])):k("",!0)]),_:1})])])}}}),Ll=Ke(ga,[["__scopeId","data-v-cd390529"]]),ya={class:"flex flex-col gap-4"},ha={class:"flex items-center gap-2 children:flex-1"},ba={class:"flex gap-2 w-full justify-between items-center"},ka=["data-testid"],wa=ye({__name:"DateTimeOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D);return t.value.meta={...He[m.DateTime],...t.value.meta||{}},(i,_)=>{const M=Ie,x=Le,c=Ue,S=we,T=al,Q=sl;return l(),y("div",ya,[a("div",ha,[o(S,null,{default:n(()=>[o(c,{value:e(t).meta.date_format,"onUpdate:value":_[0]||(_[0]=V=>e(t).meta.date_format=V),class:"nc-date-select","dropdown-class-name":"nc-dropdown-date-format"},{suffixIcon:n(()=>[o(M,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(Pt),(V,q)=>(l(),u(x,{key:q,value:V},{default:n(()=>[a("div",ba,[E(C(V)+" ",1),e(t).meta.date_format===V?(l(),u(Z(("iconMap"in i?i.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(S,null,{default:n(()=>[o(c,{value:e(t).meta.time_format,"onUpdate:value":_[1]||(_[1]=V=>e(t).meta.time_format=V),class:"nc-time-select","dropdown-class-name":"nc-dropdown-time-format"},{suffixIcon:n(()=>[o(M,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(vl),(V,q)=>(l(),u(x,{key:q,value:V},{default:n(()=>[a("div",{class:"flex gap-2 w-full justify-between items-center","data-testid":`nc-time-${V}`},[E(C(V)+" ",1),e(t).meta.time_format===V?(l(),u(Z(("iconMap"in i?i.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)],8,ka)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),o(S,null,{default:n(()=>[e(t).meta?(l(),u(Q,{key:0,value:e(t).meta.is12hrFormat,"onUpdate:value":_[2]||(_[2]=V=>e(t).meta.is12hrFormat=V),class:"nc-time-form-layout"},{default:n(()=>[o(T,{value:!0},{default:n(()=>[E("12 Hrs")]),_:1}),o(T,{value:!1},{default:n(()=>[E("24 Hrs")]),_:1})]),_:1},8,["value"])):k("",!0)]),_:1})])}}}),Ul=Ke(wa,[["__scopeId","data-v-89ae0e65"]]),xa={class:"w-full flex gap-2 justify-between items-center"},Al=ye({__name:"DateOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D);return t.value.meta={...He[m.Date],...t.value.meta||{}},(i,_)=>{const M=Ie,x=Le,c=Ue,S=we;return l(),u(S,null,{default:n(()=>[o(c,{value:e(t).meta.date_format,"onUpdate:value":_[0]||(_[0]=T=>e(t).meta.date_format=T),"show-search":"",class:"nc-date-select","dropdown-class-name":"nc-dropdown-date-format"},{suffixIcon:n(()=>[o(M,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe([...e(Pt),...e(on)],(T,Q)=>(l(),u(x,{key:Q,value:T},{default:n(()=>[a("div",xa,[E(C(T)+" ",1),e(t).meta.date_format===T?(l(),u(Z(("iconMap"in i?i.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})}}}),$a=nt(()=>Ze(()=>import("./X3SBmoPb.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(p=>p.default||p)),Ca={class:"flex gap-2 w-full truncate items-center"},Ta={class:"flex-1 flex items-center text-gray-700 gap-2 children:h-4 children:w-4"},Ia={class:"flex-1 flex items-center gap-2 children:h-4 children:w-4"},Da=ye({__name:"CheckboxOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D),i=[{checked:"mdi-check-bold",unchecked:"mdi-crop-square"},{checked:"mdi-check-circle-outline",unchecked:"mdi-checkbox-blank-circle-outline"},{checked:"mdi-star",unchecked:"mdi-star-outline"},{checked:"mdi-heart",unchecked:"mdi-heart-outline"},{checked:"mdi-moon-full",unchecked:"mdi-moon-new"},{checked:"mdi-thumb-up",unchecked:"mdi-thumb-up-outline"},{checked:"mdi-flag",unchecked:"mdi-flag-outline"}],_=se({get:()=>t.value.meta.color,set:c=>{t.value.meta.color=c}}),M=W(!1);t.value.meta={...He[m.Checkbox],...t.value.meta||{}};const x=i.findIndex(c=>c.checked===t.value.meta.icon.checked&&c.unchecked===t.value.meta.icon.unchecked);return t.value.meta.iconIdx=x===-1?0:x,Be(()=>t.value.meta.iconIdx,c=>{t.value.meta.icon=i[c]}),(c,S)=>{const T=Ie,Q=Le,V=Ue,q=we,d=Tt,f=$a,O=ol,B=It;return l(),u(B,{gutter:8},{default:n(()=>[o(d,{span:12},{default:n(()=>[o(q,{label:c.$t("labels.icon")},{default:n(()=>[o(V,{value:e(t).meta.iconIdx,"onUpdate:value":S[0]||(S[0]=j=>e(t).meta.iconIdx=j),class:"w-52","dropdown-class-name":"nc-dropdown-checkbox-icon"},{suffixIcon:n(()=>[o(T,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),y(Y,null,pe(i,(j,ce)=>o(Q,{key:ce,value:ce},{default:n(()=>[a("div",Ca,[a("div",Ta,[(l(),u(Z(("getMdiIcon"in c?c.getMdiIcon:e(st))(j.checked)))),(l(),u(Z(("getMdiIcon"in c?c.getMdiIcon:e(st))(j.unchecked))))]),e(t).meta.iconIdx===ce?(l(),u(Z(("iconMap"in c?c.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(d,{span:12},{default:n(()=>[o(q,{label:c.$t("general.colour")},{default:n(()=>[o(O,{visible:e(M),"onUpdate:visible":S[3]||(S[3]=j=>le(M)?M.value=j:null),placement:"bottomRight","auto-close":!1,class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",null,[o(f,{modelValue:e(_),"onUpdate:modelValue":S[1]||(S[1]=j=>le(_)?_.value=j:null),"is-open":e(M),onInput:S[2]||(S[2]=j=>e(t).meta.color=j)},null,8,["modelValue","is-open"])])]),default:n(()=>[a("div",{class:ge(["flex-1 border-1 border-gray-300 rounded-lg h-8 px-[11px] flex items-center justify-between transition-all cursor-pointer",{"border-brand-500 shadow-selected":e(M)}])},[a("div",Ia,[(l(),u(Z(("getMdiIcon"in c?c.getMdiIcon:e(st))(i[e(t).meta.iconIdx].checked)),{style:at({color:e(t).meta.color})},null,8,["style"])),(l(),u(Z(("getMdiIcon"in c?c.getMdiIcon:e(st))(i[e(t).meta.iconIdx].unchecked)),{style:at({color:e(t).meta.color})},null,8,["style"]))]),o(T,{icon:"arrowDown",class:"text-gray-700 h-4 w-4"})],2)]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),El=Ke(Da,[["__scopeId","data-v-d8f75c5f"]]),Ma={class:"formula-wrapper relative"},Sa={class:"tab"},Oa={class:"px-0.5"},La={class:"tab"},Ua={class:"flex flex-col px-0.5 gap-4"},Aa={class:"flex w-full items-center gap-2 justify-between"},Ea={class:"w-full"},Na=ye({__name:"FormulaOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){var ce,F,ie,U,$,ne,de;const w=p,P=D,t=[m.QrCode,m.Barcode,m.Button],i=ke(w,"value",P),{setAdditionalValidations:_,sqlUi:M,column:x,validateInfos:c}=Fe(),{t:S}=Je(),T=We(lt,W()),{base:Q}=gt(Dt()),V=se(()=>{var R,g;return((g=(R=T==null?void 0:T.value)==null?void 0:R.columns)==null?void 0:g.filter(h=>!(t.includes(h.uidt)||Yt(h,T.value))))||[]}),{getMeta:q}=yt(),d={formula_raw:[{required:!0,validator:(R,g)=>(async()=>{var h;if(!(g!=null&&g.trim()))throw new Error("Required");try{await Qt({column:x.value,formula:g,columns:V.value,clientOrSqlUi:M.value,getMeta:q})}catch(N){throw N instanceof yl&&((h=N.extra)!=null&&h.key)?new Error(S(N.extra.key,N.extra)):new Error(N.message)}})()}]};(F=(ce=x.value)==null?void 0:ce.colOptions)!=null&&F.formula_raw&&(i.value.formula_raw=gl((U=(ie=x.value)==null?void 0:ie.colOptions)==null?void 0:U.formula,($=T==null?void 0:T.value)==null?void 0:$.columns,(de=(ne=x.value)==null?void 0:ne.colOptions)==null?void 0:de.formula_raw)||"");const f=se(()=>{var R,g;return(g=(R=Q.value)==null?void 0:R.sources)==null?void 0:g.find(h=>{var N;return h.id===((N=T.value)==null?void 0:N.source_id)})}),O=an(async()=>{var R,g;try{return await Qt({formula:i.value.formula||i.value.formula_raw,columns:((R=T.value)==null?void 0:R.columns)||[],column:x.value??void 0,clientOrSqlUi:(g=f.value)==null?void 0:g.type,getMeta:async N=>await q(N)})}catch{return{dataType:pt.UNKNOWN}}});_({...d});const B=W("formula"),j=se(()=>{var R,g;if(!((R=O.value)!=null&&R.dataType))return[];try{return sn((g=O.value)==null?void 0:g.dataType).map(h=>({value:h,label:S(`datatype.${h}`),icon:Mt(tt(h)?St:Ot,{columnMeta:{uidt:h}})}))}catch{return[]}});return Be(()=>{var R;return(R=i.value.meta)==null?void 0:R.display_type},(R,g)=>{g===void 0&&!R&&(i.value.meta.display_column_meta={meta:{},custom:{}})},{immediate:!0}),Be(O,(R,g)=>{g===void 0&&R||(R==null?void 0:R.dataType)!==(g==null?void 0:g.dataType)&&(i.value.meta.display_type=null)}),(R,g)=>{const h=$l,N=un,z=Le,X=Ue,Ae=we,_e=Dl,De=Ml,oe=Sl,Ce=Ol,Xe=Ll,Ge=Ul,et=Al,Pe=El,Ve=Pn;return l(),y("div",Ma,[o(Ve,{activeKey:e(B),"onUpdate:activeKey":g[2]||(g[2]=$e=>le(B)?B.value=$e:null)},{default:n(()=>{var $e,Ee;return[o(N,{key:"formula"},{tab:n(()=>[a("div",Sa,[a("div",null,C(R.$t("datatype.Formula")),1)])]),default:n(()=>{var I;return[a("div",Oa,[o(h,{value:e(i).formula_raw,"onUpdate:value":g[0]||(g[0]=L=>e(i).formula_raw=L),error:((I=e(c).formula_raw)==null?void 0:I.validateStatus)==="error"},null,8,["value","error"])])]}),_:1}),o(N,{key:"format",disabled:!(($e=e(j))!=null&&$e.length)||!((Ee=e(O))!=null&&Ee.dataType)},{tab:n(()=>[a("div",La,[a("div",null,C(R.$t("labels.formatting")),1)])]),default:n(()=>{var I;return[a("div",Ua,[o(Ae,{class:"mt-4",label:R.$t("general.format")},{default:n(()=>[o(X,{value:e(i).meta.display_type,"onUpdate:value":g[1]||(g[1]=L=>e(i).meta.display_type=L),class:"w-full",placeholder:R.$t("labels.selectAFormatType")},{default:n(()=>[(l(!0),y(Y,null,pe(e(j),L=>(l(),u(z,{key:L.value,value:L.value},{default:n(()=>{var te;return[a("div",Aa,[a("div",Ea,[(l(),u(Z(L.icon),{class:"w-4 h-4 !text-gray-600"})),E(" "+C(L.label),1)]),L.value===((te=e(i).meta)==null?void 0:te.display_type)?(l(),u(Z(("iconMap"in R?R.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]}),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"]),[e(pt).NUMERIC,e(pt).DATE,e(pt).BOOLEAN,e(pt).STRING,e(pt).COND_EXP].includes((I=e(O))==null?void 0:I.dataType)?(l(),y(Y,{key:0},[e(i).meta.display_type===e(m).Currency?(l(),u(_e,{key:0,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(m).Decimal?(l(),u(De,{key:1,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(m).Percent?(l(),u(oe,{key:2,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(m).Rating?(l(),u(Ce,{key:3,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(m).Time?(l(),u(Xe,{key:4,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(m).DateTime?(l(),u(Ge,{key:5,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(m).Date?(l(),u(et,{key:6,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(m).Checkbox?(l(),u(Pe,{key:7,value:e(i).meta.display_column_meta},null,8,["value"])):k("",!0)],64)):k("",!0)])]}),_:1},8,["disabled"])]}),_:1},8,["activeKey"])])}}}),Ra=Ke(Na,[["__scopeId","data-v-6bd1de47"]]),Ba={class:"flex flex-col gap-2"},Fa=["data-testid"],Pa={class:"inline-flex items-center gap-2 flex-1 truncate"},Va=ye({__name:"QrCodeOptions",props:{modelValue:{}},emits:["update:modelValue"],setup(p,{emit:D}){const w=p,P=D,{t}=Je(),{fields:i,metaColumnById:_}=wl(),M=ke(w,"modelValue",P),{setAdditionalValidations:x,validateInfos:c,column:S,isEdit:T}=Fe(),Q=se(()=>{var q;return((q=i.value)==null?void 0:q.filter(d=>d.fk_column_id&&hl.includes(_.value[d.fk_column_id].uidt)).map(d=>_.value[d.fk_column_id]))||[]});Ye(()=>{var q,d,f,O;M.value.fk_qr_value_column_id=((d=(q=S==null?void 0:S.value)==null?void 0:q.colOptions)==null?void 0:d.fk_qr_value_column_id)||(T.value?null:(O=(f=Q.value)==null?void 0:f[0])==null?void 0:O.id)}),x({fk_qr_value_column_id:[{required:!0,message:t("general.required")}]});const V=q=>Mt(tt(q)?St:Ot,{columnMeta:q});return(q,d)=>{const f=Ie,O=rt,B=Le,j=Ue,ce=we;return l(),y("div",Ba,[o(ce,be({class:"flex nc-qr-code-value-column-select",label:`${q.$t("placeholder.value")} ${e(t)("objects.field").toLowerCase()}`},e(c).fk_qr_value_column_id),{default:n(()=>[o(j,{value:e(M).fk_qr_value_column_id,"onUpdate:value":d[0]||(d[0]=F=>e(M).fk_qr_value_column_id=F),placeholder:q.$t("placeholder.selectAColumnForTheQRCodeValue"),onClick:d[1]||(d[1]=xe(()=>{},["stop"]))},{suffixIcon:n(()=>[o(f,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(Q),(F,ie)=>(l(),u(B,{key:ie,value:F.id},{default:n(()=>[a("div",{class:"flex gap-2 w-full truncate items-center","data-testid":`nc-qr-${F.title}`},[a("div",Pa,[(l(),u(Z(V(F)),{"column-meta":F,class:"!mx-0 flex-none w-4 h-4"},null,8,["column-meta"])),o(O,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[E(C(F.title),1)]),default:n(()=>[E(" "+C(F.title),1)]),_:2},1024)]),e(M).fk_qr_value_column_id===F.id?(l(),u(Z(("iconMap"in q?q.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)],8,Fa)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},16,["label"])])}}}),qa={class:"flex flex-col gap-4"},ja={class:"flex flex-row items-center"},za=["data-testid"],Ka={class:"inline-flex items-center gap-2 flex-1 truncate"},Ha={class:"truncate flex-1"},Ga={key:0,class:"pl-2"},Wa=ye({__name:"BarcodeOptions",props:{modelValue:{}},emits:["update:modelValue"],setup(p,{emit:D}){const w=p,P=D,{fields:t,metaColumnById:i}=wl(),_=ke(w,"modelValue",P),{setAdditionalValidations:M,validateInfos:x,column:c,isEdit:S}=Fe(),{t:T}=Je(),Q=se(()=>{var d;return((d=t.value)==null?void 0:d.filter(f=>f.fk_column_id&&hl.includes(i.value[f.fk_column_id].uidt)).map(f=>i.value[f.fk_column_id]))||[]});Ye(()=>{var d,f,O,B;_.value.meta={...He[m.Barcode],..._.value.meta||{}},_.value.fk_barcode_value_column_id=((f=(d=c==null?void 0:c.value)==null?void 0:d.colOptions)==null?void 0:f.fk_barcode_value_column_id)||(S.value?null:(B=(O=Q.value)==null?void 0:O[0])==null?void 0:B.id)}),Be(Q,d=>{var f;_.value.fk_barcode_value_column_id===null&&(_.value.fk_barcode_value_column_id=(f=d==null?void 0:d[0])==null?void 0:f.id)}),M({fk_barcode_value_column_id:[{required:!0,message:T("general.required")}],barcode_format:[{required:!0,message:T("general.required")}]});const V=se(()=>{var d;return!((d=Q.value)!=null&&d.length)}),q=d=>Mt(tt(d)?St:Ot,{columnMeta:d});return(d,f)=>{const O=Ie,B=Le,j=Ue,ce=rn,F=we;return l(),y("div",qa,[o(F,be({class:"flex pb-2 nc-barcode-value-column-select flex-row",label:`${d.$t("placeholder.value")} ${e(T)("objects.field").toLowerCase()}`},e(x).fk_barcode_value_column_id),{default:n(()=>[a("div",ja,[o(j,{value:e(_).fk_barcode_value_column_id,"onUpdate:value":f[0]||(f[0]=ie=>e(_).fk_barcode_value_column_id=ie),placeholder:d.$t("placeholder.barcodeColumn"),"not-found-content":d.$t("placeholder.notFoundContent"),onClick:f[1]||(f[1]=xe(()=>{},["stop"]))},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(Q),(ie,U)=>(l(),u(B,{key:U,value:ie.id},{default:n(()=>[a("div",{class:"w-full flex gap-2 truncate items-center justify-between","data-testid":`nc-barcode-${ie.title}`},[a("div",Ka,[(l(),u(Z(q(ie)),{"column-meta":ie,class:"!mx-0"},null,8,["column-meta"])),a("div",Ha,C(ie.title),1)]),e(_).fk_barcode_value_column_id===ie.id?(l(),u(Z(("iconMap"in d?d.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)],8,za)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","not-found-content"]),e(V)?(l(),y("div",Ga,[o(ce,{placement:"bottom"},{title:n(()=>[a("span",null,C(d.$t("msg.validColumnsForBarCode")),1)]),default:n(()=>[(l(),u(Z(("iconMap"in d?d.iconMap:e(ve)).info),{class:"cursor-pointer"}))]),_:1})])):k("",!0)])]),_:1},16,["label"]),o(F,be({class:"flexp nc-barcode-format-select",label:d.$t("general.format")},e(x).barcode_format),{default:n(()=>[o(j,{value:e(_).meta.barcodeFormat,"onUpdate:value":f[2]||(f[2]=ie=>e(_).meta.barcodeFormat=ie),options:"supportedBarcodeFormats"in d?d.supportedBarcodeFormats:e(Il),placeholder:d.$t("placeholder.selectBarcodeFormat"),onClick:f[3]||(f[3]=xe(()=>{},["stop"]))},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),_:1},8,["value","options","placeholder"])]),_:1},16,["label"])])}}}),Xa={class:"flex flex-col gap-2"},Qa={class:"flex items-center gap-1"},Ya={class:"text-sm text-gray-800 select-none"},Za=ye({__name:"LongTextOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D),i=se({get:()=>{var _;return!!((_=t.value.meta)!=null&&_.richMode)},set:_=>{t.value.meta||(t.value.meta={}),t.value.meta.richMode=_}});return Be(i,()=>{t.value.cdf=null}),(_,M)=>{const x=ct,c=we;return l(),y("div",Xa,[o(c,null,{default:n(()=>[a("div",Qa,[o(x,{checked:e(i),"onUpdate:checked":M[0]||(M[0]=S=>le(i)?i.value=S:null)},{default:n(()=>[a("div",Ya,C(_.$t("labels.enableRichText")),1)]),_:1},8,["checked"])])]),_:1})])}}}),Ja=["data-testid"],es=ye({__name:"DurationOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D),i=Vn.map(_=>({..._,title:`${_.title}`}))||[];return t.value.meta={...He[m.Duration],...t.value.meta||{}},(_,M)=>{const x=Ie,c=rt,S=Le,T=Ue,Q=we,V=Tt,q=It;return l(),u(q,null,{default:n(()=>[o(V,{span:24},{default:n(()=>[o(Q,{label:_.$t("general.format")},{default:n(()=>[o(T,{value:e(t).meta.duration,"onUpdate:value":M[0]||(M[0]=d=>e(t).meta.duration=d),class:"w-52","dropdown-class-name":"nc-dropdown-duration-option"},{suffixIcon:n(()=>[o(x,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(i),(d,f)=>(l(),u(S,{key:f,value:d.id},{default:n(()=>[a("div",{class:"flex gap-2 w-full truncate items-center","data-testid":d.title},[o(c,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[E(C(d.title),1)]),default:n(()=>[E(" "+C(d.title),1)]),_:2},1024),e(t).meta.duration===d.id?(l(),u(Z(("iconMap"in _?_.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)],8,Ja)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),ts={key:0,class:"w-full flex flex-row space-x-2"},ls={class:"flex gap-2 w-full justify-between truncate items-center"},ns={class:"min-w-1/2 flex items-center gap-2"},os={class:"inline-flex items-center truncate gap-2"},as={class:"text-[0.65rem] leading-4 flex-1 truncate text-gray-600 nc-relation-details"},ss={class:"w-full flex gap-2 truncate items-center justify-between"},is={class:"inline-flex items-center gap-2 flex-1 truncate"},us={class:"truncate flex-1"},rs={key:1},cs=ye({__name:"LookupOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D),i=We(lt,W()),{t:_}=Je(),{setAdditionalValidations:M,validateInfos:x,onDataTypeChange:c,isEdit:S,disableSubmitBtn:T,updateFieldName:Q}=Fe(),V=Dt(),{tables:q}=gt(V),{metas:d,getMeta:f}=yt();M({fk_relation_column_id:[{required:!0,message:_("general.required")}],fk_lookup_column_id:[{required:!0,message:_("general.required")}]}),t.value.fk_relation_column_id||(t.value.fk_relation_column_id=null),t.value.fk_lookup_column_id||(t.value.fk_lookup_column_id=null);const O=se(()=>!q.value||!q.value.length||!i.value||!i.value.columns?[]:i.value.columns.filter($=>{var ne;return Rt($)&&!$.system&&$.source_id===((ne=i.value)==null?void 0:ne.source_id)}).map($=>({col:$.colOptions,column:$,...q.value.find(ne=>ne.id===$.colOptions.fk_related_model_id)||d.value[$.colOptions.fk_related_model_id]||{}})).filter($=>{var ne;return((ne=$.col)==null?void 0:ne.fk_related_model_id)===$.id&&!$.mm})),B=se(()=>O.value.find(U=>U.column.id===t.value.fk_relation_column_id)),j=se(()=>{var U,$;return(U=B.value)!=null&&U.id?($=d.value[B.value.id])==null?void 0:$.columns.filter(ne=>t.value.fk_lookup_column_id===ne.id||!tl(ne)&&ne.id!==t.value.id&&ne.uidt!==m.Links):[]});Ye(()=>{var U,$;S.value&&(t.value.fk_lookup_column_id=(U=t.value.colOptions)==null?void 0:U.fk_lookup_column_id,t.value.fk_relation_column_id=($=t.value.colOptions)==null?void 0:$.fk_relation_column_id)});const ce=()=>{var $,ne;const U=((($=i.value)==null?void 0:$.columns)||[]).filter(de=>de.uidt===m.Lookup).map(de=>{var R;return(R=de.colOptions)==null?void 0:R.fk_lookup_column_id});return(ne=j.value.find(de=>!U.includes(de.id)))==null?void 0:ne.id},F=async()=>{var U,$;B.value&&await f(B.value.id),t.value.fk_lookup_column_id=ce()||(($=(U=j.value)==null?void 0:U[0])==null?void 0:$.id),c()};ll(()=>{O.value.length?O.value.length&&T.value&&(T.value=!1):T.value=!0});const ie=U=>Mt(tt(U)?St:Ot,{columnMeta:U});return Be(()=>t.value.fk_relation_column_id,U=>{if(!U)return;const $=O.value.find(ne=>ne.col.fk_column_id===U);$&&(t.value.lookupTableTitle=($==null?void 0:$.title)||$.table_name)}),Be(()=>t.value.fk_lookup_column_id,U=>{if(!U)return;const $=j.value.find(ne=>ne.id===U);$&&(t.value.lookupColumnTitle=($==null?void 0:$.title)||$.column_name,Q())}),(U,$)=>{const ne=Ie,de=rt,R=Le,g=Ue,h=we,N=il;return e(O).length?(l(),y("div",ts,[o(h,be({class:"flex w-1/2 !max-w-[calc(50%_-_4px)]",label:`${U.$t("general.link")} ${U.$t("objects.field")}`},e(x).fk_relation_column_id),{default:n(()=>[o(g,{value:e(t).fk_relation_column_id,"onUpdate:value":$[0]||($[0]=z=>e(t).fk_relation_column_id=z),placeholder:"-select-","dropdown-class-name":"!w-64 !rounded-md nc-dropdown-relation-table",onChange:F},{suffixIcon:n(()=>[o(ne,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(O),(z,X)=>(l(),u(R,{key:X,value:z.col.fk_column_id},{default:n(()=>[a("div",ls,[a("div",ns,[(l(),u(Z(ie(z.column)),{"column-meta":z.column,class:"!mx-0"},null,8,["column-meta"])),o(de,{class:"truncate min-w-[calc(100%_-_24px)]","show-on-truncate-only":""},{title:n(()=>[E(C(z.column.title),1)]),default:n(()=>[E(" "+C(z.column.title),1)]),_:2},1024)]),a("div",os,[a("div",as,[o(de,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[E(C(z.title||z.table_name),1)]),default:n(()=>[E(" "+C(z.title||z.table_name),1)]),_:2},1024)]),e(t).fk_relation_column_id===z.col.fk_column_id?(l(),u(Z(("iconMap"in U?U.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"]),o(h,be({class:"flex w-1/2",label:`${U.$t("datatype.Lookup")} ${U.$t("objects.field")}`},e(t).fk_relation_column_id?e(x).fk_lookup_column_id:void 0),{default:n(()=>[o(g,{value:e(t).fk_lookup_column_id,"onUpdate:value":$[1]||($[1]=z=>e(t).fk_lookup_column_id=z),name:"fk_lookup_column_id",placeholder:"-select-",disabled:!e(t).fk_relation_column_id,"dropdown-class-name":"nc-dropdown-relation-column !rounded-md",onChange:e(c)},{suffixIcon:n(()=>[o(ne,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(j),(z,X)=>(l(),u(R,{key:X,value:z.id},{default:n(()=>[a("div",ss,[a("div",is,[(l(),u(Z(ie(z)),{"column-meta":z,class:"!mx-0"},null,8,["column-meta"])),a("div",us,C(z.title),1)]),e(t).fk_lookup_column_id===z.id?(l(),u(Z(("iconMap"in U?U.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},16,["label"])])):(l(),y("div",rs,[o(N,{type:"warning","show-icon":""},{icon:n(()=>[o(ne,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>[E(" Alert ")]),description:n(()=>[E(C(U.$t("msg.linkColumnClearNotSupportedYet",{type:"Lookup"})),1)]),_:1})]))}}}),ds=Ke(cs,[["__scopeId","data-v-5c3b99c0"]]),ms={class:"flex items-center gap-1"},ps={class:"text-sm text-gray-800 select-none"},_s=ye({__name:"NumberOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D);return t.value.meta={...He[m.Number],...t.value.meta||{}},(i,_)=>{const M=ct,x=we;return l(),u(x,null,{default:n(()=>[a("div",ms,[e(t).meta?(l(),u(M,{key:0,checked:e(t).meta.isLocaleString,"onUpdate:checked":_[0]||(_[0]=c=>e(t).meta.isLocaleString=c)},{default:n(()=>[a("div",ps,C(i.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked"])):k("",!0)])]),_:1})}}}),fs={key:0,class:"flex flex-col gap-4"},vs={class:"w-full flex flex-row space-x-2"},gs={class:"flex gap-2 w-full justify-between truncate items-center"},ys={class:"min-w-1/2 flex items-center gap-2"},hs={class:"inline-flex items-center truncate gap-2"},bs={class:"text-[0.65rem] leading-4 flex-1 truncate text-gray-600 nc-relation-details"},ks={class:"w-full flex gap-2 truncate items-center justify-between"},ws={class:"flex items-center gap-2 flex-1 truncate"},xs={class:"truncate flex-1"},$s={class:"flex gap-2 justify-between items-center"},Cs={key:1},Ts=ye({__name:"RollupOptions",props:{value:{}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D),i=We(lt,W()),{setAdditionalValidations:_,validateInfos:M,onDataTypeChange:x,isEdit:c,disableSubmitBtn:S,updateFieldName:T}=Fe(),Q=Dt(),{tables:V}=gt(Q),{metas:q,getMeta:d}=yt(),{t:f}=Je();_({fk_relation_column_id:[{required:!0,message:f("general.required")}],fk_rollup_column_id:[{required:!0,message:f("general.required")}],rollup_function:[{required:!0,message:f("general.required")}]}),t.value.fk_relation_column_id||(t.value.fk_relation_column_id=null),t.value.fk_rollup_column_id||(t.value.fk_rollup_column_id=null),t.value.rollup_function||(t.value.rollup_function=null);const O=se(()=>!V.value||!V.value.length||!i.value||!i.value.columns?[]:i.value.columns.filter(h=>{var N;return Rt(h)&&h.colOptions.type&&![vt.BELONGS_TO,vt.ONE_TO_ONE].includes(h.colOptions.type)&&!h.system&&h.source_id===((N=i.value)==null?void 0:N.source_id)}).map(h=>({col:h.colOptions,column:h,...V.value.find(N=>{var z;return N.id===((z=h.colOptions)==null?void 0:z.fk_related_model_id)})}))),B=se(()=>O.value.find(g=>g.column.id===t.value.fk_relation_column_id)),j=se(()=>{var g,h;return(g=B.value)!=null&&g.id?(h=q.value[B.value.id])==null?void 0:h.columns.filter(N=>!tt(N.uidt)&&(!tl(N)||N.pk)):[]});Ye(()=>{var g,h,N;c.value&&(t.value.fk_relation_column_id=(g=t.value.colOptions)==null?void 0:g.fk_relation_column_id,t.value.fk_rollup_column_id=(h=t.value.colOptions)==null?void 0:h.fk_rollup_column_id,t.value.rollup_function=(N=t.value.colOptions)==null?void 0:N.rollup_function)});const ce=()=>{var h,N;const g=(((h=i.value)==null?void 0:h.columns)||[]).filter(z=>z.uidt===m.Rollup).map(z=>{var X;return(X=z.colOptions)==null?void 0:X.fk_rollup_column_id});return(N=j.value.find(z=>!g.includes(z.id)))==null?void 0:N.id},F=async()=>{var g,h;B.value&&await d(B.value.id),t.value.fk_rollup_column_id=ce()||((h=(g=j.value)==null?void 0:g[0])==null?void 0:h.id),x()},ie=g=>Mt(tt(g)?St:Ot,{columnMeta:g}),U=W([]),$=[{text:f("datatype.Count"),value:"count"},{text:f("general.min"),value:"min"},{text:f("general.max"),value:"max"},{text:f("general.avg"),value:"avg"},{text:f("general.sum"),value:"sum"},{text:f("general.countDistinct"),value:"countDistinct"},{text:f("general.sumDistinct"),value:"sumDistinct"},{text:f("general.avgDistinct"),value:"avgDistinct"}],ne=se(()=>{var h;const g={};return(h=j.value)==null||h.forEach(N=>{N!=null&&N.id&&(g[N.id]=$.filter(z=>cn(N.uidt).includes(z.value)))}),g}),de=se(()=>{var g;return(g=j.value)==null?void 0:g.filter(h=>{var N;return h.id&&((N=ne.value[h.id])==null?void 0:N.length)})}),R=()=>{const g=U.value.find(h=>h.value===t.value.rollup_function);g&&(g!=null&&g.text)&&(t.value.rollup_function_name=g.text),x(),T()};return Be(()=>t.value.fk_rollup_column_id,()=>{var h;const g=(h=j.value)==null?void 0:h.find(N=>N.id===t.value.fk_rollup_column_id);U.value=ne.value[g==null?void 0:g.id]||[],U.value.length&&!U.value.find(N=>N.value===t.value.rollup_function)&&(t.value.rollup_function=U.value[0].value,t.value.rollup_function_name=U.value[0].text),t.value.rollupColumnTitle=(g==null?void 0:g.title)||(g==null?void 0:g.column_name),T()}),ll(()=>{O.value.length?O.value.length&&S.value&&(S.value=!1):S.value=!0}),Be(()=>t.value.fk_relation_column_id,g=>{if(!g)return;const h=O.value.find(N=>N.col.fk_column_id===g);h&&(t.value.rollupTableTitle=(h==null?void 0:h.title)||h.table_name)}),(g,h)=>{const N=Ie,z=rt,X=Le,Ae=Ue,_e=we,De=il;return e(O).length?(l(),y("div",fs,[a("div",vs,[o(_e,be({class:"flex w-1/2 !max-w-[calc(50%_-_4px)] pb-2",label:`${g.$t("general.link")} ${g.$t("objects.field")}`},e(M).fk_relation_column_id),{default:n(()=>[o(Ae,{value:e(t).fk_relation_column_id,"onUpdate:value":h[0]||(h[0]=oe=>e(t).fk_relation_column_id=oe),placeholder:"-select-","dropdown-class-name":"!w-64 nc-dropdown-relation-table !rounded-md",onChange:F},{suffixIcon:n(()=>[o(N,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(O),(oe,Ce)=>(l(),u(X,{key:Ce,value:oe.col.fk_column_id},{default:n(()=>[a("div",gs,[a("div",ys,[(l(),u(Z(ie(oe.column)),{"column-meta":oe.column,class:"!mx-0"},null,8,["column-meta"])),o(z,{class:"truncate min-w-[calc(100%_-_24px)]","show-on-truncate-only":""},{title:n(()=>[E(C(oe.column.title),1)]),default:n(()=>[E(" "+C(oe.column.title),1)]),_:2},1024)]),a("div",hs,[a("div",bs,[o(z,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[E(C(oe.title||oe.table_name),1)]),default:n(()=>[E(" "+C(oe.title||oe.table_name),1)]),_:2},1024)]),e(t).fk_relation_column_id===oe.col.fk_column_id?(l(),u(Z(("iconMap"in g?g.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"]),o(_e,be({class:"flex w-1/2",label:`${g.$t("datatype.Rollup")} ${g.$t("objects.field")}`},e(t).fk_relation_column_id?e(M).fk_rollup_column_id:void 0),{default:n(()=>[o(Ae,{value:e(t).fk_rollup_column_id,"onUpdate:value":h[1]||(h[1]=oe=>e(t).fk_rollup_column_id=oe),name:"fk_rollup_column_id",placeholder:"-select-",disabled:!e(t).fk_relation_column_id,"dropdown-class-name":"nc-dropdown-relation-column !rounded-xl",onChange:e(x)},{suffixIcon:n(()=>[o(N,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(de),(oe,Ce)=>(l(),u(X,{key:Ce,value:oe.id},{default:n(()=>[a("div",ks,[a("div",ws,[(l(),u(Z(ie(oe)),{"column-meta":oe,class:"!mx-0"},null,8,["column-meta"])),a("div",xs,C(oe.title),1)]),e(t).fk_rollup_column_id===oe.id?(l(),u(Z(("iconMap"in g?g.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},16,["label"])]),o(_e,be({label:g.$t("labels.aggregateFunction")},e(t).fk_relation_column_id?e(M).rollup_function:void 0),{default:n(()=>[o(Ae,{value:e(t).rollup_function,"onUpdate:value":h[2]||(h[2]=oe=>e(t).rollup_function=oe),disabled:!e(t).fk_relation_column_id,placeholder:"-select-","dropdown-class-name":"nc-dropdown-rollup-function",class:"!mt-0.5",onChange:R},{suffixIcon:n(()=>[o(N,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(U),(oe,Ce)=>(l(),u(X,{key:Ce,value:oe.value},{default:n(()=>[a("div",$s,[E(C(oe.text)+" ",1),e(t).rollup_function===oe.value?(l(),u(Z(("iconMap"in g?g.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])])):(l(),y("div",Cs,[o(De,{type:"warning","show-icon":""},{icon:n(()=>[o(N,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>[E(" Alert ")]),description:n(()=>[E(C(g.$t("msg.linkColumnClearNotSupportedYet",{type:"Rollup"})),1)]),_:1})]))}}}),Is=Ke(Ts,[["__scopeId","data-v-0525ba03"]]),Ds=nt(()=>Ze(()=>import("./Cy6djby-.js"),__vite__mapDeps([6,1,2]),import.meta.url).then(p=>p.default||p)),Ms=nt(()=>Ze(()=>import("./CWFUjbDo.js").then(p=>p.C),__vite__mapDeps([7,1,2,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72]),import.meta.url).then(p=>p.default||p)),Ss=nt(()=>Ze(()=>import("./Bfk_gX8L.js"),__vite__mapDeps([73,1,2,74,12,75,76,77,15,19,78,79,80,81,82,83,16,18,84,85,86]),import.meta.url).then(p=>p.default||p)),Os={class:"w-full flex flex-col gap-4"},Ls={class:"flex flex-col gap-4"},Us={class:"nc-ltar-icon nc-mm-icon"},As={class:"nc-ltar-icon nc-hm-icon"},Es={class:"nc-ltar-icon nc-oo-icon"},Ns={key:0},Rs={key:1},Bs={class:"flex w-full items-center gap-2"},Fs={class:"min-w-5 flex items-center justify-center"},Ps={class:"flex flex-col gap-2"},Vs={class:"flex gap-2 items-center"},qs={class:"flex w-full items-center gap-2"},js={class:"min-w-5 flex items-center justify-center"},zs={key:0},Ks={key:3,class:"flex flex-col gap-2"},Hs={class:"flex gap-2 items-center"},Gs={key:0,class:"overflow-auto"},Ws={class:"flex items-center gap-2"},Xs={class:"first-letter:capitalize"},Qs={key:0,class:"flex flex-col gap-4"},Ys={class:"flex flex-row space-x-2"},Zs={class:"flex flex-row"},Js={class:"flex items-center gap-1"},ei={class:"text-sm text-gray-800 select-none"},ti=ye({__name:"LinkedToAnotherRecordOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(p,{emit:D}){var Ve,$e,Ee,I,L,te,b,K,ue,ae,re,J,he,Me,qe,Qe,Se,Ne,je,Oe;const w=p,t=ke(w,"value",D),i=bl(w,"isEdit"),_=We(lt,W()),M=W(),{setAdditionalValidations:x,setPostSaveOrUpdateCbk:c,validateInfos:S,onDataTypeChange:T,sqlUi:Q,isXcdbBase:V,updateFieldName:q}=Fe(),d=Dt(),{tables:f}=gt(d),O=kl(),{viewsByTable:B}=gt(O),{t:j}=Je();i.value||x({childId:[{required:!0,message:j("general.required")}]});const ce=Q===gn?["NO ACTION"]:["NO ACTION","CASCADE","RESTRICT","SET NULL","SET DEFAULT"];if(!i.value)t.value.parentId||(t.value.parentId=(Ve=_.value)==null?void 0:Ve.id),t.value.childColumn||(t.value.childColumn=`${($e=_.value)==null?void 0:$e.table_name}_id`),t.value.childTable||(t.value.childTable=(Ee=_.value)==null?void 0:Ee.table_name),t.value.parentTable||(t.value.parentTable=t.value.rtn||""),t.value.parentColumn||(t.value.parentColumn=t.value.rcn||""),t.value.type||(t.value.type="mm"),t.value.onUpdate||(t.value.onUpdate=ce[0]),t.value.onDelete||(t.value.onDelete=ce[0]),t.value.virtual||(t.value.virtual=Q===dn),t.value.alias||(t.value.alias=t.value.column_name);else{const v=(I=t.value)==null?void 0:I.colOptions;if((te=(L=t.value)==null?void 0:L.meta)!=null&&te.custom&&Et){let s=v.fk_child_column_id,r=v.fk_parent_column_id;(v.type===vt.MANY_TO_MANY||v.type===vt.BELONGS_TO||(K=(b=t==null?void 0:t.value)==null?void 0:b.meta)!=null&&K.bt)&&(s=v.fk_parent_column_id,r=v.fk_child_column_id),t.value.custom={ref_model_id:v==null?void 0:v.fk_related_model_id,base_id:(ue=_.value)==null?void 0:ue.base_id,junc_base_id:(ae=_.value)==null?void 0:ae.base_id,junc_model_id:v==null?void 0:v.fk_mm_model_id,junc_ref_column_id:v==null?void 0:v.fk_mm_parent_column_id,junc_column_id:v==null?void 0:v.fk_mm_child_column_id,ref_column_id:s,column_id:r}}t.value.is_custom_link=(J=(re=t.value)==null?void 0:re.meta)==null?void 0:J.custom,t.value.childViewId||(t.value.childViewId=((Me=(he=t.value)==null?void 0:he.colOptions)==null?void 0:Me.fk_target_view_id)||null)}t.value.childId||(t.value.childId=((Qe=(qe=t.value)==null?void 0:qe.colOptions)==null?void 0:Qe.fk_related_model_id)||null),t.value.childViewId||(t.value.childViewId=((Ne=(Se=t.value)==null?void 0:Se.colOptions)==null?void 0:Ne.fk_target_view_id)||null),t.value.type||(t.value.type=((Oe=(je=t.value)==null?void 0:je.colOptions)==null?void 0:Oe.type)||"mm");const F=W(!1),ie=se(()=>!f.value||!f.value.length?[]:f.value.filter(v=>{var s;return v.type===mn.TABLE&&v.source_id===((s=_.value)==null?void 0:s.source_id)})),U=se(()=>{var r,ee,fe,H;const v=(r=t.value)!=null&&r.is_custom_link?(fe=(ee=t.value)==null?void 0:ee.custom)==null?void 0:fe.ref_model_id:(H=t.value)==null?void 0:H.childId;return v?(B.value.get(v)||[]).filter(me=>me.type!==pn.FORM):[]}),$=(v,s)=>s.key.toLowerCase().includes(v.toLowerCase()),ne=se(()=>t.value.uidt===m.Links&&t.value.type!==vt.ONE_TO_ONE),{metas:de,getMeta:R}=yt();Be(()=>{var v,s,r,ee;return(v=t.value)!=null&&v.is_custom_link?(r=(s=t.value)==null?void 0:s.custom)==null?void 0:r.ref_model_id:(ee=t.value)==null?void 0:ee.childId},async v=>{v&&(R(v).catch(()=>{}),O.loadViews({ignoreLoading:!0,tableId:v}).catch(()=>{}))},{immediate:!0}),t.value.meta=t.value.meta||{};const g=W(!!t.value.childViewId),h=se({get(){var v;return!!((v=t.value.meta)!=null&&v.enableConditions)},set(v){t.value.meta=t.value.meta||{},t.value.meta.enableConditions=v}}),N=v=>{v||(t.value.childViewId=null)};_n(lt,se(()=>{var s,r,ee,fe;const v=(s=t.value)!=null&&s.is_custom_link?(ee=(r=t.value)==null?void 0:r.custom)==null?void 0:ee.ref_model_id:(fe=t.value)==null?void 0:fe.childId;return de.value[v]||{}})),Ye(()=>{c(async({colId:v,column:s})=>{var r;await((r=M.value)==null?void 0:r.applyChanges(v||s.id,!1))})}),fn(()=>{c(null)});const z=se({get:()=>{var v,s,r;return(i.value?(s=(v=t.value)==null?void 0:v.colOptions)==null?void 0:s.fk_related_model_id:(r=t.value)==null?void 0:r.childId)??null},set:v=>{var s;!i.value&&v&&(t.value.childId=v,t.value.childTableTitle=(s=ie.value.find(r=>r.id===v))==null?void 0:s.title)}}),X=se({get:()=>{var v,s,r;return(i.value?(s=(v=t.value)==null?void 0:v.colOptions)==null?void 0:s.type:(r=t.value)==null?void 0:r.type)??null},set:v=>{!i.value&&v&&(t.value.type=v,q())}}),Ae=()=>{T(),el(()=>{q()})},_e=W(!1),De={"custom.column_id":[{required:!0,message:j("general.required")}],"custom.ref_model_id":[{required:!0,message:j("general.required")}],"custom.ref_column_id":[{required:!0,message:j("general.required")}]},oe={"custom.junc_model_id":[{required:!0,message:j("general.required")}],"custom.junc_column_id":[{required:!0,message:j("general.required")}],"custom.junc_ref_column_id":[{required:!0,message:j("general.required")}]},Ce=()=>{var v;(v=t.value)!=null&&v.is_custom_link?(x({childId:[],...De,...t.value.type===vt.MANY_TO_MANY?oe:{}}),t.value.virtual=!0):x({childId:[{required:!0,message:j("general.required")}]})},Xe=()=>{_e.value=!_e.value,_e.value||(t.value.is_custom_link=!1)},Ge=()=>{t.value.is_custom_link=!t.value.is_custom_link,Ce()},et=()=>{var v;!t.value.childId&&!(t.value.is_custom_link&&((v=t.value.custom)!=null&&v.ref_model_id))||(g.value=!g.value,N())},Pe=()=>{var v;!t.value.childId&&!(t.value.is_custom_link&&((v=t.value.custom)!=null&&v.ref_model_id))||(h.value=!h.value)};return(v,s)=>{var Lt,Ut;const r=Ie,ee=al,fe=sl,H=we,me=zn,Te=Ds,ze=qn,ht=rt,dt=Le,bt=Ue,Vt=yn,qt=jn,jt=Ms,zt=Ct,Kt=Ss,Ht=ct,mt=vn("e");return l(),y("div",Os,[a("div",Ls,[o(H,be({label:v.$t("labels.relationType")},e(S).type,{class:"nc-ltar-relation-type"}),{default:n(()=>[o(fe,be({value:e(X),"onUpdate:value":s[0]||(s[0]=G=>le(X)?X.value=G:null),name:"type"},e(S).type,{disabled:e(i)}),{default:n(()=>[o(ee,{value:"mm","data-testid":"Many to Many"},{default:n(()=>[a("span",Us,[o(r,{icon:"mm_solid"})]),E(" "+C(v.$t("title.manyToMany")),1)]),_:1}),o(ee,{value:"hm","data-testid":"Has Many"},{default:n(()=>[a("span",As,[o(r,{icon:"hm_solid"})]),E(" "+C(v.$t("title.hasMany")),1)]),_:1}),o(ee,{value:"oo","data-testid":"One to One",onDblclick:Xe},{default:n(()=>[a("span",Es,[o(r,{icon:"oneToOneSolid"})]),E(" "+C(v.$t("title.oneToOne")),1)]),_:1})]),_:1},16,["value","disabled"])]),_:1},16,["label"])]),e(_e)&&("isEeUI"in v?v.isEeUI:e(Et))?(l(),y("div",Ns,[o(me,{checked:e(t).is_custom_link,"onUpdate:checked":s[1]||(s[1]=G=>e(t).is_custom_link=G),disabled:e(i),"is-edit":e(i),size:"small",name:"Custom",onChange:Ce},null,8,["checked","disabled","is-edit"]),a("span",{class:"ml-3 cursor-pointer",onClick:Ge},"Advanced Link")])):k("",!0),("isEeUI"in v?v.isEeUI:e(Et))&&e(t).is_custom_link?(l(),y("div",Rs,[o(Te,{value:e(t),"onUpdate:value":s[2]||(s[2]=G=>le(t)?t.value=G:null),"is-edit":e(i),meta:e(_)},null,8,["value","is-edit","meta"])])):(l(),u(H,be({key:2,class:"flex w-full pb-2 nc-ltar-child-table"},e(S).childId),{default:n(()=>[o(bt,{value:e(z),"onUpdate:value":s[3]||(s[3]=G=>le(z)?z.value=G:null),"show-search":"",disabled:e(i),"filter-option":$,placeholder:"select table to link","dropdown-class-name":"nc-dropdown-ltar-child-table",onChange:Ae},{suffixIcon:n(()=>[o(r,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(ie),G=>(l(),u(dt,{key:G.title,value:G.id},{default:n(()=>[a("div",Bs,[a("div",Fs,[o(ze,{meta:G,class:"text-gray-500"},null,8,["meta"])]),o(ht,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[E(C(G.title),1)]),default:n(()=>[a("span",null,C(G.title),1)]),_:2},1024)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16)),a("div",Ps,[a("div",Vs,[$t(o(me,{checked:e(g),"onUpdate:checked":s[4]||(s[4]=G=>le(g)?g.value=G:null),size:"small",disabled:!e(t).childId&&!(e(t).is_custom_link&&((Lt=e(t).custom)!=null&&Lt.ref_model_id)),onChange:N},null,8,["checked","disabled"]),[[mt,["c:link:limit-record-by-view",{status:e(g)}]]]),$t((l(),y("span",{class:"text-s","data-testid":"nc-limit-record-view",onClick:et},[E("Limit record selection to a view")])),[[mt,["c:link:limit-record-by-view",{status:e(g)}]]])]),e(g)?(l(),u(H,{key:0,class:"!pl-8 flex w-full pb-2 mt-4 space-y-2 nc-ltar-child-view"},{default:n(()=>[o(qt,{value:e(t).childViewId,"onUpdate:value":s[5]||(s[5]=G=>e(t).childViewId=G),placeholder:v.$t("labels.selectView"),"show-search":"","filter-option":$,"dropdown-class-name":"nc-dropdown-ltar-child-view"},{default:n(()=>[(l(!0),y(Y,null,pe(e(U),G=>(l(),u(dt,{key:G.title,value:G.id},{default:n(()=>[a("div",qs,[a("div",js,[o(Vt,{meta:G,class:"text-gray-500"},null,8,["meta"])]),G.is_default?(l(),y("span",zs,C(v.$t("labels.defaultView")),1)):(l(),u(ht,{key:1,class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[E(C(G.title),1)]),default:n(()=>[a("span",null,C(G.title),1)]),_:2},1024))])]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1})):k("",!0)]),("isEeUI"in v?v.isEeUI:e(Et))?(l(),y("div",Ks,[a("div",Hs,[$t(o(me,{checked:e(h),"onUpdate:checked":s[6]||(s[6]=G=>le(h)?h.value=G:null),disabled:!e(t).childId&&!(e(t).is_custom_link&&((Ut=e(t).custom)!=null&&Ut.ref_model_id)),size:"small"},null,8,["checked","disabled"]),[[mt,["c:link:limit-record-by-filter",{status:e(h)}]]]),$t((l(),y("span",{"data-testid":"nc-limit-record-filters",onClick:Pe},[E(" Limit record selection to filters ")])),[[mt,["c:link:limit-record-by-filter",{status:e(h)}]]])]),e(h)?(l(),y("div",Gs,[o(jt,{ref_key:"filterRef",ref:M,modelValue:e(t).filters,"onUpdate:modelValue":s[7]||(s[7]=G=>e(t).filters=G),class:"!pl-8 !p-0 max-w-620px","auto-save":!1,"show-loading":!1,link:!0,"root-meta":e(_),"link-col-id":e(t).id},null,8,["modelValue","root-meta","link-col-id"])])):k("",!0)])):k("",!0),!e(V)&&!e(i)||e(ne)?(l(),y(Y,{key:4},[a("div",null,[o(zt,{size:"small",type:"text",class:"!text-gray-500 !hover:text-gray-700",onClick:s[8]||(s[8]=xe(G=>F.value=!e(F),["stop"]))},{default:n(()=>[a("div",Ws,[a("span",Xs,C(v.$t("title.advancedSettings").toLowerCase()),1),o(r,{icon:e(F)?"arrowUp":"arrowDown",class:"h-4 w-4"},null,8,["icon"])])]),_:1})]),e(F)?(l(),y("div",Qs,[e(ne)?(l(),u(Kt,{key:0,value:e(t),"onUpdate:value":s[9]||(s[9]=G=>le(t)?t.value=G:null)},null,8,["value"])):k("",!0),!e(V)&&!e(i)?(l(),y(Y,{key:1},[a("div",Ys,[o(H,{class:"flex w-1/2",label:v.$t("labels.onUpdate")},{default:n(()=>[o(bt,{value:e(t).onUpdate,"onUpdate:value":s[10]||(s[10]=G=>e(t).onUpdate=G),disabled:e(t).virtual,name:"onUpdate","dropdown-class-name":"nc-dropdown-on-update",onChange:e(T)},{suffixIcon:n(()=>[o(r,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(ce),(G,kt)=>(l(),u(dt,{key:kt,value:G},{default:n(()=>[G==="NO ACTION"?(l(),y(Y,{key:0},[E(C(v.$t("title.links.noAction")),1)],64)):G==="CASCADE"?(l(),y(Y,{key:1},[E(C(v.$t("title.links.cascade")),1)],64)):G==="RESTRICT"?(l(),y(Y,{key:2},[E(C(v.$t("title.links.restrict")),1)],64)):G==="SET NULL"?(l(),y(Y,{key:3},[E(C(v.$t("title.links.setNull")),1)],64)):G==="SET DEFAULT"?(l(),y(Y,{key:4},[E(C(v.$t("title.links.setDefault")),1)],64)):(l(),y(Y,{key:5},[E(C(G),1)],64))]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"]),o(H,{class:"flex w-1/2",label:v.$t("labels.onDelete")},{default:n(()=>[o(bt,{value:e(t).onDelete,"onUpdate:value":s[11]||(s[11]=G=>e(t).onDelete=G),disabled:e(t).virtual,name:"onDelete","dropdown-class-name":"nc-dropdown-on-delete",onChange:e(T)},{suffixIcon:n(()=>[o(r,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(ce),(G,kt)=>(l(),u(dt,{key:kt,value:G},{default:n(()=>[G==="NO ACTION"?(l(),y(Y,{key:0},[E(C(v.$t("title.links.noAction")),1)],64)):G==="CASCADE"?(l(),y(Y,{key:1},[E(C(v.$t("title.links.cascade")),1)],64)):G==="RESTRICT"?(l(),y(Y,{key:2},[E(C(v.$t("title.links.restrict")),1)],64)):G==="SET NULL"?(l(),y(Y,{key:3},[E(C(v.$t("title.links.setNull")),1)],64)):G==="SET DEFAULT"?(l(),y(Y,{key:4},[E(C(v.$t("title.links.setDefault")),1)],64)):(l(),y(Y,{key:5},[E(C(G),1)],64))]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"])]),a("div",Zs,[o(H,null,{default:n(()=>[a("div",Js,[o(Ht,{checked:e(t).virtual,"onUpdate:checked":s[12]||(s[12]=G=>e(t).virtual=G),disabled:e(t).is_custom_link,onChange:e(T)},{default:n(()=>[a("div",ei,C(v.$t("title.virtualRelation")),1)]),_:1},8,["checked","disabled","onChange"])])]),_:1})])],64)):k("",!0)])):k("",!0)],64)):k("",!0)])}}}),li=Ke(ti,[["__scopeId","data-v-290ca0f4"]]),ni={},oi={class:"hidden"};function ai(p,D){return l(),y("div",oi)}const si=Ke(ni,[["render",ai]]),ii={class:"flex flex-col gap-4"},ui={key:0,class:"flex items-center gap-1"},ri=a("div",{class:"text-sm text-gray-800 select-none"},"Allow adding multiple users",-1),ci={key:0,class:"flex items-center gap-1"},di=a("div",{class:"text-sm text-gray-800 select-none"},"Notify users with base access when they're added",-1),mi=ye({__name:"UserOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(p,{emit:D}){const t=ke(p,"value",D),i=W(!1),_=W(),M={},{setAdditionalValidations:x,updateFieldName:c}=Fe();x({...M}),t.value.meta={...He[m.User],...t.value.meta||{}},Ye(()=>{_.value=t.value.meta.is_multi});const S=T=>{var Q;t.value.meta.is_multi=T,t.value.meta.is_multi||(t.value.cdf=((Q=t.value.cdf)==null?void 0:Q.split(",")[0])||null),c()};return(T,Q)=>{const V=ct,q=we,d=Ie,f=il;return l(),y("div",ii,[o(q,null,{default:n(()=>[e(t).meta?(l(),y("div",ui,[o(V,{checked:e(t).meta.is_multi,"data-testid":"user-column-allow-multiple",onChange:S},{default:n(()=>[ri]),_:1},8,["checked"])])):k("",!0)]),_:1}),e(i)?(l(),u(q,{key:0},{default:n(()=>[e(t).meta?(l(),y("div",ci,[o(V,{checked:e(t).meta.notify,"onUpdate:checked":Q[0]||(Q[0]=O=>e(t).meta.notify=O),"data-testid":"user-column-notify-user"},{default:n(()=>[di]),_:1},8,["checked"])])):k("",!0)]),_:1})):k("",!0),e(_)&&T.isEdit&&!e(t).meta.is_multi?(l(),u(f,{key:1,type:"warning","show-icon":""},{icon:n(()=>[o(d,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>[E(" Alert ")]),description:n(()=>[E(" Changing from multiple mode to single will retain only first user in each cell! ")]),_:1})):k("",!0)])}}}),pi=p=>(Zt("data-v-575d7d89"),p=p(),Jt(),p),_i={class:"relative"},fi={class:"bg-white space-y-2 p-2 rounded-lg"},vi=["onClick"],gi={class:"flex w-full items-center leading-5 justify-between gap-1"},yi={key:1,class:"text-sm flex items-center leading-5 text-gray-500"},hi={class:"bg-white w-80 space-y-3 h-70 overflow-y-auto rounded-lg"},bi={class:"!sticky top-0 flex gap-2 bg-white px-2 py-2"},ki={class:"text-[13px]"},wi={class:"grid px-3 auto-rows-max pb-2 nc-scrollbar-md gap-3 grid-cols-10"},xi={class:"flex gap-2 w-full capitalize text-gray-800 truncate items-center"},$i={key:0,class:"!mt-4"},Ci={class:"mb-2 text-gray-800 text-[13px] flex justify-between"},Ti=pi(()=>a("a",{class:"font-medium",href:"https://docs.nocodb.com/fields/field-types/custom-types/button#create-a-button-field",target:"_blank"}," Docs ",-1)),Ii={class:"flex rounded-lg"},Di={class:"w-full flex justify-between items-center gap-2 px-2 py-2 rounded-md hover:bg-gray-100"},Mi={class:"flex w-full items-center gap-2"},Si=ye({__name:"ButtonOptions",props:{value:{},fromTableExplorer:{type:Boolean}},emits:["update:value"],async setup(p,{emit:D}){var Pe,Ve,$e,Ee,I,L,te;let w,P;const t=p,i=D,{t:_}=Je(),{isUIAllowed:M}=Ft(),{getMeta:x}=yt(),c=ke(t,"value",i),S=We(lt,W()),{isEdit:T,setAdditionalValidations:Q,validateInfos:V,sqlUi:q,column:d,isWebhookCreateModalOpen:f}=Fe(),O=[m.QrCode,m.Barcode,m.Button],B=Hn(),{loadHooksList:j}=B;[w,P]=hn(()=>j()),await w,P();const{hooks:ce}=Bt(B),F=W(),ie=se(()=>ce.value.filter(b=>b.event==="manual"&&b.active)),U=[{label:_("labels.openUrl"),value:"url"},{label:_("labels.runWebHook"),value:"webhook"}],$=se(()=>{var b,K;return((K=(b=S==null?void 0:S.value)==null?void 0:b.columns)==null?void 0:K.filter(ue=>!(O.includes(ue.uidt)||Yt(ue,S.value))))||[]}),ne={formula_raw:[{required:c.value.type==="url",validator:(b,K)=>(async()=>{var ue;if(c.value.type==="url"){if(!(K!=null&&K.trim()))throw new Error("Required");try{await Qt({column:d.value,formula:K,columns:$.value,clientOrSqlUi:q.value,getMeta:x})}catch(ae){throw ae instanceof yl&&((ue=ae.extra)!=null&&ue.key)?new Error(_(ae.extra.key,ae.extra)):new Error(ae.message)}}})()}],fk_webhook_id:[{required:c.value.type==="webhook",validator:(b,K)=>new Promise((ue,ae)=>{c.value.type==="webhook"&&!K&&ae(new Error(_("general.required"))),ue()})}],color:[{validator:(b,K)=>new Promise((ue,ae)=>{["brand","red","green","maroon","blue","orange","pink","purple","yellow","gray"].includes(K)||ae(new Error(_("msg.invalidColor"))),ue()})}],theme:[{validator:(b,K)=>new Promise((ue,ae)=>{["solid","light","text"].includes(K)||ae(new Error(_("msg.invalidTheme"))),ue()})}],type:[{validator:(b,K)=>new Promise((ue,ae)=>{["url","webhook"].includes(K)||ae(new Error(_("msg.invalidType"))),ue()})}],label:[{validator:(b,K)=>new Promise((ue,ae)=>{!(K.length>0)&&!c.value.icon&&ae(new Error(_("msg.invalidLabel"))),ue()})}]};if(T.value){const b=c.value.colOptions;c.value.type=b==null?void 0:b.type,c.value.theme=b==null?void 0:b.theme,c.value.label=b==null?void 0:b.label,c.value.color=b==null?void 0:b.color,c.value.fk_webhook_id=b==null?void 0:b.fk_webhook_id,c.value.icon=b==null?void 0:b.icon,F.value=ce.value.find(K=>{var ue;return K.id===((ue=c.value)==null?void 0:ue.fk_webhook_id)})}else c.value.type=U[0].value,c.value.theme="solid",c.value.label="Button",c.value.color="brand",c.value.formula_raw="";Q({...ne}),(Ve=(Pe=d.value)==null?void 0:Pe.colOptions)!=null&&Ve.formula_raw&&(c.value.formula_raw=gl((Ee=($e=d.value)==null?void 0:$e.colOptions)==null?void 0:Ee.formula,(I=S==null?void 0:S.value)==null?void 0:I.columns,(te=(L=d.value)==null?void 0:L.colOptions)==null?void 0:te.formula_raw)||"");const de={solid:{brand:"bg-brand-500 text-white",red:"bg-red-600 text-white",green:"bg-green-600 text-white",maroon:"bg-maroon-600 text-white",blue:"bg-blue-600 text-white",orange:"bg-orange-600 text-white",pink:"bg-pink-600 text-white",purple:"bg-purple-500 text-white",yellow:"bg-yellow-600 text-white",gray:"bg-gray-600 text-white"},light:{brand:"bg-brand-200 text-gray-800",red:"bg-red-200 text-gray-800",green:"bg-green-200 text-gray-800",maroon:"bg-maroon-200 text-gray-800",blue:"bg-blue-200 text-gray-800",orange:"bg-orange-200 text-gray-800",pink:"bg-pink-200 text-gray-800",purple:"bg-purple-200 text-gray-800",yellow:"bg-yellow-200 text-gray-800",gray:"bg-gray-200"},text:{brand:"text-brand-500",red:"text-red-600",green:"text-green-600",maroon:"text-maroon-600",blue:"text-blue-600",orange:"text-orange-600",pink:"text-pink-600",purple:"text-purple-500",yellow:"text-yellow-600",gray:"text-gray-600"}},R=W(!1),g=(b,K)=>{c.value.theme=b,c.value.color=K,R.value=!1},h=W(!1),N=W(!1),z=W(""),X=se(()=>bn(z.value)),Ae=W([{text:[_("general.manual"),_("general.trigger")],value:["manual","trigger"]}]),_e=W(!1),De=()=>{F.value=void 0,_e.value=!0,f.value=!0},oe=b=>{F.value=b.id?b:void 0,c.value.fk_webhook_id=b.id,_e.value=!1,setTimeout(()=>{f.value=!1},500)},Ce=b=>{c.value.fk_webhook_id=b.id,F.value=b,h.value=!1,_e.value=!1},Xe=()=>{c.value.icon=null,N.value=!1},Ge=()=>{F.value&&(f.value=!0,_e.value=!0)};Be(_e,b=>{b||setTimeout(()=>{f.value=!1},500)});const et=b=>{c.value.icon=b,N.value=!1};return(b,K)=>{var r,ee,fe;const ue=nl,ae=we,re=Tt,J=Ie,he=ol,Me=Ct,qe=It,Qe=Le,Se=Ue,Ne=$l,je=Wn,Oe=Kn,v=rt,s=Gn;return l(),y("div",_i,[o(qe,{gutter:8},{default:n(()=>[o(re,{span:12},{default:n(()=>[o(ae,be(e(V).label,{class:"mt-4",label:b.$t("general.label")}),{default:n(()=>[o(ue,{value:e(c).label,"onUpdate:value":K[0]||(K[0]=H=>e(c).label=H),class:"nc-column-label-input !rounded-lg",placeholder:"Button"},null,8,["value"])]),_:1},16,["label"])]),_:1}),o(re,{span:6},{default:n(()=>[o(ae,be({label:b.$t("general.style")},e(V).theme),{default:n(()=>[o(he,{visible:e(R),"onUpdate:visible":K[1]||(K[1]=H=>le(R)?R.value=H:null),class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",fi,[(l(!0),y(Y,null,pe(Object.entries(de),([H,me])=>(l(),y("div",{key:H,class:"flex gap-2"},[(l(!0),y(Y,null,pe(Object.entries(me),([Te,ze])=>(l(),y("div",{key:Te},[a("button",{class:ge([{[ze]:!0,"!border-transparent":H!=="text"},"border-1 border-gray-200 flex items-center justify-center rounded h-6 w-6"]),onClick:ht=>g(H,Te)},[(l(),u(Z(("iconMap"in b?b.iconMap:e(ve)).cellText),{class:"w-3.5 h-3.5"}))],10,vi)]))),128))]))),128))])]),default:n(()=>[a("div",{class:ge([{"!border-brand-500 shadow-selected nc-button-style-dropdown ":e(R)},"flex items-center justify-between border-1 h-8 px-[11px] border-gray-300 !w-full transition-all cursor-pointer !rounded-lg"])},[a("div",{class:ge([`${e(c).color??"brand"} ${e(c).theme??"solid"}`,"flex items-center justify-center nc-cell-button rounded-md h-6 w-6 gap-2"])},[(l(),u(Z(("iconMap"in b?b.iconMap:e(ve)).cellText),{class:"w-4 h-4"}))],2),o(J,{icon:"arrowDown",class:"text-gray-500 !w-4 !h-4"})],2)]),_:1},8,["visible"])]),_:1},16,["label"])]),_:1}),o(re,{span:6},{default:n(()=>[o(ae,be({label:b.$t("labels.icon")},e(V).icon),{default:n(()=>[o(he,{visible:e(N),"onUpdate:visible":K[3]||(K[3]=H=>le(N)?N.value=H:null),class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",hi,[a("div",bi,[o(ue,{ref:"inputRef",value:e(z),"onUpdate:value":K[2]||(K[2]=H=>le(z)?z.value=H:null),placeholder:b.$t("placeholder.searchIcons"),class:"nc-dropdown-search-unified-input z-10"},{prefix:n(()=>[o(J,{icon:"search",class:"nc-search-icon h-3.5 w-3.5 mr-1"})]),_:1},8,["value","placeholder"]),o(Me,{size:"small",class:"!px-4",type:"text",onClick:Xe},{default:n(()=>[a("span",ki,C(b.$t("general.remove")),1)]),_:1})]),a("div",wi,[(l(!0),y(Y,null,pe(e(X),({icon:H,name:me},Te)=>(l(),u(Z(H),{key:Te,icon:H,class:"w-6 hover:bg-gray-100 cursor-pointer rounded p-1 text-gray-700 h-6",onClick:ze=>et(me)},null,8,["icon","onClick"]))),128))])])]),default:n(()=>[a("div",{class:ge([{"!border-brand-500 shadow-selected nc-button-style-dropdown ":e(N)},"flex items-center justify-center border-1 h-8 px-[11px] border-gray-300 !w-full transition-all cursor-pointer !rounded-lg"])},[a("div",gi,[e(c).icon?(l(),u(J,{key:0,icon:e(c).icon,class:"w-4 h-4 text-gray-700"},null,8,["icon"])):(l(),y("div",yi,C(b.$t("labels.selectIcon")),1)),o(J,{icon:"arrowDown",class:"text-gray-500 !w-4 !h-4"})])],2)]),_:1},8,["visible"])]),_:1},16,["label"])]),_:1})]),_:1}),o(qe,{class:"mt-4",gutter:8},{default:n(()=>[o(re,{span:24},{default:n(()=>[o(ae,be({label:b.$t("labels.onClick")},e(V).type),{default:n(()=>[o(Se,{value:e(c).type,"onUpdate:value":K[4]||(K[4]=H=>e(c).type=H),class:"w-52 nc-button-type-select","dropdown-class-name":"nc-dropdown-button-cell-type"},{suffixIcon:n(()=>[o(J,{icon:"arrowDown",class:"text-gray-500"})]),default:n(()=>[(l(),y(Y,null,pe(U,(H,me)=>o(Qe,{key:me,value:H.value},{default:n(()=>[a("div",xi,[E(C(H.label)+" ",1),e(c).type===H.value?(l(),u(Z(("iconMap"in b?b.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1},16,["label"])]),_:1})]),_:1}),((r=e(c))==null?void 0:r.type)==="url"?(l(),y("div",$i,[o(Ne,{value:e(c).formula_raw,"onUpdate:value":K[5]||(K[5]=H=>e(c).formula_raw=H),"suggestion-height":"medium","editor-height":"50px","disable-suggestion-headers":"",label:b.$t("labels.urlFormula"),error:((ee=e(V).formula_raw)==null?void 0:ee.validateStatus)==="error"},null,8,["value","label","error"])])):k("",!0),((fe=e(c))==null?void 0:fe.type)==="webhook"?(l(),u(ae,{key:1,class:"!mt-4"},{default:n(()=>[a("div",Ci,[E(C(b.$t("labels.webhook"))+" ",1),Ti]),a("div",Ii,[o(he,{visible:e(h),"onUpdate:visible":K[6]||(K[6]=H=>le(h)?h.value=H:null),trigger:["click"]},{overlay:n(()=>{var H;return[e(h)?(l(),u(Oe,{key:0,"is-parent-open":e(h),"search-input-placeholder":b.$t("placeholder.searchFields"),"option-config":{selectOptionEvent:["c:actions:webhook"],optionClassName:""},options:e(ie),"selected-option-id":(H=e(F))==null?void 0:H.id,"disable-mascot":"",class:"max-h-72 max-w-85","filter-field":"title","show-selected-option":"",onSelected:Ce},kn({_:2},[e(M)("hookCreate")?{name:"bottom",fn:n(()=>[o(je,{style:{margin:"4px 0"}}),a("div",{class:"flex items-center text-brand-500 text-sm cursor-pointer",onClick:De},[a("div",Di,[E(C(b.$t("general.create"))+" "+C(b.$t("objects.webhook").toLowerCase())+" ",1),o(J,{icon:"plus",class:"flex-none"})])])]),key:"0"}:void 0]),1032,["is-parent-open","search-input-placeholder","options","selected-option-id"])):k("",!0)]}),default:n(()=>{var H,me;return[a("div",{class:ge([{"nc-button-style-dropdown shadow-dropdown-open remove-right-shadow":e(h)},"nc-button-webhook-select border-r-0 flex items-center justify-center border-1 h-8 px-[8px] border-gray-300 !w-full transition-all cursor-pointer !rounded-l-lg"])},[a("div",Mi,[(l(),y("div",{key:(H=e(F))==null?void 0:H.id,class:"flex items-center overflow-x-clip truncate text-ellipsis w-full gap-1 text-gray-800"},[o(v,{class:ge([{"text-gray-500":!((me=e(F))!=null&&me.title)},"truncate max-w-full"]),"show-on-truncate-only":""},{title:n(()=>{var Te,ze;return[E(C((Te=e(F))!=null&&Te.title?(ze=e(F))==null?void 0:ze.title:b.$t("labels.selectAWebhook")),1)]}),default:n(()=>{var Te,ze;return[E(" "+C((Te=e(F))!=null&&Te.title?(ze=e(F))==null?void 0:ze.title:b.$t("labels.selectAWebhook")),1)]}),_:1},8,["class"])])),o(J,{icon:"arrowDown",class:ge([{"transform rotate-180":e(h)},"text-gray-500 transition-all transition-transform"])},null,8,["class"])])],2)]}),_:1},8,["visible"]),o(Me,{size:"small",type:"secondary",class:ge(["!rounded-l-none border-l-[#d9d9d9] !hover:bg-white nc-button-style-dropdown",{"nc-button-style-dropdown shadow-dropdown-open remove-left-shadow":e(h)}]),onClick:Ge},{default:n(()=>[o(J,{class:ge({"text-gray-400":!e(F),"text-gray-700":e(F)}),icon:"ncEdit"},null,8,["class"])]),_:1},8,["class"])])]),_:1})):k("",!0),e(_e)?(l(),u(s,{key:2,value:e(_e),"onUpdate:value":K[7]||(K[7]=H=>le(_e)?_e.value=H:null),hook:e(F),"event-list":e(Ae),onClose:oe},null,8,["value","hook","event-list"])):k("",!0)])}}}),Oi=Ke(Si,[["__scopeId","data-v-575d7d89"]]),Li={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ui=a("path",{fill:"currentColor",d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2m1 5h-2v4H7v2h4v4h2v-4h4v-2h-4z"},null,-1),Ai=[Ui];function Ei(p,D){return l(),y("svg",Li,[...Ai])}const Ni={name:"mdi-plus-circle-outline",render:Ei},Ri={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Bi=a("path",{fill:"currentColor",d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2M7 13h10v-2H7"},null,-1),Fi=[Bi];function Pi(p,D){return l(),y("svg",Ri,[...Fi])}const Vi={name:"mdi-minus-circle-outline",render:Pi},qi={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ji=a("path",{fill:"currentColor",d:"M10 7v2H9v6h1v2H6v-2h1V9H6V7zm6 0a2 2 0 0 1 2 2v6c0 1.11-.89 2-2 2h-4V7m4 2h-2v6h2z"},null,-1),zi=[ji];function Ki(p,D){return l(),y("svg",qi,[...zi])}const Hi={name:"mdi-identifier",render:Ki},Gi=nt(()=>Ze(()=>import("./Cc8awia0.js"),__vite__mapDeps([87,1,2,88]),import.meta.url).then(p=>p.default||p)),Wi=nt(()=>Ze(()=>import("./CC9TCuLb.js"),__vite__mapDeps([89,1,2,90,91,92,27,93,23,94,95]),import.meta.url).then(p=>p.default||p)),Xi=nt(()=>Ze(()=>import("./-VIMLpA0.js"),__vite__mapDeps([96,1,2,74,12,75,76,77,15,19,78,79,80,81,82,83,16,18,84,85,86,37,33,97,14,17,98,99]),import.meta.url).then(p=>p.default||p)),Qi=nt(()=>Ze(()=>import("./BOhVjQ6W.js"),__vite__mapDeps([100,1,2,74,12,75,76,77,15,19,78,79,80,81,82,83,16,18,84,85,86,37,33,14,17]),import.meta.url).then(p=>p.default||p)),Yi=p=>(Zt("data-v-ccf9de62"),p=p(),Jt(),p),Zi={class:"flex flex-grow px-2 py-1 items-center rounded-md bg-gray-100 focus:bg-gray-100 outline-none",style:{"outline-style":"solid","outline-width":"thin"}},Ji=["disabled","placeholder"],eu={class:"flex items-center gap-1"},tu=["data-testid"],lu={class:"flex gap-2 items-center"},nu={class:"flex-1"},ou={key:0,class:"!text-xs !text-gray-300"},au={key:0,class:"flex items-center gap-1"},su={class:"text-sm text-gray-800"},iu={class:"nc-column-options-wrapper flex flex-col gap-4"},uu={key:2,class:"flex gap-1"},ru=Yi(()=>a("div",{class:"text-sm text-gray-800"},"Set as Unique",-1)),cu={key:0,class:"text-xs text-gray-400 flex items-center justify-end"},du={key:0,class:"overflow-hidden"},mu={class:"flex gap-3 text-gray-800 h-7 mb-1 items-center justify-between"},pu={class:"text-[13px]"},_u={class:"flex !text-gray-700 items-center gap-2"},fu={class:"first-letter:capitalize"},vu={key:4,class:"flex items-center justify-between gap-2"},gu={class:"flex !text-gray-700 items-center gap-2"},yu={class:"first-letter:capitalize"},hu={key:1},bu=ye({__name:"EditOrAdd",props:{preload:{},columnPosition:{},embedMode:{type:Boolean},columnLabel:{},hideTitle:{type:Boolean},hideType:{type:Boolean},hideAdditionalOptions:{type:Boolean},fromTableExplorer:{type:Boolean},editDescription:{type:Boolean},readonly:{type:Boolean}},emits:["submit","cancel","mounted","add","update"],setup(p,{emit:D}){const w=p,P=D,{formState:t,isWebhookCreateModalOpen:i,generateNewColumnMeta:_,addOrUpdate:M,onAlter:x,onUidtOrIdTypeChange:c,validateInfos:S,isEdit:T,disableSubmitBtn:Q,column:V}=Fe(),q=bl(w,"editDescription"),{getMeta:d}=yt(),{t:f}=Je(),{isMetaReadOnly:O}=Ft(),B=se(()=>w.columnLabel||f("objects.field")),{$e:j}=Mn(),{appInfo:ce}=wn(),{betaFeatureToggleState:F}=Xn(),{openedViewsTab:ie}=gt(kl());Qn();const U=We(lt,W()),$=We(xn,W(!1)),ne=We($n,W(!1)),de=se(()=>w.readonly),{isMysql:R,isMssql:g,isDatabricks:h,isXcdbBase:N}=Dt(),z=We(Cn),X=W(!1),Ae=W(!1),_e=W(!1),De=W(!0),oe=se({get:()=>(dl(t.value.cdf)&&!_e.value&&(_e.value=!0),dl(t.value.cdf)||_e.value),set:s=>{_e.value=s}}),Ce=[m.Email,m.URL,m.PhoneNumber],Xe=[m.LinkToAnotherRecord,m.Lookup,m.Rollup,m.Links,m.CreatedTime,m.LastModifiedTime,m.CreatedBy,m.LastModifiedBy,m.Formula,m.QrCode,m.Barcode,m.Button],Ge=W(!1),et=s=>ce.value.ee?F.show?F.show:!s.name.includes(m.GeoData):!0,Pe=W(!1),Ve=s=>[m.CreatedBy,m.CreatedTime,m.LastModifiedBy,m.LastModifiedTime].includes(s.name),$e=s=>{var me;const r=!Ve(s)||t.value.uidt===s.name||!T.value,ee=et(s)&&(!T.value||!s.virtual||s.name===t.value.uidt),fe=s.name===m.SpecificDBType&&N((me=U.value)==null?void 0:me.source_id),H=!s.deprecated||Pe.value;return r&&ee&&!fe&&H},Ee=se(()=>{var r,ee;const s=[...En.filter($e),...!T.value&&((ee=(r=U==null?void 0:U.value)==null?void 0:r.columns)!=null&&ee.every(fe=>!fe.pk))?[{name:m.ID,icon:Hi,virtual:0}]:[]];return O.value&&s.sort((fe,H)=>{const me=ut.includes(fe.name),Te=ut.includes(H.name);return me&&!Te?-1:!me&&Te?1:0}),s}),I=s=>{t.value.uidt=s,c()},L=async()=>{var s;await d((s=U.value)==null?void 0:s.id,!0),ne.value||z==null||z.trigger()},te=W(!1),b=W(!1),K=async()=>{if(de.value)return;te.value=!0;const s=await M(L,w.columnPosition);te.value=!1,s&&(setTimeout(()=>{X.value=!1},500),P("submit"),$.value&&j("a:form-view:add-new-field"))};async function ue(){var s;if(!de.value)if(T.value&&t.value.uidt!==((s=V.value)==null?void 0:s.uidt)){b.value=!0;const{close:r}=Yn(ao,{visible:b,"onUpdate:visible":ee=>b.value=ee,saving:te,onSubmit:async()=>{r(),await K()}})}else await K()}const ae=W();ll(()=>{ae.value&&t.value&&!de.value&&setTimeout(()=>{var s,r;(document.activeElement===document.body||document.activeElement===null)&&((s=ae.value)==null||s.focus(),(r=ae.value)==null||r.select())},300),X.value=!1});const re=W(!1),J=W(),he=()=>{t.value.description="",re.value=!1};Ye(()=>{var s,r,ee;if(((r=(s=V.value)==null?void 0:s.description)!=null&&r.length||q.value)&&(re.value=!0),T.value?t.value.pk?(rl.info(f("msg.info.editingPKnotSupported")),P("cancel")):tl(t.value)&&!Tn(t.value)&&(rl.info(f("msg.info.editingSystemKeyNotSupported")),P("cancel")):_(!0),w.preload){const{colOptions:fe,...H}=w.preload;if(t.value={...t.value,...H},fe){const me=t.value.meta||{};c(),t.value={...t.value,colOptions:{...fe},meta:me}}}else t.value.filters=void 0;t.value&&!t.value.column_name&&!Rt(t.value)&&(t.value.column_name=(ee=t.value)==null?void 0:ee.title),el(()=>{var fe;Ae.value=!0,P("mounted"),T.value||(fe=t.value)!=null&&fe.temp_id||P("add",t.value),$.value&&!w.fromTableExplorer&&!re.value?setTimeout(()=>{var H,me;(H=ae.value)==null||H.focus(),(me=ae.value)==null||me.select()},100):re.value&&setTimeout(()=>{var H;(H=J.value)==null||H.focus()},100)})});const Me=s=>{Ge.value||i.value||s.key==="Escape"&&P("cancel")},qe=se(()=>ie.value==="field"),Qe=s=>{s?Ge.value=s:(De.value=!0,setTimeout(()=>{Ge.value=s},300))},Se=()=>{De.value&&(De.value=!1)};w.fromTableExplorer&&Be(t,()=>{Ae.value&&P("update",t.value)},{deep:!0});const Ne=se(()=>({label:`${T.value&&!w.columnLabel?f("general.update"):f("general.save")} ${B.value}`,loadingLabel:`${T.value&&!w.columnLabel?f("general.updating"):f("general.saving")} ${B.value}`})),je=(s,r)=>r.value.toLowerCase().includes(s.toLowerCase())||ot[r.value]&&ot[r.value].toLowerCase().includes(s.toLowerCase()),Oe=()=>{re.value?re.value=!1:(re.value=!0,setTimeout(()=>{var s;(s=J.value)==null||s.focus()},100))},v=se(()=>{var s;return!(O.value&&!ut.includes((s=t.value)==null?void 0:s.uidt)&&!tt(t.value))});return(s,r)=>{const ee=we,fe=nl,H=fo,me=Ie,Te=Le,ze=Ue,ht=Ra,dt=Va,bt=Wa,Vt=Dl,qt=Za,jt=es,zt=Ol,Kt=El,Ht=ds,mt=Al,Lt=Ll,Ut=_s,G=Ml,kt=Ul,Nl=Is,Rl=li,Bl=Sl,Fl=si,Pl=mi,Vl=Un,ql=Oi,ul=ct,jl=Gi,zl=Wi,Kl=Xi,Hl=Qi,wt=Ct,Gl=eo,Wl=Jn;return e(b)?k("",!0):(l(),y("div",{key:0,class:ge(["overflow-auto nc-scrollbar-md max-h-[max(80vh,500px)]",{"bg-white":!w.fromTableExplorer,"w-[384px]":!w.embedMode,"min-w-[500px]":e(t).uidt===e(m).LinkToAnotherRecord||e(t).uidt===e(m).Links,"!w-[600px]":e(t).uidt===e(m).LinkToAnotherRecord||e(t).uidt===e(m).Links,"min-w-[422px] !w-full":e(Rt)(e(t).uidt),"shadow-lg shadow-gray-300 border-1 border-gray-200 rounded-xl p-5":!s.embedMode}]),onKeydown:Me,onClick:r[38]||(r[38]=xe(()=>{},["stop"]))},[o(Wl,{modelValue:e(t),"onUpdate:modelValue":r[37]||(r[37]=At=>le(t)?t.value=At:null),"no-style":"",name:"column-create-or-edit",layout:"vertical","data-testid":"add-or-edit-column",class:"flex flex-col gap-4"},{default:n(()=>{var At;return[e(qe)?(l(),u(ee,be({key:0},e(S).title,{class:"flex flex-grow"}),{default:n(()=>[a("div",Zi,[$t(a("input",{ref_key:"antInput",ref:ae,"onUpdate:modelValue":r[0]||(r[0]=A=>e(t).title=A),disabled:e(de)||!e(v),placeholder:`${s.$t("objects.field")} ${s.$t("general.name").toLowerCase()} ${e(T)?"":s.$t("labels.optional")}`,class:"flex flex-grow nc-fields-input text-sm font-semibold outline-none bg-inherit min-h-6",contenteditable:!0,onInput:r[1]||(r[1]=A=>e(t).userHasChangedTitle=!0)},null,40,Ji),[[In,e(t).title]])])]),_:1},16)):k("",!0),!w.hideTitle&&!e(qe)?(l(),u(ee,be({key:1},e(S).title,{required:!1,class:"!mb-0"}),{default:n(()=>[o(fe,{ref_key:"antInput",ref:ae,value:e(t).title,"onUpdate:value":r[2]||(r[2]=A=>e(t).title=A),class:"nc-column-name-input !rounded-lg",placeholder:`${s.$t("objects.field")} ${s.$t("general.name").toLowerCase()} ${e(T)?"":s.$t("labels.optional")}`,disabled:e(ne)||e(de)||!e(v),onInput:r[3]||(r[3]=A=>e(x)(8))},null,8,["value","placeholder","disabled"])]),_:1},16)):k("",!0),a("div",eu,[!w.hideType&&!e(t).uidt?(l(),u(H,{key:0,options:e(Ee),onSelected:I},null,8,["options"])):w.hideType?k("",!0):(l(),u(ee,{key:1,class:"flex-1",onKeydown:[_t(xe(Se,["stop"]),["up"]),_t(xe(Se,["stop"]),["down"])]},{default:n(()=>{var A;return[o(ze,{value:e(t).uidt,"onUpdate:value":r[4]||(r[4]=Re=>e(t).uidt=Re),"show-search":"",class:"nc-column-type-input !rounded-lg",disabled:e(T)&&e(O)&&!e(ut).includes(e(t).uidt)||e(ne)||e(de)||e(T)&&!!Xe.includes((A=e(V))==null?void 0:A.uidt)||e(T)&&!e(v),"dropdown-class-name":"nc-dropdown-column-type border-1 !rounded-lg border-gray-200","filter-option":je,onDropdownVisibleChange:Qe,onChange:e(c),onDblclick:r[5]||(r[5]=Re=>Pe.value=!e(Pe))},{suffixIcon:n(()=>[o(me,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),y(Y,null,pe(e(Ee),Re=>(l(),u(Te,be({key:Re.name,value:Re.name,disabled:e(O)&&!e(ut).includes(Re.name),ref_for:!0},e(S).uidt,{class:{"ant-select-item-option-active-selected":e(De)&&e(t).uidt===Re.name},onMouseover:Se}),{default:n(()=>[a("div",{class:"w-full flex gap-2 items-center justify-between","data-testid":Re.name},[a("div",lu,[(l(),u(Z(Re.icon),{class:ge(["w-4 h-4",e(O)&&!e(ut).includes(Re.name)?"text-gray-300":"text-gray-700"])},null,8,["class"])),a("div",nu,C(e(ot)[Re.name]),1),Re.deprecated?(l(),y("span",ou,"("+C(s.$t("general.deprecated"))+")",1)):k("",!0)]),e(t).uidt===Re.name?(l(),u(Z(("iconMap"in s?s.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):k("",!0)],8,tu)]),_:2},1040,["value","disabled","class"]))),128))]),_:1},8,["value","disabled","onChange"])]}),_:1},8,["onKeydown"]))]),!e(de)&&e(t).uidt?(l(),y(Y,{key:2},[e(t).uidt===e(m).Formula?(l(),u(ht,{key:0,value:e(t),"onUpdate:value":r[6]||(r[6]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).QrCode?(l(),u(dt,{key:1,modelValue:e(t),"onUpdate:modelValue":r[7]||(r[7]=A=>le(t)?t.value=A:null)},null,8,["modelValue"])):k("",!0),e(t).uidt===e(m).Barcode?(l(),u(bt,{key:2,modelValue:e(t),"onUpdate:modelValue":r[8]||(r[8]=A=>le(t)?t.value=A:null)},null,8,["modelValue"])):k("",!0),e(t).uidt===e(m).Currency?(l(),u(Vt,{key:3,value:e(t),"onUpdate:value":r[9]||(r[9]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).LongText?(l(),u(qt,{key:4,value:e(t),"onUpdate:value":r[10]||(r[10]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).Duration?(l(),u(jt,{key:5,value:e(t),"onUpdate:value":r[11]||(r[11]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).Rating?(l(),u(zt,{key:6,value:e(t),"onUpdate:value":r[12]||(r[12]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).Checkbox?(l(),u(Kt,{key:7,value:e(t),"onUpdate:value":r[13]||(r[13]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).Lookup?(l(),u(Ht,{key:8,value:e(t),"onUpdate:value":r[14]||(r[14]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).Date?(l(),u(mt,{key:9,value:e(t),"onUpdate:value":r[15]||(r[15]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).Time?(l(),u(Lt,{key:10,value:e(t),"onUpdate:value":r[16]||(r[16]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).Number?(l(),u(Ut,{key:11,value:e(t),"onUpdate:value":r[17]||(r[17]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).Decimal?(l(),u(G,{key:12,value:e(t),"onUpdate:value":r[18]||(r[18]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),[e(m).DateTime,e(m).CreatedTime,e(m).LastModifiedTime].includes(e(t).uidt)?(l(),u(kt,{key:13,value:e(t),"onUpdate:value":r[19]||(r[19]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).Rollup?(l(),u(Nl,{key:14,value:e(t),"onUpdate:value":r[20]||(r[20]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).LinkToAnotherRecord||e(t).uidt===e(m).Links?(l(),u(Rl,{key:`${e(t).uidt}-${e(t).id||"new"}`,value:e(t),"onUpdate:value":r[21]||(r[21]=A=>le(t)?t.value=A:null),"is-edit":e(T)},null,8,["value","is-edit"])):k("",!0),e(t).uidt===e(m).Percent?(l(),u(Bl,{key:16,value:e(t),"onUpdate:value":r[22]||(r[22]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt===e(m).SpecificDBType?(l(),u(Fl,{key:17})):k("",!0),e(t).uidt===e(m).User?(l(),u(Pl,{key:18,value:e(t),"onUpdate:value":r[23]||(r[23]=A=>le(t)?t.value=A:null),"is-edit":e(T)},null,8,["value","is-edit"])):k("",!0),e(t).uidt===e(m).SingleSelect||e(t).uidt===e(m).MultiSelect?(l(),u(Vl,{key:19,value:e(t),"onUpdate:value":r[24]||(r[24]=A=>le(t)?t.value=A:null),"from-table-explorer":w.fromTableExplorer||!1},null,8,["value","from-table-explorer"])):k("",!0),e(t).uidt===e(m).Button?(l(),u(ql,{key:20,value:e(t),"onUpdate:value":r[25]||(r[25]=A=>le(t)?t.value=A:null),"from-table-explorer":w.fromTableExplorer||!1},null,8,["value","from-table-explorer"])):k("",!0)],64)):k("",!0),e(t).uidt?(l(),y(Y,{key:3},[e(t).meta&&Ce.includes(e(t).uidt)?(l(),y("div",au,[o(ul,{checked:e(t).meta.validate,"onUpdate:checked":r[26]||(r[26]=A=>e(t).meta.validate=A),size:"small",class:"nc-switch"},{default:n(()=>[a("div",su,C(`${s.$t("msg.acceptOnlyValid",{type:e(t).uidt===e(m).URL?`${e(ot)[e(t).uidt]}s`:`${e(ot)[e(t).uidt]}s`.toLowerCase()})}`),1)]),_:1},8,["checked"])])):k("",!0),!e(de)&&e(v)?(l(),y(Y,{key:1},[a("div",iu,[("isTextArea"in s?s.isTextArea:e(_l))(e(t))&&((At=e(t).meta)!=null&&At.richMode)?(l(),u(jl,{key:0,value:e(t),"onUpdate:value":r[27]||(r[27]=A=>le(t)?t.value=A:null),"is-visible-default-value-input":e(oe),"onUpdate:isVisibleDefaultValueInput":r[28]||(r[28]=A=>le(oe)?oe.value=A:null)},null,8,["value","is-visible-default-value-input"])):!e(tt)(e(t))&&!("isAttachment"in s?s.isAttachment:e(Xt))(e(t))&&!e(g)(e(U).source_id)&&!(e(R)(e(U).source_id)&&(("isJSON"in s?s.isJSON:e(Zn))(e(t))||("isTextArea"in s?s.isTextArea:e(_l))(e(t))))&&!(e(h)(e(U).source_id)&&e(t).unique)?(l(),u(zl,{key:1,value:e(t),"onUpdate:value":r[29]||(r[29]=A=>le(t)?t.value=A:null),"is-visible-default-value-input":e(oe),"onUpdate:isVisibleDefaultValueInput":r[30]||(r[30]=A=>le(oe)?oe.value=A:null)},null,8,["value","is-visible-default-value-input"])):k("",!0),e(h)(e(U).source_id)&&!e(t).cdf&&![e(m).MultiSelect,e(m).Checkbox,e(m).Rating,e(m).Attachment,e(m).Lookup,e(m).Rollup,e(m).Formula,e(m).Barcode,e(m).QrCode,e(m).CreatedTime,e(m).LastModifiedTime,e(m).CreatedBy,e(m).LastModifiedBy].includes(e(t).uidt)?(l(),y("div",uu,[o(ul,{checked:e(t).unique,"onUpdate:checked":r[31]||(r[31]=A=>e(t).unique=A),size:"small",class:"nc-switch"},{default:n(()=>[ru]),_:1},8,["checked"])])):k("",!0)]),!w.hideAdditionalOptions&&!e(tt)(e(t).uidt)&&!(!e(ce).ee&&("isAttachment"in s?s.isAttachment:e(Xt))(e(t)))&&(!e(ce).ee||e(ce).ee&&!e(N)(e(U).source_id)&&e(t).uidt===e(m).SpecificDBType)?(l(),y("div",cu,[a("div",{class:"nc-more-options flex items-center gap-1 cursor-pointer select-none",onClick:r[32]||(r[32]=A=>X.value=!e(X))},[E(C(e(X)?s.$t("general.hideAll"):s.$t("general.showMore"))+" ",1),(l(),u(Z(e(X)?e(Vi):e(Ni))))])])):k("",!0),o(Dn,{name:"layout",mode:"out-in"},{default:n(()=>[e(X)?(l(),y("div",du,[e(ce).ee&&("isAttachment"in s?s.isAttachment:e(Xt))(e(t))?(l(),u(Kl,{key:0,value:e(t),"onUpdate:value":r[33]||(r[33]=A=>le(t)?t.value=A:null)},null,8,["value"])):k("",!0),e(t).uidt!==e(m).Attachment?(l(),u(Hl,{key:1,value:e(t),"onUpdate:value":r[34]||(r[34]=A=>le(t)?t.value=A:null),"advanced-db-options":e(X)||e(t).uidt===e(m).SpecificDBType},null,8,["value","advanced-db-options"])):k("",!0)])):k("",!0)]),_:1})],64)):k("",!0),e(re)?(l(),u(ee,{key:2},{default:n(()=>[a("div",mu,[a("span",pu,C(s.$t("labels.description")),1),o(wt,{type:"text",class:"!h-6 !w-5",size:"xsmall",onClick:he},{default:n(()=>[o(me,{icon:"delete",class:"text-gray-700 w-3.5 h-3.5"})]),_:1})]),o(Gl,{ref_key:"descInputEl",ref:J,value:e(t).description,"onUpdate:value":r[35]||(r[35]=A=>e(t).description=A),class:ge([{"!min-h-[200px]":s.fromTableExplorer,"h-[150px] !min-h-[100px]":!s.fromTableExplorer},"nc-input-sm nc-input-text-area nc-input-shadow !text-gray-800 px-3 !max-h-[300px]"]),"hide-details":"","data-testid":"create-field-description-input",placeholder:s.$t("msg.info.enterFieldDescription")},null,8,["value","class","placeholder"])]),_:1})):k("",!0),w.fromTableExplorer?(l(),u(ee,{key:3},{default:n(()=>[e(re)?k("",!0):(l(),u(wt,{key:0,size:"small",type:"text",onClick:xe(Oe,["stop"])},{default:n(()=>[a("div",_u,[o(me,{icon:"plus",class:"h-4 w-4"}),a("span",fu,C(s.$t("labels.addDescription").toLowerCase()),1)])]),_:1}))]),_:1})):(l(),y("div",vu,[e(re)?(l(),y("div",hu)):(l(),u(wt,{key:0,size:"small",type:"text",onClick:xe(Oe,["stop"])},{default:n(()=>[a("div",gu,[o(me,{icon:"plus",class:"h-4 w-4"}),a("span",yu,C(s.$t("labels.addDescription").toLowerCase()),1)])]),_:1})),o(ee,null,{default:n(()=>[a("div",{class:ge(["flex gap-x-2 justify-end",{"justify-end":!w.embedMode}])},[o(wt,{size:"small","html-type":"button",type:"secondary",onClick:r[36]||(r[36]=A=>P("cancel"))},{default:n(()=>[E(C(s.$t("general.cancel")),1)]),_:1}),o(wt,{"html-type":"submit",type:"primary",loading:e(te),disabled:!e(t).uidt||e(Q),size:"small",label:e(Ne).label,"loading-label":e(Ne).loadingLabel,"data-testid":"nc-field-modal-submit-btn",onClick:xe(ue,["prevent"])},{loading:n(()=>[E(C(e(Ne).loadingLabel),1)]),default:n(()=>[E(C(e(Ne).label)+" ",1)]),_:1},8,["loading","disabled","label","loading-label"])],2)]),_:1})]))],64)):k("",!0)]}),_:1},8,["modelValue"])],34))}}}),ku=Ke(bu,[["__scopeId","data-v-ccf9de62"]]),lr=ye({__name:"EditOrAddProvider",props:{column:{},columnPosition:{},preload:{},tableExplorerColumns:{},editDescription:{type:Boolean},fromTableExplorer:{type:Boolean},isColumnValid:{type:Function}},emits:["submit","cancel","mounted"],setup(p,{expose:D,emit:w}){const P=p,t=w,i=We(lt,W()),{column:_,preload:M,tableExplorerColumns:x,fromTableExplorer:c,isColumnValid:S,editDescription:T}=Bt(P);An(i,_,x,c,S);const{isWebhookCreateModalOpen:Q}=Fe();return D({isWebHookModalOpen:()=>Q.value}),(q,d)=>{const f=ku;return l(),u(f,{preload:e(M),"column-position":P.columnPosition,"edit-description":e(T),"from-table-explorer":P.fromTableExplorer||!1,onSubmit:d[0]||(d[0]=O=>t("submit")),onCancel:d[1]||(d[1]=O=>t("cancel")),onMounted:d[2]||(d[2]=O=>t("mounted"))},null,8,["preload","column-position","edit-description","from-table-explorer"])}}});export{lr as _,He as c};
