import{e as Y,ba as j,r as d,ag as z,f as G,g as J,F as H,M as X,o as r,c,a as f,b as w,w as _,N as e,O as Z,aJ as v,W as u,R as x,d as $,t as y,ao as ee,at as te,P as oe,S,a6 as M,Q as se,Y as ne,$ as ae,_ as le}from"./DZZ6t_j4.js";import{_ as re}from"./BVrX6sNU.js";import"./DKN1hQ6S.js";import{I as ie}from"./BQuyMdA-.js";const ce=["onKeydown"],ue={class:"nc-unified-search-list-wrapper flex-col w-full max-h-100 nc-scrollbar-thin !overflow-y-auto px-2 pb-2"},pe={key:0,class:"px-2 py-6 text-center text-gray-500 flex flex-col items-center gap-6"},de={key:0,src:re,class:"!w-[164px] flex-none",alt:"No search results found"},fe=["onClick"],ve=Y({__name:"ListWithSearch",props:{isParentOpen:{type:Boolean},searchInputPlaceholder:{},optionConfig:{},options:{},disableMascot:{type:Boolean},selectedOptionId:{},uniqueIdentifier:{default:"id"},filterField:{},showSelectedOption:{type:Boolean}},emits:["selected"],setup(N,{emit:R}){const B=N,K=R,{isParentOpen:g,searchInputPlaceholder:P,selectedOptionId:T,showSelectedOption:m,filterField:V,options:k,optionConfig:b,disableMascot:D,uniqueIdentifier:F}=j(B),C=d(),o=d(-1),l=d(""),{t:I}=z(),L=d(),O=()=>{const t=document.querySelector(".nc-unified-list-option-active");t&&setTimeout(()=>{t==null||t.scrollIntoView({behavior:"smooth",block:"center"})},50)},a=G(()=>{var t;return((t=k.value)==null?void 0:t.filter(s=>{var i;return(i=s[V.value])==null?void 0:i.toLowerCase().includes(l.value.toLowerCase())}))??[]}),q=()=>{o.value=Math.min(o.value+1,a.value.length-1),O()},A=()=>{o.value=Math.max(o.value-1,0),O()},p=t=>{t&&K("selected",t)},E=()=>{(a.value[o.value]||a.value[0])&&p(a.value[o.value])};return J(()=>{l.value="",o.value=-1}),H(g,()=>{g.value&&(l.value="",setTimeout(()=>{var t;(t=C.value)==null||t.focus()},100))},{immediate:!0}),(t,s)=>{const i=ne,Q=ie,U=ae,W=X("e");return r(),c("div",{ref_key:"wrapperRef",ref:L,class:"flex flex-col pt-2 nc-list-with-search w-64",onKeydown:[v(u(q,["prevent"]),["arrow-down"]),v(u(A,["prevent"]),["arrow-up"]),s[3]||(s[3]=v(u(n=>p(e(a)[e(o)]),["prevent"]),["enter"]))]},[f("div",{class:"w-full pb-2 px-2",onClick:s[2]||(s[2]=u(()=>{},["stop"]))},[w(Q,{ref_key:"inputRef",ref:C,value:e(l),"onUpdate:value":s[0]||(s[0]=n=>Z(l)?l.value=n:null),placeholder:e(P)||e(I)("placeholder.search"),class:"nc-dropdown-search-unified-input",onKeydown:v(u(E,["stop"]),["enter"]),onChange:s[1]||(s[1]=n=>o.value=0)},{prefix:_(()=>[w(i,{icon:"search",class:"nc-search-icon h-3.5 w-3.5 mr-1"})]),_:1},8,["value","placeholder","onKeydown"])]),f("div",ue,[e(a).length?x("",!0):(r(),c("div",pe,[e(D)?x("",!0):(r(),c("img",de)),$(" "+y(e(k).length?e(I)("title.noResultsMatchedYourSearch"):"The list is empty"),1)])),(r(!0),c(ee,null,te(e(a),(n,h)=>oe((r(),c("div",{key:h,class:S(["flex w-full py-[5px] items-center justify-between px-2 hover:bg-gray-100 cursor-pointer rounded-md",[`${e(b).optionClassName}`,`nc-unified-list-option-${h}`,{"bg-gray-100 nc-unified-list-option-active":e(o)===h}]]),onClick:me=>p(n)},[f("div",{class:S(["flex items-center gap-x-1.5",{"max-w-[calc(100%_-_28px)]":e(m),"max-w-full":!e(m)}])},[M(t.$slots,"default",{option:n},void 0,!0),w(U,{class:"truncate","show-on-truncate-only":""},{title:_(()=>[$(y(n.title),1)]),default:_(()=>[f("span",null,y(n.title),1)]),_:2},1024)],2),e(m)&&n[e(F)]===e(T)?(r(),se(i,{key:0,icon:"check",class:"flex-none text-primary w-4 h-4"})):x("",!0)],10,fe)),[[W,e(b).selectOptionEvent]])),128)),M(t.$slots,"bottom",{},void 0,!0)])],40,ce)}}}),ye=le(ve,[["__scopeId","data-v-3df0ba79"]]);export{ye as _};
