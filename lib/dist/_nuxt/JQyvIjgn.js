import{f as _,N as B,bN as t,fQ as h,aE as D,r as p,hH as P,hr as K,ad as O,g as b,df as R,gV as Q,aF as T,i as q,o as a,c as r,P as n,a as z,t as g,T as A,R as G,dn as H,Q as L,U as Y,aL as u,Y as l,aq as $,_ as J}from"./Cgw6cdOy.js";const W={key:0,class:"nc-currency-code h-full !bg-gray-100 border-r border-gray-200 px-3 mr-1 flex items-center"},X=["placeholder","disabled"],Z={key:2,class:"nc-cell-field nc-null uppercase"},ee={key:3,class:"nc-cell-field"},ne={key:4},se=_({__name:"Currency",props:{modelValue:{},placeholder:{},hidePrefix:{type:Boolean}},emits:["update:modelValue","save"],setup(I,{emit:N}){const E=I,x=N,{showNull:M}=B(),f=t(h),d=t(D),i=t(P,p(!1)),C=t(K,p(!1)),m=O(E,"modelValue",x),s=b({get:()=>m.value,set:o=>{o===""?m.value=null:m.value=o}}),v=p(),y=b(()=>{var o;return{currency_locale:"en-US",currency_code:"USD",...R((o=f==null?void 0:f.value)==null?void 0:o.meta)}}),F=b(()=>{try{return s.value===null||s.value===void 0||isNaN(s.value)?s.value:new Intl.NumberFormat(y.value.currency_locale||"en-US",{style:"currency",currency:y.value.currency_code||"USD"}).format(s.value)}catch{return s.value}}),S=t(Q,p(!1)),c=t(T),V=o=>!S.value&&!i.value&&!c.value&&(o==null?void 0:o.focus()),w=()=>{v.value!==s.value&&(s.value=v.value=s.value??null,x("save")),d.value=!1},j=()=>{w()},k=()=>{/(Firefox|Safari)/.test(navigator.userAgent)&&w()};return q(()=>{v.value=s.value}),(o,e)=>(a(),r($,null,[n(c)&&!n(i)&&n(d)&&!o.hidePrefix?(a(),r("div",W,[z("span",null,g(n(y).currency_code),1)])):A("",!0),!n(C)&&n(d)||n(c)&&!n(i)&&n(d)?G((a(),r("input",{key:1,ref:V,"onUpdate:modelValue":e[0]||(e[0]=U=>L(s)?s.value=U:null),type:"number",class:Y(["nc-cell-field h-full border-none rounded-md py-1 outline-none focus:outline-none focus:ring-0",n(c)&&!n(i)?"flex flex-1":"w-full"]),placeholder:o.placeholder,disabled:n(C),onBlur:j,onKeydown:[u(k,["enter"]),e[1]||(e[1]=u(l(()=>{},["stop"]),["down"])),e[2]||(e[2]=u(l(()=>{},["stop"]),["left"])),e[3]||(e[3]=u(l(()=>{},["stop"]),["right"])),e[4]||(e[4]=u(l(()=>{},["stop"]),["up"])),e[5]||(e[5]=u(l(()=>{},["stop"]),["delete"]))],onSelectstartCapture:e[6]||(e[6]=l(()=>{},["stop"])),onMousedown:e[7]||(e[7]=l(()=>{},["stop"])),onContextmenu:e[8]||(e[8]=l(()=>{},["stop"]))},null,42,X)),[[H,n(s)]]):n(s)===null&&n(M)?(a(),r("span",Z,g(o.$t("general.null")),1)):isNaN(n(s))?(a(),r("span",ne)):(a(),r("span",ee,g(n(F)),1))],64))}}),le=J(se,[["__scopeId","data-v-e2b0ed2b"]]);export{le as default};
