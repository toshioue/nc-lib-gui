const __vite__fileDeps=["./B4Lj1XSi.js","./boyBAVNN.js","./DZZ6t_j4.js","./entry.DIDWwc7m.css","./CwK0k4WN.js","./toggleHighContrast.wojAGmRG.css","./Editor.6PWXOFSt.css","./DaRAoaed.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{o as i,c as f,a as y,e as U,L as G,bL as d,r as o,aC as Q,aA as X,h_ as Y,aD as Z,hK as ee,ab as te,iq as ne,i1 as le,f as se,F as _,ad as oe,Q as E,w as g,N as t,W as m,b as h,t as w,S as $,R as I,aJ as ae,jc as ie,O as ue,T as re,X as J,a4 as M,aT as ce,_ as de}from"./DZZ6t_j4.js";import{u as pe}from"./EqBqqo9-.js";import{_ as me}from"./Bdv7ru7D.js";const fe={class:"nc-icon",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},ve=y("path",{fill:"currentColor",d:"M208 48V16H16v192h32V70.627l160.687 160.686l22.626-22.626L70.627 48zm256 256v137.373L299.313 276.687l-22.626 22.626L441.373 464H304v32h192V304z"},null,-1),_e=[ve];function ye(u,C){return i(),f("svg",fe,[..._e])}const xe={name:"cil-fullscreen",render:ye},Ee={class:"nc-icon",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},ge=y("path",{fill:"currentColor",d:"M204 181.372L38.628 16H16v22.628L181.372 204H44v32h192V44h-32zM326.628 304H464v-32H272v192h32V326.628L473.372 496H496v-22.628z"},null,-1),he=[ge];function we(u,C){return i(),f("svg",Ee,[...he])}const Ce={name:"cil-fullscreen-exit",render:we},ke=J(()=>M(()=>import("./B4Lj1XSi.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url).then(u=>u.default||u)),Le=J(()=>M(()=>import("./DaRAoaed.js"),__vite__mapDeps([7,2,3]),import.meta.url).then(u=>u.default||u)),be={key:0,class:"flex flex-row my-1 space-x-1"},Ve={class:"text-xs"},je={class:"text-xs"},ze={key:0,class:"nc-cell-field text-xs w-full py-1 text-red-500"},Se={key:1,class:"nc-cell-field nc-null uppercase"},$e=U({__name:"Json",props:{modelValue:{}},emits:["update:modelValue"],setup(u,{emit:C}){const N=u,O=C,{showNull:H}=G(),r=d(Q,o(!1)),P=d(X,o(!1)),j=d(Y,o(!1)),k=d(Z,o(!1)),R=d(ee,o(!1)),a=te(N,"modelValue",O),z=o(),c=o(),B=d(ne,o(!1)),l=o(!1),A=d(le,o(void 0)),v=e=>!e||e==="null"?null:e,s=se({get:()=>z.value,set:e=>{z.value=v(e)===null?null:typeof e=="object"?JSON.stringify(e,null,2):e,k.value&&!l.value&&(a.value=v(e)===null?null:e)}}),D=e=>{try{return JSON.stringify(JSON.parse(e))}catch(n){return console.log(n),e}};function L(e){try{s.value=v(e)===null?null:typeof e=="string"?JSON.stringify(JSON.parse(e),null,2):e}catch{s.value=v(e)===null?null:e}}const F=()=>{c.value=void 0,l.value=!1,r.value=!1,L(a.value)},S=()=>{if(l.value=!1,r.value=!1,c.value||s.value===a.value)return!1;a.value=v(s.value)===null?null:D(s.value)};_(a,e=>{L(e)},{immediate:!0}),_([s,r],()=>{try{JSON.parse(s.value),c.value=void 0}catch(e){if(s.value===void 0||s.value===null)return;c.value=e}}),_(r,()=>{l.value=!1,L(a.value)}),pe(P,e=>{switch(e.key){case"Enter":if(e.stopPropagation(),e.shiftKey)return!0;r.value?S():r.value=!0;break}});const b=o(null);oe(b,e=>{var n;(n=e.target)!=null&&n.closest(".nc-json-action")||(r.value=!1)}),_(l,()=>{B.value=l.value});const p=e=>{e.stopPropagation()};return _(b,()=>{if(!j.value)return;const e=document.querySelector(".nc-json-expanded-modal");l.value&&(e!=null&&e.parentElement)?(e.parentElement.addEventListener("click",p),e.parentElement.addEventListener("mousedown",p),e.parentElement.addEventListener("mouseup",p)):e!=null&&e.parentElement&&(e.parentElement.removeEventListener("click",p),e.parentElement.removeEventListener("mousedown",p),e.parentElement.removeEventListener("mouseup",p))}),(e,n)=>{const K=Ce,T=xe,V=ce,W=ke,q=Le;return i(),E(re(t(l)?me:"div"),{visible:t(l),"onUpdate:visible":n[8]||(n[8]=x=>ue(l)?l.value=x:null),closable:!1,centered:"",footer:null,"wrap-class-name":t(l)?"!z-1051 nc-json-expanded-modal":null},{default:g(()=>[t(r)&&!t(R)?(i(),f("div",{key:0,class:"flex flex-col w-full",onMousedown:n[5]||(n[5]=m(()=>{},["stop"])),onMouseup:n[6]||(n[6]=m(()=>{},["stop"])),onClick:n[7]||(n[7]=m(()=>{},["stop"]))},[y("div",{class:"flex flex-row justify-between pt-1 pb-2 nc-json-action",onMousedown:n[1]||(n[1]=m(()=>{},["stop"]))},[h(V,{type:"text",size:"small",onClick:n[0]||(n[0]=x=>l.value=!t(l))},{default:g(()=>[t(l)?(i(),E(K,{key:0,class:"h-2.5"})):(i(),E(T,{key:1,class:"h-2.5"}))]),_:1}),!t(k)||t(l)?(i(),f("div",be,[h(V,{type:"text",size:"small",class:"!rounded-lg",onClick:F},{default:g(()=>[y("div",Ve,w(e.$t("general.cancel")),1)]),_:1}),h(V,{type:t(l)?"primary":"text",size:"small",class:$(["nc-save-json-value-btn !rounded-lg",{"nc-edit-modal":!t(l)}]),disabled:!!t(c)||t(s)===t(a),onClick:S},{default:g(()=>[y("div",je,w(e.$t("general.save")),1)]),_:1},8,["type","class","disabled"])])):I("",!0)],32),h(W,{ref_key:"inputWrapperRef",ref:b,"model-value":t(s)||"",class:$(["min-w-full w-80",{"expanded-editor":t(l),editor:!t(l)}]),"hide-minimap":!0,"disable-deep-compare":!0,"auto-focus":!t(k)&&!t(j),"onUpdate:modelValue":n[2]||(n[2]=x=>s.value=x),onKeydown:[n[3]||(n[3]=ae(m(()=>{},["stop"]),["enter"])),n[4]||(n[4]=m(()=>{},["alt","stop"]))]},null,8,["model-value","class","auto-focus"]),t(c)?(i(),f("span",ze,w(t(c).toString()),1)):I("",!0)],32)):t(a)===null&&t(H)?(i(),f("span",Se,w(e.$t("general.null")),1)):(i(),E(q,{key:2,value:t(a)?("stringifyProp"in e?e.stringifyProp:t(ie))(t(a)):"",lines:t(A),class:"nc-cell-field"},null,8,["value","lines"]))]),_:1},40,["visible","wrap-class-name"])}}}),Ne=de($e,[["__scopeId","data-v-858b8e61"]]);export{Ne as default};
