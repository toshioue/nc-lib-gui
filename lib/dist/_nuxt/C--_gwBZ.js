const __vite__fileDeps=["./COOGY-GQ.js","./DZZ6t_j4.js","./entry.DIDWwc7m.css","./TJfB7GlU.js","./0azk-b-q.js","./Divider.DqtSqZhb.css","./DKN1hQ6S.js","./BQuyMdA-.js","./BQQOEPN4.js","./vll-Pnjv.js","./B5RRVMt5.js","./DGj1ycqW.js","./DyDFI6NE.js","./List.D58N8urB.css","./BaG7jRBy.js","./EmojiPicker.B3qwzTNG.css","./B2MLV0mD.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e as Q,ay as _e,ax as R,cL as W,cP as Y,r as q,o as x,Q as V,w as a,N as e,O as F,b as s,dc as se,d as C,t as I,R as $,a6 as ee,z as pe,dq as fe,$ as X,Y as H,X as M,a4 as U,L as te,J as ne,f as Z,cm as oe,a as _,y as le,ag as ve,cO as ie,cS as ye,W as we,d4 as z,d5 as re,a9 as be,a0 as xe,aa as he,c as K,ao as J,S as G,aM as ge}from"./DZZ6t_j4.js";import{_ as ae}from"./vK-WmZ7a.js";import{_ as ke}from"./DuvRsGDb.js";import{_ as ce}from"./TJfB7GlU.js";import{u as ue}from"./C3XbZq4f.js";import{_ as Te}from"./eN7rAydx.js";import{u as $e}from"./CMIIcM5i.js";import"./Bdv7ru7D.js";import"./BT-ahe-O.js";import"./C3jLTHF4.js";import"./BYINaHrJ.js";import"./dfem9Uc_.js";import"./BCJFTkwv.js";import"./vll-Pnjv.js";import"./D9tFZoTQ.js";import"./DKN1hQ6S.js";import"./BQuyMdA-.js";import"./BQQOEPN4.js";import"./B5RRVMt5.js";import"./DGj1ycqW.js";import"./DyDFI6NE.js";import"./DNgdBwTe.js";import"./eX8_g88K.js";import"./0azk-b-q.js";import"./DC_VdAC1.js";import"./hZgTYrdl.js";import"./ByVBARmO.js";import"./37hePIet.js";import"./C4K5fdHe.js";import"./DnSVh-oD.js";import"./D_MsYLkT.js";import"./CB1aB6F1.js";const Ie=M(()=>U(()=>import("./COOGY-GQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url).then(u=>u.default||u)),Le=Q({__name:"ProjectListDropdown",setup(u){const o=_e(),{basesList:h}=R(o),O=W(),{base:w,isSharedBase:b}=R(O),{loadProjectTables:k}=Y(),T=q(!1),v=async g=>{if(!(g!=null&&g.id))return;const N=o.isProjectPopulated(g.id);await pe(O.baseUrl({id:g.id,type:"database",isSharedBase:b.value})),N||await k(g.id)};return(g,N)=>{const j=fe,P=X,n=H,p=Ie,S=ae;return x(),V(S,{visible:e(T),"onUpdate:visible":N[1]||(N[1]=i=>F(T)?T.value=i:null)},{overlay:a(()=>[e(w).id?(x(),V(p,{key:0,open:e(T),"onUpdate:open":N[0]||(N[0]=i=>F(T)?T.value=i:null),value:e(w).id,list:e(h),"option-value-key":"id","option-label-key":"title","search-input-placeholder":"Search bases",onChange:v},{listItem:a(({option:i})=>[s(j,{type:i==null?void 0:i.type,"model-value":("parseProp"in g?g.parseProp:e(se))(i.meta).iconColor,size:"xsmall",readonly:""},null,8,["type","model-value"]),s(P,{class:"truncate flex-1","show-on-truncate-only":""},{title:a(()=>[C(I(i==null?void 0:i.title),1)]),default:a(()=>[C(" "+I(i==null?void 0:i.title),1)]),_:2},1024),i.id===e(w).id?(x(),V(n,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):$("",!0)]),_:1},8,["open","value","list"])):$("",!0)]),default:a(()=>[ee(g.$slots,"default",{isOpen:e(T)})]),_:3},8,["visible"])}}}),Ve=M(()=>U(()=>import("./BaG7jRBy.js"),__vite__mapDeps([14,1,2,15]),import.meta.url).then(u=>u.default||u)),Se=M(()=>U(()=>import("./COOGY-GQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url).then(u=>u.default||u)),De={class:"px-2 py-1.5 flex items-center justify-between gap-2 text-sm font-weight-500 !text-brand-500 hover:bg-gray-100 rounded-md cursor-pointer"},Ce={class:"flex items-center gap-2"},Ne=Q({__name:"TableListDropdown",setup(u){const{isMobileMode:o}=te(),{$e:h}=le(),{isUIAllowed:O}=ne(),{base:w}=R(W()),{activeTable:b,activeTables:k}=R(Y()),{openTable:T}=Y(),v=q(!1),g=Z(()=>{var n,p;return((p=(n=w.value)==null?void 0:n.sources)==null?void 0:p.findIndex(S=>{var i;return S.id===((i=b.value)==null?void 0:i.source_id)}))??-1}),N=Z(()=>k.value.filter(n=>{var p;return(n==null?void 0:n.source_id)===((p=b.value)==null?void 0:p.source_id)})||[]),j=n=>{n!=null&&n.id&&T(n)};function P(){var E,l;if(h("c:table:create:topbar"),g.value===-1)return;v.value=!1;const n=q(!0),p=(E=w.value.sources)==null?void 0:E[g.value].id;if(!p||!((l=w.value)!=null&&l.id))return;const{close:S}=ue(ke,{modelValue:n,sourceId:p,baseId:w.value.id,onCreate:i,"onUpdate:modelValue":()=>i()});function i(t){n.value=!1,t&&(setTimeout(()=>{const d=document.querySelector(`[data-table-id="${t.id}"]`);d&&(d==null||d.scrollIntoView({behavior:"smooth",block:"nearest"}))},1e3),S(1e3))}}return(n,p)=>{const S=H,i=Ve,E=X,l=ce,t=Se,d=ae;return x(),V(d,{visible:e(v),"onUpdate:visible":p[2]||(p[2]=y=>F(v)?v.value=y:null)},{overlay:a(()=>{var y,m,L,D;return[s(t,{open:e(v),"onUpdate:open":p[1]||(p[1]=r=>F(v)?v.value=r:null),value:e(b).id,list:e(N),"option-value-key":"id","option-label-key":"title","search-input-placeholder":"Search tables",onChange:j},oe({listItem:a(({option:r})=>{var f;return[_("div",null,[s(i,{emoji:(f=r==null?void 0:r.meta)==null?void 0:f.icon,readonly:"",size:"xsmall"},{default:a(()=>[s(S,{icon:"table",class:"min-w-4 !text-gray-500"})]),_:2},1032,["emoji"])]),s(E,{class:"truncate flex-1","show-on-truncate-only":""},{title:a(()=>[C(I(r==null?void 0:r.title),1)]),default:a(()=>[C(" "+I(r==null?void 0:r.title),1)]),_:2},1024),r.id===e(b).id?(x(),V(S,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):$("",!0)]}),_:2},[!e(o)&&e(O)("tableCreate",{roles:((y=e(w))==null?void 0:y.project_role)||((m=e(w))==null?void 0:m.workspace_role),source:((D=(L=e(w))==null?void 0:L.sources)==null?void 0:D[e(g)])||{}})?{name:"listFooter",fn:a(()=>[s(l,{class:"!mt-0 !mb-2"}),_("div",{class:"px-2 mb-2",onClick:p[0]||(p[0]=r=>P())},[_("div",De,[_("div",Ce,[s(S,{icon:"plus"}),_("div",null,I(n.$t("general.createEntity",{entity:n.$t("objects.table")})),1)])])])]),key:"0"}:void 0]),1032,["open","value","list"])]}),default:a(()=>[ee(n.$slots,"default",{isOpen:e(v)})]),_:3},8,["visible"])}}}),Pe=M(()=>U(()=>import("./BaG7jRBy.js"),__vite__mapDeps([14,1,2,15]),import.meta.url).then(u=>u.default||u)),Ee=M(()=>U(()=>import("./COOGY-GQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url).then(u=>u.default||u)),je={class:"overflow-hidden mb-2"},ze={class:"flex items-center justify-between gap-2 text-sm font-weight-500 !text-brand-500"},Re={class:"flex items-center gap-2"},Ae={class:"nc-viewlist-submenu-popup-item","data-testid":"topbar-view-create-grid"},Oe={class:"nc-viewlist-submenu-popup-item","data-testid":"topbar-view-create-form"},Ge={class:"nc-viewlist-submenu-popup-item","data-testid":"topbar-view-create-gallery"},Be={class:"nc-viewlist-submenu-popup-item"},Me={class:"nc-viewlist-submenu-popup-item"},Ue=Q({__name:"ViewListDropdown",setup(u){const{isMobileMode:o}=te(),{t:h}=ve(),{$e:O}=le(),{isUIAllowed:w}=ne(),{base:b}=R(W()),{activeTable:k}=R(Y()),T=ie(),{activeView:v,views:g}=R(T),{loadViews:N,navigateToView:j}=T,{refreshCommandPalette:P}=ye(),n=q(!1),p=Z(()=>{var l;return(l=b.value.sources)==null?void 0:l.find(t=>{var d;return t.id===((d=v.value)==null?void 0:d.source_id)})}),S=async l=>{var t;l!=null&&l.id&&await j({view:l,tableId:k.value.id,baseId:b.value.id,hardReload:l.type===z.FORM&&((t=v.value)==null?void 0:t.id)===l.id,doNotSwitchTab:!0})},i=(l="",t)=>{var d,y;return t.is_default&&h("title.defaultView").toLowerCase().includes(l)?!0:(y=(d=t.title)==null?void 0:d.toLowerCase())==null?void 0:y.includes(l.toLowerCase())};async function E({title:l="",type:t,copyViewId:d,groupingFieldColumnId:y,calendarRange:m,coverImageColumnId:L}){n.value=!1;const D=q(!0),{close:r}=ue(Te,{modelValue:D,title:l,type:t,tableId:k.value.id,selectedViewId:d,calendarRange:m,groupingFieldColumnId:y,coverImageColumnId:L,"onUpdate:modelValue":f,onCreated:async A=>{f(),P(),await N({tableId:k.value.id,force:!0}),k.value.meta={...k.value.meta,hasNonDefaultViews:!0},j({view:A,tableId:k.value.id,baseId:b.value.id,doNotSwitchTab:!0}),O("a:view:create",{view:A.type})}});function f(){n.value=!1,D.value=!1,r(1e3)}}return(l,t)=>{const d=re,y=Pe,m=X,L=H,D=ce,r=be,f=xe,A=he,de=Ee,me=ae;return e(v)?(x(),V(me,{key:0,visible:e(n),"onUpdate:visible":t[6]||(t[6]=c=>F(n)?n.value=c:null)},{overlay:a(()=>[s(de,{open:e(n),"onUpdate:open":t[5]||(t[5]=c=>F(n)?n.value=c:null),value:e(v).id,list:e(g),"option-value-key":"id","option-label-key":"title","search-input-placeholder":"Search views","filter-option":i,onChange:S},oe({listItem:a(({option:c})=>{var B;return[_("div",null,[s(y,{emoji:(B=c==null?void 0:c.meta)==null?void 0:B.icon,readonly:"",size:"xsmall"},{default:a(()=>[s(d,{meta:{type:c==null?void 0:c.type},class:"min-w-4 text-lg flex"},null,8,["meta"])]),_:2},1032,["emoji"])]),s(m,{class:"truncate flex-1","show-on-truncate-only":""},{title:a(()=>[C(I(c!=null&&c.is_default?l.$t("title.defaultView"):c==null?void 0:c.title),1)]),default:a(()=>[C(" "+I(c!=null&&c.is_default?l.$t("title.defaultView"):c==null?void 0:c.title),1)]),_:2},1024),c.id===e(v).id?(x(),V(L,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):$("",!0)]}),_:2},[!e(o)&&e(w)("viewCreateOrEdit")?{name:"listFooter",fn:a(()=>[s(D,{class:"!mt-0 !mb-2"}),_("div",je,[s(A,{class:"nc-viewlist-menu"},{default:a(()=>[s(f,{"popup-class-name":"nc-viewlist-submenu-popup "},{title:a(()=>[_("div",ze,[_("div",Re,[s(L,{icon:"plus"}),_("div",null,I(l.$t("general.createEntity",{entity:l.$t("objects.view")})),1)]),s(L,{icon:"arrowRight",class:"text-base text-gray-600 group-hover:text-gray-800"})])]),expandIcon:a(()=>t[7]||(t[7]=[])),default:a(()=>{var c;return[s(r,{onClick:t[0]||(t[0]=we(B=>E({type:e(z).GRID}),["stop"]))},{default:a(()=>[_("div",Ae,[s(d,{meta:{type:e(z).GRID}},null,8,["meta"]),t[8]||(t[8]=C(" Grid "))])]),_:1}),(c=e(p))!=null&&c.is_schema_readonly?$("",!0):(x(),V(r,{key:0,onClick:t[1]||(t[1]=B=>E({type:e(z).FORM}))},{default:a(()=>[_("div",Oe,[s(d,{meta:{type:e(z).FORM}},null,8,["meta"]),t[9]||(t[9]=C(" Form "))])]),_:1})),s(r,{onClick:t[2]||(t[2]=B=>E({type:e(z).GALLERY}))},{default:a(()=>[_("div",Ge,[s(d,{meta:{type:e(z).GALLERY}},null,8,["meta"]),t[10]||(t[10]=C(" Gallery "))])]),_:1}),s(r,{"data-testid":"topbar-view-create-kanban",onClick:t[3]||(t[3]=B=>E({type:e(z).KANBAN}))},{default:a(()=>[_("div",Be,[s(d,{meta:{type:e(z).KANBAN}},null,8,["meta"]),t[11]||(t[11]=C(" Kanban "))])]),_:1}),s(r,{"data-testid":"topbar-view-create-calendar",onClick:t[4]||(t[4]=B=>E({type:e(z).CALENDAR}))},{default:a(()=>[_("div",Me,[s(d,{meta:{type:e(z).CALENDAR},class:"!w-4 !h-4"},null,8,["meta"]),C(" "+I(l.$t("objects.viewType.calendar")),1)])]),_:1})]}),_:1})]),_:1})])]),key:"0"}:void 0]),1032,["open","value","list"])]),default:a(()=>[ee(l.$slots,"default",{isOpen:e(n)})]),_:3},8,["visible"])):$("",!0)}}}),Fe=M(()=>U(()=>import("./BaG7jRBy.js"),__vite__mapDeps([14,1,2,15]),import.meta.url).then(u=>u.default||u)),Ke=M(()=>U(()=>import("./B2MLV0mD.js"),__vite__mapDeps([16,1,2]),import.meta.url).then(u=>u.default||u)),Ye={class:"capitalize"},qe={class:"capitalize"},Je={class:"text-ellipsis capitalize",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},Qe={class:"text-ellipsis",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},We={class:"text-ellipsis",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},St=Q({__name:"ViewInfo",setup(u){const{isMobileMode:o}=te(),{activeView:h,openedViewsTab:O}=R(ie()),{base:w,isSharedBase:b}=R(W()),{activeTable:k}=R(Y()),{isLeftSidebarOpen:T}=R($e());return(v,g)=>{var t,d;const N=ge,j=X,P=H,n=Le,p=Fe,S=Ne,i=re,E=Ue,l=Ke;return x(),K("div",{class:G(["flex flex-row items-center border-gray-50 transition-all duration-100 select-none",{"text-base w-[calc(100%_-_52px)]":e(o),"w-[calc(100%_-_44px)]":!e(o)&&!e(T),"w-full":!e(o)&&e(T)}])},[e(o)?$("",!0):(x(),K(J,{key:0},[e(k)?(x(),V(n,{key:0},{default:a(({isOpen:y})=>[_("div",{class:G(["rounded-lg h-8 px-2 text-gray-700 font-weight-500 hover:bg-gray-100 hover:text-gray-900 flex items-center gap-1 cursor-pointer max-w-1/3",{"!max-w-none":e(b)&&!e(o),"":!e(o)&&e(T)}])},[s(j,{disabled:e(b)||y},{title:a(()=>{var m;return[_("span",Ye,I((m=e(w))==null?void 0:m.title),1)]}),default:a(()=>{var m;return[s(N,{type:(m=e(w))==null?void 0:m.type,color:("parseProp"in v?v.parseProp:e(se))(e(w).meta).iconColor,class:"!grayscale min-w-4"},null,8,["type","color"])]}),_:2},1032,["disabled"]),e(b)?(x(),K(J,{key:0},[s(j,{class:"ml-1 truncate nc-active-base-title max-w-full !leading-5","show-on-truncate-only":"",disabled:y},{title:a(()=>{var m;return[_("span",qe,I((m=e(w))==null?void 0:m.title),1)]}),default:a(()=>{var m;return[_("span",Je,I((m=e(w))==null?void 0:m.title),1)]}),_:2},1032,["disabled"]),s(P,{icon:"chevronDown",class:G(["!text-current opacity-70 flex-none transform transition-transform duration-25 w-3.5 h-3.5",{"!rotate-180":y}])},null,8,["class"])],64)):$("",!0)],2)]),_:1})):$("",!0),s(P,{icon:"ncSlash1",class:"nc-breadcrumb-divider"})],64)),e(o)&&!((t=e(h))!=null&&t.is_default)?$("",!0):(x(),K(J,{key:1},[e(k)?(x(),V(S,{key:0},{default:a(({isOpen:y})=>{var m,L,D,r;return[_("div",{class:G(["rounded-lg h-8 px-2 text-gray-700 font-weight-500 hover:bg-gray-100 hover:text-gray-900 flex items-center gap-1 cursor-pointer",{"max-w-full":e(o),"max-w-1/2":(m=e(h))==null?void 0:m.is_default,"max-w-1/4":!e(b)&&!e(o)&&!((L=e(h))!=null&&L.is_default),"max-w-none":e(b)&&!e(o)}])},[e(o)?(x(),V(p,{key:0,emoji:(r=(D=e(k))==null?void 0:D.meta)==null?void 0:r.icon,readonly:"",size:"xsmall",class:"mr-1"},{default:a(()=>[s(P,{icon:"table",class:G(["min-w-5",{"!text-gray-500":!e(o),"!text-gray-700":e(o)}])},null,8,["class"])]),_:1},8,["emoji"])):$("",!0),s(j,{class:"truncate nc-active-table-title max-w-full !leading-5","show-on-truncate-only":"",disabled:y},{title:a(()=>{var f;return[C(I((f=e(k))==null?void 0:f.title),1)]}),default:a(()=>{var f;return[_("span",Qe,I((f=e(k))==null?void 0:f.title),1)]}),_:2},1032,["disabled"]),s(P,{icon:"chevronDown",class:G(["!text-current opacity-70 flex-none transform transition-transform duration-25 w-3.5 h-3.5",{"!rotate-180":y}])},null,8,["class"])],2)]}),_:1})):$("",!0)],64)),e(o)?$("",!0):(x(),V(P,{key:2,icon:"ncSlash1",class:"nc-breadcrumb-divider"})),e(o)&&((d=e(h))!=null&&d.is_default)?$("",!0):(x(),K(J,{key:3},[s(E,null,{default:a(({isOpen:y})=>{var m,L,D,r;return[_("div",{class:G(["rounded-lg h-8 px-2 text-gray-800 font-semibold hover:bg-gray-100 hover:text-gray-900 flex items-center gap-1 cursor-pointer",{"max-w-full":e(o),"max-w-2/5":!e(b)&&!e(o)&&((m=e(h))==null?void 0:m.is_default),"max-w-1/2":!e(b)&&!e(o)&&!((L=e(h))!=null&&L.is_default),"max-w-none":e(b)&&!e(o)}])},[e(o)?(x(),V(p,{key:0,emoji:(r=(D=e(h))==null?void 0:D.meta)==null?void 0:r.icon,readonly:"",size:"xsmall",class:"mr-1"},{default:a(()=>{var f;return[s(i,{meta:{type:(f=e(h))==null?void 0:f.type},class:"min-w-4.5 text-lg flex"},null,8,["meta"])]}),_:1},8,["emoji"])):$("",!0),s(j,{class:"truncate nc-active-view-title max-w-full !leading-5","show-on-truncate-only":"",disabled:y},{title:a(()=>{var f,A;return[C(I((f=e(h))!=null&&f.is_default?v.$t("title.defaultView"):(A=e(h))==null?void 0:A.title),1)]}),default:a(()=>{var f,A;return[_("span",We,I((f=e(h))!=null&&f.is_default?v.$t("title.defaultView"):(A=e(h))==null?void 0:A.title),1)]}),_:2},1032,["disabled"]),s(P,{icon:"chevronDown",class:G(["!text-current opacity-70 flex-none transform transition-transform duration-25 w-3.5 h-3.5",{"!rotate-180":y}])},null,8,["class"])],2)]}),_:1}),e(O)==="view"&&!e(o)?(x(),V(l,{key:0})):$("",!0)],64))],2)}}});export{St as default};
