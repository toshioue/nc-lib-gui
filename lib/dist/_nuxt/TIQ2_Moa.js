const __vite__fileDeps=["./Dn466VR6.js","./DZZ6t_j4.js","./entry.DIDWwc7m.css","./BqKQ8afS.js","./DgixBgIx.js","./DeleteModal.SEMJ_gSK.css","./CXD-Dj4T.js","./0QUe8GCE.js","./Overlay.BGbSKdGB.css","./B05h-4V9.js","./GMLocJHP.js","./RXURfzjs.js","./C00NHga8.js","./CA74dF2b.js","./qW2V2r_p.js","./ByVBARmO.js","./boyBAVNN.js","./BDAIZopQ.js","./Bgw0NQgX.js","./EqBqqo9-.js","./C4K5fdHe.js","./C3XbZq4f.js","./DKN1hQ6S.js","./BQuyMdA-.js","./BQQOEPN4.js","./vll-Pnjv.js","./B5RRVMt5.js","./DGj1ycqW.js","./DyDFI6NE.js","./BYINaHrJ.js","./dfem9Uc_.js","./BCJFTkwv.js","./D9tFZoTQ.js","./C0-Qcoum.js","./Carousel.DMLiu2dh.css","./BVHyv0aP.js","./C579LfJj.js","./DfeSAprs.js","./DNgdBwTe.js","./eX8_g88K.js","./Checkbox.M_COpns0.css","./Bdv7ru7D.js","./BLzs_b5A.js","./DXQuLwNn.js","./Modal.BzRymNZb.css","./DJ7UmSmM.js","./BH-Nu8LT.js","./sz1d3zjm.js","./MenuItem.C7h59s4s.css","./BLgccLvp.js","./Menu.CQ8GNWeI.css","./AttachFile.BiaJAWPG.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{o as p,c as X,a as C,dM as Wn,dN as Yn,e as yn,ag as vn,r as v,ar as Tn,ac as qn,g as Xn,Q as $,w as A,t as ae,b as L,N as t,d as xe,O as dt,Z as An,gO as Kn,bL as Z,hK as Zn,dz as Jn,aD as Qn,d7 as En,g2 as ea,aC as ta,ax as na,cL as aa,ap as oa,gt as ia,L as wn,f as xn,F as Nt,y as la,dc as sa,ah as Me,im as un,g$ as mn,fr as ra,h9 as ca,hb as ua,i3 as ma,i4 as fa,ha as pa,h5 as da,i2 as ha,aA as fn,j3 as _a,fY as ga,i1 as ya,J as va,R as me,ao as ft,at as pn,T as ke,S as we,U as Ke,a8 as pt,aJ as dn,W as Lt,X as it,a4 as lt,$ as Ta,Y as Aa}from"./DZZ6t_j4.js";import{_ as Ea}from"./0QUe8GCE.js";import{a as wa}from"./B05h-4V9.js";import{u as xa}from"./RXURfzjs.js";import{a as bn}from"./CA74dF2b.js";import{a as ba}from"./Bgw0NQgX.js";import{u as Sa}from"./EqBqqo9-.js";import{i as kt,e as Ra}from"./C00NHga8.js";import{H as hn}from"./C4K5fdHe.js";import{u as Ia}from"./GMLocJHP.js";import{u as Ca}from"./C3XbZq4f.js";import{e as Ma}from"./BDAIZopQ.js";import{_ as Oa}from"./DgixBgIx.js";import"./DKN1hQ6S.js";import{I as La}from"./BQuyMdA-.js";import{F as Da}from"./BYINaHrJ.js";import{_ as Na}from"./dfem9Uc_.js";import{S as ka}from"./C0-Qcoum.js";const Pa={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Fa=C("path",{fill:"currentColor",d:"M19 19H8q-.825 0-1.412-.587T6 17V3q0-.825.588-1.412T8 1h7l6 6v10q0 .825-.587 1.413T19 19M14 8V3H8v14h11V8zM4 23q-.825 0-1.412-.587T2 21V7h2v14h11v2zM8 3v5zv14z"},null,-1),za=[Fa];function $a(m,U){return p(),X("svg",Pa,[...za])}const Ha={name:"material-symbols-file-copy-outline",render:$a},Ua={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ba=C("path",{fill:"currentColor",d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zM6 20V4h7v5h5v11z"},null,-1),Ga=[Ba];function Va(m,U){return p(),X("svg",Ua,[...Ga])}const Sn={name:"ic-outline-insert-drive-file",render:Va},ja={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Wa=C("path",{fill:"currentColor",d:"M18 15.75q0 2.6-1.825 4.425T11.75 22t-4.425-1.825T5.5 15.75V6.5q0-1.875 1.313-3.187T10 2t3.188 1.313T14.5 6.5v8.75q0 1.15-.8 1.95t-1.95.8t-1.95-.8t-.8-1.95V6h2v9.25q0 .325.213.538t.537.212t.538-.213t.212-.537V6.5q-.025-1.05-.737-1.775T10 4t-1.775.725T7.5 6.5v9.25q-.025 1.775 1.225 3.013T11.75 20q1.75 0 2.975-1.237T16 15.75V6h2z"},null,-1),Ya=[Wa];function qa(m,U){return p(),X("svg",ja,[...Ya])}const Xa={name:"material-symbols-attach-file",render:qa};var Dt={exports:{}};/*! @license DOMPurify 3.0.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.8/LICENSE */var _n;function gn(){return _n||(_n=1,function(m,U){(function(de,re){m.exports=re()})(Wn,function(){const{entries:de,setPrototypeOf:re,isFrozen:he,getPrototypeOf:ce,getOwnPropertyDescriptor:B}=Object;let{freeze:_,seal:I,create:E}=Object,{apply:x,construct:w}=typeof Reflect<"u"&&Reflect;_||(_=function(o){return o}),I||(I=function(o){return o}),x||(x=function(o,h,f){return o.apply(h,f)}),w||(w=function(o,h){return new o(...h)});const D=N(Array.prototype.forEach),b=N(Array.prototype.pop),fe=N(Array.prototype.push),J=N(String.prototype.toLowerCase),Q=N(String.prototype.toString),_e=N(String.prototype.match),K=N(String.prototype.replace),Ge=N(String.prototype.indexOf),Pe=N(String.prototype.trim),P=N(RegExp.prototype.test),ge=Oe(TypeError);function N(u){return function(o){for(var h=arguments.length,f=new Array(h>1?h-1:0),V=1;V<h;V++)f[V-1]=arguments[V];return x(u,o,f)}}function Oe(u){return function(){for(var o=arguments.length,h=new Array(o),f=0;f<o;f++)h[f]=arguments[f];return w(u,h)}}function r(u,o){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:J;re&&re(u,null);let f=o.length;for(;f--;){let V=o[f];if(typeof V=="string"){const j=h(V);j!==V&&(he(o)||(o[f]=j),V=j)}u[V]=!0}return u}function Fe(u){for(let o=0;o<u.length;o++)B(u,o)===void 0&&(u[o]=null);return u}function ee(u){const o=E(null);for(const[h,f]of de(u))B(u,h)!==void 0&&(Array.isArray(f)?o[h]=Fe(f):f&&typeof f=="object"&&f.constructor===Object?o[h]=ee(f):o[h]=f);return o}function ue(u,o){for(;u!==null;){const f=B(u,o);if(f){if(f.get)return N(f.get);if(typeof f.value=="function")return N(f.value)}u=ce(u)}function h(f){return console.warn("fallback value for",f),null}return h}const ie=_(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ye=_(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Le=_(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),be=_(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),De=_(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ze=_(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ze=_(["#text"]),Se=_(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Re=_(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ve=_(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),g=_(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),c=I(/\{\{[\w\W]*|[\w\W]*\}\}/gm),y=I(/<%[\w\W]*|[\w\W]*%>/gm),T=I(/\${[\w\W]*}/gm),S=I(/^data-[\-\w.\u00B7-\uFFFF]/),k=I(/^aria-[\-\w]+$/),G=I(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=I(/^(?:\w+script|data):/i),F=I(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),pe=I(/^html$/i);var $e=Object.freeze({__proto__:null,MUSTACHE_EXPR:c,ERB_EXPR:y,TMPLIT_EXPR:T,DATA_ATTR:S,ARIA_ATTR:k,IS_ALLOWED_URI:G,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:F,DOCTYPE_NAME:pe});const s=function(){return typeof window>"u"?null:window},M=function(o,h){if(typeof o!="object"||typeof o.createPolicy!="function")return null;let f=null;const V="data-tt-policy-suffix";h&&h.hasAttribute(V)&&(f=h.getAttribute(V));const j="dompurify"+(f?"#"+f:"");try{return o.createPolicy(j,{createHTML(Ne){return Ne},createScriptURL(Ne){return Ne}})}catch{return console.warn("TrustedTypes policy "+j+" could not be created."),null}};function a(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s();const o=l=>a(l);if(o.version="3.0.8",o.removed=[],!u||!u.document||u.document.nodeType!==9)return o.isSupported=!1,o;let{document:h}=u;const f=h,V=f.currentScript,{DocumentFragment:j,HTMLTemplateElement:Ne,Node:Je,Element:st,NodeFilter:Qe,NamedNodeMap:ht=u.NamedNodeMap||u.MozNamedAttrMap,HTMLFormElement:_t,DOMParser:d,trustedTypes:Ae}=u,Te=st.prototype,Rn=ue(Te,"cloneNode"),In=ue(Te,"nextSibling"),Cn=ue(Te,"childNodes"),gt=ue(Te,"parentNode");if(typeof Ne=="function"){const l=h.createElement("template");l.content&&l.content.ownerDocument&&(h=l.content.ownerDocument)}let oe,et="";const{implementation:yt,createNodeIterator:Mn,createDocumentFragment:On,getElementsByTagName:Ln}=h,{importNode:Dn}=f;let Ee={};o.isSupported=typeof de=="function"&&typeof gt=="function"&&yt&&yt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:vt,ERB_EXPR:Tt,TMPLIT_EXPR:At,DATA_ATTR:Nn,ARIA_ATTR:kn,IS_SCRIPT_OR_DATA:Pn,ATTR_WHITESPACE:Pt}=$e;let{IS_ALLOWED_URI:Ft}=$e,W=null;const zt=r({},[...ie,...ye,...Le,...De,...ze]);let Y=null;const $t=r({},[...Se,...Re,...ve,...g]);let z=Object.seal(E(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),tt=null,Et=null,Ht=!0,wt=!0,Ut=!1,Bt=!0,Ve=!1,He=!1,xt=!1,bt=!1,je=!1,rt=!1,ct=!1,Gt=!0,Vt=!1;const Fn="user-content-";let St=!0,nt=!1,We={},Ye=null;const jt=r({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Wt=null;const Yt=r({},["audio","video","img","source","image","track"]);let Rt=null;const qt=r({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ut="http://www.w3.org/1998/Math/MathML",mt="http://www.w3.org/2000/svg",Ie="http://www.w3.org/1999/xhtml";let qe=Ie,It=!1,Ct=null;const zn=r({},[ut,mt,Ie],Q);let at=null;const $n=["application/xhtml+xml","text/html"],Hn="text/html";let q=null,Xe=null;const Un=h.createElement("form"),Xt=function(e){return e instanceof RegExp||e instanceof Function},Mt=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Xe&&Xe===e)){if((!e||typeof e!="object")&&(e={}),e=ee(e),at=$n.indexOf(e.PARSER_MEDIA_TYPE)===-1?Hn:e.PARSER_MEDIA_TYPE,q=at==="application/xhtml+xml"?Q:J,W="ALLOWED_TAGS"in e?r({},e.ALLOWED_TAGS,q):zt,Y="ALLOWED_ATTR"in e?r({},e.ALLOWED_ATTR,q):$t,Ct="ALLOWED_NAMESPACES"in e?r({},e.ALLOWED_NAMESPACES,Q):zn,Rt="ADD_URI_SAFE_ATTR"in e?r(ee(qt),e.ADD_URI_SAFE_ATTR,q):qt,Wt="ADD_DATA_URI_TAGS"in e?r(ee(Yt),e.ADD_DATA_URI_TAGS,q):Yt,Ye="FORBID_CONTENTS"in e?r({},e.FORBID_CONTENTS,q):jt,tt="FORBID_TAGS"in e?r({},e.FORBID_TAGS,q):{},Et="FORBID_ATTR"in e?r({},e.FORBID_ATTR,q):{},We="USE_PROFILES"in e?e.USE_PROFILES:!1,Ht=e.ALLOW_ARIA_ATTR!==!1,wt=e.ALLOW_DATA_ATTR!==!1,Ut=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Bt=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ve=e.SAFE_FOR_TEMPLATES||!1,He=e.WHOLE_DOCUMENT||!1,je=e.RETURN_DOM||!1,rt=e.RETURN_DOM_FRAGMENT||!1,ct=e.RETURN_TRUSTED_TYPE||!1,bt=e.FORCE_BODY||!1,Gt=e.SANITIZE_DOM!==!1,Vt=e.SANITIZE_NAMED_PROPS||!1,St=e.KEEP_CONTENT!==!1,nt=e.IN_PLACE||!1,Ft=e.ALLOWED_URI_REGEXP||G,qe=e.NAMESPACE||Ie,z=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Xt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Xt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(z.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ve&&(wt=!1),rt&&(je=!0),We&&(W=r({},ze),Y=[],We.html===!0&&(r(W,ie),r(Y,Se)),We.svg===!0&&(r(W,ye),r(Y,Re),r(Y,g)),We.svgFilters===!0&&(r(W,Le),r(Y,Re),r(Y,g)),We.mathMl===!0&&(r(W,De),r(Y,ve),r(Y,g))),e.ADD_TAGS&&(W===zt&&(W=ee(W)),r(W,e.ADD_TAGS,q)),e.ADD_ATTR&&(Y===$t&&(Y=ee(Y)),r(Y,e.ADD_ATTR,q)),e.ADD_URI_SAFE_ATTR&&r(Rt,e.ADD_URI_SAFE_ATTR,q),e.FORBID_CONTENTS&&(Ye===jt&&(Ye=ee(Ye)),r(Ye,e.FORBID_CONTENTS,q)),St&&(W["#text"]=!0),He&&r(W,["html","head","body"]),W.table&&(r(W,["tbody"]),delete tt.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw ge('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ge('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');oe=e.TRUSTED_TYPES_POLICY,et=oe.createHTML("")}else oe===void 0&&(oe=M(Ae,V)),oe!==null&&typeof et=="string"&&(et=oe.createHTML(""));_&&_(e),Xe=e}},Kt=r({},["mi","mo","mn","ms","mtext"]),Zt=r({},["foreignobject","desc","title","annotation-xml"]),Bn=r({},["title","style","font","a","script"]),Jt=r({},[...ye,...Le,...be]),Qt=r({},[...De,...Ze]),Gn=function(e){let n=gt(e);(!n||!n.tagName)&&(n={namespaceURI:qe,tagName:"template"});const i=J(e.tagName),R=J(n.tagName);return Ct[e.namespaceURI]?e.namespaceURI===mt?n.namespaceURI===Ie?i==="svg":n.namespaceURI===ut?i==="svg"&&(R==="annotation-xml"||Kt[R]):!!Jt[i]:e.namespaceURI===ut?n.namespaceURI===Ie?i==="math":n.namespaceURI===mt?i==="math"&&Zt[R]:!!Qt[i]:e.namespaceURI===Ie?n.namespaceURI===mt&&!Zt[R]||n.namespaceURI===ut&&!Kt[R]?!1:!Qt[i]&&(Bn[i]||!Jt[i]):!!(at==="application/xhtml+xml"&&Ct[e.namespaceURI]):!1},Ue=function(e){fe(o.removed,{element:e});try{e.parentNode.removeChild(e)}catch{e.remove()}},Ot=function(e,n){try{fe(o.removed,{attribute:n.getAttributeNode(e),from:n})}catch{fe(o.removed,{attribute:null,from:n})}if(n.removeAttribute(e),e==="is"&&!Y[e])if(je||rt)try{Ue(n)}catch{}else try{n.setAttribute(e,"")}catch{}},en=function(e){let n=null,i=null;if(bt)e="<remove></remove>"+e;else{const ne=_e(e,/^[\r\n\t ]+/);i=ne&&ne[0]}at==="application/xhtml+xml"&&qe===Ie&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const R=oe?oe.createHTML(e):e;if(qe===Ie)try{n=new d().parseFromString(R,at)}catch{}if(!n||!n.documentElement){n=yt.createDocument(qe,"template",null);try{n.documentElement.innerHTML=It?et:R}catch{}}const te=n.body||n.documentElement;return e&&i&&te.insertBefore(h.createTextNode(i),te.childNodes[0]||null),qe===Ie?Ln.call(n,He?"html":"body")[0]:He?n.documentElement:te},tn=function(e){return Mn.call(e.ownerDocument||e,e,Qe.SHOW_ELEMENT|Qe.SHOW_COMMENT|Qe.SHOW_TEXT,null)},Vn=function(e){return e instanceof _t&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof ht)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},nn=function(e){return typeof Je=="function"&&e instanceof Je},Ce=function(e,n,i){Ee[e]&&D(Ee[e],R=>{R.call(o,n,i,Xe)})},an=function(e){let n=null;if(Ce("beforeSanitizeElements",e,null),Vn(e))return Ue(e),!0;const i=q(e.nodeName);if(Ce("uponSanitizeElement",e,{tagName:i,allowedTags:W}),e.hasChildNodes()&&!nn(e.firstElementChild)&&P(/<[/\w]/g,e.innerHTML)&&P(/<[/\w]/g,e.textContent))return Ue(e),!0;if(!W[i]||tt[i]){if(!tt[i]&&ln(i)&&(z.tagNameCheck instanceof RegExp&&P(z.tagNameCheck,i)||z.tagNameCheck instanceof Function&&z.tagNameCheck(i)))return!1;if(St&&!Ye[i]){const R=gt(e)||e.parentNode,te=Cn(e)||e.childNodes;if(te&&R){const ne=te.length;for(let le=ne-1;le>=0;--le)R.insertBefore(Rn(te[le],!0),In(e))}}return Ue(e),!0}return e instanceof st&&!Gn(e)||(i==="noscript"||i==="noembed"||i==="noframes")&&P(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ue(e),!0):(Ve&&e.nodeType===3&&(n=e.textContent,D([vt,Tt,At],R=>{n=K(n,R," ")}),e.textContent!==n&&(fe(o.removed,{element:e.cloneNode()}),e.textContent=n)),Ce("afterSanitizeElements",e,null),!1)},on=function(e,n,i){if(Gt&&(n==="id"||n==="name")&&(i in h||i in Un))return!1;if(!(wt&&!Et[n]&&P(Nn,n))){if(!(Ht&&P(kn,n))){if(!Y[n]||Et[n]){if(!(ln(e)&&(z.tagNameCheck instanceof RegExp&&P(z.tagNameCheck,e)||z.tagNameCheck instanceof Function&&z.tagNameCheck(e))&&(z.attributeNameCheck instanceof RegExp&&P(z.attributeNameCheck,n)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(n))||n==="is"&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&P(z.tagNameCheck,i)||z.tagNameCheck instanceof Function&&z.tagNameCheck(i))))return!1}else if(!Rt[n]){if(!P(Ft,K(i,Pt,""))){if(!((n==="src"||n==="xlink:href"||n==="href")&&e!=="script"&&Ge(i,"data:")===0&&Wt[e])){if(!(Ut&&!P(Pn,K(i,Pt,"")))){if(i)return!1}}}}}}return!0},ln=function(e){return e.indexOf("-")>0},sn=function(e){Ce("beforeSanitizeAttributes",e,null);const{attributes:n}=e;if(!n)return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Y};let R=n.length;for(;R--;){const te=n[R],{name:ne,namespaceURI:le,value:Be}=te,ot=q(ne);let se=ne==="value"?Be:Pe(Be);if(i.attrName=ot,i.attrValue=se,i.keepAttr=!0,i.forceKeepAttr=void 0,Ce("uponSanitizeAttribute",e,i),se=i.attrValue,i.forceKeepAttr||(Ot(ne,e),!i.keepAttr))continue;if(!Bt&&P(/\/>/i,se)){Ot(ne,e);continue}Ve&&D([vt,Tt,At],cn=>{se=K(se,cn," ")});const rn=q(e.nodeName);if(on(rn,ot,se)){if(Vt&&(ot==="id"||ot==="name")&&(Ot(ne,e),se=Fn+se),oe&&typeof Ae=="object"&&typeof Ae.getAttributeType=="function"&&!le)switch(Ae.getAttributeType(rn,ot)){case"TrustedHTML":{se=oe.createHTML(se);break}case"TrustedScriptURL":{se=oe.createScriptURL(se);break}}try{le?e.setAttributeNS(le,ne,se):e.setAttribute(ne,se),b(o.removed)}catch{}}}Ce("afterSanitizeAttributes",e,null)},jn=function l(e){let n=null;const i=tn(e);for(Ce("beforeSanitizeShadowDOM",e,null);n=i.nextNode();)Ce("uponSanitizeShadowNode",n,null),!an(n)&&(n.content instanceof j&&l(n.content),sn(n));Ce("afterSanitizeShadowDOM",e,null)};return o.sanitize=function(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=null,i=null,R=null,te=null;if(It=!l,It&&(l="<!-->"),typeof l!="string"&&!nn(l))if(typeof l.toString=="function"){if(l=l.toString(),typeof l!="string")throw ge("dirty is not a string, aborting")}else throw ge("toString is not a function");if(!o.isSupported)return l;if(xt||Mt(e),o.removed=[],typeof l=="string"&&(nt=!1),nt){if(l.nodeName){const Be=q(l.nodeName);if(!W[Be]||tt[Be])throw ge("root node is forbidden and cannot be sanitized in-place")}}else if(l instanceof Je)n=en("<!---->"),i=n.ownerDocument.importNode(l,!0),i.nodeType===1&&i.nodeName==="BODY"||i.nodeName==="HTML"?n=i:n.appendChild(i);else{if(!je&&!Ve&&!He&&l.indexOf("<")===-1)return oe&&ct?oe.createHTML(l):l;if(n=en(l),!n)return je?null:ct?et:""}n&&bt&&Ue(n.firstChild);const ne=tn(nt?l:n);for(;R=ne.nextNode();)an(R)||(R.content instanceof j&&jn(R.content),sn(R));if(nt)return l;if(je){if(rt)for(te=On.call(n.ownerDocument);n.firstChild;)te.appendChild(n.firstChild);else te=n;return(Y.shadowroot||Y.shadowrootmode)&&(te=Dn.call(f,te,!0)),te}let le=He?n.outerHTML:n.innerHTML;return He&&W["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&P(pe,n.ownerDocument.doctype.name)&&(le="<!DOCTYPE "+n.ownerDocument.doctype.name+`>
`+le),Ve&&D([vt,Tt,At],Be=>{le=K(le,Be," ")}),oe&&ct?oe.createHTML(le):le},o.setConfig=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mt(l),xt=!0},o.clearConfig=function(){Xe=null,xt=!1},o.isValidAttribute=function(l,e,n){Xe||Mt({});const i=q(l),R=q(e);return on(i,R,n)},o.addHook=function(l,e){typeof e=="function"&&(Ee[l]=Ee[l]||[],fe(Ee[l],e))},o.removeHook=function(l){if(Ee[l])return b(Ee[l])},o.removeHooks=function(l){Ee[l]&&(Ee[l]=[])},o.removeAllHooks=function(){Ee={}},o}var O=a();return O})}(Dt)),Dt.exports}var Ka=window.DOMPurify||(window.DOMPurify=gn().default||gn());const Za=Yn(Ka),Ja={class:"flex flex-col items-center justify-center h-full p-6"},Qa={class:"text-lg font-semibold self-start mb-5"},eo={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},to=yn({__name:"RenameFile",props:{title:{}},emits:["rename","cancel"],setup(m,{emit:U}){const de=m,re=U,{t:he}=vn(),ce=v(),B=v(!0),_=Tn({title:de.title});function I(w){B.value=!1,re("rename",w)}const E={title:[{required:!0,message:he("labels.titleRequired")}]};function x(){B.value=!1,re("cancel")}return qn("Escape",x),Xn(()=>{ce.value.select(),ce.value.focus()}),(w,D)=>{const b=La,fe=Na,J=An,Q=Da,_e=Oa;return p(),$(_e,{visible:t(B),"onUpdate:visible":D[2]||(D[2]=K=>dt(B)?B.value=K:null),class:"nc-attachment-rename-modal",size:"small"},{default:A(()=>[C("div",Ja,[C("div",Qa,ae(w.$t("title.renameFile")),1),L(Q,{class:"w-full h-full","no-style":"",model:t(_),onFinish:D[1]||(D[1]=K=>I(t(_).title))},{default:A(()=>[L(fe,{class:"w-full !mb-0",name:"title",rules:E.title},{default:A(()=>[L(b,{ref_key:"inputEl",ref:ce,value:t(_).title,"onUpdate:value":D[0]||(D[0]=K=>t(_).title=K),class:"w-full nc-input-sm nc-input-shadow",placeholder:w.$t("general.rename")},null,8,["value","placeholder"])]),_:1},8,["rules"]),C("div",eo,[L(J,{key:"back","html-type":"back",size:"small",type:"secondary"},{default:A(()=>[xe(ae(w.$t("general.cancel")),1)]),_:1}),L(J,{key:"submit","html-type":"submit",size:"small",type:"primary"},{default:A(()=>[xe(ae(w.$t("general.confirm")),1)]),_:1})])]),_:1},8,["model"])])]),_:1},8,["visible"])}}}),no={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ao=C("path",{fill:"currentColor",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-9.5 8.5c0 .8-.7 1.5-1.5 1.5H7v2H5.5V9H8c.8 0 1.5.7 1.5 1.5zm5 2c0 .8-.7 1.5-1.5 1.5h-2.5V9H13c.8 0 1.5.7 1.5 1.5zm4-3H17v1h1.5V13H17v2h-1.5V9h3zm-6.5 0h1v3h-1zm-5 0h1v1H7z"},null,-1),oo=[ao];function io(m,U){return p(),X("svg",no,[...oo])}const lo={name:"mdi-pdf-box",render:io},so={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ro=C("path",{fill:"currentColor",d:"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-.65-10l-2.1 9h-1.4l-1.8-6.79l-1.8 6.79h-1.4l-2.2-9h1.5l1.4 6.81l1.8-6.81h1.3l1.8 6.81l1.4-6.81z"},null,-1),co=[ro];function uo(m,U){return p(),X("svg",so,[...co])}const mo={name:"mdi-file-word-outline",render:uo},fo={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},po=C("path",{fill:"currentColor",d:"M9.8 13.4h2.5c1.5 0 2.16-.28 2.8-.82c.64-.55.9-1.33.9-2.35c0-.97-.25-1.73-.9-2.35c-.65-.59-1.27-.88-2.8-.88H8v10h1.8zM19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-9.2 9V8.4h2.3c.66 0 1.17.25 1.5.6s.5.72.5 1.24c0 .56-.18.95-.5 1.26s-.7.5-1.38.5z"},null,-1),ho=[po];function _o(m,U){return p(),X("svg",fo,[...ho])}const go={name:"mdi-file-powerpoint-box",render:_o},yo={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},vo=C("path",{fill:"currentColor",d:"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-5.1-5.5l2.9 4.5H14l-2-3.4l-2 3.4H8.2l2.9-4.5L8.2 10H10l2 3.4l2-3.4h1.8z"},null,-1),To=[vo];function Ao(m,U){return p(),X("svg",yo,[...To])}const Eo={name:"mdi-file-excel-outline",render:Ao},wo=m=>{const U=Math.min(Math.floor(Math.log(m)/Math.log(1024)),4);return`${(m/1024**U).toFixed(2)*1} ${["B","kB","MB","GB","TB"][U]}`},[xo,mi]=Ia(m=>{const{$api:U}=la(),de=U.instance.defaults.baseURL,{row:re}=bn(),{fetchSharedViewAttachment:he}=Kn(),ce=Z(Zn,v(!1)),{t:B}=vn(),_=Z(Jn,v(!1)),I=Z(Qn,v(!1)),E=Z(En,v()),x=Z(ea,v()),w=Z(ta,v(!1)),D=v([]),b=v([]),fe=v(!1),J=v(!1),Q=v(),_e=v(null),K=v(!1),{base:Ge}=na(aa()),{api:Pe,isLoading:P}=oa(),{files:ge,open:N}=ia({reset:!0}),Oe=v(!1),{appInfo:r}=wn(),Fe={...r.value.ee&&{maxNumberOfAttachments:Math.max(1,+r.value.ncMaxAttachmentsAllowed||50)||50,maxAttachmentSize:Math.max(1,+r.value.ncAttachmentFieldSize||20)||20,supportedAttachmentMimeTypes:["*"]}},ee=async()=>{_e.value||(_e.value=await navigator.mediaDevices.getUserMedia({video:!0})),K.value=!0},ue=()=>{var c;(c=_e.value)==null||c.getTracks().forEach(y=>y.stop()),_e.value=null},ie=xn(()=>_.value&&I.value?D.value:b.value),ye=v(Array.from({length:ie.value.length},()=>!1));function Le(c){_.value?(D.value.splice(c,1),b.value.splice(c,1),ye.value.splice(c,1),m(D.value)):(b.value.splice(c,1),ye.value.splice(c,1),m(JSON.stringify(b.value)))}async function be(c,y){var H,F,pe,$e;if(!c.length&&!(y!=null&&y.length))return;const T={...Fe,...sa((H=x==null?void 0:x.value)==null?void 0:H.meta)},S=[],k=[],G=[];for(const s of c.length?c:y||[]){if(r.value.ee){if(ie.value.length+(c.length||(y==null?void 0:y.length)||0)>T.maxNumberOfAttachments){Me.error(`You can only upload at most ${T.maxNumberOfAttachments} file${T.maxNumberOfAttachments>1?"s":""} to this cell.`);return}if(s!=null&&s.size&&s.size>T.maxAttachmentSize){Me.error(`The size of ${(s==null?void 0:s.name)||(s==null?void 0:s.fileName)} exceeds the maximum file size ${wo(T.maxAttachmentSize)}.`);continue}if(!T.supportedAttachmentMimeTypes.includes("*")&&!T.supportedAttachmentMimeTypes.includes(s.type||s.mimetype)&&!T.supportedAttachmentMimeTypes.includes((F=(s==null?void 0:s.type)||s.mimetype)==null?void 0:F.split("/")[0])){Me.error(`${(s==null?void 0:s.name)||(s==null?void 0:s.fileName)} has the mime type ${(s==null?void 0:s.type)||(s==null?void 0:s.mimetype)} which is not allowed in this column.`);continue}}if(c.length)k.push(s);else{const M=un(s.fileName??"",[...b.value,...G].map(a=>(a==null?void 0:a.title)||(a==null?void 0:a.fileName)),(s==null?void 0:s.type)||(s==null?void 0:s.mimetype)||"");G.push({...s,fileName:M,title:M})}}if(k.length&&_.value&&I.value){const s=await Promise.all(Array.from(k).map(M=>new Promise(a=>{const O={...M,file:M,title:M.name,mimetype:M.type};if(kt(M.name,M.mimetype??M.type)){const u=new FileReader;u.onload=o=>{var h;O.data=(h=o.target)==null?void 0:h.result,a(O)},u.onerror=()=>{a(O)},u.readAsDataURL(M)}else a(O)})));return b.value=[...b.value,...s],m(b.value)}else if(_.value&&I.value)return b.value=[...b.value,...G],m(b.value);if(k.length)try{const s=await Pe.storage.upload({path:[mn,Ge.value.id,(pe=E.value)==null?void 0:pe.id,($e=x.value)==null?void 0:$e.id].join("/")},{files:k});for(const M of s)S.push({...M,title:un(M==null?void 0:M.title,[...b.value,...S].map(a=>(a==null?void 0:a.title)||(a==null?void 0:a.fileName)),M==null?void 0:M.mimetype)})}catch(s){Me.error(s.message||B("msg.error.internalError"))}else if(G.length){const s=De(G);if(!s)return;S.push(...s)}S!=null&&S.length&&m(JSON.stringify([...b.value,...S]))}async function De(c,y=!1){var S,k;const T=Array.isArray(c)?c:[c];try{return await Pe.storage.uploadByUrl({path:[mn,Ge.value.id,(S=E.value)==null?void 0:S.id,(k=x.value)==null?void 0:k.id].join("/")},T)}catch(G){return console.log(G),y?"File couldn't be uploaded. Verify URL & try again.":(Me.error("File couldn't be uploaded. Verify URL & try again."),null)}}async function Ze(c,y,T){return new Promise(S=>{Oe.value=!0;const{close:k}=Ca(to,{title:c.title,onRename:G=>{b.value[y].title=G,m(JSON.stringify(b.value)),k(),T&&(Q.value={...c,title:G}),Oe.value=!1,S(!0)},onCancel:()=>{k(),Oe.value=!1,S(!0)}})})}async function ze(c,y){var T,S,k;if(!ce.value)if(c)await be(c);else{y.preventDefault();const G=Za.sanitize(((T=y.dataTransfer)==null?void 0:T.getData("text/html"))??"")??"",H=Ra(G)??"";if(!H){Me.error(B("msg.error.draggedContentIsNotTypeOfImage"));return}const F=await ve(H);F!=null&&F.mimetype?await be([],[{...F,url:H,fileName:`image.${(S=F==null?void 0:F.mimetype)==null?void 0:S.split("/")[1]}`,title:`image.${(k=F==null?void 0:F.mimetype)==null?void 0:k.split("/")[1]}`}]):Me.error(B("msg.error.fieldToParseImageData"))}}async function Se(){await Promise.all(ye.value.map(async(c,y)=>c&&await Re(ie.value[y]))),ye.value=Array.from({length:ie.value.length},()=>!1)}async function Re(c){if(!E.value||!x.value)return;const y=E.value.id,T=x.value.id,S=Ma(t(re).row,E.value.columns),k=c.url||c.path;y&&T&&S&&k?await(_.value?()=>he(T,S,k):()=>U.dbDataTableRow.attachmentDownload(y,T,S,{urlOrPath:k}))().then(H=>{H!=null&&H.path?window.open(`${de}/${H.path}`,"_blank"):H!=null&&H.url?window.open(H.url,"_blank"):Me.error("Failed to download file")}):Me.error("Failed to download file")}async function ve(c){var y;try{const T=await fetch(c);if(T.ok){if((y=T.headers.get("content-type"))!=null&&y.startsWith("image/"))return{mimetype:T.headers.get("content-type")||void 0,size:+(T.headers.get("content-length")||0)||void 0};if(c.slice(c.lastIndexOf(".")+1).toLowerCase().length)return{mimetype:`image/${c.slice(c.lastIndexOf(".")+1).toLowerCase()}`,size:+(T.headers.get("content-length")||0)||void 0}}}catch(T){console.log(T)}}const g=c=>{switch(c){case"mdi-pdf-box":return lo;case"mdi-file-word-outline":return mo;case"mdi-file-powerpoint-box":return go;case"mdi-file-excel-outline":return Eo;default:return Sn}};return Nt(ge,c=>c&&be(c)),{attachments:b,visibleItems:ie,isPublic:_,isForm:I,isReadonly:ce,meta:E,column:x,editEnabled:w,isLoading:P,api:Pe,open:()=>N(),onDrop:ze,modalRendered:fe,modalVisible:J,FileIcon:g,removeFile:Le,renameFile:Ze,downloadAttachment:Re,updateModelValue:m,selectedFile:Q,uploadViaUrl:De,selectedVisibleItems:ye,storedFiles:D,bulkDownloadAttachments:Se,defaultAttachmentMeta:Fe,startCamera:ee,stopCamera:ue,videoStream:_e,permissionGranted:K,isRenameModalOpen:Oe}},"useAttachmentCell");function bo(m,U,de,re=!1){const he=v(!1);function ce(E){E.stopImmediatePropagation(),E.preventDefault(),he.value=!0}async function B(E){E.stopImmediatePropagation(),E.preventDefault(),he.value=!1;const x=t(U);if(x.length<2)return;const{newIndex:w=0,oldIndex:D=0}=E;w!==D&&(x.splice(w,0,...x.splice(D,1)),de(x))}let _;const I=E=>{_=new ka(E,{handle:".nc-attachment",ghostClass:"ghost",onStart:ce,onEnd:B})};return ra(E=>{const x=t(m);E(()=>{x&&(_!=null&&_.el)&&_.destroy()}),x&&!t(re)&&I(x)}),{dragging:he,initSortable:I}}const So=it(()=>lt(()=>import("./Dn466VR6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]),import.meta.url).then(m=>m.default||m)),Ro=it(()=>lt(()=>import("./BVHyv0aP.js"),__vite__mapDeps([35,1,2]),import.meta.url).then(m=>m.default||m)),Io=it(()=>lt(()=>import("./C579LfJj.js"),__vite__mapDeps([36,1,2,37,38,39,25,40,3,4,5,6,41,9,10,11,12,42,43,7,8,13,14,15,16,17,18,19,20,21,22,23,24,26,27,28,29,30,31,32,33,44]),import.meta.url).then(m=>m.default||m)),Co=it(()=>lt(()=>import("./DJ7UmSmM.js"),__vite__mapDeps([45,3,1,2,4,5,6]),import.meta.url).then(m=>m.default||m)),Mo=it(()=>lt(()=>import("./BH-Nu8LT.js"),__vite__mapDeps([46,1,2,47,48,49,50,41,5,7,8,9,10,11,13,14,15,16,17,18,19,12,20,21,4,22,23,24,25,26,27,28,29,30,31,32,33,51]),import.meta.url).then(m=>m.default||m)),Oo={key:0,class:"form-attachment-cell"},Lo={class:"flex items-center !text-xs gap-1 justify-center"},Do={class:"text-[10px]"},No={key:1,class:"grid mt-2 gap-2 grid-cols-2"},ko=["title"],Po={class:"flex-none hide-ui transition-all transition-ease-in-out !h-5 gap-0.5 pb-2 flex items-center bg-white"},Fo={"data-rec":"true"},zo={class:"flex items-center !text-xs gap-1 justify-center"},$o={class:"text-[10px]"},Ho={class:"text-center w-full"},Uo={key:0},Bo=["onClick"],Go=["onClick"],Vo={class:"flex flex-row items-center py-2.25 px-2.5 bg-gray-50 rounded-lg text-gray-700 mb-4"},jo={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},Wo=yn({__name:"index",props:{modelValue:{},rowIndex:{}},emits:["update:modelValue"],setup(m,{emit:U}){const de=U,re=Z(ca,v()),he=v(),ce=v(),B=Z(ua,re.value),_=Z(ma,v(!1)),I=Z(fa,v(!1)),E=Z(pa,v(!1)),x=Z(da,v(!1)),w=Z(ha,v(!1)),{isSharedForm:D}=wa(),{isMobileMode:b}=wn(),{getPossibleAttachmentSrc:fe}=xa(),{isPublic:J,isForm:Q,column:_e,modalRendered:K,downloadAttachment:Ge,renameFile:Pe,modalVisible:P,attachments:ge,visibleItems:N,onDrop:Oe,isLoading:r,FileIcon:Fe,selectedFile:ee,isReadonly:ue,storedFiles:ie,removeFile:ye}=xo(Re),{dragging:Le}=bo(ce,N,Re,ue),be=Z(fn,v(!1)),{state:De,row:Ze}=bn(),ze=Z(En,v());!J.value&&!Q.value&&ze.value&&ba(ze,Ze);const{isOverDropZone:Se}=_a(B,Oe);Nt(()=>m.modelValue,async a=>{if(a)try{const O=((typeof a=="string"?JSON.parse(a):a)||[]).filter(Boolean);J.value&&Q.value?ie.value=O:ge.value=O}catch(O){console.error(O),J.value&&Q.value?ie.value=[]:ge.value=[]}else J.value&&Q.value?ie.value=[]:ge.value=[]},{immediate:!0});function Re(a){de("update:modelValue",a)}ga("Escape",()=>{P.value=!1,Se.value=!1}),Nt(()=>ie.value.length||0,()=>{De.value[_e.value.title]=ie.value});const ve=v(!1);Sa(Z(fn,v(!1)),a=>{var O;if(!P.value&&a.key==="Enter"&&!ue.value&&!ee.value){if(ve.value)return;a.stopPropagation(),!P.value&&!b.value?(K.value=!0,P.value=!0):(O=document.querySelector(".nc-attachment-modal.active .nc-attach-file"))==null||O.click()}});const g=Z(ya,v()),c=()=>{ve.value=!0},y=a=>{a.stopPropagation(),c()},T=()=>{b.value||(K.value=!0,P.value=!0)},S=a=>{b.value&&!E.value||!b.value&&(_.value||I.value)&&!E.value||(ee.value=a)},k=a=>{x.value||(y(a),a.stopPropagation())},G=a=>{x.value&&(y(a),a.stopPropagation())},{isUIAllowed:H}=va(),F=v(!1),pe=Tn({title:"",i:0});function $e(a,O){F.value=!0,pe.i=O,pe.title=a}const s=a=>{ye(a),F.value=!1,pe.i=0,pe.title=""},M=xn(()=>{if(Q.value||E.value)return"small";switch(g.value){case 1:return"tiny";case 2:return"tiny";case 4:return"small";case 6:return"small";default:return"tiny"}});return(a,O)=>{const u=Xa,o=An,h=So,f=Ro,V=Sn,j=Ta,Ne=Ha,Je=Ea,st=Io,Qe=Aa,ht=Co,_t=Mo;return p(),X(ft,null,[t(E)||t(Q)?(p(),X("div",Oo,[L(o,{"data-testid":"attachment-cell-file-picker-button",type:"secondary",size:"small",onClick:y},{default:A(()=>[C("div",Lo,[L(u,{class:"text-gray-500 text-tiny"}),C("span",Do,ae(a.$t("activity.addFiles")),1)])]),_:1}),t(ee)?(p(),$(h,{key:0})):me("",!0),t(N).length>0?(p(),X("div",No,[(p(!0),X(ft,null,pn(t(N),(d,Ae)=>(p(),X("div",{key:`${d==null?void 0:d.title}-${Ae}`,class:"nc-attachment-item group gap-2 flex border-1 rounded-md border-gray-200 flex-col relative"},[C("div",{class:we([[t(Le)?"cursor-move":"cursor-pointer"],"nc-attachment h-full flex justify-center items-center overflow-hidden"])},[("isImage"in a?a.isImage:t(kt))(d.title,d.mimetype)?(p(),$(f,{key:0,srcs:t(fe)(d,"small"),"object-fit":"cover",class:"!w-full !h-42 object-cover !m-0 rounded-t-[5px] justify-center",onClick:Te=>S(d)},null,8,["srcs","onClick"])):d.icon?(p(),$(ke(t(Fe)(d.icon)),{key:1,height:45,width:45,onClick:Te=>ee.value=d},null,8,["onClick"])):(p(),$(V,{key:2,height:45,width:45,onClick:Te=>ee.value=d},null,8,["onClick"]))],2),C("div",{class:"relative px-1 flex",title:d.title},[L(j,{"show-on-truncate-only":"",class:"flex-auto truncate w-full text-[13px] items-center text-sm line-height-4"},{title:A(()=>[xe(ae(d.title),1)]),default:A(()=>[xe(ae(d.title)+" ",1)]),_:2},1024),C("div",Po,[L(j,{placement:"bottom"},{title:A(()=>[xe(ae(a.$t("title.downloadFile")),1)]),default:A(()=>[L(o,{class:"!p-0 !w-5 !h-5 text-gray-500 !min-w-[fit-content]",size:"xsmall",type:"text",onClick:Te=>t(Ge)(d)},{default:A(()=>[(p(),$(ke(("iconMap"in a?a.iconMap:t(Ke)).download),{class:"!text-xs h-13px w-13px"}))]),_:2},1032,["onClick"])]),_:2},1024),!t(D)||!t(ue)&&t(H)("dataEdit")&&!t(J)?(p(),$(j,{key:0,placement:"bottom"},{title:A(()=>[xe(ae(a.$t("title.renameFile")),1)]),default:A(()=>[L(o,{size:"xsmall",class:"!p-0 nc-attachment-rename !h-5 !w-5 !text-gray-500 !min-w-[fit-content]",type:"text",onClick:Te=>t(Pe)(d,Ae)},{default:A(()=>[(p(),$(ke(("iconMap"in a?a.iconMap:t(Ke)).rename),{class:"text-xs h-13px w-13px"}))]),_:2},1032,["onClick"])]),_:2},1024)):me("",!0),t(ue)?me("",!0):(p(),$(j,{key:1,placement:"bottom"},{title:A(()=>[xe(ae(a.$t("title.removeFile")),1)]),default:A(()=>[L(o,{class:"!p-0 !h-5 !w-5 !text-red-500 nc-attachment-remove !min-w-[fit-content]",size:"xsmall",type:"text",onClick:Te=>$e(d.title,Ae)},{default:A(()=>[t(D)||t(H)("dataEdit")&&!t(J)?(p(),$(ke(("iconMap"in a?a.iconMap:t(Ke)).delete),{key:0,class:"text-xs h-13px w-13px"})):me("",!0)]),_:2},1032,["onClick"])]),_:2},1024))])],8,ko)]))),128))])):me("",!0)])):(p(),X("div",{key:1,ref_key:"attachmentCellRef",ref:he,style:pt({height:`max(${!t(g)||t(g)===1?("rowHeightInPx"in a?a.rowHeightInPx:t(hn))[1]-10:("rowHeightInPx"in a?a.rowHeightInPx:t(hn))[`${t(g)}`]-18}px, ${t(w)?"22px":"32px"})`}),class:we(["nc-attachment-cell relative group flex color-transition gap-2 flex items-center w-full xs:min-h-12 xs:max-h-32",{"justify-center":!t(be),"justify-between":t(be)}])},[t(ee)?(p(),$(h,{key:0})):me("",!0),!t(ue)&&!t(Le)&&t(B)?(p(),$(Je,{key:1,modelValue:t(Se),"onUpdate:modelValue":O[0]||(O[0]=d=>dt(Se)?Se.value=d:null),inline:"",target:t(B),"data-rec":"true",class:"nc-attachment-cell-dropzone text-white text-lg bg-gray-600/75 flex text-sm items-center justify-center gap-2"},{default:A(()=>[L(Ne),xe(" "+ae(a.$t("labels.dropHere")),1)]),_:1},8,["modelValue","target"])):me("",!0),!t(ue)&&t(be)&&!t(N).length?(p(),X("div",{key:2,class:we([{"sm:mx-auto sm:px-4 xs:w-full xs:min-w-8":!t(N).length},"group cursor-pointer py-1 flex gap-1 items-center rounded border-none"]),tabindex:"0",onKeydown:[dn(k,["enter"]),dn(G,["space"])]},[t(r)?(p(),$(ke(("iconMap"in a?a.iconMap:t(Ke)).reload),{key:0,class:we({"animate-infinite animate-spin":t(r)})},null,8,["class"])):me("",!0),L(j,{placement:"bottom",class:"xs:w-full"},{title:A(()=>[C("span",Fo,ae(a.$t("activity.attachmentDrop")),1)]),default:A(()=>[L(o,{type:"secondary",size:"xsmall","data-testid":"attachment-cell-file-picker-button",class:"!px-2 !h-5.5 !min-w-[fit-content]",onClick:Lt(y,["stop"])},{default:A(()=>[C("div",zo,[L(u,{class:"text-gray-500 text-tiny"}),C("span",$o,ae(a.$t("activity.addFiles")),1)])]),_:1})]),_:1})],34)):me("",!0),t(N).length>0?(p(),X(ft,{key:3},[C("div",{ref_key:"sortableRef",ref:ce,class:we([{"justify-center":!t(_)&&!t(I),"py-1":t(g)===1,"py-1.5 !gap-4 ":t(g)!==1},"nc-attachment-wrapper flex cursor-pointer w-full items-center flex-wrap gap-3 nc-scrollbar-thin mt-0 items-start px-[1px]"]),style:pt({maxHeight:`max(100%, ${t(w)?"22px":"32px"})`})},[(p(!0),X(ft,null,pn(t(N),(d,Ae)=>(p(),$(j,{key:d.url||d.title,placement:"bottom",class:"nc-attachment-item"},{title:A(()=>[C("div",Ho,ae(d.title),1)]),default:A(()=>[("isImage"in a?a.isImage:t(kt))(d.title,d.mimetype??d.type)?(p(),X("div",Uo,[C("div",{class:"nc-attachment flex items-center flex-col flex-wrap justify-center flex-auto",onClick:()=>S(d)},[L(f,{alt:d.title||`#${Ae}`,class:we(["rounded",{"h-5.5":!t(w)&&(!t(g)||t(g)===1),"h-4.5":t(w)&&(!t(g)||t(g)===1),"h-8":t(g)===2,"h-16.8":t(g)===4,"h-20.8":t(g)===6}]),srcs:t(fe)(d,t(M))},null,8,["alt","class","srcs"])],8,Bo)])):(p(),X("div",{key:1,class:we(["nc-attachment flex items-center justify-center px-4",{"h-5.5":!t(w)&&(!t(g)||t(g)===1),"h-4.5":t(w)&&(!t(g)||t(g)===1),"h-8":t(g)===2,"h-16.8":t(g)===4,"h-20.8 !w-30":t(g)===6}]),onClick:Te=>S(d)},[d.icon?(p(),$(ke(t(Fe)(d.icon)),{key:0})):(p(),$(V,{key:1}))],10,Go))]),_:2},1024))),128))],6),L(j,{placement:"bottom",class:we(["nc-action-icon !absolute hidden right-0 nc-text-area-expand-btn !group-hover:block z-3",{"top-0":t(w)&&!(!t(g)||t(g)===1),"top-1":!t(w)}]),style:pt(t(w)&&(!t(g)||t(g)===1)?{top:"50%",transform:"translateY(-50%)"}:void 0)},{title:A(()=>[xe(ae(a.$t("activity.viewAttachment")),1)]),default:A(()=>[L(o,{type:"secondary",size:"xsmall","data-testid":"attachment-cell-file-picker-button",class:"!p-0 !w-5 !h-5 !min-w-[fit-content]",onClick:Lt(T,["stop"])},{default:A(()=>[t(r)?(p(),$(ke(("iconMap"in a?a.iconMap:t(Ke)).reload),{key:0,class:we({"animate-infinite animate-spin":t(r)})},null,8,["class"])):(p(),$(ke(("iconMap"in a?a.iconMap:t(Ke)).expand),{key:1,class:"transform !group-hover:text-grey-800 text-gray-700 text-xs"}))]),_:1})]),_:1},8,["class","style"]),L(j,{placement:"bottom",class:we(["nc-action-icon !absolute hidden left-0 nc-text-area-expand-btn !group-hover:block z-3",{"top-0":t(w)&&!(!t(g)||t(g)===1),"top-1":!t(w)}]),style:pt(t(w)&&(!t(g)||t(g)===1)?{top:"50%",transform:"translateY(-50%)"}:void 0)},{title:A(()=>[xe(ae(a.$t("activity.addFiles")),1)]),default:A(()=>[L(o,{type:"secondary",size:"xsmall","data-testid":"attachment-cell-file-picker-button",class:"!p-0 !w-5 !h-5 !min-w-[fit-content]",onClick:Lt(y,["stop"])},{default:A(()=>[L(u,{class:"text-gray-500 text-tiny !group-hover:text-grey-800 text-gray-700"})]),_:1})]),_:1},8,["class","style"])],64)):me("",!0),t(K)?(p(),$(st,{key:4})):me("",!0)],6)),t(Q)||t(E)?(p(),$(ht,{key:2,visible:t(F),"onUpdate:visible":O[1]||(O[1]=d=>dt(F)?F.value=d:null),"entity-name":"File","on-delete":()=>s(t(pe).i)},{"entity-preview":A(()=>[C("span",null,[C("div",Vo,[L(Qe,{icon:"file",class:"nc-view-icon"}),C("div",jo,ae(t(pe).title),1)])])]),_:1},8,["visible","on-delete"])):me("",!0),t(ve)?(p(),$(_t,{key:3,value:t(ve),"onUpdate:value":O[2]||(O[2]=d=>dt(ve)?ve.value=d:null)},null,8,["value"])):me("",!0)],64)}}}),fi=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"}));export{Ha as _,bo as a,Sn as b,fi as i,mi as u};
