import{f as E,M,ai as U,fc as L,aB as l,r as b,dB as T,aF as H,gB as q,B as z,gC as K,at as A,H as G,o as d,c,b as t,w as r,P as s,S as J,T as u,Q,U as O,a as _,d as f,t as m,cg as W,a4 as X,$ as Y,a0 as Z,cc as ee,a5 as se,dK as ae,gD as te,da as oe,_ as re}from"./Cgw6cdOy.js";import{u as ne}from"./DCTaz0D2.js";import{u as ie}from"./MA4kh5_N.js";import{u as le}from"./DFiWgQ57.js";import{F as de}from"./DpYA1Dpy.js";import{_ as me}from"./BZz6iAla.js";import{_ as pe}from"./dmcxUY_0.js";import"./CO8XXsKl.js";import"./vIgbYHAs.js";import"./DpDIhxXu.js";import"./boyBAVNN.js";import"./D7yS5JAk.js";import"./r2PN1Hfg.js";import"./BBXMuneh.js";import"./B1jnz4_u.js";import"./DCaZaUH5.js";import"./LSbsNkd9.js";import"./hvq8FVej.js";import"./DPaOlBFV.js";import"./BQQOEPN4.js";import"./BcZAlRJW.js";const ce=""+new URL("form.DESRCJtL.png",import.meta.url).href,ue={class:"flex flex-col gap-5"},_e={class:"flex flex-row items-center gap-x-2 text-base font-weight-700 text-gray-800"},fe={key:0,class:"mb-2 text-sm text-red-500"},we={class:"flex flex-row justify-end gap-x-2"},ge={key:1,alt:"view image",src:ce,class:"fixed inset-0 w-full h-full"},ve=E({__name:"[viewId]",async setup(he){let w,g;ne("nc-left-sidebar",{hasSidebar:!1});const x=M(),{t:y}=U(),{loadSharedView:p,sharedView:k,sharedViewMeta:I,meta:v,notFound:C,password:S,passwordDlg:o,passwordError:h}=ie(x.params.viewId);if([w,g]=L(()=>p()),await w,g(),!C.value)l(te,ae()),l(oe,v),l(T,b(!0)),l(H,b(!0)),le(k,v,!0),q(I.value.rtl?"rtl":"ltr");else throw z("/error/404"),K({statusCode:404,statusMessage:y("msg.pageNotFound")});const n=A({password:""});G(()=>n.password,()=>{S.value=n.password});const F=e=>{var a;return e&&((a=e==null?void 0:e.focus)==null?void 0:a.call(e))};return(e,a)=>{const B=X,V=Y,$=me,N=pe,P=de,R=Z,j=ee,D=se;return d(),c("div",null,[t(D,null,{default:r(()=>[s(o)?u("",!0):(d(),J(B,{key:0})),t(j,{visible:s(o),"onUpdate:visible":a[1]||(a[1]=i=>Q(o)?o.value=i:null),class:O({active:s(o)}),closable:!1,width:"min(100%, 450px)",centered:"",footer:null,"mask-closable":!1,"wrap-class-name":"nc-modal-shared-form-password-dlg","mask-style":{backgroundColor:"rgba(255, 255, 255, 0.64)",backdropFilter:"blur(8px)"},onClose:a[2]||(a[2]=i=>o.value=!1)},{default:r(()=>[_("div",ue,[_("div",_e,[t(V,{icon:"ncKey",class:"!text-base w-5 h-5"}),f(" "+m(e.$t("msg.thisSharedViewIsProtected")),1)]),t(P,{model:s(n),onFinish:s(p)},{default:r(()=>[t(N,{name:"password",rules:[{required:!0,message:e.$t("msg.error.signUpRules.passwdRequired")}],class:"!mb-0"},{default:r(()=>[t($,{ref:F,value:s(n).password,"onUpdate:value":a[0]||(a[0]=i=>s(n).password=i),class:"!rounded-lg !text-small","hide-details":"",placeholder:e.$t("msg.enterPassword")},null,8,["value","placeholder"]),t(W,{name:"layout"},{default:r(()=>[s(h)?(d(),c("div",fe,m(s(h)),1)):u("",!0)]),_:1})]),_:1},8,["rules"])]),_:1},8,["model","onFinish"]),_("div",we,[t(R,{disabled:!s(n).password,type:"primary",size:"small","html-type":"submit",class:"!px-2","data-testid":"nc-shared-view-password-submit-btn",onClick:s(p)},{loading:r(()=>[f(m(e.$t("msg.verifyingPassword")),1)]),default:r(()=>[f(m(e.$t("objects.view"))+" ",1)]),_:1},8,["disabled","onClick"])])])]),_:1},8,["visible","class"]),s(o)?(d(),c("img",ge)):u("",!0)]),_:1})])}}}),He=re(ve,[["__scopeId","data-v-e4fe6d26"]]);export{He as default};
