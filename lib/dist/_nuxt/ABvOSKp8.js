import{e as B,r as E,ak as F,f as q,a_ as J,g8 as K,F as M,a$ as N,g as Q,cb as G,al as i,b as u,am as d,cl as U,aP as Y,an as Z,aS as ee}from"./DZZ6t_j4.js";import{u as ae}from"./B8iX-Tu_.js";import{u as te,a as re}from"./D9tFZoTQ.js";import{e as ne}from"./Cz_1GoV3.js";import{_ as oe}from"./K3POysmD.js";var le=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:Y.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},O=B({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:le(),slots:["icon"],setup:function(e,S){var P=S.slots,o=S.attrs,m=E(!0),y=E(!1),x=E(1),l=E(null),h=E(null),j=F("avatar",e),p=j.prefixCls,k=te(),n=q(function(){return e.size==="default"?k.value:e.size}),A=ae(),c=ne(function(){if(J(e.size)==="object"){var a=K.find(function(r){return A.value[r]}),t=e.size[a];return t}}),T=function(t){return c.value?{width:"".concat(c.value,"px"),height:"".concat(c.value,"px"),lineHeight:"".concat(c.value,"px"),fontSize:"".concat(t?c.value/2:18,"px")}:{}},v=function(){if(!(!l.value||!h.value)){var t=l.value.offsetWidth,r=h.value.offsetWidth;if(t!==0&&r!==0){var s=e.gap,b=s===void 0?4:s;b*2<r&&(x.value=r-b*2<t?(r-b*2)/t:1)}}},C=function(){var t=e.loadError,r=t==null?void 0:t();r!==!1&&(m.value=!1)};return M(function(){return e.src},function(){N(function(){m.value=!0,x.value=1})}),M(function(){return e.gap},function(){N(function(){v()})}),Q(function(){N(function(){v(),y.value=!0})}),function(){var a,t,r=e.shape,s=e.src,b=e.alt,H=e.srcset,$=e.draggable,w=e.crossOrigin,z=G(P,e,"icon"),f=p.value,D=(a={},i(a,"".concat(o.class),!!o.class),i(a,f,!0),i(a,"".concat(f,"-lg"),n.value==="large"),i(a,"".concat(f,"-sm"),n.value==="small"),i(a,"".concat(f,"-").concat(r),r),i(a,"".concat(f,"-image"),s&&m.value),i(a,"".concat(f,"-icon"),z),a),L=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:z?"".concat(n.value/2,"px"):"18px"}:{},R=(t=P.default)===null||t===void 0?void 0:t.call(P),_;if(s&&m.value)_=u("img",{draggable:$,src:s,srcset:H,onError:C,alt:b,crossorigin:w},null);else if(z)_=z;else if(y.value||x.value!==1){var I="scale(".concat(x.value,") translateX(-50%)"),V={msTransform:I,WebkitTransform:I,transform:I},X=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};_=u(U,{onResize:v},{default:function(){return[u("span",{class:"".concat(f,"-string"),ref:l,style:d(d({},X),V)},[R])]}})}else _=u("span",{class:"".concat(f,"-string"),ref:l,style:{opacity:0}},[R]);return u("span",d(d({},o),{},{ref:h,class:D,style:[L,T(!!z),o.style]}),[_])}}}),ie=function(){return{prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"}}},W=B({compatConfig:{MODE:3},name:"AAvatarGroup",inheritAttrs:!1,props:ie(),setup:function(e,S){var P=S.slots,o=S.attrs,m=F("avatar-group",e),y=m.prefixCls,x=m.direction;return re(e),function(){var l,h=e.maxPopoverPlacement,j=h===void 0?"top":h,p=e.maxCount,k=e.maxStyle,n=e.maxPopoverTrigger,A=n===void 0?"hover":n,c=(l={},i(l,y.value,!0),i(l,"".concat(y.value,"-rtl"),x.value==="rtl"),i(l,"".concat(o.class),!!o.class),l),T=G(P,e),v=Z(T).map(function(r,s){return ee(r,{key:"avatar-key-".concat(s)})}),C=v.length;if(p&&p<C){var a=v.slice(0,p),t=v.slice(p,C);return a.push(u(oe,{key:"avatar-popover-key",content:t,trigger:A,placement:j,overlayClassName:"".concat(y.value,"-popover")},{default:function(){return[u(O,{style:k},{default:function(){return["+".concat(C-p)]}})]}})),u("div",d(d({},o),{},{class:c,style:o.style}),[a])}return u("div",d(d({},o),{},{class:c,style:o.style}),[v])}}});O.Group=W;O.install=function(g){return g.component(O.name,O),g.component(W.name,W),g};export{O as A};
