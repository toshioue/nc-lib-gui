const __vite__fileDeps=["./CFVpXKHU.js","./nEPQs079.js","./entry.B8GgT5QA.css","./CINLm5KA.js","./Cy50pBgZ.js","./BdIpmjdG.js","./ByzT15Y-.js","./BQQOEPN4.js","./COktFmkf.js","./DKtVUO_j.js","./DzMAdbS0.js","./QHUCxglU.js","./links.C8uCzV-l.css","./C3R8onno.js","./RichText.M7uMQ9pA.css","./CAANIJCe.js","./BQDKbNwe.js","./VirtualCell.CZh3Dt_h.css","./gBj2Viq1.js","./DVCdQBfZ.js","./-Hb63wRq.js","./DlJISsR5.js","./boyBAVNN.js","./DAFLhYLz.js","./Cell.DV_4HH8i.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{o as a,c as u,a as n,f as We,gr as Xe,at as et,r as h,av as ze,gs as tt,g as B,gt as st,ad as I,i as ot,gu as at,P as e,al as Fe,d4 as j,U as k,S as c,t as l,b as r,cd as nt,w as d,d as v,a7 as lt,Y as it,fG as rt,T,cU as ut,cD as dt,a8 as mt,d9 as Ce,Q as ct,Z as Q,$ as ft,a2 as _t,ap as pt,aI as vt,gv as yt,gw as gt,a5 as J,_ as bt}from"./nEPQs079.js";import{_ as ht,a as xt}from"./D8pjT_gq.js";import kt from"./CsDrjaMN.js";import{a as wt}from"./Q43kH38b.js";import{u as $t}from"./B00EKCmm.js";import{F as St}from"./BzWD3wIg.js";import{_ as zt}from"./DGtfac4d.js";import{_ as Ft}from"./5fs2TD9N.js";import"./D8Zaht4D.js";import"./Da9qXxB4.js";import"./DLssrORw.js";import"./-Hb63wRq.js";import"./DlJISsR5.js";import"./BQDKbNwe.js";import"./boyBAVNN.js";import"./DAFLhYLz.js";import"./DVCdQBfZ.js";import"./C3R8onno.js";import"./vtnM0-E2.js";import"./CZJAloFU.js";import"./DQ9lOBun.js";import"./DYYbRAhI.js";import"./COktFmkf.js";import"./BTGvCRQH.js";const Ct={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Tt=n("path",{fill:"currentColor",d:"m9 18l-6-6l6-6l1.4 1.4L6.8 11H19V7h2v6H6.8l3.6 3.6z"},null,-1),Dt=[Tt];function At(f,N){return a(),u("svg",Ct,[...Dt])}const Lt={name:"material-symbols-keyboard-return",render:At},Vt={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Pt=n("path",{fill:"currentColor",d:"M15 18v-6h2.17L12 6.83L6.83 12H9v6zM12 4l10 10h-5v6H7v-6H2z"},null,-1),Rt=[Pt];function Mt(f,N){return a(),u("svg",Vt,[...Rt])}const Bt={name:"mdi-apple-keyboard-shift",render:Mt},It=Q(()=>J(()=>import("./CFVpXKHU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url).then(f=>f.default||f)),jt=Q(()=>J(()=>import("./CAANIJCe.js"),__vite__mapDeps([15,1,2,16,13,17]),import.meta.url).then(f=>f.default||f)),Nt=Q(()=>J(()=>import("./gBj2Viq1.js"),__vite__mapDeps([18,1,2,19,20,21,16,22,23,13,24]),import.meta.url).then(f=>f.default||f)),qt={class:"h-full"},Et={class:"survey md:p-0 w-full h-full flex flex-col max-w-[max(33%,688px)] mx-auto mb-4rem lg:mb-10rem"},Ht={key:0,class:"my-auto"},Ut={class:"rounded-3xl border-1 border-gray-200 p-6 lg:p-12 bg-white"},Gt={class:"text-2xl font-bold text-gray-900 mb-4","data-testid":"nc-survey-form__heading"},Ot={key:0,class:"flex flex-col justify-center items-center text-center"},Kt={key:1},Yt={key:0,class:"mt-16 w-full flex justify-between items-center flex-wrap gap-3"},Zt={key:0,class:"text-sm text-gray-500 dark:text-slate-300 m-0"},Qt={class:"flex-1 self-end flex justify-end"},Jt={key:0},Wt={class:"flex justify-end mt-12"},Xt={class:"flex items-center gap-3"},es={class:"hidden md:flex text-sm items-center gap-1 text-gray-800"},ts={class:"select-none text-gray-500 mb-4 md:mb-2","data-testid":"nc-survey-form__footer"},ss={key:0,class:"flex flex-col gap-2"},os={class:"nc-form-column-label text-sm font-semibold text-gray-800","data-testid":"nc-form-column-label"},as={key:0,class:"text-red-500 text-base leading-[18px]"},ns={key:0,class:"nc-form-column-description text-gray-500 text-sm","data-testid":"nc-survey-form__field-description"},ls={class:"flex flex-col gap-2 text-slate-500 dark:text-slate-300 text-xs my-2 px-1"},is={key:0,class:"hidden text-sm text-gray-500 md:flex flex-wrap items-center"},rs={class:"ml-1 mt-4 flex w-full text-lg"},us={class:"flex-1 flex justify-end"},ds={key:0},ms={key:1,class:"flex items-center gap-3"},cs={class:"md:absolute md:bottom-0 md:left-0 md:right-0 md:px-4 md:pb-4 lg:px-10 lg:pb-10"},fs={class:"flex justify-end items-center gap-4"},_s={class:"flex justify-center"},ps={key:0,class:"flex items-center gap-3"},vs={class:"text-lg font-bold"},ys={class:"mt-1 text-sm"},gs={class:"flex justify-end mt-7 gap-x-2"},bs=We({__name:"survey",setup(f){const{md:N}=Xe(yt),{formState:w,formColumns:D,submitForm:Te,submitted:y,secondsRemain:De,sharedFormView:m,sharedViewMeta:Ae,onReset:Le,validateInfos:W,validate:Ve,clearValidate:Pe,isRequired:Re,handleAddMissingRequiredFieldDefaultState:Me,fieldMappings:$}=wt(),{isMobileMode:_}=et($t()),q=h(!1),A=h("left"),E=h("arrow-right"),L=h(!1),g=h(!1),b=h(!1),H=h(),X=h();ze(gt,H),ze(tt,h(!0));const V=B(()=>Ae.value.transitionDuration||100),ee=B(()=>D.value?D.value.reduce((t,s)=>{const i=s.label||s.title;return i&&t.push(i),t},[]):[]),{index:te,goToPrevious:Be,goToNext:Ie,isFirst:se,isLast:P,goTo:je}=st(ee),o=B(()=>{var t;return(t=D.value)==null?void 0:t[te.value]}),R=B(()=>{var t,s;return(t=o.value)!=null&&t.title?((s=W[$.value[o.value.title]])==null?void 0:s.validateStatus)==="error":!1});function U(t){q.value=!0,A.value=t,setTimeout(()=>{A.value=A.value==="left"?"right":"left"},V.value/2),setTimeout(()=>{q.value=!1,setTimeout(O,100)},V.value)}function oe(t){E.value=t,L.value=!0,setTimeout(()=>{L.value=!1},V.value/2)}const M=async t=>{try{return await Ve($.value[t]),!0}catch{return!1}};async function S(t){var s;P.value||!g.value||y.value||b.value||!o.value||!o.value.title||(s=o.value)!=null&&s.title&&!await M(o.value.title)||(oe(t||"arrow-right"),setTimeout(()=>{U("left"),Ie()},t==="ok-button"?300:0))}async function G(t){se.value||!g.value||y.value||b.value||(oe(t||"arrow-left"),U("right"),Be())}function O(){var t,s;if(document&&typeof document<"u"){const i=document.querySelector(".nc-cell input")||document.querySelector(".nc-cell textarea")||document.querySelector('.nc-cell [tabindex="0"]');i&&(X.value=i,(t=i==null?void 0:i.select)==null||t.call(i),(s=i==null?void 0:i.focus)==null||s.call(i))}}function ae(){Pe(),y.value=!1,g.value=!1,U("right"),je(ee.value[0])}async function ne(){y.value||(b.value=!1,Te())}Le(ae);const le=()=>{g.value=!0,Me(),setTimeout(()=>{O()},100)},Ne=()=>{(document==null?void 0:document.activeElement)!==X.value&&O()},ie=async()=>{var t;(t=o.value)!=null&&t.title&&!await M(o.value.title)||(b.value=!0,setTimeout(()=>{var s,i;(s=document.querySelector('.nc-survery-form__confirmation_modal div[tabindex="0"]'))==null||s.focus(),(i=document.querySelector(".nc-survey-form-btn-submit.nc-button"))==null||i.focus()},50))};return I(["ArrowLeft","ArrowDown"],()=>{_.value||G("arrow-left")}),I(["ArrowRight","ArrowUp"],()=>{_.value||S("arrow-right")}),I(["Enter"],async t=>{if(!(_.value||y.value)){if(!g.value&&!y.value)le();else if(g.value)if(P.value)b.value?ne():(t.preventDefault(),ie());else{const s=document.activeElement;if(s!=null&&s.classList&&s.classList.contains("nc-survey-form__btn-next"))return;S("ok-button")}}}),I("Escape",()=>{var t,s;document&&((s=(t=document.activeElement)==null?void 0:t.blur)==null||s.call(t))}),ot(()=>{if(!N.value){const{direction:t}=at(H,{onSwipe:()=>{q.value||(t.value==="left"?S():t.value==="right"&&G())}})}}),(t,s)=>{var re,ue,de,me,ce,fe,_e,pe,ve,ye;const i=ht,K=It,Y=ft,qe=zt,x=_t,Ee=jt,He=Nt,Ue=kt,Ge=Ft,Oe=Bt,Ke=Lt,Ye=pt,Ze=St,Qe=xt,Je=vt;return a(),u("div",qt,[n("div",Et,[e(m)?(a(),u("div",Ht,[!e(g)||e(y)?(a(),u(Fe,{key:0},[e(m)&&!("parseProp"in t?t.parseProp:e(j))((re=e(m))==null?void 0:re.meta).hide_banner?(a(),k(i,{key:0,"banner-image-url":e(m).banner_image_url,class:"flex-none mb-4"},null,8,["banner-image-url"])):c("",!0),n("div",Ut,[n("h1",Gt,l(e(m).heading),1),e(y)?(a(),u("div",Ot,[r(qe,{class:"nc-survey-form__success-msg !p-4 !rounded-lg text-left w-full !bg-white !border-gray-200 !items-start",type:"success","data-testid":"nc-survey-form__success-msg",outlined:"","show-icon":""},nt({message:d(()=>{var p,z,F;return[(z=(p=e(m))==null?void 0:p.success_msg)!=null&&z.trim()?(a(),k(K,{key:0,value:(F=e(m))==null?void 0:F.success_msg,class:"!h-auto -ml-1","is-form-field":"","read-only":"","sync-value-change":""},null,8,["value"])):(a(),u("span",Kt,l(t.$t("msg.info.thankYou")),1))]}),icon:d(()=>[n("div",null,[r(Y,{icon:"circleCheck2",class:"text-[#27D665]"})])]),_:2},[(de=(ue=e(m))==null?void 0:ue.success_msg)!=null&&de.trim()?void 0:{name:"description",fn:d(()=>[v(l(t.$t("msg.info.submittedFormData")),1)]),key:"0"}]),1024),e(m).show_blank_form||e(m).submit_another_form?(a(),u("div",Yt,[(me=e(m))!=null&&me.show_blank_form?(a(),u("p",Zt,l(t.$t("labels.newFormLoaded"))+" "+l(e(De))+" "+l(t.$t("general.seconds").toLowerCase()),1)):c("",!0),n("div",Qt,[(ce=e(m))!=null&&ce.submit_another_form?(a(),k(x,{key:0,type:"secondary",size:e(_)?"medium":"small","data-testid":"nc-survey-form__btn-submit-another-form",onClick:ae},{default:d(()=>[v(l(t.$t("activity.submitAnotherForm")),1)]),_:1},8,["size"])):c("",!0)])])):c("",!0)])):e(g)?c("",!0):(a(),u(Fe,{key:1},[(fe=e(m).subheading)!=null&&fe.trim()?(a(),u("div",Jt,[r(K,{value:e(m).subheading,class:"font-medium text-base text-gray-500 dark:text-slate-300 !h-auto mb-4 -ml-1","is-form-field":"","read-only":"","sync-value-change":"","data-testid":"nc-survey-form__sub-heading"},null,8,["value"])])):c("",!0),n("div",Wt,[n("div",Xt,[n("div",es,[n("span",null,l(t.$t("labels.pressEnter"))+" ↵ ",1)]),r(x,{size:e(_)?"medium":"small","data-testid":"nc-survey-form__fill-form-btn",onClick:s[0]||(s[0]=p=>le())},{default:d(()=>[v(" Fill Form ")]),_:1},8,["size"])])])],64))])],64)):c("",!0),e(g)&&!e(y)?(a(),k(dt,{key:1,name:`slide-${e(A)}`,duration:e(V),mode:"out-in"},{default:d(()=>[r(Ze,{model:e(w)},{default:d(()=>{var p,z,F,ge,be;return[(a(),u("div",{ref_key:"el",ref:H,key:(p=e(o))==null?void 0:p.title,class:"flex flex-col gap-4 w-full m-auto rounded-xl border-1 border-gray-200 bg-white p-6 lg:p-12"},[n("div",ts,l(e(te)+1)+" / "+l((z=e(D))==null?void 0:z.length),1),e(o)?(a(),u("div",ss,[n("div",os,[n("span",null,l(e(o).label||e(o).title),1),e(Re)(e(o))?(a(),u("span",as," *")):c("",!0)]),(F=e(o))!=null&&F.description?(a(),u("div",ns,[r(K,{value:(ge=e(o))==null?void 0:ge.description,class:"!h-auto -ml-1","is-form-field":"","read-only":"","sync-value-change":""},null,8,["value"])])):c("",!0),r(Ye,{disabled:!((be=e(o))!=null&&be.read_only)},{title:d(()=>[v(l(t.$t("activity.preFilledFields.lockedFieldTooltip")),1)]),default:d(()=>[e(o).title&&e($)[e(o).title]?(a(),k(Ge,lt({key:0,name:e($)[e(o).title],class:"!my-0 nc-input-required-error"},e(W)[e($)[e(o).title]]),{default:d(()=>[r(Ue,{class:"relative nc-form-data-cell",onClick:it(Ne,["stop"])},{default:d(()=>{var Z,he,xe,ke,we,$e,Se;return[e(rt)(e(o))?(a(),k(Ee,{key:0,modelValue:e(w)[e(o).title],"onUpdate:modelValue":[s[1]||(s[1]=C=>e(w)[e(o).title]=C),s[2]||(s[2]=C=>M(e(o).title))],class:T(["mt-0 nc-input h-auto",{readonly:(Z=e(o))==null?void 0:Z.read_only}]),row:{row:{},oldRow:{},rowMeta:{}},"data-testid":`nc-survey-form__input-${e(o).title.replaceAll(" ","")}`,column:e(o),"read-only":(he=e(o))==null?void 0:he.read_only},null,8,["modelValue","class","data-testid","column","read-only"])):(a(),k(He,{key:1,modelValue:e(w)[e(o).title],"onUpdate:modelValue":[s[3]||(s[3]=C=>e(w)[e(o).title]=C),s[4]||(s[4]=C=>M(e(o).title))],class:T(["nc-input h-auto",{"layout-list":(ke=("parseProp"in t?t.parseProp:e(j))((xe=e(o))==null?void 0:xe.meta))==null?void 0:ke.isList,readonly:(we=e(o))==null?void 0:we.read_only}]),"data-testid":`nc-survey-form__input-${e(o).title.replaceAll(" ","")}`,column:e(o),"edit-enabled":!(($e=e(o))!=null&&$e.read_only),"read-only":(Se=e(o))==null?void 0:Se.read_only},null,8,["modelValue","class","data-testid","column","edit-enabled","read-only"]))]}),_:1})]),_:1},16,["name"])):c("",!0),n("div",ls,[e(o).uidt===e(ut).LongText?(a(),u("div",is,[v(l(t.$t("general.shift"))+" ",1),r(Oe,{class:"mx-1 text-primary"}),v(" + "+l(t.$t("general.enter"))+" ",1),r(Ke,{class:"mx-1 text-primary"}),v(" "+l(t.$t("msg.info.makeLineBreak")),1)])):c("",!0)])]),_:1},8,["disabled"])])):c("",!0),n("div",rs,[n("div",us,[e(P)?(a(),u("div",ds,[r(x,{size:e(_)?"medium":"small",class:T(e(E)==="submit-button"&&e(L)?"transform translate-y-[1px] translate-x-[1px] ring ring-accent ring-opacity-100":""),disabled:e(R),"data-testid":"nc-survey-form__btn-submit-confirm",onClick:ie},{default:d(()=>[v(l(t.$t("general.submit"))+" form ",1)]),_:1},8,["size","class","disabled"])])):(a(),u("div",ms,[n("div",{class:T(["hidden md:flex text-sm items-center gap-1",e(R)?"text-gray-200":"text-gray-800"])},[n("span",null,l(t.$t("labels.pressEnter"))+" ↵ ",1)],2),r(x,{size:e(_)?"medium":"small","data-testid":"nc-survey-form__btn-next",class:T(["nc-survey-form__btn-next",[e(E)==="ok-button"&&e(L)?"transform translate-y-[2px] translate-x-[2px] !after:ring !after:ring-accent !after:ring-opacity-100":""]]),disabled:e(R),onClick:s[5]||(s[5]=Z=>S())},{default:d(()=>[v(l(t.$t("labels.next")),1)]),_:1},8,["size","class","disabled"])]))])])]))]}),_:1},8,["model"])]),_:1},8,["name","duration"])):c("",!0)])):c("",!0),n("div",cs,[n("div",fs,[n("div",_s,[r(Qe,{class:"inline-flex mx-auto",style:mt({color:e(Ce).isReadable(((pe=("parseProp"in t?t.parseProp:e(j))((_e=e(m))==null?void 0:_e.meta))==null?void 0:pe.background_color)||"#F9F9FA","#D5D5D9",{level:"AA",size:"large"})?"#fff":e(Ce).mostReadable(((ye=("parseProp"in t?t.parseProp:e(j))((ve=e(m))==null?void 0:ve.meta))==null?void 0:ye.background_color)||"#F9F9FA",["#374151","#D5D5D9"]).toHex8String()})},null,8,["style"])]),e(g)&&!e(y)?(a(),u("div",ps,[r(x,{type:"secondary",size:e(_)?"medium":"small","data-testid":"nc-survey-form__icon-prev",disabled:e(se),onClick:s[6]||(s[6]=p=>G())},{default:d(()=>[r(Y,{icon:"ncArrowLeft"})]),_:1},8,["size","disabled"]),r(x,{size:e(_)?"medium":"small",type:"secondary","data-testid":"nc-survey-form__icon-next",disabled:e(P)||e(R),onClick:s[7]||(s[7]=p=>S())},{default:d(()=>[r(Y,{icon:"ncArrowRight"})]),_:1},8,["size","disabled"])])):c("",!0)])])]),r(Je,{visible:e(b),"onUpdate:visible":s[9]||(s[9]=p=>ct(b)?b.value=p:null),size:"small",class:"nc-survery-form__confirmation_modal"},{default:d(()=>[n("div",null,[n("div",vs,l(t.$t("general.submit"))+" "+l(t.$t("objects.viewType.form")),1),n("div",ys,l(t.$t("title.surveyFormSubmitConfirmMsg")),1),n("div",gs,[r(x,{type:"secondary",size:e(_)?"medium":"small",onClick:s[8]||(s[8]=p=>b.value=!1)},{default:d(()=>[v(l(t.$t("general.back")),1)]),_:1},8,["size"]),r(x,{type:"primary",size:e(_)?"medium":"small","data-testid":"nc-survey-form__btn-submit",class:"nc-survey-form-btn-submit",onClick:ne},{default:d(()=>[v(l(t.$t("general.submit")),1)]),_:1},8,["size"])])])]),_:1},8,["visible"])])}}}),Us=bt(bs,[["__scopeId","data-v-66edca5b"]]);export{Us as default};
