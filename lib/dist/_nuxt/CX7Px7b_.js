import{gs as R,N as D,r as J,g as P,cs as f,gt as V,gu as x,g4 as A}from"./Cgw6cdOy.js";function G(d){const k=R(),{user:n}=D(),i=J({}),u="userSortConfig",p="default",O=P(()=>i.value.field?{[i.value.field]:i.value.direction}:{});function w(){var l;try{const e=localStorage.getItem(u),o=e?JSON.parse(e):{};if(o&&N(o))i.value=(l=n.value)!=null&&l.id?o[n.value.id]||{}:o[p]||{};else throw new Error("Invalid sort config stored in local storage")}catch(e){console.error(e),localStorage.removeItem(u),i.value={}}}function v(l){var e;try{l.field&&l.direction?i.value={...l}:i.value={};const o=localStorage.getItem(u),c=o?JSON.parse(o):{};(e=n.value)!=null&&e.id?i.value.field?c[n.value.id]=i.value:delete c[n.value.id]:c[p]=i.value,localStorage.setItem(u,JSON.stringify(c))}catch(o){console.error("Error while saving sort configuration into local storage:",o)}}function U(l,e=i.value){let o=[];d==="Workspace"?o=Object.values(V):d==="Org"?o=Object.values(x):d==="Project"?o=Object.values(A):d==="Organization"&&(o=Object.values(x)),l=k(l);const c=l.findIndex(r=>{var t;return(t=r==null?void 0:r.roles)==null?void 0:t.includes("super")}),s=e.field==="roles"&&c!==-1?l.splice(c,1):null;let a=l.sort((r,t)=>{var m,S,g,h,j,y;switch(e.field){case"roles":{const I=(m=r==null?void 0:r.roles)==null?void 0:m.split(",")[0],$=(S=t==null?void 0:t.roles)==null?void 0:S.split(",")[0];return e.direction==="asc"?o.indexOf(I)-o.indexOf($):o.indexOf($)-o.indexOf(I)}case"email":case"title":return e.direction==="asc"?(g=r[e.field])==null?void 0:g.localeCompare(t[e.field]):(h=t[e.field])==null?void 0:h.localeCompare(r[e.field]);case"baseCount":case"workspaceCount":case"memberCount":return e.direction==="asc"?r[e.field]-t[e.field]:t[e.field]-r[e.field];case"webhook-operation-type":return e.direction==="asc"?(j=`${r==null?void 0:r.event} ${r==null?void 0:r.operation}`)==null?void 0:j.localeCompare(`${t==null?void 0:t.event} ${t==null?void 0:t.operation}`):(y=`${t==null?void 0:t.event} ${t==null?void 0:t.operation}`)==null?void 0:y.localeCompare(`${r==null?void 0:r.event} ${r==null?void 0:r.operation}`);case"created_at":case"updated_at":return e.direction==="asc"?f(r[e.field]).isAfter(f(t[e.field]))?1:-1:f(r[e.field]).isBefore(f(t[e.field]))?1:-1}return 0});return s&&s.length&&(e.direction==="desc"?a=[...a,s[0]]:a=[s[0],...a]),a}function N(l,e={field:"email",direction:"asc"}){for(const o in l)if(!Object.keys(l[o]).every(s=>Object.prototype.hasOwnProperty.call(e,s)))return!1;return!0}return{sorts:i,sortDirection:O,loadSorts:w,saveOrUpdate:v,handleGetSortedData:U,toggleSort:l=>{i.value.field===l?v({field:l,...O.value[l]==="asc"?{direction:"desc"}:{}}):v({field:l,direction:"asc"})}}}export{G as u};
