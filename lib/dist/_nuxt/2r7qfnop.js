import{f as B,bL as d,r,d1 as I,c$ as L,N as V,g as j,H as A,av as E,iN as U,h9 as $,O,o as a,U as p,w as c,b as R,P as o,Q as u,R as T,a as f,V as z,W,c as _,t as v,S as b,a2 as G}from"./nEPQs079.js";import{u as H,_ as P}from"./Cfx2TEd-.js";import{_ as Q}from"./CNqbIxb7.js";import{a as q}from"./vKaAFL5T.js";import{u as J}from"./BEYj_-yX.js";import"./BMD-JIxU.js";import"./C6cwFr3C.js";import"./BLh6tVRa.js";import"./CFgyk-dW.js";import"./BTGvCRQH.js";import"./BQQOEPN4.js";import"./BLe4UTYD.js";import"./DKtVUO_j.js";import"./COktFmkf.js";import"./BT21mFZ1.js";import"./CBZqTOye.js";import"./BQDKbNwe.js";import"./-QMWbHL6.js";import"./C3R8onno.js";import"./BfMXOlc4.js";import"./-Hb63wRq.js";import"./CYu6Kf_H.js";import"./B_7Ene6-.js";import"./ewl_ufim.js";import"./C9R3Q-Om.js";import"./Dmq5P-i4.js";import"./Cwi5HJ7W.js";import"./D1dziB-Q.js";import"./BfnA8LRy.js";import"./ClpduYIx.js";import"./Bv9djkpM.js";import"./CHh-C6eU.js";import"./Cu3lhPi8.js";import"./D6_kpLPV.js";import"./2NhaBEFX.js";import"./DYhgEkYp.js";import"./CqTMwiX3.js";import"./Dx63eTJe.js";import"./C9Sjn86N.js";import"./9yatSdy-.js";import"./Nsvr85os.js";import"./thQq3bvt.js";import"./DSHyCFdP.js";import"./C-inYSwB.js";import"./BPsUaRVE.js";import"./BhDU9nPO.js";import"./1Vva10SY.js";import"./DEj7mPxe.js";const K={class:"flex items-center gap-1"},X={class:"flex items-center gap-2"},Y={key:0,class:"text-capitalize !text-[13px] font-medium"},Z={key:0,class:"bg-brand-50 text-brand-500 py-1 px-2 text-md rounded-md"},Jt=B({__name:"ColumnFilterMenu",setup(tt){const h=d(I,r(!1)),n=d(L,r()),{isMobileMode:y}=V(),k=r(),{nestedFilters:F,eventBus:w}=q(),{nonDeletedFilters:g,loadFilters:x}=H(n,void 0,j(()=>!0),()=>!1,F.value,!0),l=r(0);A(()=>{var t;return(t=n==null?void 0:n.value)==null?void 0:t.id},async t=>{t&&(await x({hookId:void 0,isWebhook:!1,loadAllFilters:!0}),l.value=g.value.length||0)},{immediate:!0});const i=r(!1),C=r({});E(U,C),J(i);const m=r({});return w.on(async(t,e)=>{e&&t===$.FILTER_ADD&&(m.value={fk_column_id:e.id},i.value=!0)}),(t,e)=>{const D=G,M=P,N=Q,S=O("e");return a(),p(N,{visible:o(i),"onUpdate:visible":e[2]||(e[2]=s=>u(i)?i.value=s:null),trigger:["click"],"overlay-class-name":"nc-dropdown-filter-menu nc-toolbar-dropdown",class:"!xs:hidden"},{overlay:c(()=>[R(M,{ref_key:"filterComp",ref:k,"draft-filter":o(m),"onUpdate:draftFilter":e[0]||(e[0]=s=>u(m)?m.value=s:null),class:"nc-table-toolbar-menu","auto-save":!0,"data-testid":"nc-filter-menu","is-open":o(i),"onUpdate:filtersLength":e[1]||(e[1]=s=>l.value=s)},null,8,["draft-filter","is-open"])]),default:c(()=>[T((a(),p(D,{disabled:o(h),class:"nc-filter-menu-btn nc-toolbar-btn !border-0 !h-7",size:"small",type:"secondary"},{default:c(()=>[f("div",K,[f("div",X,[(a(),p(z(("iconMap"in t?t.iconMap:o(W)).filter),{class:"h-4 w-4"})),o(y)?b("",!0):(a(),_("span",Y,v(t.$t("activity.filter")),1))]),o(l)?(a(),_("span",Z,v(o(l)),1)):b("",!0)])]),_:1},8,["disabled"])),[[S,["c:filter"]]])]),_:1},8,["visible"])}}});export{Jt as default};
