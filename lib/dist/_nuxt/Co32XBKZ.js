const __vite__fileDeps=["./hZgTYrdl.js","./DZZ6t_j4.js","./entry.DIDWwc7m.css","./ByVBARmO.js","./DqfcYikc.js","./sz1d3zjm.js","./MenuItem.C7h59s4s.css","./YB9ISZhn.js","./BLgccLvp.js","./Menu.CQ8GNWeI.css","./xByXWphG.js","./37hePIet.js","./C4K5fdHe.js","./BqKQ8afS.js","./DgixBgIx.js","./DeleteModal.SEMJ_gSK.css","./CXD-Dj4T.js","./B05h-4V9.js","./GMLocJHP.js","./DNgdBwTe.js","./eX8_g88K.js","./vll-Pnjv.js","./0azk-b-q.js","./CS2EbUee.js","./i4aLU0Nw.js","./BIg_TdrP.js","./BDAIZopQ.js","./Menu.BYiVnS-k.css","./T8gL-mZl.js","./CvFIzJau.js","./BVrX6sNU.js","./DKN1hQ6S.js","./BQuyMdA-.js","./BQQOEPN4.js","./B5RRVMt5.js","./DGj1ycqW.js","./DyDFI6NE.js","./d-K880gs.js","./vK-WmZ7a.js","./C3jLTHF4.js","./BYINaHrJ.js","./dfem9Uc_.js","./BCJFTkwv.js","./D9tFZoTQ.js","./3mkq4YHx.js","./Dg0-TbNo.js","./t0mbNaqp.js","./9ZvwAtsX.js","./SelectOptions.JaHDUZhn.css","./CwK0k4WN.js","./toggleHighContrast.wojAGmRG.css","./amsYJsUh.js","./DLDZbX8i.js","./oyD85nwD.js","./D_MsYLkT.js","./CB1aB6F1.js","./B8iX-Tu_.js","./Cz_1GoV3.js","./CJNscGy3.js","./CDWovrGB.js","./Switch.CEh6YzqD.css","./CFvUUxCy.js","./Ck-cgwga.js","./Tabs.DaLSLYpn.css","./C9Sjn86N.js","./CynerQ2m.js","./DnSVh-oD.js","./Select.C8Fy0-eI.css","./CR5b0rlC.js","./ListWithSearch.PmKyjXoQ.css","./B4ZLG6hR.js","./CyRMlOXW.js","./Bdv7ru7D.js","./index.E0_BHHK8.css","./BJrIHEse.js","./C3XbZq4f.js","./EditOrAddProvider.4Uf-_8RE.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e as De,ag as Le,a5 as pe,ax as Ae,cL as Fe,f as k,L as Ve,r as p,bL as $,d8 as Be,az as Ne,g2 as Pe,cW as je,J as ze,d7 as He,i2 as Se,aD as Ue,ha as We,id as qe,fE as H,ii as Ge,c$ as S,dc as Ke,ie as U,g3 as Je,F as Qe,o as n,c as m,a as W,N as e,ao as q,Q as D,w as E,d as Xe,t as G,b as K,R as g,at as Ye,S as V,O as ve,W as B,X as J,a4 as Q,ig as Ze,$ as el,Y as ll,ae as tl,_ as al}from"./DZZ6t_j4.js";import{c as fe,b as me,d as _e,e as ol,g as ye}from"./ByVBARmO.js";import{b as sl}from"./BDAIZopQ.js";const nl=J(()=>Q(()=>import("./hZgTYrdl.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(v=>v.default||v)),il=J(()=>Q(()=>import("./DqfcYikc.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10,0,3,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url).then(v=>v.default||v)),ul=J(()=>Q(()=>import("./T8gL-mZl.js"),__vite__mapDeps([28,29,1,2,14,15,7,30,31,32,33,21,34,35,36,0,3,11,12,37,38,39,40,41,42,43,44,45,46,47,48,26,49,50,51,52,53,54,55,56,57,58,59,60,61,20,62,63,24,18,64,16,65,66,67,68,69,70,71,72,73,22,74,75,76]),import.meta.url).then(v=>v.default||v)),rl=["data-test-id"],dl={key:1,class:"text-red-500"},cl={key:0,class:"flex-1"},pl={key:1},vl={class:"nc-edit-or-add-provider-wrapper"},fl=De({__name:"VirtualCell",props:{column:{},hideMenu:{type:Boolean},required:{type:[Boolean,Number]},hideIcon:{type:Boolean},isHiddenCol:{type:Boolean}},setup(v){const N=v,{t:L}=Le(),l=pe(N,"column"),{base:be,tables:he}=Ae(Fe()),ke=k(()=>{var t,a;return(a=(t=be.value)==null?void 0:t.sources)==null?void 0:a.some(o=>{var c;return o.id===((c=l.value)==null?void 0:c.source_id)&&!o.is_meta&&!o.is_local})}),Oe=pe(N,"hideMenu"),{isMobileMode:I}=Ve(),s=p(!1),r=p(!1),A=p(!1),X=$(Be,p(!1));Ne(Pe,l);const{metas:P}=je(),{isUIAllowed:T,isMetaReadOnly:we}=ze(),d=$(He,p()),xe=$(Se,p(!1)),j=$(Ue,p(!1)),u=$(We,p(!1)),f=$(qe,p(!1)),z=k(()=>{var t;return(t=d==null?void 0:d.value)==null?void 0:t.title}),Y=k(()=>{var t,a,o,c,O,w;return H(l.value)?(t=l.value)==null?void 0:t.colOptions:(o=(a=l==null?void 0:l.value)==null?void 0:a.colOptions)!=null&&o.fk_relation_column_id?(w=(O=(c=d==null?void 0:d.value)==null?void 0:c.columns)==null?void 0:O.find(C=>{var x,_;return C.id===((_=(x=l==null?void 0:l.value)==null?void 0:x.colOptions)==null?void 0:_.fk_relation_column_id)}))==null?void 0:w.colOptions:null}),ge=k(()=>{var t,a,o;return((t=Y.value)==null?void 0:t.fk_related_model_id)&&((o=P.value)==null?void 0:o[(a=Y.value)==null?void 0:a.fk_related_model_id])}),M=k(()=>{var t;return(t=ge.value)==null?void 0:t.title}),Ie=k(()=>{var a,o,c,O,w,C,x,_,y,te,ae,oe,se,ne,ie,ue,re,de,ce;if(!l.value)return"";let t="";if(H(l.value)&&M.value&&ke.value){if(fe(l.value)){const i=((a=he.value)==null?void 0:a.find(R=>{var b,h;return R.id===((h=(b=l.value)==null?void 0:b.colOptions)==null?void 0:h.fk_mm_model_id)}))||((O=P.value)==null?void 0:O[(c=(o=l.value)==null?void 0:o.colOptions)==null?void 0:c.fk_mm_model_id]);t=i?`
Junction Table: ${i.title}`:""}else if(me(l.value)){const i=(y=(_=(x=P.value)==null?void 0:x[(C=(w=l.value)==null?void 0:w.colOptions)==null?void 0:C.fk_related_model_id])==null?void 0:_.columns)==null?void 0:y.find(R=>{var b,h;return R.id===((h=(b=l.value)==null?void 0:b.colOptions)==null?void 0:h.fk_child_column_id)});t=(te=i==null?void 0:i.title)!=null&&te.startsWith("nc_")?"":`
Foreign Key Column: ${i.title}`}else if(_e(l.value)){const i=(ae=d.value)==null?void 0:ae.find(R=>{var b,h;return R.id===((h=(b=l.value)==null?void 0:b.colOptions)==null?void 0:h.fk_child_column_id)});t=(oe=i==null?void 0:i.title)!=null&&oe.startsWith("nc_")?"":`
Foreign Key Column: ${i.title}`}}return me(l.value)?`'${z.value}' ${L("labels.hasMany")} '${M.value}'${t}`:fe(l.value)?`'${z.value}' & '${M.value}' ${L("labels.manyToMany")}${t}`:_e(l.value)?`'${(se=l==null?void 0:l.value)==null?void 0:se.title}' ${L("labels.belongsTo")} '${M.value}'${t}`:ol(l.value)?`'${z.value}' & '${M.value}' ${L("labels.oneToOne")}${t}`:ye(l.value)?`Formula - ${Ge((ie=(ne=l.value)==null?void 0:ne.colOptions)==null?void 0:ie.formula,(ue=d==null?void 0:d.value)==null?void 0:ue.columns,(de=(re=l.value)==null?void 0:re.colOptions)==null?void 0:de.formula_raw)}`:((ce=l==null?void 0:l.value)==null?void 0:ce.title)||""}),Te=k(()=>H(l.value)||ye(l.value)),F=p(null),Ce=k(()=>{var t,a,o;return l.value.uidt===S.LongText&&((a=Ke((t=l==null?void 0:l.value)==null?void 0:t.meta))!=null&&a.richMode)?U.RichText:l.value.uidt===S.LinkToAnotherRecord&&((o=l.value.colOptions)==null?void 0:o.type)===Je.ONE_TO_ONE?U[S.Links]:l.value.uidt?U[l.value.uidt]:""}),$e=async t=>{F.value=t,s.value=!0},Z=p(),ee=()=>{F.value=null,s.value=!1};Qe(s,t=>{t||(A.value=!1)});const le=(t,a=!1)=>{X.value||u.value&&(t==null?void 0:t.type)==="dblclick"||f.value||!j.value&&T("fieldEdit")&&!I.value&&(!we.value||Ze.includes(l.value.uidt))&&(a&&(A.value=!0),s.value=!0)},Ee=t=>{X.value||j.value||!T("fieldEdit")&&!I.value||(t.preventDefault(),t.stopPropagation(),r.value=!r.value)},Me=()=>{var t;s.value=!0,(t=Z.value)!=null&&t.isWebHookModalOpen()||(s.value=!1,A.value=!1)},Re=t=>{if(!(I.value||!T("fieldEdit"))){if(r.value)t.preventDefault(),t.stopPropagation();else if(u.value&&!s.value&&!f.value){r.value=!0;return}r.value=!1}};return(t,a)=>{var _;const o=nl,c=el,O=ll,w=il,C=ul,x=tl;return n(),m("div",{class:V(["flex items-center w-full h-full text-small text-gray-500 font-weight-medium group",{"flex-col !items-start justify-center pt-0.5":e(u)&&!e(I)&&!e(f),"bg-gray-100":e(u)&&!e(f)?e(s)||e(r):!1,"nc-cell-expanded-form-header cursor-pointer hover:bg-gray-100":e(u)&&!e(I)&&e(T)("fieldEdit")&&!e(f)}]),onDblclick:le,onContextmenu:B(Ee,["right"]),onClick:Re},[W("div",{class:V(["nc-virtual-cell-name-wrapper flex-1 flex items-center",{"max-w-[calc(100%_-_23px)]":!e(u),"max-w-full":e(u)&&!e(f)}])},[e(l)&&!N.hideIcon?(n(),m(q,{key:0},[e(xe)?(n(),D(c,{key:0,class:"flex items-center",placement:"bottom"},{title:E(()=>[Xe(G(e(Ce)),1)]),default:E(()=>[K(o)]),_:1})):(n(),D(o,{key:1}))],64)):g("",!0),K(c,{placement:"bottom",class:"truncate name pl-1","show-on-truncate-only":!e(Te)},{title:E(()=>[(n(!0),m(q,null,Ye(e(Ie).split(`
`),y=>(n(),m("div",null,G(y),1))),256))]),default:E(()=>[W("span",{"data-test-id":e(l).title,class:V({"select-none":e(u)&&!e(f)})},G(e(l).title),11,rl)]),_:1},8,["show-on-truncate-only"]),("isVirtualColRequired"in t?t.isVirtualColRequired:e(sl))(e(l),((_=e(d))==null?void 0:_.columns)||[])||t.required?(n(),m("span",dl," *")):g("",!0),e(u)&&!e(I)&&e(T)("fieldEdit")&&!e(f)?(n(),D(O,{key:2,icon:"arrowDown",class:V(["flex-none cursor-pointer ml-1 group-hover:visible w-4 h-4",{visible:e(s)||e(r),invisible:!(e(s)||e(r))}])},null,8,["class"])):g("",!0)],2),e(Oe)?g("",!0):(n(),m(q,{key:0},[e(u)?g("",!0):(n(),m("div",cl)),!e(j)&&e(T)("fieldEdit")?(n(),D(w,{key:1,"is-open":e(r),"onUpdate:isOpen":a[0]||(a[0]=y=>ve(r)?r.value=y:null),"is-hidden-col":t.isHiddenCol,virtual:!0,onAddColumn:$e,onEdit:le},null,8,["is-open","is-hidden-col"])):g("",!0)],64)),K(x,{visible:e(s),"onUpdate:visible":a[4]||(a[4]=y=>ve(s)?s.value=y:null),class:"h-full",trigger:["click"],placement:e(u)&&!e(f)?"bottomLeft":"bottomRight","overlay-class-name":`nc-dropdown-edit-column ${e(s)?"active":""}`,onVisibleChange:Me},{overlay:E(()=>[W("div",vl,[e(s)?(n(),D(C,{key:0,ref_key:"editOrAddProviderRef",ref:Z,column:e(F)?null:e(l),"column-position":e(F),class:"w-full","edit-description":e(A),onSubmit:ee,onCancel:ee,onClick:a[2]||(a[2]=B(()=>{},["stop"])),onKeydown:a[3]||(a[3]=B(()=>{},["stop"]))},null,8,["column","column-position","edit-description"])):g("",!0)])]),default:E(()=>[e(u)&&!e(f)?(n(),m("div",{key:0,class:"h-[1px]",onDblclick:a[1]||(a[1]=B(()=>{},["stop"]))}," ",32)):(n(),m("div",pl))]),_:1},8,["visible","placement","overlay-class-name"])],34)}}}),bl=al(fl,[["__scopeId","data-v-32f416d9"]]);export{bl as default};
