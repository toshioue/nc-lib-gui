const __vite__fileDeps=["./D_yKRest.js","./nEPQs079.js","./entry.B8GgT5QA.css","./BDH4PFIz.js","./Tabs.DaLSLYpn.css","./AdvanceColorPicker.BztCsLjV.css","./Cfx2TEd-.js","./BMD-JIxU.js","./MenuItem.C7h59s4s.css","./C6cwFr3C.js","./Menu.CQ8GNWeI.css","./CNqbIxb7.js","./BLh6tVRa.js","./CFgyk-dW.js","./BTGvCRQH.js","./BQQOEPN4.js","./BLe4UTYD.js","./DKtVUO_j.js","./COktFmkf.js","./Select.Ct6CicDJ.css","./BT21mFZ1.js","./CBZqTOye.js","./BQDKbNwe.js","./-QMWbHL6.js","./C3R8onno.js","./BfMXOlc4.js","./-Hb63wRq.js","./FieldListAutoCompleteDropdown.B9RfDcmT.css","./CYu6Kf_H.js","./B_7Ene6-.js","./ewl_ufim.js","./C9R3Q-Om.js","./Dmq5P-i4.js","./SingleSelect.BmeB4pF9.css","./Cwi5HJ7W.js","./D1dziB-Q.js","./BfnA8LRy.js","./MultiSelect.u_q_s2XC.css","./ClpduYIx.js","./Bv9djkpM.js","./CHh-C6eU.js","./DateWeekSelector.hHl2dNL4.css","./Cu3lhPi8.js","./DatePicker.DCSpsu3_.css","./D6_kpLPV.js","./YearPicker.CRuVqaLl.css","./2NhaBEFX.js","./DYhgEkYp.js","./TimePicker.BLKBFc8w.css","./CqTMwiX3.js","./Rating.tDPS6ox-.css","./Dx63eTJe.js","./C9Sjn86N.js","./Duration.Dl_1fcHT.css","./9yatSdy-.js","./Nsvr85os.js","./Percent.Bbe9UfL3.css","./thQq3bvt.js","./Currency.DBXjrMnJ.css","./DSHyCFdP.js","./Decimal.G35sucCw.css","./C-inYSwB.js","./Integer.CjSMiUMb.css","./BPsUaRVE.js","./Float.BGqcJqPZ.css","./BhDU9nPO.js","./1Vva10SY.js","./DEj7mPxe.js","./UserIcon.JKLzA6N5.css","./User.NLeV2npS.css","./vKaAFL5T.js","./ColumnFilter.DQRQpMYg.css","./sWN3OXMW.js","./_EDhj-h1.js","./CZJAloFU.js","./BzWD3wIg.js","./5fs2TD9N.js","./DYYbRAhI.js","./0qbEdPZ2.js","./Crc5Dj5L.js","./CbkeA9B5.js","./BdIpmjdG.js","./ByzT15Y-.js","./DzMAdbS0.js","./QHUCxglU.js","./SelectOptions.JaHDUZhn.css","./Du--IU6F.js","./RichLongTextDefaultValue.D5yB1xd8.css","./B9Xhli0z.js","./DVCdQBfZ.js","./DlJISsR5.js","./boyBAVNN.js","./DAFLhYLz.js","./CkgP9LXz.js","./DRxh3NGE.js","./4x_dpF5A.js","./CXv9SGY2.js","./kZl-QFI4.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var wl=Object.defineProperty;var bl=(s,f,y)=>f in s?wl(s,f,{enumerable:!0,configurable:!0,writable:!0,value:y}):s[f]=y;var gt=(s,f,y)=>(bl(s,typeof f!="symbol"?f+"":f,y),y);import{f as ie,ac as re,o as l,U as u,w as n,a as i,Y as _e,V as X,P as e,W as ae,d as L,a6 as xl,b as o,t as C,Q as Y,a2 as rt,ba as Et,r as W,L as bt,g as Z,hJ as Pe,i as Ie,cU as d,c as h,aF as Qe,S as g,al as H,am as le,T as ke,hK as He,$ as ve,id as lt,ai as Re,bL as Ae,d0 as Xe,hh as $l,cP as st,eG as Cl,d2 as Tl,hM as Il,ie as Ml,ig as Dl,fP as Sl,a8 as ot,a7 as pe,ih as Ol,ii as Ll,p as Nt,e as Bt,a_ as xt,_ as De,ij as Vt,n as ct,fG as je,ap as Je,cf as dt,cg as Pt,H as Me,a1 as Ul,a5 as Ee,ik as mt,ds as pt,il as Fe,Z as Ge,cB as _t,at,fw as $t,cV as Ct,F as Tt,im as Al,fI as wt,io as Rl,ab as El,cG as Ft,ip as Nl,iq as Bl,cZ as Vl,av as Pl,cp as Fl,O as jl,X as Gl,R as nt,ir as ql,c_ as Kl,N as zl,az as Hl,hv as Xl,g6 as Wl,an as Lt,is as Yl,dd as Zl,cD as Ql,A as Jl}from"./nEPQs079.js";import{_ as en}from"./Gr6cVSxP.js";import{_ as tn}from"./C7QTvYaO.js";import{_ as ln}from"./BZvBjxVv.js";import"./BdIpmjdG.js";import{I as jt}from"./ByzT15Y-.js";import{a as Se,_ as nn,u as on}from"./_EDhj-h1.js";import{u as Gt}from"./0qbEdPZ2.js";import{g as Ut,i as At,u as an}from"./DAFLhYLz.js";import{a as sn,_ as un,L as rn}from"./CYZtDArE.js";import{_ as cn}from"./DzMAdbS0.js";import{_ as ce}from"./5fs2TD9N.js";import vt from"./CBZqTOye.js";import ft from"./-QMWbHL6.js";import{a as qt}from"./BfMXOlc4.js";import{S as be,_ as xe}from"./CFgyk-dW.js";import{_ as We}from"./D3hm18CN.js";import{d as dn}from"./C9Sjn86N.js";import{_ as Kt}from"./CNqbIxb7.js";import{_ as It}from"./DGtfac4d.js";import{R as Mt,_ as Dt}from"./C9R3Q-Om.js";import{_ as mn}from"./B-1vRibT.js";import{_ as pn}from"./BLh6tVRa.js";import{_ as _n}from"./BEhsxILe.js";import{u as vn}from"./lp5FXGS2.js";import{u as fn}from"./qMO8t_Go.js";import{k as Rt,i as ht,c as yn}from"./C3R8onno.js";import{F as gn}from"./BzWD3wIg.js";const hn=i("div",{class:"flex flex-row pb-2 mb-4 font-medium text-lg border-b-1 border-gray-50 text-gray-800"},"Field Type Change",-1),kn={class:"mb-3 text-gray-800"},wn={class:"flex item-center gap-2 mb-4"},bn={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},xn=ie({__name:"ColumnUpdateConfirm",props:{visible:{type:Boolean},saving:{type:Boolean}},emits:["submit","cancel","update:visible"],setup(s,{emit:f}){const y=s,E=f,t=re(y,"visible",E);return(r,m)=>{const k=rt,w=en;return l(),u(w,{visible:e(t),"onUpdate:visible":m[3]||(m[3]=p=>Y(t)?t.value=p:null),size:"small"},{default:n(()=>[i("div",{class:"flex flex-col p-6",onClick:m[2]||(m[2]=_e(()=>{},["stop"]))},[hn,i("div",kn,[i("div",wn,[(l(),u(X(("iconMap"in r?r.iconMap:e(ae)).warning),{id:"nc-selected-item-icon",class:"text-yellow-500 w-10 h-10"})),L(" This action cannot be undone. Converting data types may result in data loss. Proceed with caution! ")])]),xl(r.$slots,"entity-preview"),i("div",bn,[o(k,{type:"secondary",onClick:m[0]||(m[0]=p=>t.value=!1)},{default:n(()=>[L(C(r.$t("general.cancel")),1)]),_:1}),o(k,{key:"submit",autofocus:"",type:"primary","html-type":"submit",loading:r.saving,"data-testid":"nc-delete-modal-delete-btn",onClick:m[1]||(m[1]=p=>E("submit"))},{loading:n(()=>[L(" Saving... ")]),default:n(()=>[L(" Update ")]),_:1},8,["loading"])])])]),_:3},8,["visible"])}}}),$n=["onKeydown"],Cn={class:"nc-column-list-wrapper flex-col w-full max-h-[290px] nc-scrollbar-thin !overflow-y-auto px-2"},Tn={key:0,class:"px-2 py-6 text-gray-500 flex flex-col items-center gap-6"},In=i("img",{src:ln,class:"!w-[164px] flex-none",alt:"No search results found"},null,-1),Mn=["data-testid","onClick"],Dn={class:"flex gap-2 items-center"},Sn={class:"flex-1 text-sm"},On={key:0,class:"!text-xs !text-gray-300"},Ln=ie({__name:"UITypesOptionsWithSearch",props:{options:{}},emits:["selected"],setup(s,{emit:f}){const y=s,E=f,{options:t}=Et(y),r=W(""),{isMetaReadOnly:m}=bt(),k=Z(()=>{var _;return((_=t.value)==null?void 0:_.filter(O=>O.name.toLowerCase().includes(r.value.toLowerCase())||Pe[O.name]&&Pe[O.name].toLowerCase().includes(r.value.toLowerCase())))??[]}),w=W(),p=W(-1),b=_=>m.value&&!He.includes(_),M=_=>{!_||b(_)||E("selected",_)},j=()=>{const _=document.querySelector(".nc-column-list-option-active");_&&setTimeout(()=>{_==null||_.scrollIntoView({behavior:"smooth",block:"center"})},50)},G=()=>{p.value=Math.min(p.value+1,k.value.length-1),j()},N=()=>{p.value=Math.max(p.value-1,0),j()},c=()=>{(k.value[p.value]||k.value[0])&&M(k.value[p.value].name)};return Ie(()=>{r.value="",p.value=t.value.findIndex(_=>_.name===d.SingleLineText)}),(_,O)=>{const U=ve,K=jt,te=tn;return l(),h("div",{class:"flex-1 border-1 border-gray-200 rounded-lg flex flex-col py-2","data-testid":"nc-column-uitypes-options-list-wrapper",onKeydown:[Qe(_e(G,["prevent"]),["arrow-down"]),Qe(_e(N,["prevent"]),["arrow-up"]),O[3]||(O[3]=Qe(_e(A=>M(e(k)[e(p)].name),["prevent"]),["enter"]))]},[i("div",{class:"w-full pb-2 px-2",onClick:O[2]||(O[2]=_e(()=>{},["stop"]))},[o(K,{ref_key:"inputRef",ref:w,value:e(r),"onUpdate:value":O[0]||(O[0]=A=>Y(r)?r.value=A:null),placeholder:"Search field type",class:"nc-column-type-search-input nc-toolbar-dropdown-search-field-input",onKeydown:Qe(_e(c,["stop"]),["enter"]),onChange:O[1]||(O[1]=A=>p.value=0)},{prefix:n(()=>[o(U,{icon:"search",class:"nc-search-icon h-4 w-4 mr-1"})]),_:1},8,["value","onKeydown"])]),i("div",Cn,[e(k).length?g("",!0):(l(),h("div",Tn,[In,L(" "+C(e(t).length?_.$t("title.noResultsMatchedYourSearch"):"The list is empty"),1)])),(l(!0),h(H,null,le(e(k),(A,Q)=>(l(),u(te,{key:Q,message:_.$t("tooltip.typeNotAllowed"),enabled:b(A.name)},{default:n(()=>[i("div",{class:ke(["flex w-full py-2 items-center justify-between px-2 rounded-md",[`nc-column-list-option-${Q}`,{"hover:bg-gray-100 cursor-pointer":!b(A.name),"bg-gray-100 nc-column-list-option-active":e(p)===Q&&!b(A.name),"!text-gray-400 cursor-not-allowed":b(A.name)}]]),"data-testid":A.name,onClick:V=>M(A.name)},[i("div",Dn,[(l(),u(X(A.icon),{class:ke(["w-4 h-4",b(A.name)?"!text-gray-400":"text-gray-700"])},null,8,["class"])),i("div",Sn,C(e(Pe)[A.name]),1),A.deprecated?(l(),h("span",On,"("+C(_.$t("general.deprecated"))+")",1)):g("",!0)])],10,Mn)]),_:2},1032,["message","enabled"]))),128))])],40,$n)}}}),Un=Object.keys(lt);function kt(s,f,y=0,E=0){if(s.selectionStart||s.selectionStart===0){const t=s.selectionStart,r=s.selectionEnd;s.value=s.value.substring(0,t-y)+f+s.value.substring(r,s.value.length);const m=+t-y+f.length-E;if(s.setSelectionRange)s.focus(),s.setSelectionRange(m,m);else if(s.createTextRange){const k=s.createTextRange();k.collapse(!0),k.moveEnd("character",m),k.moveStart("character",m),k.select()}}else s.value+=f;return s.value}function An(s,f){const y=s.substring(0,f);if(y.indexOf(" ")>0){const E=y.split(" ");return E[E.length-1]}else return y}function Rn(s){const f=En(s);return An(s.value,f)||""}function En(s){let f=0;return(s.selectionStart||s.selectionStart===0)&&(f=s.selectionStart),f}class Nn{constructor(){gt(this,"trie");gt(this,"suggestions");this.trie={},this.suggestions=[]}newNode(){return{value:[],isLeaf:!1,children:{}}}add(f){Object.keys(this.trie).length===0&&(this.trie=this.newNode());let y=this.trie;for(const E of f.text.toLowerCase())E in y.children||(y.children[E]=this.newNode()),y=y.children[E];y.value=y.value||[],y.value.push(f),y.isLeaf=!0}find(f){Object.keys(this.trie).length===0&&(this.trie=this.newNode());let y=this.trie;for(const E of f)if(E in y.children)y=y.children[E];else return null;return y}traverse(f){f.isLeaf&&this.suggestions.push(...f.value);for(const y in f.children)this.traverse(f.children[y])}complete(f,y=null){this.suggestions=[];const E=this.find(f.toLowerCase());if(!E||Object.keys(E).length===0)return this.suggestions;this.suggestions.push(...E.value);const t=E.children;let r=0;for(const m in t)if(this.traverse(t[m]),r++,y&&r===y)break;return this.suggestions}}const yt=s=>(Nt("data-v-9b799b69"),s=s(),Bt(),s),Bn={class:"formula-wrapper relative"},Vn={class:"pr-3"},Pn={class:"flex flex-row w-full justify-between pb-2 border-b-1"},Fn={class:"flex items-center gap-x-1 font-semibold text-base text-gray-600"},jn={class:"flex flex-col max-h-120 nc-scrollbar-thin pr-2"},Gn={class:"flex mt-3 text-sm"},qn=yt(()=>i("div",{class:"text-gray-500 uppercase text-xs mt-3 mb-2"},"Syntax",-1)),Kn={class:"bg-white rounded-md py-1 px-2 border-1"},zn=yt(()=>i("div",{class:"text-gray-500 uppercase text-xs mt-3 mb-2"},"Examples",-1)),Hn={class:"flex flex-row mt-3 mb-3 justify-end pr-3"},Xn=["href"],Wn={class:"h-[250px] overflow-auto nc-scrollbar-thin border-1 border-gray-200 rounded-lg mt-4"},Yn=yt(()=>i("div",{class:"border-b-1 bg-gray-50 px-3 py-1 uppercase text-gray-600 text-xs font-semibold sticky top-0 z-10"}," Formulas ",-1)),Zn={key:0,class:"ml-5 text-gray-400 text-xs"},Qn=yt(()=>i("div",{class:"border-b-1 bg-gray-50 px-3 py-1 uppercase text-gray-600 text-xs font-semibold sticky top-0 z-10"},"Fields",-1)),Jn={class:"flex items-center gap-x-1 justify-between"},eo={class:"flex items-center gap-x-1 rounded-md bg-gray-200 px-1 h-5"},to={class:"text-small leading-[18px] text-gray-800 font-weight-500"},lo=ie({__name:"FormulaOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){var q,ne,Be,Le,he,qe,Ke;const y=s,E=f,t=[d.QrCode,d.Barcode],r=re(y,"value",E),{setAdditionalValidations:m,validateInfos:k,sqlUi:w,column:p,fromTableExplorer:b}=Se(),{t:M}=Re();Gt();const j=Ae(Xe,W()),G=Z(()=>{var I,F;return((F=(I=j==null?void 0:j.value)==null?void 0:I.columns)==null?void 0:F.filter(ee=>!(t.includes(ee.uidt)||$l(ee))))||[]}),{getMeta:N}=st(),c=W(),_=W(!0),O={formula_raw:[{validator:(I,F)=>(async()=>{var ee;if(!(F!=null&&F.trim()))throw new Error("Required");try{await Ol({column:p.value,formula:F,columns:G.value,clientOrSqlUi:w.value,getMeta:N})}catch(ue){throw ue instanceof Ll&&((ee=ue.extra)!=null&&ee.key)?new Error(M(ue.extra.key,ue.extra)):new Error(ue.message)}})()}]},U=Un,K=["+","-","*","/",">","<","==","<=",">=","!=","&"],te=W(!1),A=W(),Q=W([]),V=W([]),T=W(""),P=W(0),me={column:0,function:1,op:2},de=Z(()=>{const I=w.value.getUnsupportedFnList();return[...U.map(F=>({text:`${F}()`,type:"function",description:lt[F].description,syntax:lt[F].syntax,examples:lt[F].examples,docsUrl:lt[F].docsUrl,unsupported:I.includes(F)})),...G.value.filter(F=>{var ee;return F.uidt===d.LinkToAnotherRecord&&F.system?!1:p?((ee=p.value)==null?void 0:ee.id)!==F.id:!0}).map(F=>({text:F.title,type:"column",icon:Ut(F.uidt)?Cl(Ut(F.uidt)):void 0,uidt:F.uidt})),...K.map(F=>({text:F,type:"op"}))].sort((F,ee)=>F.unsupported&&!ee.unsupported?1:!F.unsupported&&ee.unsupported?-1:0)}),v=W(de.value),D=Z(()=>{const I=new Nn;for(const F of de.value)I.add(F);return I}),R=Z(()=>v.value.filter(I=>I&&I.type!=="column")),z=Z(()=>v.value.filter(I=>I&&I.type==="column"));function se(){const I=(A.value.$el.value.match(/\{|}/g)||[]).reduce((F,ee)=>(F[ee]=(F[ee]||0)+1,F),{});return(I["{"]||0)===(I["}"]||0)}function fe(I){var ue;const F=I.text,ee=((ue=T.value)==null?void 0:ue.length)||0;I.type==="function"?r.value.formula_raw=kt(A.value.$el,F,ee,1):I.type==="column"?r.value.formula_raw=kt(A.value.$el,`{${F}}`,ee+ +!se()):r.value.formula_raw=kt(A.value.$el,F,ee),te.value=!1,T.value="",I.type==="function"||I.type==="op"?v.value=de.value.filter(Ce=>Ce.type==="column"):v.value=de.value}const ye=Tl(function(){Ne()},250);function Ne(){var ee;P.value=0,v.value=[];const F=Rn(A.value.$el).split(/\W+/);T.value=F.pop()||"",v.value=(ee=D.value.complete(T.value))==null?void 0:ee.sort((ue,Ce)=>me[ue.type]-me[Ce.type]),v.value.length>0&&v.value[0].type!=="column"&&(c.value=v.value[0]),se()?_.value||(_.value=!0):(v.value=v.value.filter(ue=>ue.type==="column"),_.value=!1),te.value=!!v.value.length}function J(){if(v.value&&P.value>-1&&P.value<de.value.length)if(P.value<R.value.length){if(R.value[P.value].unsupported)return;fe(R.value[P.value])}else fe(z.value[P.value+R.value.length]);P.value=0}function ge(){v.value&&(P.value=--P.value>-1?P.value:v.value.length-1,c.value=R.value[P.value],Oe())}function Ye(){v.value&&(P.value=++P.value%v.value.length,c.value=R.value[P.value],Oe())}function Oe(){xt(()=>{if(V.value[P.value])try{V.value[P.value].$el.scrollIntoView({block:"nearest",inline:"start"})}catch{}})}(ne=(q=p.value)==null?void 0:q.colOptions)!=null&&ne.formula_raw&&(r.value.formula_raw=Il((Le=(Be=p.value)==null?void 0:Be.colOptions)==null?void 0:Le.formula,(he=j==null?void 0:j.value)==null?void 0:he.columns,(Ke=(qe=p.value)==null?void 0:qe.colOptions)==null?void 0:Ke.formula_raw)||""),m({...O}),Ie(()=>{Ml.plugins.register(Dl)});const Te=W({top:"0px",left:"344px"});Ie(()=>{Sl(()=>{var I;return(I=A.value)==null?void 0:I.$el}).toBeTruthy().then(()=>{setTimeout(()=>{var F,ee;const I=(ee=(F=A.value)==null?void 0:F.$el)==null?void 0:ee.getBoundingClientRect();I&&(Te.value.top=`${I.top}px`,b!=null&&b.value||I.left>352?Te.value.left=`${I.left-344}px`:Te.value.left=`${I.right+8}px`)},250)})});const B=I=>{switch(I.stopPropagation(),I.key){case"ArrowUp":{I.preventDefault(),ge();break}case"ArrowDown":{I.preventDefault(),Ye();break}case"Enter":{I.preventDefault(),J();break}}};return(I,F)=>{const ee=ve,ue=rt,Ce=cn,Ve=ce,Ze=sn,Ue=un,$=rn;return l(),h("div",Bn,[e(c)&&!e(c).unsupported&&e(c).type==="function"?(l(),h("div",{key:0,class:"w-84 fixed bg-white z-10 pl-3 pt-3 border-1 shadow-md rounded-xl",style:ot({left:e(Te).left,top:e(Te).top})},[i("div",Vn,[i("div",Pn,[i("div",Fn,[(l(),u(X(("iconMap"in I?I.iconMap:e(ae)).function),{class:"text-lg"})),L(" "+C(e(c).text),1)]),o(ue,{type:"text",size:"small",class:"!h-7 !w-7 !min-w-0",onClick:F[0]||(F[0]=a=>c.value=void 0)},{default:n(()=>[o(ee,{icon:"close"})]),_:1})])]),i("div",jn,[i("div",Gn,C(e(c).description),1),qn,i("div",Kn,C(e(c).syntax),1),zn,(l(!0),h(H,null,le(e(c).examples,(a,x)=>(l(),h("div",{key:a,class:ke(["bg-gray-100 py-1 px-2",{"border-t-1 border-gray-200":x!==0,"rounded-b-md":x===e(c).examples.length-1&&e(c).examples.length!==1,"rounded-t-md":x===0&&e(c).examples.length!==1,"rounded-md":e(c).examples.length===1}])},C(a),3))),128))]),i("div",Hn,[e(c).docsUrl?(l(),h("a",{key:0,target:"_blank",rel:"noopener noreferrer",href:e(c).docsUrl},[o(ue,{type:"text",size:"small",class:"!text-gray-400 !hover:text-gray-700 !text-xs"},{default:n(()=>[L("View in Docs "),o(ee,{icon:"openInNew",class:"ml-1"})]),_:1})],8,Xn)):g("",!0)])],4)):g("",!0),o(Ve,pe(e(k).formula_raw,{label:I.$t("datatype.Formula")}),{default:n(()=>[o(Ce,{ref_key:"formulaRef",ref:A,value:e(r).formula_raw,"onUpdate:value":F[1]||(F[1]=a=>e(r).formula_raw=a),class:"nc-formula-input !rounded-md",onKeydown:B,onChange:e(ye)},null,8,["value","onChange"])]),_:1},16,["label"]),i("div",Wn,[e(R)&&e(_)?(l(),h(H,{key:0},[Yn,o($,{"data-source":e(R),locale:{emptyText:I.$t("msg.formula.noSuggestedFormulaFound")}},{renderItem:n(({item:a,index:x})=>[o(Ue,{ref:oe=>{e(V)[x]=oe},class:ke(["cursor-pointer !overflow-hidden hover:bg-gray-50",{"!bg-gray-100":e(P)===x,"cursor-not-allowed":a.unsupported}]),onClick:_e(oe=>!a.unsupported&&fe(a),["prevent","stop"]),onMouseenter:oe=>c.value=a},{default:n(()=>[o(Ze,null,{title:n(()=>[i("div",{class:ke(["flex items-center gap-x-1",{"text-gray-400":a.unsupported}])},[a.type==="function"?(l(),u(X(("iconMap"in I?I.iconMap:e(ae)).function),{key:0,class:"w-4 h-4 !text-gray-600"})):g("",!0),a.type==="op"?(l(),u(X(("iconMap"in I?I.iconMap:e(ae)).calculator),{key:1,class:"w-4 h-4 !text-gray-600"})):g("",!0),a.type==="column"?(l(),u(X(a.icon),{key:2,class:"w-4 h-4 !text-gray-600"})):g("",!0),i("span",{class:ke(["text-small leading-[18px]",{"text-gray-800":!a.unsupported}])},C(a.text),3)],2),a.unsupported?(l(),h("div",Zn,C(I.$t("msg.formulaNotSupported")),1)):g("",!0)]),_:2},1024)]),_:2},1032,["class","onClick","onMouseenter"])]),_:1},8,["data-source","locale"])],64)):g("",!0),e(z)?(l(),h(H,{key:1},[Qn,o($,{ref_key:"variableListRef",ref:Q,"data-source":e(z),locale:{emptyText:I.$t("msg.formula.noSuggestedFieldFound")},class:"!overflow-hidden"},{renderItem:n(({item:a,index:x})=>[o(Ue,{ref:oe=>{e(V)[x+e(R).length]=oe},class:ke([{"!bg-gray-100":e(P)===x+e(R).length},"cursor-pointer hover:bg-gray-50"]),onClick:_e(oe=>fe(a),["prevent","stop"])},{default:n(()=>[o(Ze,{class:"nc-variable-list-item"},{title:n(()=>[i("div",Jn,[i("div",eo,[(l(),u(X(a.icon),{class:"w-4 h-4 !text-gray-600"})),i("span",to,C(a.text),1)]),o(ue,{size:"small",type:"text",class:"nc-variable-list-item-use-field-btn !h-7 px-3 !text-small invisible"},{default:n(()=>[L(C(I.$t("general.use"))+" "+C(I.$t("objects.field").toLowerCase()),1)]),_:1})])]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:1},8,["data-source","locale"])],64)):g("",!0)])])}}}),no=De(lo,[["__scopeId","data-v-9b799b69"]]),oo={class:"flex flex-col gap-2"},ao=["data-testid"],so={class:"inline-flex items-center gap-2 flex-1 truncate"},io=ie({__name:"QrCodeOptions",props:{modelValue:{}},emits:["update:modelValue"],setup(s,{emit:f}){const y=s,E=f,{t}=Re(),{fields:r,metaColumnById:m}=qt(),k=re(y,"modelValue",E),{setAdditionalValidations:w,validateInfos:p,column:b,isEdit:M}=Se(),j=Z(()=>{var N;return((N=r.value)==null?void 0:N.filter(c=>c.fk_column_id&&Vt.includes(m.value[c.fk_column_id].uidt)).map(c=>m.value[c.fk_column_id]))||[]});Ie(()=>{var N,c,_,O;k.value.fk_qr_value_column_id=((c=(N=b==null?void 0:b.value)==null?void 0:N.colOptions)==null?void 0:c.fk_qr_value_column_id)||(M.value?null:(O=(_=j.value)==null?void 0:_[0])==null?void 0:O.id)}),w({fk_qr_value_column_id:[{required:!0,message:t("general.required")}]});const G=N=>ct(je(N)?vt:ft,{columnMeta:N});return(N,c)=>{const _=ve,O=Je,U=be,K=xe,te=ce;return l(),h("div",oo,[o(te,pe({class:"flex nc-qr-code-value-column-select",label:`${N.$t("placeholder.value")} ${e(t)("objects.field").toLowerCase()}`},e(p).fk_qr_value_column_id),{default:n(()=>[o(K,{value:e(k).fk_qr_value_column_id,"onUpdate:value":c[0]||(c[0]=A=>e(k).fk_qr_value_column_id=A),placeholder:N.$t("placeholder.selectAColumnForTheQRCodeValue"),onClick:c[1]||(c[1]=_e(()=>{},["stop"]))},{suffixIcon:n(()=>[o(_,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(j),(A,Q)=>(l(),u(U,{key:Q,value:A.id},{default:n(()=>[i("div",{class:"flex gap-2 w-full truncate items-center","data-testid":`nc-qr-${A.title}`},[i("div",so,[(l(),u(X(G(A)),{"column-meta":A,class:"!mx-0 flex-none w-4 h-4"},null,8,["column-meta"])),o(O,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[L(C(A.title),1)]),default:n(()=>[L(" "+C(A.title),1)]),_:2},1024)]),e(k).fk_qr_value_column_id===A.id?(l(),u(X(("iconMap"in N?N.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)],8,ao)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},16,["label"])])}}}),uo=[1,2,3,4,5,6,7,8],tt=[{full:"mdi-star",empty:"mdi-star-outline"},{full:"mdi-heart",empty:"mdi-heart-outline"},{full:"mdi-moon-full",empty:"mdi-moon-new"},{full:"mdi-thumb-up",empty:"mdi-thumb-up-outline"},{full:"mdi-flag",empty:"mdi-flag-outline"}],zt=[{value:"CODE128",label:"CODE128"},{value:"upc",label:"UPC"},{value:"EAN13",label:"EAN-13"},{value:"EAN8",label:"EAN-8"},{value:"EAN5",label:"EAN-5"},{value:"EAN2",label:"EAN-2"},{value:"CODE39",label:"CODE39"},{value:"ITF14",label:"ITF-14"},{value:"MSI",label:"MSI"},{value:"PHARMACODE",label:"PHARMACODE"},{value:"CODABAR",label:"CODABAR"}],ro={barcodeFormat:zt[0].value},co={iconIdx:0,icon:{checked:"mdi-check-bold",unchecked:"mdi-crop-square"},color:"#777"},mo={currency_locale:"en-US",currency_code:"USD"},po={date_format:dt[0]},_o={date_format:dt[0],time_format:Pt[0],is12hrFormat:!1},vo={precision:uo[0],isLocaleString:!1},fo={duration:0},yo={isLocaleString:!1},go={is_progress:!1},ho={iconIdx:0,icon:{full:"mdi-star",empty:"mdi-star-outline"},color:"#fcb401",max:5},ko={is12hrFormat:!1},wo={is_multi:!1,notify:!1},$e={[d.Checkbox]:co,[d.Currency]:mo,[d.Date]:po,[d.DateTime]:_o,[d.Decimal]:vo,[d.Duration]:fo,[d.Number]:yo,[d.Percent]:go,[d.Rating]:ho,[d.Time]:ko,[d.User]:wo,[d.Barcode]:ro},bo={class:"flex flex-col gap-4"},xo={class:"flex flex-row items-center"},$o=["data-testid"],Co={class:"inline-flex items-center gap-2 flex-1 truncate"},To={class:"truncate flex-1"},Io={key:0,class:"pl-2"},Mo=ie({__name:"BarcodeOptions",props:{modelValue:{}},emits:["update:modelValue"],setup(s,{emit:f}){const y=s,E=f,{fields:t,metaColumnById:r}=qt(),m=re(y,"modelValue",E),{setAdditionalValidations:k,validateInfos:w,column:p,isEdit:b}=Se(),{t:M}=Re(),j=Z(()=>{var c;return((c=t.value)==null?void 0:c.filter(_=>_.fk_column_id&&Vt.includes(r.value[_.fk_column_id].uidt)).map(_=>r.value[_.fk_column_id]))||[]});Ie(()=>{var c,_,O,U;m.value.meta={...$e[d.Barcode],...m.value.meta||{}},m.value.fk_barcode_value_column_id=((_=(c=p==null?void 0:p.value)==null?void 0:c.colOptions)==null?void 0:_.fk_barcode_value_column_id)||(b.value?null:(U=(O=j.value)==null?void 0:O[0])==null?void 0:U.id)}),Me(j,c=>{var _;m.value.fk_barcode_value_column_id===null&&(m.value.fk_barcode_value_column_id=(_=c==null?void 0:c[0])==null?void 0:_.id)}),k({fk_barcode_value_column_id:[{required:!0,message:M("general.required")}],barcode_format:[{required:!0,message:M("general.required")}]});const G=Z(()=>{var c;return!((c=j.value)!=null&&c.length)}),N=c=>ct(je(c)?vt:ft,{columnMeta:c});return(c,_)=>{const O=ve,U=be,K=xe,te=Ul,A=ce;return l(),h("div",bo,[o(A,pe({class:"flex pb-2 nc-barcode-value-column-select flex-row",label:`${c.$t("placeholder.value")} ${e(M)("objects.field").toLowerCase()}`},e(w).fk_barcode_value_column_id),{default:n(()=>[i("div",xo,[o(K,{value:e(m).fk_barcode_value_column_id,"onUpdate:value":_[0]||(_[0]=Q=>e(m).fk_barcode_value_column_id=Q),placeholder:c.$t("placeholder.barcodeColumn"),"not-found-content":c.$t("placeholder.notFoundContent"),onClick:_[1]||(_[1]=_e(()=>{},["stop"]))},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(j),(Q,V)=>(l(),u(U,{key:V,value:Q.id},{default:n(()=>[i("div",{class:"w-full flex gap-2 truncate items-center justify-between","data-testid":`nc-barcode-${Q.title}`},[i("div",Co,[(l(),u(X(N(Q)),{"column-meta":Q,class:"!mx-0"},null,8,["column-meta"])),i("div",To,C(Q.title),1)]),e(m).fk_barcode_value_column_id===Q.id?(l(),u(X(("iconMap"in c?c.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)],8,$o)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","not-found-content"]),e(G)?(l(),h("div",Io,[o(te,{placement:"bottom"},{title:n(()=>[i("span",null,C(c.$t("msg.validColumnsForBarCode")),1)]),default:n(()=>[(l(),u(X(("iconMap"in c?c.iconMap:e(ae)).info),{class:"cursor-pointer"}))]),_:1})])):g("",!0)])]),_:1},16,["label"]),o(A,pe({class:"flexp nc-barcode-format-select",label:c.$t("general.format")},e(w).barcode_format),{default:n(()=>[o(K,{value:e(m).meta.barcodeFormat,"onUpdate:value":_[2]||(_[2]=Q=>e(m).meta.barcodeFormat=Q),options:"supportedBarcodeFormats"in c?c.supportedBarcodeFormats:e(zt),placeholder:c.$t("placeholder.selectBarcodeFormat"),onClick:_[3]||(_[3]=_e(()=>{},["stop"]))},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),_:1},8,["value","options","placeholder"])]),_:1},16,["label"])])}}}),Ht=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYR","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUP","CVE","CYP","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHC","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","ROL","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDD","SEK","SGD","SHP","SIT","SKK","SLL","SOS","SRD","STD","SYP","SZL","THB","TJS","TMM","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","USS","UYU","UZS","VEB","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XFO","XFU","XOF","XPD","XPF","XPT","XTS","XXX","YER","ZAR","ZMK","ZWD"];function Do(s){return Ht.includes(s)}async function So(){const{all:s}=await Ee(()=>import("./CSMLYy8G.js"),[],import.meta.url);return s.filter(f=>Xt(f.tag)).map(f=>({text:`${f.name} (${f.tag})`,value:f.tag}))}function Xt(s){try{return Intl.NumberFormat.supportedLocalesOf(s).length>0}catch{return!1}}const Oo={class:"flex gap-2 w-full truncate items-center"},Lo={class:"flex gap-2 w-full justify-between items-center"},Uo={class:"text-[#FB8C00]"},Ao=ie({__name:"CurrencyOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const y=s,E=f,{t}=Re(),r=re(y,"value",E),m={"meta.currency_locale":[{validator:(c,_)=>new Promise((O,U)=>{if(!Xt(_))return U(new Error(t("msg.invalidLocale")));O()})}],"meta.currency_code":[{validator:(c,_)=>new Promise((O,U)=>{if(!Do(_))return U(new Error(t("msg.invalidCurrencyCode")));O()})}]},{setAdditionalValidations:k,validateInfos:w,isPg:p}=Se();k({...m});const b=Ht||[],M=W([]),j=Z(()=>r.value.dt==="money"),G=Z(()=>j.value&&p.value?t("msg.postgresHasItsOwnCurrencySettings"):"");function N(c,_){return _.value.toUpperCase().includes(c.toUpperCase())}return r.value.meta={...$e[d.Currency],...r.value.meta||{}},So().then(c=>{M.value.push(...c)}),(c,_)=>{const O=ve,U=Je,K=be,te=xe,A=ce,Q=mt,V=pt;return l(),u(V,{gutter:8},{default:n(()=>[o(Q,{span:12},{default:n(()=>[o(A,pe(e(w)["meta.currency_locale"],{label:c.$t("title.currencyLocale")}),{default:n(()=>[o(te,{value:e(r).meta.currency_locale,"onUpdate:value":_[0]||(_[0]=T=>e(r).meta.currency_locale=T),class:"w-52","show-search":"","filter-option":N,disabled:e(j)&&e(p),"dropdown-class-name":"nc-dropdown-currency-cell-locale"},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(M),(T,P)=>(l(),u(K,{key:P,value:T.value},{default:n(()=>[i("div",Oo,[o(U,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[L(C(T.text),1)]),default:n(()=>[L(" "+C(T.text),1)]),_:2},1024),e(r).meta.currency_locale===T.value?(l(),u(X(("iconMap"in c?c.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])]),_:1}),o(Q,{span:12},{default:n(()=>[o(A,pe(e(w)["meta.currency_code"],{label:c.$t("title.currencyCode")}),{default:n(()=>[o(te,{value:e(r).meta.currency_code,"onUpdate:value":_[1]||(_[1]=T=>e(r).meta.currency_code=T),class:"w-52","show-search":"","filter-option":N,disabled:e(j)&&e(p),"dropdown-class-name":"nc-dropdown-currency-cell-code"},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(b),(T,P)=>(l(),u(K,{key:P,value:T},{default:n(()=>[i("div",Lo,[L(C(T)+" ",1),e(r).meta.currency_code===T?(l(),u(X(("iconMap"in c?c.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])]),_:1}),e(j)&&e(p)?(l(),u(Q,{key:0},{default:n(()=>[i("span",Uo,C(e(G)),1)]),_:1})):g("",!0)]),_:1})}}}),Ro={class:"flex flex-col gap-2"},Eo={class:"flex items-center gap-1"},No={class:"text-sm text-gray-800 select-none"},Bo=ie({__name:"LongTextOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f),r=Z({get:()=>{var m;return!!((m=t.value.meta)!=null&&m.richMode)},set:m=>{t.value.meta||(t.value.meta={}),t.value.meta.richMode=m}});return Me(r,()=>{t.value.cdf=null}),(m,k)=>{const w=We,p=ce;return l(),h("div",Ro,[o(p,null,{default:n(()=>[i("div",Eo,[o(w,{checked:e(r),"onUpdate:checked":k[0]||(k[0]=b=>Y(r)?r.value=b:null)},{default:n(()=>[i("div",No,C(m.$t("labels.enableRichText")),1)]),_:1},8,["checked"])])]),_:1})])}}}),Vo=["data-testid"],Po=ie({__name:"DurationOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f),r=dn.map(m=>({...m,title:`${m.title}`}))||[];return t.value.meta={...$e[d.Duration],...t.value.meta||{}},(m,k)=>{const w=ve,p=Je,b=be,M=xe,j=ce,G=mt,N=pt;return l(),u(N,null,{default:n(()=>[o(G,{span:24},{default:n(()=>[o(j,{label:m.$t("general.format")},{default:n(()=>[o(M,{value:e(t).meta.duration,"onUpdate:value":k[0]||(k[0]=c=>e(t).meta.duration=c),class:"w-52","dropdown-class-name":"nc-dropdown-duration-option"},{suffixIcon:n(()=>[o(w,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(r),(c,_)=>(l(),u(b,{key:_,value:c.id},{default:n(()=>[i("div",{class:"flex gap-2 w-full truncate items-center","data-testid":c.title},[o(p,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[L(C(c.title),1)]),default:n(()=>[L(" "+C(c.title),1)]),_:2},1024),e(t).meta.duration===c.id?(l(),u(X(("iconMap"in m?m.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)],8,Vo)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),Fo=Ge(()=>Ee(()=>import("./D_yKRest.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(s=>s.default||s)),jo={class:"flex gap-2 w-full truncate items-center"},Go={class:"flex-1 flex items-center text-gray-700 gap-2 children:h-4 children:w-4"},qo={class:"flex-1 flex items-center gap-2 children:h-4 children:w-4"},Ko={class:"flex gap-2 w-full justify-between items-center nc-dropdown-rating-max-option"},zo=ie({__name:"RatingOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f),r=Z({get:()=>t.value.meta.color,set:w=>{t.value.meta.color=w}}),m=W(!1);t.value.meta={...$e[d.Rating],...t.value.meta||{}};const k=tt.findIndex(w=>w.full===t.value.meta.icon.full&&w.empty===t.value.meta.icon.empty);return t.value.meta.iconIdx=k===-1?0:k,Me(()=>t.value.meta.iconIdx,w=>{t.value.meta.icon=tt[w]}),(w,p)=>{const b=ve,M=be,j=xe,G=ce,N=mt,c=Fo,_=Kt,O=pt;return l(),u(O,{gutter:8},{default:n(()=>[o(N,{span:8},{default:n(()=>[o(G,{label:w.$t("labels.icon")},{default:n(()=>[o(j,{value:e(t).meta.iconIdx,"onUpdate:value":p[0]||(p[0]=U=>e(t).meta.iconIdx=U),class:"w-52","dropdown-class-name":"nc-dropdown-rating-icon"},{suffixIcon:n(()=>[o(b,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le("iconList"in w?w.iconList:e(tt),(U,K)=>(l(),u(M,{key:K,value:K},{default:n(()=>[i("div",jo,[i("div",Go,[(l(),u(X(("getMdiIcon"in w?w.getMdiIcon:e(Fe))(U.full)))),(l(),u(X(("getMdiIcon"in w?w.getMdiIcon:e(Fe))(U.empty))))]),e(t).meta.iconIdx===K?(l(),u(X(("iconMap"in w?w.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(N,{span:8},{default:n(()=>[o(G,{label:w.$t("general.colour")},{default:n(()=>[o(_,{visible:e(m),"onUpdate:visible":p[3]||(p[3]=U=>Y(m)?m.value=U:null),placement:"bottom","auto-close":!1,class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[i("div",null,[o(c,{modelValue:e(r),"onUpdate:modelValue":p[1]||(p[1]=U=>Y(r)?r.value=U:null),"is-open":e(m),onInput:p[2]||(p[2]=U=>e(t).meta.color=U)},null,8,["modelValue","is-open"])])]),default:n(()=>[i("div",{class:ke(["flex-1 border-1 border-gray-300 rounded-lg h-8 px-[11px] flex items-center justify-between transition-all cursor-pointer",{"border-brand-500 shadow-selected":e(m)}])},[i("div",qo,[(l(),u(X(("getMdiIcon"in w?w.getMdiIcon:e(Fe))(("iconList"in w?w.iconList:e(tt))[e(t).meta.iconIdx].full)),{style:ot({color:e(t).meta.color})},null,8,["style"])),(l(),u(X(("getMdiIcon"in w?w.getMdiIcon:e(Fe))(("iconList"in w?w.iconList:e(tt))[e(t).meta.iconIdx].empty)),{style:ot({color:e(t).meta.color})},null,8,["style"]))]),o(b,{icon:"arrowDown",class:"text-gray-700 h-4 w-4"})],2)]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1}),o(N,{span:8},{default:n(()=>[o(G,{label:w.$t("labels.max")},{default:n(()=>[o(j,{value:e(t).meta.max,"onUpdate:value":p[4]||(p[4]=U=>e(t).meta.max=U),"data-testid":"nc-dropdown-rating-max",class:"w-52","dropdown-class-name":"nc-dropdown-rating-color"},{suffixIcon:n(()=>[o(b,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),h(H,null,le([1,2,3,4,5,6,7,8,9,10],(U,K)=>o(M,{key:K,value:U},{default:n(()=>[i("div",Ko,[L(C(U)+" ",1),e(t).meta.max===U?(l(),u(X(("iconMap"in w?w.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),Ho=De(zo,[["__scopeId","data-v-3e12a89c"]]),Xo=Ge(()=>Ee(()=>import("./D_yKRest.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(s=>s.default||s)),Wo={class:"flex gap-2 w-full truncate items-center"},Yo={class:"flex-1 flex items-center text-gray-700 gap-2 children:h-4 children:w-4"},Zo={class:"flex-1 flex items-center gap-2 children:h-4 children:w-4"},Qo=ie({__name:"CheckboxOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f),r=[{checked:"mdi-check-bold",unchecked:"mdi-crop-square"},{checked:"mdi-check-circle-outline",unchecked:"mdi-checkbox-blank-circle-outline"},{checked:"mdi-star",unchecked:"mdi-star-outline"},{checked:"mdi-heart",unchecked:"mdi-heart-outline"},{checked:"mdi-moon-full",unchecked:"mdi-moon-new"},{checked:"mdi-thumb-up",unchecked:"mdi-thumb-up-outline"},{checked:"mdi-flag",unchecked:"mdi-flag-outline"}],m=Z({get:()=>t.value.meta.color,set:p=>{t.value.meta.color=p}}),k=W(!1);t.value.meta={...$e[d.Checkbox],...t.value.meta||{}};const w=r.findIndex(p=>p.checked===t.value.meta.icon.checked&&p.unchecked===t.value.meta.icon.unchecked);return t.value.meta.iconIdx=w===-1?0:w,Me(()=>t.value.meta.iconIdx,p=>{t.value.meta.icon=r[p]}),(p,b)=>{const M=ve,j=be,G=xe,N=ce,c=mt,_=Xo,O=Kt,U=pt;return l(),u(U,{gutter:8},{default:n(()=>[o(c,{span:12},{default:n(()=>[o(N,{label:p.$t("labels.icon")},{default:n(()=>[o(G,{value:e(t).meta.iconIdx,"onUpdate:value":b[0]||(b[0]=K=>e(t).meta.iconIdx=K),class:"w-52","dropdown-class-name":"nc-dropdown-checkbox-icon"},{suffixIcon:n(()=>[o(M,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),h(H,null,le(r,(K,te)=>o(j,{key:te,value:te},{default:n(()=>[i("div",Wo,[i("div",Yo,[(l(),u(X(("getMdiIcon"in p?p.getMdiIcon:e(Fe))(K.checked)))),(l(),u(X(("getMdiIcon"in p?p.getMdiIcon:e(Fe))(K.unchecked))))]),e(t).meta.iconIdx===te?(l(),u(X(("iconMap"in p?p.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(c,{span:12},{default:n(()=>[o(N,{label:p.$t("general.colour")},{default:n(()=>[o(O,{visible:e(k),"onUpdate:visible":b[3]||(b[3]=K=>Y(k)?k.value=K:null),placement:"bottomRight","auto-close":!1,class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[i("div",null,[o(_,{modelValue:e(m),"onUpdate:modelValue":b[1]||(b[1]=K=>Y(m)?m.value=K:null),"is-open":e(k),onInput:b[2]||(b[2]=K=>e(t).meta.color=K)},null,8,["modelValue","is-open"])])]),default:n(()=>[i("div",{class:ke(["flex-1 border-1 border-gray-300 rounded-lg h-8 px-[11px] flex items-center justify-between transition-all cursor-pointer",{"border-brand-500 shadow-selected":e(k)}])},[i("div",Zo,[(l(),u(X(("getMdiIcon"in p?p.getMdiIcon:e(Fe))(r[e(t).meta.iconIdx].checked)),{style:ot({color:e(t).meta.color})},null,8,["style"])),(l(),u(X(("getMdiIcon"in p?p.getMdiIcon:e(Fe))(r[e(t).meta.iconIdx].unchecked)),{style:ot({color:e(t).meta.color})},null,8,["style"]))]),o(M,{icon:"arrowDown",class:"text-gray-700 h-4 w-4"})],2)]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),Jo=De(Qo,[["__scopeId","data-v-d8f75c5f"]]),ea={key:0,class:"w-full flex flex-row space-x-2"},ta={class:"flex gap-2 w-full justify-between truncate items-center"},la={class:"min-w-1/2 flex items-center gap-2"},na={class:"inline-flex items-center truncate gap-2"},oa={class:"text-[0.65rem] leading-4 flex-1 truncate text-gray-600 nc-relation-details"},aa={class:"w-full flex gap-2 truncate items-center justify-between"},sa={class:"inline-flex items-center gap-2 flex-1 truncate"},ia={class:"truncate flex-1"},ua={key:1},ra=ie({__name:"LookupOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f),r=Ae(Xe,W()),{t:m}=Re(),{setAdditionalValidations:k,validateInfos:w,onDataTypeChange:p,isEdit:b,disableSubmitBtn:M,updateFieldName:j}=Se(),G=_t(),{tables:N}=at(G),{metas:c,getMeta:_}=st();k({fk_relation_column_id:[{required:!0,message:m("general.required")}],fk_lookup_column_id:[{required:!0,message:m("general.required")}]}),t.value.fk_relation_column_id||(t.value.fk_relation_column_id=null),t.value.fk_lookup_column_id||(t.value.fk_lookup_column_id=null);const O=Z(()=>!N.value||!N.value.length||!r.value||!r.value.columns?[]:r.value.columns.filter(T=>{var P;return $t(T)&&!T.system&&T.source_id===((P=r.value)==null?void 0:P.source_id)}).map(T=>({col:T.colOptions,column:T,...N.value.find(P=>P.id===T.colOptions.fk_related_model_id)})).filter(T=>{var P;return((P=T.col)==null?void 0:P.fk_related_model_id)===T.id&&!T.mm})),U=Z(()=>O.value.find(V=>V.column.id===t.value.fk_relation_column_id)),K=Z(()=>{var V,T;return(V=U.value)!=null&&V.id?(T=c.value[U.value.id])==null?void 0:T.columns.filter(P=>t.value.fk_lookup_column_id===P.id||!Ct(P)&&P.id!==t.value.id&&P.uidt!==d.Links):[]});Ie(()=>{var V,T;b.value&&(t.value.fk_lookup_column_id=(V=t.value.colOptions)==null?void 0:V.fk_lookup_column_id,t.value.fk_relation_column_id=(T=t.value.colOptions)==null?void 0:T.fk_relation_column_id)});const te=()=>{var T,P;const V=(((T=r.value)==null?void 0:T.columns)||[]).filter(me=>me.uidt===d.Lookup).map(me=>{var de;return(de=me.colOptions)==null?void 0:de.fk_lookup_column_id});return(P=K.value.find(me=>!V.includes(me.id)))==null?void 0:P.id},A=async()=>{var V,T;U.value&&await _(U.value.id),t.value.fk_lookup_column_id=te()||((T=(V=K.value)==null?void 0:V[0])==null?void 0:T.id),p()};Tt(()=>{O.value.length?O.value.length&&M.value&&(M.value=!1):M.value=!0});const Q=V=>ct(je(V)?vt:ft,{columnMeta:V});return Me(()=>t.value.fk_relation_column_id,V=>{if(!V)return;const T=O.value.find(P=>P.col.fk_column_id===V);T&&(t.value.lookupTableTitle=(T==null?void 0:T.title)||T.table_name)}),Me(()=>t.value.fk_lookup_column_id,V=>{if(!V)return;const T=K.value.find(P=>P.id===V);T&&(t.value.lookupColumnTitle=(T==null?void 0:T.title)||T.column_name,j())}),(V,T)=>{const P=ve,me=Je,de=be,v=xe,D=ce,R=It;return e(O).length?(l(),h("div",ea,[o(D,pe({class:"flex w-1/2 !max-w-[calc(50%_-_4px)]",label:`${V.$t("general.link")} ${V.$t("objects.field")}`},e(w).fk_relation_column_id),{default:n(()=>[o(v,{value:e(t).fk_relation_column_id,"onUpdate:value":T[0]||(T[0]=z=>e(t).fk_relation_column_id=z),placeholder:"-select-","dropdown-class-name":"!w-64 !rounded-md nc-dropdown-relation-table",onChange:A},{suffixIcon:n(()=>[o(P,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(O),(z,se)=>(l(),u(de,{key:se,value:z.col.fk_column_id},{default:n(()=>[i("div",ta,[i("div",la,[(l(),u(X(Q(z.column)),{"column-meta":z.column,class:"!mx-0"},null,8,["column-meta"])),o(me,{class:"truncate min-w-[calc(100%_-_24px)]","show-on-truncate-only":""},{title:n(()=>[L(C(z.column.title),1)]),default:n(()=>[L(" "+C(z.column.title),1)]),_:2},1024)]),i("div",na,[i("div",oa,[o(me,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[L(C(z.title||z.table_name),1)]),default:n(()=>[L(" "+C(z.title||z.table_name),1)]),_:2},1024)]),e(t).fk_relation_column_id===z.col.fk_column_id?(l(),u(X(("iconMap"in V?V.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"]),o(D,pe({class:"flex w-1/2",label:`${V.$t("datatype.Lookup")} ${V.$t("objects.field")}`},e(t).fk_relation_column_id?e(w).fk_lookup_column_id:void 0),{default:n(()=>[o(v,{value:e(t).fk_lookup_column_id,"onUpdate:value":T[1]||(T[1]=z=>e(t).fk_lookup_column_id=z),name:"fk_lookup_column_id",placeholder:"-select-",disabled:!e(t).fk_relation_column_id,"dropdown-class-name":"nc-dropdown-relation-column !rounded-md",onChange:e(p)},{suffixIcon:n(()=>[o(P,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(K),(z,se)=>(l(),u(de,{key:se,value:z.id},{default:n(()=>[i("div",aa,[i("div",sa,[(l(),u(X(Q(z)),{"column-meta":z,class:"!mx-0"},null,8,["column-meta"])),i("div",ia,C(z.title),1)]),e(t).fk_lookup_column_id===z.id?(l(),u(X(("iconMap"in V?V.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},16,["label"])])):(l(),h("div",ua,[o(R,{type:"warning","show-icon":""},{icon:n(()=>[o(P,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>[L(" Alert ")]),description:n(()=>[L(C(V.$t("msg.linkColumnClearNotSupportedYet",{type:"Lookup"})),1)]),_:1})]))}}}),ca=De(ra,[["__scopeId","data-v-df5274dc"]]),da={class:"w-full flex gap-2 justify-between items-center"},ma=ie({__name:"DateOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f);return t.value.meta={...$e[d.Date],...t.value.meta||{}},(r,m)=>{const k=ve,w=be,p=xe,b=ce;return l(),u(b,null,{default:n(()=>[o(p,{value:e(t).meta.date_format,"onUpdate:value":m[0]||(m[0]=M=>e(t).meta.date_format=M),"show-search":"",class:"nc-date-select","dropdown-class-name":"nc-dropdown-date-format"},{suffixIcon:n(()=>[o(k,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le([...e(dt),...e(Al)],(M,j)=>(l(),u(w,{key:j,value:M},{default:n(()=>[i("div",da,[L(C(M)+" ",1),e(t).meta.date_format===M?(l(),u(X(("iconMap"in r?r.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})}}}),pa={class:"flex flex-col gap-2"},_a={class:"flex items-center gap-2 children:flex-1"},va=ie({__name:"TimeOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f);return t.value.meta={...$e[d.Time],...t.value.meta??{}},(r,m)=>{const k=Mt,w=Dt,p=ce;return l(),h("div",pa,[i("div",_a,[o(p,null,{default:n(()=>[e(t).meta?(l(),u(w,{key:0,value:e(t).meta.is12hrFormat,"onUpdate:value":m[0]||(m[0]=b=>e(t).meta.is12hrFormat=b),class:"nc-time-form-layout"},{default:n(()=>[o(k,{value:!0},{default:n(()=>[L("12 Hrs")]),_:1}),o(k,{value:!1},{default:n(()=>[L("24 Hrs")]),_:1})]),_:1},8,["value"])):g("",!0)]),_:1})])])}}}),fa=De(va,[["__scopeId","data-v-cd390529"]]),ya={class:"flex items-center gap-1"},ga={class:"text-sm text-gray-800 select-none"},ha=ie({__name:"NumberOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f);return t.value.meta={...$e[d.Number],...t.value.meta||{}},(r,m)=>{const k=We,w=ce;return l(),u(w,null,{default:n(()=>[i("div",ya,[e(t).meta?(l(),u(k,{key:0,checked:e(t).meta.isLocaleString,"onUpdate:checked":m[0]||(m[0]=p=>e(t).meta.isLocaleString=p)},{default:n(()=>[i("div",ga,C(r.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked"])):g("",!0)])]),_:1})}}}),ka={class:"flex gap-2 w-full justify-between items-center"},wa={class:"flex items-center gap-1"},ba={class:"text-sm text-gray-800 select-none"},xa=ie({__name:"DecimalOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const y=s,E=f,t=[1,2,3,4,5,6,7,8],{t:r}=Re(),m={1:r("placeholder.decimal1"),2:r("placeholder.decimal2"),3:r("placeholder.decimal3"),4:r("placeholder.decimal4"),5:r("placeholder.decimal5"),6:r("placeholder.decimal6"),7:r("placeholder.decimal7"),8:r("placeholder.decimal8")},k=re(y,"value",E);k.value.meta={...$e[d.Decimal],...k.value.meta||{}};const w=b=>{k.value.dtxs=Math.max(b,k.value.dtxs)},{isMetaReadOnly:p}=bt();return(b,M)=>{const j=ve,G=be,N=xe,c=ce,_=We;return l(),h(H,null,[o(c,{label:b.$t("placeholder.precision")},{default:n(()=>{var O;return[(O=e(k).meta)!=null&&O.precision?(l(),u(N,{key:0,value:e(k).meta.precision,"onUpdate:value":M[0]||(M[0]=U=>e(k).meta.precision=U),disabled:e(p),"dropdown-class-name":"nc-dropdown-decimal-format",onChange:w},{suffixIcon:n(()=>[o(j,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),h(H,null,le(t,(U,K)=>o(G,{key:K,value:U},{default:n(()=>[i("div",ka,[L(C(m[U])+" ",1),e(k).meta.precision===U?(l(),u(X(("iconMap"in b?b.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value","disabled"])):g("",!0)]}),_:1},8,["label"]),o(c,null,{default:n(()=>[i("div",wa,[e(k).meta?(l(),u(_,{key:0,checked:e(k).meta.isLocaleString,"onUpdate:checked":M[1]||(M[1]=O=>e(k).meta.isLocaleString=O)},{default:n(()=>[i("div",ba,C(b.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked"])):g("",!0)])]),_:1})],64)}}}),$a={class:"flex flex-col gap-4"},Ca={class:"flex items-center gap-2 children:flex-1"},Ta={class:"flex gap-2 w-full justify-between items-center"},Ia=["data-testid"],Ma=ie({__name:"DateTimeOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f);return t.value.meta={...$e[d.DateTime],...t.value.meta||{}},(r,m)=>{const k=ve,w=be,p=xe,b=ce,M=Mt,j=Dt;return l(),h("div",$a,[i("div",Ca,[o(b,null,{default:n(()=>[o(p,{value:e(t).meta.date_format,"onUpdate:value":m[0]||(m[0]=G=>e(t).meta.date_format=G),class:"nc-date-select","dropdown-class-name":"nc-dropdown-date-format"},{suffixIcon:n(()=>[o(k,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(dt),(G,N)=>(l(),u(w,{key:N,value:G},{default:n(()=>[i("div",Ta,[L(C(G)+" ",1),e(t).meta.date_format===G?(l(),u(X(("iconMap"in r?r.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(b,null,{default:n(()=>[o(p,{value:e(t).meta.time_format,"onUpdate:value":m[1]||(m[1]=G=>e(t).meta.time_format=G),class:"nc-time-select","dropdown-class-name":"nc-dropdown-time-format"},{suffixIcon:n(()=>[o(k,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(Pt),(G,N)=>(l(),u(w,{key:N,value:G},{default:n(()=>[i("div",{class:"flex gap-2 w-full justify-between items-center","data-testid":`nc-time-${G}`},[L(C(G)+" ",1),e(t).meta.time_format===G?(l(),u(X(("iconMap"in r?r.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)],8,Ia)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),o(b,null,{default:n(()=>[e(t).meta?(l(),u(j,{key:0,value:e(t).meta.is12hrFormat,"onUpdate:value":m[2]||(m[2]=G=>e(t).meta.is12hrFormat=G),class:"nc-time-form-layout"},{default:n(()=>[o(M,{value:!0},{default:n(()=>[L("12 Hrs")]),_:1}),o(M,{value:!1},{default:n(()=>[L("24 Hrs")]),_:1})]),_:1},8,["value"])):g("",!0)]),_:1})])}}}),Da=De(Ma,[["__scopeId","data-v-89ae0e65"]]),Sa={key:0,class:"flex flex-col gap-4"},Oa={class:"w-full flex flex-row space-x-2"},La={class:"flex gap-2 w-full justify-between truncate items-center"},Ua={class:"min-w-1/2 flex items-center gap-2"},Aa={class:"inline-flex items-center truncate gap-2"},Ra={class:"text-[0.65rem] leading-4 flex-1 truncate text-gray-600 nc-relation-details"},Ea={class:"w-full flex gap-2 truncate items-center justify-between"},Na={class:"flex items-center gap-2 flex-1 truncate"},Ba={class:"truncate flex-1"},Va={class:"flex gap-2 justify-between items-center"},Pa={key:1},Fa=ie({__name:"RollupOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f),r=Ae(Xe,W()),{setAdditionalValidations:m,validateInfos:k,onDataTypeChange:w,isEdit:p,disableSubmitBtn:b,updateFieldName:M}=Se(),j=_t(),{tables:G}=at(j),{metas:N,getMeta:c}=st(),{t:_}=Re();m({fk_relation_column_id:[{required:!0,message:_("general.required")}],fk_rollup_column_id:[{required:!0,message:_("general.required")}],rollup_function:[{required:!0,message:_("general.required")}]}),t.value.fk_relation_column_id||(t.value.fk_relation_column_id=null),t.value.fk_rollup_column_id||(t.value.fk_rollup_column_id=null),t.value.rollup_function||(t.value.rollup_function=null);const O=Z(()=>!G.value||!G.value.length||!r.value||!r.value.columns?[]:r.value.columns.filter(D=>{var R;return $t(D)&&D.colOptions.type&&![wt.BELONGS_TO,wt.ONE_TO_ONE].includes(D.colOptions.type)&&!D.system&&D.source_id===((R=r.value)==null?void 0:R.source_id)}).map(D=>({col:D.colOptions,column:D,...G.value.find(R=>{var z;return R.id===((z=D.colOptions)==null?void 0:z.fk_related_model_id)})}))),U=Z(()=>O.value.find(v=>v.column.id===t.value.fk_relation_column_id)),K=Z(()=>{var v,D;return(v=U.value)!=null&&v.id?(D=N.value[U.value.id])==null?void 0:D.columns.filter(R=>!je(R.uidt)&&(!Ct(R)||R.pk)):[]});Ie(()=>{var v,D,R;p.value&&(t.value.fk_relation_column_id=(v=t.value.colOptions)==null?void 0:v.fk_relation_column_id,t.value.fk_rollup_column_id=(D=t.value.colOptions)==null?void 0:D.fk_rollup_column_id,t.value.rollup_function=(R=t.value.colOptions)==null?void 0:R.rollup_function)});const te=()=>{var D,R;const v=(((D=r.value)==null?void 0:D.columns)||[]).filter(z=>z.uidt===d.Rollup).map(z=>{var se;return(se=z.colOptions)==null?void 0:se.fk_rollup_column_id});return(R=K.value.find(z=>!v.includes(z.id)))==null?void 0:R.id},A=async()=>{var v,D;U.value&&await c(U.value.id),t.value.fk_rollup_column_id=te()||((D=(v=K.value)==null?void 0:v[0])==null?void 0:D.id),w()},Q=v=>ct(je(v)?vt:ft,{columnMeta:v}),V=W([]),T=[{text:_("datatype.Count"),value:"count"},{text:_("general.min"),value:"min"},{text:_("general.max"),value:"max"},{text:_("general.avg"),value:"avg"},{text:_("general.sum"),value:"sum"},{text:_("general.countDistinct"),value:"countDistinct"},{text:_("general.sumDistinct"),value:"sumDistinct"},{text:_("general.avgDistinct"),value:"avgDistinct"}],P=Z(()=>{var D;const v={};return(D=K.value)==null||D.forEach(R=>{R!=null&&R.id&&(v[R.id]=T.filter(z=>Rl(R.uidt).includes(z.value)))}),v}),me=Z(()=>{var v;return(v=K.value)==null?void 0:v.filter(D=>{var R;return D.id&&((R=P.value[D.id])==null?void 0:R.length)})}),de=()=>{const v=V.value.find(D=>D.value===t.value.rollup_function);v&&(v!=null&&v.text)&&(t.value.rollup_function_name=v.text),w(),M()};return Me(()=>t.value.fk_rollup_column_id,()=>{var D;const v=(D=K.value)==null?void 0:D.find(R=>R.id===t.value.fk_rollup_column_id);V.value=P.value[v==null?void 0:v.id]||[],V.value.length&&!V.value.find(R=>R.value===t.value.rollup_function)&&(t.value.rollup_function=V.value[0].value,t.value.rollup_function_name=V.value[0].text),t.value.rollupColumnTitle=(v==null?void 0:v.title)||(v==null?void 0:v.column_name),M()}),Tt(()=>{O.value.length?O.value.length&&b.value&&(b.value=!1):b.value=!0}),Me(()=>t.value.fk_relation_column_id,v=>{if(!v)return;const D=O.value.find(R=>R.col.fk_column_id===v);D&&(t.value.rollupTableTitle=(D==null?void 0:D.title)||D.table_name)}),(v,D)=>{const R=ve,z=Je,se=be,fe=xe,ye=ce,Ne=It;return e(O).length?(l(),h("div",Sa,[i("div",Oa,[o(ye,pe({class:"flex w-1/2 !max-w-[calc(50%_-_4px)] pb-2",label:`${v.$t("general.link")} ${v.$t("objects.field")}`},e(k).fk_relation_column_id),{default:n(()=>[o(fe,{value:e(t).fk_relation_column_id,"onUpdate:value":D[0]||(D[0]=J=>e(t).fk_relation_column_id=J),placeholder:"-select-","dropdown-class-name":"!w-64 nc-dropdown-relation-table !rounded-md",onChange:A},{suffixIcon:n(()=>[o(R,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(O),(J,ge)=>(l(),u(se,{key:ge,value:J.col.fk_column_id},{default:n(()=>[i("div",La,[i("div",Ua,[(l(),u(X(Q(J.column)),{"column-meta":J.column,class:"!mx-0"},null,8,["column-meta"])),o(z,{class:"truncate min-w-[calc(100%_-_24px)]","show-on-truncate-only":""},{title:n(()=>[L(C(J.column.title),1)]),default:n(()=>[L(" "+C(J.column.title),1)]),_:2},1024)]),i("div",Aa,[i("div",Ra,[o(z,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[L(C(J.title||J.table_name),1)]),default:n(()=>[L(" "+C(J.title||J.table_name),1)]),_:2},1024)]),e(t).fk_relation_column_id===J.col.fk_column_id?(l(),u(X(("iconMap"in v?v.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"]),o(ye,pe({class:"flex w-1/2",label:`${v.$t("datatype.Rollup")} ${v.$t("objects.field")}`},e(t).fk_relation_column_id?e(k).fk_rollup_column_id:void 0),{default:n(()=>[o(fe,{value:e(t).fk_rollup_column_id,"onUpdate:value":D[1]||(D[1]=J=>e(t).fk_rollup_column_id=J),name:"fk_rollup_column_id",placeholder:"-select-",disabled:!e(t).fk_relation_column_id,"dropdown-class-name":"nc-dropdown-relation-column !rounded-xl",onChange:e(w)},{suffixIcon:n(()=>[o(R,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(me),(J,ge)=>(l(),u(se,{key:ge,value:J.id},{default:n(()=>[i("div",Ea,[i("div",Na,[(l(),u(X(Q(J)),{"column-meta":J,class:"!mx-0"},null,8,["column-meta"])),i("div",Ba,C(J.title),1)]),e(t).fk_rollup_column_id===J.id?(l(),u(X(("iconMap"in v?v.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},16,["label"])]),o(ye,pe({label:v.$t("labels.aggregateFunction")},e(t).fk_relation_column_id?e(k).rollup_function:void 0),{default:n(()=>[o(fe,{value:e(t).rollup_function,"onUpdate:value":D[2]||(D[2]=J=>e(t).rollup_function=J),disabled:!e(t).fk_relation_column_id,placeholder:"-select-","dropdown-class-name":"nc-dropdown-rollup-function",class:"!mt-0.5",onChange:de},{suffixIcon:n(()=>[o(R,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(V),(J,ge)=>(l(),u(se,{key:ge,value:J.value},{default:n(()=>[i("div",Va,[L(C(J.text)+" ",1),e(t).rollup_function===J.value?(l(),u(X(("iconMap"in v?v.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])])):(l(),h("div",Pa,[o(Ne,{type:"warning","show-icon":""},{icon:n(()=>[o(R,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>[L(" Alert ")]),description:n(()=>[L(C(v.$t("msg.linkColumnClearNotSupportedYet",{type:"Rollup"})),1)]),_:1})]))}}}),ja=De(Fa,[["__scopeId","data-v-0525ba03"]]),Ga=Ge(()=>Ee(()=>import("./Cfx2TEd-.js").then(s=>s.C),__vite__mapDeps([6,1,2,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71]),import.meta.url).then(s=>s.default||s)),qa=Ge(()=>Ee(()=>import("./sWN3OXMW.js"),__vite__mapDeps([72,1,2,73,11,74,75,76,14,18,77,78,79,80,81,82,15,17,83,84,85]),import.meta.url).then(s=>s.default||s)),Ka={class:"w-full flex flex-col gap-4"},za={class:"flex flex-col gap-4"},Ha={class:"nc-ltar-icon nc-mm-icon"},Xa={class:"nc-ltar-icon nc-hm-icon"},Wa={class:"nc-ltar-icon nc-oo-icon"},Ya={class:"flex w-full items-center gap-2"},Za={class:"min-w-5 flex items-center justify-center"},Qa={key:0,class:"w-full flex-col"},Ja={class:"flex w-full items-center gap-2"},es={class:"min-w-5 flex items-center justify-center"},ts={key:1,class:"overflow-auto"},ls={class:"flex items-center gap-2"},ns={class:"first-letter:capitalize"},os={key:0,class:"flex flex-col gap-4"},as={class:"flex flex-row space-x-2"},ss={class:"flex flex-row"},is={class:"flex items-center gap-1"},us={class:"text-sm text-gray-800 select-none"},rs=ie({__name:"LinkedToAnotherRecordOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(s,{emit:f}){var ye,Ne,J,ge,Ye,Oe,Te;const y=s,t=re(y,"value",f),r=El(y,"isEdit"),m=Ae(Xe,W()),k=W(),{setAdditionalValidations:w,setPostSaveOrUpdateCbk:p,validateInfos:b,onDataTypeChange:M,sqlUi:j,isXcdbBase:G,updateFieldName:N}=Se(),c=_t(),{tables:_}=at(c),O=Ft(),{viewsByTable:U}=at(O),{t:K}=Re();r.value||w({childId:[{required:!0,message:K("general.required")}]});const te=j===ql?["NO ACTION"]:["NO ACTION","CASCADE","RESTRICT","SET NULL","SET DEFAULT"];r.value||(t.value.parentId||(t.value.parentId=(ye=m.value)==null?void 0:ye.id),t.value.childColumn||(t.value.childColumn=`${(Ne=m.value)==null?void 0:Ne.table_name}_id`),t.value.childTable||(t.value.childTable=(J=m.value)==null?void 0:J.table_name),t.value.parentTable||(t.value.parentTable=t.value.rtn||""),t.value.parentColumn||(t.value.parentColumn=t.value.rcn||""),t.value.type||(t.value.type="mm"),t.value.onUpdate||(t.value.onUpdate=te[0]),t.value.onDelete||(t.value.onDelete=te[0]),t.value.virtual||(t.value.virtual=j===Nl),t.value.alias||(t.value.alias=t.value.column_name)),t.value.childId||(t.value.childId=((Ye=(ge=t.value)==null?void 0:ge.colOptions)==null?void 0:Ye.fk_related_model_id)||null),t.value.childViewId||(t.value.childViewId=((Te=(Oe=t.value)==null?void 0:Oe.colOptions)==null?void 0:Te.fk_target_view_id)||null);const A=W(!1),Q=Z(()=>!_.value||!_.value.length?[]:_.value.filter(B=>{var q;return B.type===Bl.TABLE&&B.source_id===((q=m.value)==null?void 0:q.source_id)})),V=Z(()=>t.value.childId?(U.value.get(t.value.childId)||[]).filter(q=>q.type!==Vl.FORM):[]),T=(B,q)=>q.key.toLowerCase().includes(B.toLowerCase()),P=Z(()=>t.value.uidt===d.Links&&t.value.type!==wt.ONE_TO_ONE),{metas:me,getMeta:de}=st();Me(()=>t.value.childId,async B=>{B&&(de(B).catch(()=>{}),O.loadViews({ignoreLoading:!0,tableId:B}).catch(()=>{}))},{immediate:!0}),t.value.meta=t.value.meta||{};const v=W(!!t.value.childViewId),D=Z({get(){var B;return!!((B=t.value.meta)!=null&&B.enableConditions)},set(B){t.value.meta=t.value.meta||{},t.value.meta.enableConditions=B}}),R=B=>{B||(t.value.childViewId=null)};Pl(Xe,Z(()=>me.value[t.value.childId]||{})),Ie(()=>{p(async({colId:B,column:q})=>{var ne;await((ne=k.value)==null?void 0:ne.applyChanges(B||q.id,!1))})}),Fl(()=>{p(null)});const z=Z({get:()=>{var B,q,ne;return(r.value?(q=(B=t.value)==null?void 0:B.colOptions)==null?void 0:q.fk_related_model_id:(ne=t.value)==null?void 0:ne.childId)??null},set:B=>{var q;!r.value&&B&&(t.value.childId=B,t.value.childTableTitle=(q=Q.value.find(ne=>ne.id===B))==null?void 0:q.title)}}),se=Z({get:()=>{var B,q,ne;return(r.value?(q=(B=t.value)==null?void 0:B.colOptions)==null?void 0:q.type:(ne=t.value)==null?void 0:ne.type)??null},set:B=>{!r.value&&B&&(t.value.type=B,N())}}),fe=()=>{M(),xt(()=>{N()})};return(B,q)=>{const ne=ve,Be=Mt,Le=Dt,he=ce,qe=mn,Ke=Je,I=be,F=xe,ee=_n,ue=Kl,Ce=pn,Ve=Ga,Ze=rt,Ue=qa,$=We,a=jl("e");return l(),h("div",Ka,[i("div",za,[o(he,pe({label:B.$t("labels.relationType")},e(b).type,{class:"nc-ltar-relation-type"}),{default:n(()=>[o(Le,pe({value:e(se),"onUpdate:value":q[0]||(q[0]=x=>Y(se)?se.value=x:null),name:"type"},e(b).type,{disabled:e(r)}),{default:n(()=>[o(Be,{value:"mm","data-testid":"Many to Many"},{default:n(()=>[i("span",Ha,[o(ne,{icon:"mm_solid"})]),L(" "+C(B.$t("title.manyToMany")),1)]),_:1}),o(Be,{value:"hm","data-testid":"Has Many"},{default:n(()=>[i("span",Xa,[o(ne,{icon:"hm_solid"})]),L(" "+C(B.$t("title.hasMany")),1)]),_:1}),o(Be,{value:"oo","data-testid":"One to One"},{default:n(()=>[i("span",Wa,[o(ne,{icon:"oneToOneSolid"})]),L(" "+C(B.$t("title.oneToOne")),1)]),_:1})]),_:1},16,["value","disabled"])]),_:1},16,["label"]),o(he,pe({class:"flex w-full nc-ltar-child-table"},e(b).childId),{default:n(()=>[o(F,{value:e(z),"onUpdate:value":q[1]||(q[1]=x=>Y(z)?z.value=x:null),"show-search":"",disabled:e(r),"filter-option":T,placeholder:"select table to link","dropdown-class-name":"nc-dropdown-ltar-child-table",onChange:fe},{suffixIcon:n(()=>[o(ne,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(Q),x=>(l(),u(I,{key:x.title,value:x.id},{default:n(()=>[i("div",Ya,[i("div",Za,[o(qe,{meta:x,class:"text-gray-500"},null,8,["meta"])]),o(Ke,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[L(C(x.title),1)]),default:n(()=>[i("span",null,C(x.title),1)]),_:2},1024)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16),("isEeUI"in B?B.isEeUI:e(Gl))?(l(),h("div",Qa,[i("div",{class:ke(["flex gap-2 items-center",{"mb-2":e(v)}])},[nt(o(ee,{checked:e(v),"onUpdate:checked":q[2]||(q[2]=x=>Y(v)?v.value=x:null),size:"small",disabled:!e(t).childId,onChange:R},null,8,["checked","disabled"]),[[a,["c:link:limit-record-by-view",{status:e(v)}]]]),nt((l(),h("span",{class:"text-s","data-testid":"nc-limit-record-view",onClick:q[3]||(q[3]=x=>v.value=!!e(t).childId&&!e(v))},[L("Limit record selection to a view")])),[[a,["c:link:limit-record-by-view",{status:e(v)}]]])],2),e(v)?(l(),u(he,{key:0,class:"!pl-8 flex w-full pb-2 mt-4 space-y-2 nc-ltar-child-view"},{default:n(()=>[o(Ce,{value:e(t).childViewId,"onUpdate:value":q[4]||(q[4]=x=>e(t).childViewId=x),placeholder:B.$t("labels.selectView"),"show-search":"","filter-option":T,"dropdown-class-name":"nc-dropdown-ltar-child-view"},{default:n(()=>[(l(!0),h(H,null,le(e(V),x=>(l(),u(I,{key:x.title,value:x.id},{default:n(()=>[i("div",Ja,[i("div",es,[o(ue,{meta:x,class:"text-gray-500"},null,8,["meta"])]),o(Ke,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[L(C(x.title),1)]),default:n(()=>[i("span",null,C(x.title),1)]),_:2},1024)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1})):g("",!0),i("div",{class:ke(["mt-4 flex gap-2 items-center",{"mb-2":e(D)}])},[nt(o(ee,{checked:e(D),"onUpdate:checked":q[5]||(q[5]=x=>Y(D)?D.value=x:null),disabled:!e(t).childId,size:"small"},null,8,["checked","disabled"]),[[a,["c:link:limit-record-by-filter",{status:e(D)}]]]),nt((l(),h("span",{"data-testid":"nc-limit-record-filters",onClick:q[6]||(q[6]=x=>D.value=!!e(t).childId&&!e(D))},[L(" Limit record selection to filters ")])),[[a,["c:link:limit-record-by-filter",{status:e(D)}]]])],2),e(D)?(l(),h("div",ts,[o(Ve,{ref_key:"filterRef",ref:k,modelValue:e(t).filters,"onUpdate:modelValue":q[7]||(q[7]=x=>e(t).filters=x),class:"!pl-8 !p-0 max-w-620px","auto-save":!1,"show-loading":!1,link:!0,"root-meta":e(m),"link-col-id":e(t).id},null,8,["modelValue","root-meta","link-col-id"])])):g("",!0)])):g("",!0)]),!e(G)&&!e(r)||e(P)?(l(),h(H,{key:0},[i("div",null,[o(Ze,{size:"small",type:"text",class:"!text-gray-500 !hover:text-gray-700",onClick:q[8]||(q[8]=_e(x=>A.value=!e(A),["stop"]))},{default:n(()=>[i("div",ls,[i("span",ns,C(B.$t("title.advancedSettings").toLowerCase()),1),o(ne,{icon:e(A)?"arrowUp":"arrowDown",class:"h-4 w-4"},null,8,["icon"])])]),_:1})]),e(A)?(l(),h("div",os,[e(P)?(l(),u(Ue,{key:0,value:e(t),"onUpdate:value":q[9]||(q[9]=x=>Y(t)?t.value=x:null)},null,8,["value"])):g("",!0),!e(G)&&!e(r)?(l(),h(H,{key:1},[i("div",as,[o(he,{class:"flex w-1/2",label:B.$t("labels.onUpdate")},{default:n(()=>[o(F,{value:e(t).onUpdate,"onUpdate:value":q[10]||(q[10]=x=>e(t).onUpdate=x),disabled:e(t).virtual,name:"onUpdate","dropdown-class-name":"nc-dropdown-on-update",onChange:e(M)},{suffixIcon:n(()=>[o(ne,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(te),(x,oe)=>(l(),u(I,{key:oe,value:x},{default:n(()=>[x==="NO ACTION"?(l(),h(H,{key:0},[L(C(B.$t("title.links.noAction")),1)],64)):x==="CASCADE"?(l(),h(H,{key:1},[L(C(B.$t("title.links.cascade")),1)],64)):x==="RESTRICT"?(l(),h(H,{key:2},[L(C(B.$t("title.links.restrict")),1)],64)):x==="SET NULL"?(l(),h(H,{key:3},[L(C(B.$t("title.links.setNull")),1)],64)):x==="SET DEFAULT"?(l(),h(H,{key:4},[L(C(B.$t("title.links.setDefault")),1)],64)):(l(),h(H,{key:5},[L(C(x),1)],64))]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"]),o(he,{class:"flex w-1/2",label:B.$t("labels.onDelete")},{default:n(()=>[o(F,{value:e(t).onDelete,"onUpdate:value":q[11]||(q[11]=x=>e(t).onDelete=x),disabled:e(t).virtual,name:"onDelete","dropdown-class-name":"nc-dropdown-on-delete",onChange:e(M)},{suffixIcon:n(()=>[o(ne,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(te),(x,oe)=>(l(),u(I,{key:oe,value:x},{default:n(()=>[x==="NO ACTION"?(l(),h(H,{key:0},[L(C(B.$t("title.links.noAction")),1)],64)):x==="CASCADE"?(l(),h(H,{key:1},[L(C(B.$t("title.links.cascade")),1)],64)):x==="RESTRICT"?(l(),h(H,{key:2},[L(C(B.$t("title.links.restrict")),1)],64)):x==="SET NULL"?(l(),h(H,{key:3},[L(C(B.$t("title.links.setNull")),1)],64)):x==="SET DEFAULT"?(l(),h(H,{key:4},[L(C(B.$t("title.links.setDefault")),1)],64)):(l(),h(H,{key:5},[L(C(x),1)],64))]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"])]),i("div",ss,[o(he,null,{default:n(()=>[i("div",is,[o($,{checked:e(t).virtual,"onUpdate:checked":q[12]||(q[12]=x=>e(t).virtual=x),onChange:e(M)},{default:n(()=>[i("div",us,C(B.$t("title.virtualRelation")),1)]),_:1},8,["checked","onChange"])])]),_:1})])],64)):g("",!0)])):g("",!0)],64)):g("",!0)])}}}),cs=De(rs,[["__scopeId","data-v-927ea106"]]),ds={class:"flex flex-col"},ms={class:"flex items-center gap-1"},ps={class:"text-sm text-gray-800 select-none"},_s=ie({__name:"PercentOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f),r={},{setAdditionalValidations:m}=Se();return m({...r}),t.value.meta={...$e[d.Percent],...t.value.meta||{}},(k,w)=>{const p=We,b=ce;return l(),h("div",ds,[o(b,null,{default:n(()=>[i("div",ms,[e(t).meta?(l(),u(p,{key:0,checked:e(t).meta.is_progress,"onUpdate:checked":w[0]||(w[0]=M=>e(t).meta.is_progress=M)},{default:n(()=>[i("div",ps,C(k.$t("labels.displayAsProgress")),1)]),_:1},8,["checked"])):g("",!0)])]),_:1})])}}}),vs={},fs={class:"hidden"};function ys(s,f){return l(),h("div",fs)}const gs=De(vs,[["render",ys]]),hs={class:"flex flex-col gap-4"},ks={key:0,class:"flex items-center gap-1"},ws=i("div",{class:"text-sm text-gray-800 select-none"},"Allow adding multiple users",-1),bs={key:0,class:"flex items-center gap-1"},xs=i("div",{class:"text-sm text-gray-800 select-none"},"Notify users with base access when they're added",-1),$s=ie({__name:"UserOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(s,{emit:f}){const t=re(s,"value",f),r=W(!1),m=W(),k={},{setAdditionalValidations:w,updateFieldName:p}=Se();w({...k}),t.value.meta={...$e[d.User],...t.value.meta||{}},Ie(()=>{m.value=t.value.meta.is_multi});const b=M=>{var j;t.value.meta.is_multi=M,t.value.meta.is_multi||(t.value.cdf=((j=t.value.cdf)==null?void 0:j.split(",")[0])||null),p()};return(M,j)=>{const G=We,N=ce,c=ve,_=It;return l(),h("div",hs,[o(N,null,{default:n(()=>[e(t).meta?(l(),h("div",ks,[o(G,{checked:e(t).meta.is_multi,"data-testid":"user-column-allow-multiple",onChange:b},{default:n(()=>[ws]),_:1},8,["checked"])])):g("",!0)]),_:1}),e(r)?(l(),u(N,{key:0},{default:n(()=>[e(t).meta?(l(),h("div",bs,[o(G,{checked:e(t).meta.notify,"onUpdate:checked":j[0]||(j[0]=O=>e(t).meta.notify=O),"data-testid":"user-column-notify-user"},{default:n(()=>[xs]),_:1},8,["checked"])])):g("",!0)]),_:1})):g("",!0),e(m)&&M.isEdit&&!e(t).meta.is_multi?(l(),u(_,{key:1,type:"warning","show-icon":""},{icon:n(()=>[o(c,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>[L(" Alert ")]),description:n(()=>[L(" Changing from multiple mode to single will retain only first user in each cell! ")]),_:1})):g("",!0)])}}}),Cs={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ts=i("path",{fill:"currentColor",d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2m1 5h-2v4H7v2h4v4h2v-4h4v-2h-4z"},null,-1),Is=[Ts];function Ms(s,f){return l(),h("svg",Cs,[...Is])}const Ds={name:"mdi-plus-circle-outline",render:Ms},Ss={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Os=i("path",{fill:"currentColor",d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2M7 13h10v-2H7"},null,-1),Ls=[Os];function Us(s,f){return l(),h("svg",Ss,[...Ls])}const As={name:"mdi-minus-circle-outline",render:Us},Rs={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Es=i("path",{fill:"currentColor",d:"M10 7v2H9v6h1v2H6v-2h1V9H6V7zm6 0a2 2 0 0 1 2 2v6c0 1.11-.89 2-2 2h-4V7m4 2h-2v6h2z"},null,-1),Ns=[Es];function Bs(s,f){return l(),h("svg",Rs,[...Ns])}const Vs={name:"mdi-identifier",render:Bs},Ps=Ge(()=>Ee(()=>import("./Du--IU6F.js"),__vite__mapDeps([86,1,2,87]),import.meta.url).then(s=>s.default||s)),Fs=Ge(()=>Ee(()=>import("./B9Xhli0z.js"),__vite__mapDeps([88,1,2,89,26,90,22,91,92]),import.meta.url).then(s=>s.default||s)),js=Ge(()=>Ee(()=>import("./CkgP9LXz.js"),__vite__mapDeps([93,1,2,73,11,74,75,76,14,18,77,78,79,80,81,82,15,17,83,84,85,36,32,94,13,16,95,96]),import.meta.url).then(s=>s.default||s)),Gs=Ge(()=>Ee(()=>import("./kZl-QFI4.js"),__vite__mapDeps([97,1,2,73,11,74,75,76,14,18,77,78,79,80,81,82,15,17,83,84,85,36,32,13,16]),import.meta.url).then(s=>s.default||s)),qs=s=>(Nt("data-v-0baccb42"),s=s(),Bt(),s),Ks={class:"flex flex-grow px-2 py-1 items-center rounded-md bg-gray-100 focus:bg-gray-100 outline-none",style:{"outline-style":"solid","outline-width":"thin"}},zs=["disabled","placeholder"],Hs={class:"flex items-center gap-1"},Xs=["data-testid"],Ws={class:"flex gap-2 items-center"},Ys={class:"flex-1"},Zs={key:0,class:"!text-xs !text-gray-300"},Qs={key:0,class:"flex items-center gap-1"},Js={class:"text-sm text-gray-800"},ei={class:"nc-column-options-wrapper flex flex-col gap-4"},ti={key:2,class:"flex gap-1"},li=qs(()=>i("div",{class:"text-sm text-gray-800"},"Set as Unique",-1)),ni={key:0,class:"text-xs text-gray-400 flex items-center justify-end"},oi={key:0,class:"overflow-hidden"},ai=ie({__name:"EditOrAdd",props:{preload:{},columnPosition:{},embedMode:{type:Boolean},columnLabel:{},hideTitle:{type:Boolean},hideType:{type:Boolean},hideAdditionalOptions:{type:Boolean},fromTableExplorer:{type:Boolean},readonly:{type:Boolean}},emits:["submit","cancel","mounted","add","update"],setup(s,{emit:f}){const y=s,E=f,{formState:t,generateNewColumnMeta:r,addOrUpdate:m,onAlter:k,onUidtOrIdTypeChange:w,validateInfos:p,isEdit:b,disableSubmitBtn:M,column:j}=Se(),{getMeta:G}=st(),{t:N}=Re(),{isMetaReadOnly:c}=bt(),_=Z(()=>y.columnLabel||N("objects.field")),{$e:O}=Jl(),{appInfo:U}=zl(),{betaFeatureToggleState:K}=vn(),{openedViewsTab:te}=at(Ft());Gt();const A=Ae(Xe,W()),Q=Ae(Hl,W(!1)),V=Ae(Xl,W(!1)),T=Z(()=>y.readonly),{isMysql:P,isMssql:me,isDatabricks:de,isXcdbBase:v}=_t(),D=Ae(Wl),R=W(!1),z=W(!1),se=W(!1),fe=W(!0),ye=Z({get:()=>(At(t.value.cdf)&&!se.value&&(se.value=!0),At(t.value.cdf)||se.value),set:$=>{se.value=$}}),Ne=[d.Email,d.URL,d.PhoneNumber],J=[d.LinkToAnotherRecord,d.Lookup,d.Rollup,d.Links,d.CreatedTime,d.LastModifiedTime,d.CreatedBy,d.LastModifiedBy,d.Formula,d.QrCode,d.Barcode],ge=W(!1),Ye=$=>U.value.ee?K.show?K.show:!$.name.includes(d.GeoData):!0,Oe=W(!1),Te=$=>[d.CreatedBy,d.CreatedTime,d.LastModifiedBy,d.LastModifiedTime].includes($.name),B=$=>{var ze;const a=!Te($)||t.value.uidt===$.name||!b.value,x=Ye($)&&(!b.value||!$.virtual||$.name===t.value.uidt),oe=$.name===d.SpecificDBType&&v((ze=A.value)==null?void 0:ze.source_id),et=!$.deprecated||Oe.value;return a&&x&&!oe&&et},q=Z(()=>{var a,x;const $=[...an.filter(B),...!b.value&&((x=(a=A==null?void 0:A.value)==null?void 0:a.columns)!=null&&x.every(oe=>!oe.pk))?[{name:d.ID,icon:Vs,virtual:0}]:[]];return c.value&&$.sort((oe,et)=>{const ze=He.includes(oe.name),it=He.includes(et.name);return ze&&!it?-1:!ze&&it?1:0}),$}),ne=$=>{t.value.uidt=$,w()},Be=async()=>{var $;await G(($=A.value)==null?void 0:$.id,!0),V.value||D==null||D.trigger()},Le=W(!1),he=W(!1),qe=async()=>{if(T.value)return;Le.value=!0;const $=await m(Be,y.columnPosition);Le.value=!1,$&&(setTimeout(()=>{R.value=!1},500),E("submit"),Q.value&&O("a:form-view:add-new-field"))};async function Ke(){var $;if(!T.value)if(b.value&&t.value.uidt!==(($=j.value)==null?void 0:$.uidt)){he.value=!0;const{close:a}=fn(xn,{visible:he,"onUpdate:visible":x=>he.value=x,saving:Le,onSubmit:async()=>{a(),await qe()}})}else await qe()}const I=W();Tt(()=>{I.value&&t.value&&!T.value&&setTimeout(()=>{var $,a;(document.activeElement===document.body||document.activeElement===null)&&(($=I.value)==null||$.focus(),(a=I.value)==null||a.select())},300),R.value=!1}),Ie(()=>{var $;if(b.value?t.value.pk?(Lt.info(N("msg.info.editingPKnotSupported")),E("cancel")):Ct(t.value)&&!Yl(t.value)&&(Lt.info(N("msg.info.editingSystemKeyNotSupported")),E("cancel")):r(!0),y.preload){const{colOptions:a,...x}=y.preload;if(t.value={...t.value,...x},a){const oe=t.value.meta||{};w(),t.value={...t.value,colOptions:{...a},meta:oe}}}else t.value.filters=void 0;t.value&&!t.value.column_name&&!$t(t.value)&&(t.value.column_name=($=t.value)==null?void 0:$.title),xt(()=>{var a;z.value=!0,E("mounted"),b.value||(a=t.value)!=null&&a.temp_id||E("add",t.value),Q.value&&!y.fromTableExplorer&&setTimeout(()=>{var x,oe;(x=I.value)==null||x.focus(),(oe=I.value)==null||oe.select()},100)})});const F=$=>{ge.value||$.key==="Escape"&&E("cancel")},ee=Z(()=>te.value==="field"),ue=$=>{$?ge.value=$:(fe.value=!0,setTimeout(()=>{ge.value=$},300))},Ce=()=>{fe.value&&(fe.value=!1)};y.fromTableExplorer&&Me(t,()=>{z.value&&E("update",t.value)},{deep:!0});const Ve=Z(()=>({label:`${b.value&&!y.columnLabel?N("general.update"):N("general.save")} ${_.value}`,loadingLabel:`${b.value&&!y.columnLabel?N("general.updating"):N("general.saving")} ${_.value}`})),Ze=($,a)=>a.value.toLowerCase().includes($.toLowerCase())||Pe[a.value]&&Pe[a.value].toLowerCase().includes($.toLowerCase()),Ue=Z(()=>{var $;return!(c.value&&!He.includes(($=t.value)==null?void 0:$.uidt)&&!je(t.value))});return($,a)=>{const x=ce,oe=jt,et=Ln,ze=ve,it=be,Wt=xe,Yt=no,Zt=io,Qt=Mo,Jt=Ao,el=Bo,tl=Po,ll=Ho,nl=Jo,ol=ca,al=ma,sl=fa,il=ha,ul=xa,rl=Da,cl=ja,dl=cs,ml=_s,pl=gs,_l=$s,vl=nn,St=We,fl=Ps,yl=Fs,gl=js,hl=Gs,Ot=rt,kl=gn;return e(he)?g("",!0):(l(),h("div",{key:0,class:ke(["overflow-auto max-h-[max(80vh,500px)]",{"bg-white":!y.fromTableExplorer,"w-[384px]":!y.embedMode,"min-w-[500px]":e(t).uidt===e(d).LinkToAnotherRecord||e(t).uidt===e(d).Links,"overflow-visible":e(t).uidt===e(d).Formula,"!w-[600px]":e(t).uidt===e(d).LinkToAnotherRecord||e(t).uidt===e(d).Links,"shadow-lg shadow-gray-300 border-1 border-gray-200 rounded-xl p-5":!$.embedMode}]),onKeydown:F,onClick:a[36]||(a[36]=_e(()=>{},["stop"]))},[o(kl,{modelValue:e(t),"onUpdate:modelValue":a[35]||(a[35]=ut=>Y(t)?t.value=ut:null),"no-style":"",name:"column-create-or-edit",layout:"vertical","data-testid":"add-or-edit-column",class:"flex flex-col gap-4"},{default:n(()=>{var ut;return[e(ee)?(l(),u(x,pe({key:0},e(p).title,{class:"flex flex-grow"}),{default:n(()=>[i("div",Ks,[nt(i("input",{ref_key:"antInput",ref:I,"onUpdate:modelValue":a[0]||(a[0]=S=>e(t).title=S),disabled:e(T)||!e(Ue),placeholder:`${$.$t("objects.field")} ${$.$t("general.name").toLowerCase()} ${e(b)?"":$.$t("labels.optional")}`,class:"flex flex-grow nc-fields-input text-sm font-semibold outline-none bg-inherit min-h-6",contenteditable:!0,onInput:a[1]||(a[1]=S=>e(t).userHasChangedTitle=!0)},null,40,zs),[[Zl,e(t).title]])])]),_:1},16)):g("",!0),!y.hideTitle&&!e(ee)?(l(),u(x,pe({key:1},e(p).title,{required:!1,class:"!mb-0"}),{default:n(()=>[o(oe,{ref_key:"antInput",ref:I,value:e(t).title,"onUpdate:value":a[2]||(a[2]=S=>e(t).title=S),class:"nc-column-name-input !rounded-lg",placeholder:`${$.$t("objects.field")} ${$.$t("general.name").toLowerCase()} ${e(b)?"":$.$t("labels.optional")}`,disabled:e(V)||e(T)||!e(Ue),onInput:a[3]||(a[3]=S=>e(k)(8))},null,8,["value","placeholder","disabled"])]),_:1},16)):g("",!0),i("div",Hs,[!y.hideType&&!e(t).uidt?(l(),u(et,{key:0,options:e(q),onSelected:ne},null,8,["options"])):y.hideType?g("",!0):(l(),u(x,{key:1,class:"flex-1",onKeydown:[Qe(_e(Ce,["stop"]),["up"]),Qe(_e(Ce,["stop"]),["down"])]},{default:n(()=>{var S;return[o(Wt,{value:e(t).uidt,"onUpdate:value":a[4]||(a[4]=we=>e(t).uidt=we),"show-search":"",class:"nc-column-type-input !rounded-lg",disabled:e(b)&&e(c)&&!e(He).includes(e(t).uidt)||e(V)||e(T)||e(b)&&!!J.includes((S=e(j))==null?void 0:S.uidt)||e(b)&&!e(Ue),"dropdown-class-name":"nc-dropdown-column-type border-1 !rounded-lg border-gray-200","filter-option":Ze,onDropdownVisibleChange:ue,onChange:e(w),onDblclick:a[5]||(a[5]=we=>Oe.value=!e(Oe))},{suffixIcon:n(()=>[o(ze,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),h(H,null,le(e(q),we=>(l(),u(it,pe({key:we.name,value:we.name,disabled:e(c)&&!e(He).includes(we.name),ref_for:!0},e(p).uidt,{class:{"ant-select-item-option-active-selected":e(fe)&&e(t).uidt===we.name},onMouseover:Ce}),{default:n(()=>[i("div",{class:"w-full flex gap-2 items-center justify-between","data-testid":we.name},[i("div",Ws,[(l(),u(X(we.icon),{class:ke(["w-4 h-4",e(c)&&!e(He).includes(we.name)?"text-gray-300":"text-gray-700"])},null,8,["class"])),i("div",Ys,C(e(Pe)[we.name]),1),we.deprecated?(l(),h("span",Zs,"("+C($.$t("general.deprecated"))+")",1)):g("",!0)]),e(t).uidt===we.name?(l(),u(X(("iconMap"in $?$.iconMap:e(ae)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):g("",!0)],8,Xs)]),_:2},1040,["value","disabled","class"]))),128))]),_:1},8,["value","disabled","onChange"])]}),_:1},8,["onKeydown"]))]),!e(T)&&e(t).uidt?(l(),h(H,{key:2},[e(t).uidt===e(d).Formula?(l(),u(Yt,{key:0,value:e(t),"onUpdate:value":a[6]||(a[6]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).QrCode?(l(),u(Zt,{key:1,modelValue:e(t),"onUpdate:modelValue":a[7]||(a[7]=S=>Y(t)?t.value=S:null)},null,8,["modelValue"])):g("",!0),e(t).uidt===e(d).Barcode?(l(),u(Qt,{key:2,modelValue:e(t),"onUpdate:modelValue":a[8]||(a[8]=S=>Y(t)?t.value=S:null)},null,8,["modelValue"])):g("",!0),e(t).uidt===e(d).Currency?(l(),u(Jt,{key:3,value:e(t),"onUpdate:value":a[9]||(a[9]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).LongText?(l(),u(el,{key:4,value:e(t),"onUpdate:value":a[10]||(a[10]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).Duration?(l(),u(tl,{key:5,value:e(t),"onUpdate:value":a[11]||(a[11]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).Rating?(l(),u(ll,{key:6,value:e(t),"onUpdate:value":a[12]||(a[12]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).Checkbox?(l(),u(nl,{key:7,value:e(t),"onUpdate:value":a[13]||(a[13]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).Lookup?(l(),u(ol,{key:8,value:e(t),"onUpdate:value":a[14]||(a[14]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).Date?(l(),u(al,{key:9,value:e(t),"onUpdate:value":a[15]||(a[15]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).Time?(l(),u(sl,{key:10,value:e(t),"onUpdate:value":a[16]||(a[16]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).Number?(l(),u(il,{key:11,value:e(t),"onUpdate:value":a[17]||(a[17]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).Decimal?(l(),u(ul,{key:12,value:e(t),"onUpdate:value":a[18]||(a[18]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),[e(d).DateTime,e(d).CreatedTime,e(d).LastModifiedTime].includes(e(t).uidt)?(l(),u(rl,{key:13,value:e(t),"onUpdate:value":a[19]||(a[19]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).Rollup?(l(),u(cl,{key:14,value:e(t),"onUpdate:value":a[20]||(a[20]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).LinkToAnotherRecord||e(t).uidt===e(d).Links?(l(),u(dl,{key:`${e(t).uidt}-${e(t).id||e(t).title}`,value:e(t),"onUpdate:value":a[21]||(a[21]=S=>Y(t)?t.value=S:null),"is-edit":e(b)},null,8,["value","is-edit"])):g("",!0),e(t).uidt===e(d).Percent?(l(),u(ml,{key:16,value:e(t),"onUpdate:value":a[22]||(a[22]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt===e(d).SpecificDBType?(l(),u(pl,{key:17})):g("",!0),e(t).uidt===e(d).User?(l(),u(_l,{key:18,value:e(t),"onUpdate:value":a[23]||(a[23]=S=>Y(t)?t.value=S:null),"is-edit":e(b)},null,8,["value","is-edit"])):g("",!0),e(t).uidt===e(d).SingleSelect||e(t).uidt===e(d).MultiSelect?(l(),u(vl,{key:19,value:e(t),"onUpdate:value":a[24]||(a[24]=S=>Y(t)?t.value=S:null),"from-table-explorer":y.fromTableExplorer||!1},null,8,["value","from-table-explorer"])):g("",!0)],64)):g("",!0),e(t).uidt?(l(),h(H,{key:3},[e(t).meta&&Ne.includes(e(t).uidt)?(l(),h("div",Qs,[o(St,{checked:e(t).meta.validate,"onUpdate:checked":a[25]||(a[25]=S=>e(t).meta.validate=S),size:"small",class:"nc-switch"},{default:n(()=>[i("div",Js,C(`${$.$t("msg.acceptOnlyValid",{type:e(t).uidt===e(d).URL?`${e(Pe)[e(t).uidt]}s`:`${e(Pe)[e(t).uidt]}s`.toLowerCase()})}`),1)]),_:1},8,["checked"])])):g("",!0),!e(T)&&e(Ue)?(l(),h(H,{key:1},[i("div",ei,[("isTextArea"in $?$.isTextArea:e(Rt))(e(t))&&((ut=e(t).meta)!=null&&ut.richMode)?(l(),u(fl,{key:0,value:e(t),"onUpdate:value":a[26]||(a[26]=S=>Y(t)?t.value=S:null),"is-visible-default-value-input":e(ye),"onUpdate:isVisibleDefaultValueInput":a[27]||(a[27]=S=>Y(ye)?ye.value=S:null)},null,8,["value","is-visible-default-value-input"])):!e(je)(e(t))&&!("isAttachment"in $?$.isAttachment:e(ht))(e(t))&&!e(me)(e(A).source_id)&&!(e(P)(e(A).source_id)&&(("isJSON"in $?$.isJSON:e(yn))(e(t))||("isTextArea"in $?$.isTextArea:e(Rt))(e(t))))&&!(e(de)(e(A).source_id)&&e(t).unique)?(l(),u(yl,{key:1,value:e(t),"onUpdate:value":a[28]||(a[28]=S=>Y(t)?t.value=S:null),"is-visible-default-value-input":e(ye),"onUpdate:isVisibleDefaultValueInput":a[29]||(a[29]=S=>Y(ye)?ye.value=S:null)},null,8,["value","is-visible-default-value-input"])):g("",!0),e(de)(e(A).source_id)&&!e(t).cdf&&![e(d).MultiSelect,e(d).Checkbox,e(d).Rating,e(d).Attachment,e(d).Lookup,e(d).Rollup,e(d).Formula,e(d).Barcode,e(d).QrCode,e(d).CreatedTime,e(d).LastModifiedTime,e(d).CreatedBy,e(d).LastModifiedBy].includes(e(t).uidt)?(l(),h("div",ti,[o(St,{checked:e(t).unique,"onUpdate:checked":a[30]||(a[30]=S=>e(t).unique=S),size:"small",class:"nc-switch"},{default:n(()=>[li]),_:1},8,["checked"])])):g("",!0)]),!y.hideAdditionalOptions&&!e(je)(e(t).uidt)&&!(!e(U).ee&&("isAttachment"in $?$.isAttachment:e(ht))(e(t)))&&(!e(U).ee||e(U).ee&&!e(v)(e(A).source_id)&&e(t).uidt===e(d).SpecificDBType)?(l(),h("div",ni,[i("div",{class:"nc-more-options flex items-center gap-1 cursor-pointer select-none",onClick:a[31]||(a[31]=S=>R.value=!e(R))},[L(C(e(R)?$.$t("general.hideAll"):$.$t("general.showMore"))+" ",1),(l(),u(X(e(R)?e(As):e(Ds))))])])):g("",!0),o(Ql,{name:"layout",mode:"out-in"},{default:n(()=>[e(R)?(l(),h("div",oi,[e(U).ee&&("isAttachment"in $?$.isAttachment:e(ht))(e(t))?(l(),u(gl,{key:0,value:e(t),"onUpdate:value":a[32]||(a[32]=S=>Y(t)?t.value=S:null)},null,8,["value"])):g("",!0),e(t).uidt!==e(d).Attachment?(l(),u(hl,{key:1,value:e(t),"onUpdate:value":a[33]||(a[33]=S=>Y(t)?t.value=S:null),"advanced-db-options":e(R)||e(t).uidt===e(d).SpecificDBType},null,8,["value","advanced-db-options"])):g("",!0)])):g("",!0)]),_:1})],64)):g("",!0),y.fromTableExplorer?(l(),u(x,{key:2})):(l(),u(x,{key:3},{default:n(()=>[i("div",{class:ke(["flex gap-x-2 justify-end",{"justify-end":!y.embedMode}])},[o(Ot,{size:"small","html-type":"button",type:"secondary",onClick:a[34]||(a[34]=S=>E("cancel"))},{default:n(()=>[L(C($.$t("general.cancel")),1)]),_:1}),o(Ot,{"html-type":"submit",type:"primary",loading:e(Le),disabled:!e(t).uidt||e(M),size:"small",label:e(Ve).label,"loading-label":e(Ve).loadingLabel,"data-testid":"nc-field-modal-submit-btn",onClick:_e(Ke,["prevent"])},{loading:n(()=>[L(C(e(Ve).loadingLabel),1)]),default:n(()=>[L(C(e(Ve).label)+" ",1)]),_:1},8,["loading","disabled","label","loading-label"])],2)]),_:1}))],64)):g("",!0)]}),_:1},8,["modelValue"])],34))}}}),si=De(ai,[["__scopeId","data-v-0baccb42"]]),Ei=ie({__name:"EditOrAddProvider",props:{column:{},columnPosition:{},preload:{},tableExplorerColumns:{},fromTableExplorer:{type:Boolean},isColumnValid:{type:Function}},emits:["submit","cancel","mounted"],setup(s,{emit:f}){const y=s,E=f,t=Ae(Xe,W()),{column:r,preload:m,tableExplorerColumns:k,fromTableExplorer:w,isColumnValid:p}=Et(y);return on(t,r,k,w,p),(b,M)=>{const j=si;return l(),u(j,{preload:e(m),"column-position":y.columnPosition,"from-table-explorer":y.fromTableExplorer||!1,onSubmit:M[0]||(M[0]=G=>E("submit")),onCancel:M[1]||(M[1]=G=>E("cancel")),onMounted:M[2]||(M[2]=G=>E("mounted"))},null,8,["preload","column-position","from-table-explorer"])}}});export{Ei as _,$e as c};
