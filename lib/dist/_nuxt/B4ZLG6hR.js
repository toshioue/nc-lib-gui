const __vite__fileDeps=["./BHAESLOB.js","./DfeSAprs.js","./DZZ6t_j4.js","./entry.DIDWwc7m.css","./DNgdBwTe.js","./eX8_g88K.js","./vll-Pnjv.js","./Checkbox.M_COpns0.css","./DKN1hQ6S.js","./BQuyMdA-.js","./BQQOEPN4.js","./B5RRVMt5.js","./DGj1ycqW.js","./DyDFI6NE.js","./dfem9Uc_.js","./BCJFTkwv.js","./Params.2gztIYBh.css","./D5-s86dt.js","./D_MsYLkT.js","./CB1aB6F1.js","./Headers.D-cAnKu5.css","./B4Lj1XSi.js","./boyBAVNN.js","./CwK0k4WN.js","./toggleHighContrast.wojAGmRG.css","./Editor.6PWXOFSt.css","./Co7bS_RQ.js","./DqAHSrWO.js","./sz1d3zjm.js","./MenuItem.C7h59s4s.css","./BLgccLvp.js","./Menu.CQ8GNWeI.css","./vK-WmZ7a.js","./DnSVh-oD.js","./Select.C8Fy0-eI.css","./BtLb9F6G.js","./hZgTYrdl.js","./ByVBARmO.js","./37hePIet.js","./C4K5fdHe.js","./i4aLU0Nw.js","./GMLocJHP.js","./FieldListAutoCompleteDropdown.B9RfDcmT.css","./BC4FfNUJ.js","./EqBqqo9-.js","./DKoVb009.js","./CFvUUxCy.js","./SingleSelect.B3VFmHbU.css","./BfEabL6Z.js","./DO2z7KR_.js","./MultiSelect.CPGlWfel.css","./_UtSxoDP.js","./CdfAcTJv.js","./CToWLgER.js","./DateWeekSelector.Cg_ptNCJ.css","./jD721dGr.js","./DatePicker.CPnQAVbd.css","./8CPSAnYl.js","./YearPicker.D3GFQXjv.css","./wnVheyFD.js","./CbkSs5Gy.js","./TimePicker.D71nJvtX.css","./B_hXH8Ph.js","./BDAIZopQ.js","./Rating.Bbd6kC9Q.css","./CwCOKBa8.js","./C9Sjn86N.js","./Duration.qRuog1CR.css","./ZFfr47_V.js","./CmWcz5yS.js","./Percent.CRLQxj2f.css","./Dw0oE3Jr.js","./Currency.B3r8b999.css","./Cj0Ygd-o.js","./Decimal.B3q8Nk6V.css","./DXGe1EHQ.js","./Integer.B2TNnrsi.css","./BL8INA0H.js","./Float.BKKVtNnp.css","./bWYzyg0p.js","./BGrG97ky.js","./DnwRMKX3.js","./UserIcon.DEVmGavY.css","./User.Cb8PWh8F.css","./B05h-4V9.js","./ColumnFilter.Nvete9xV.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{aN as ct,r as h,u as dt,cW as ze,ba as ge,cP as Ee,f as te,cO as Ve,dc as xe,ah as U,ai as D,dC as ut,y as Ne,e as pt,ag as ft,ap as yt,ab as mt,ax as $e,cL as ht,bL as bt,d7 as vt,ar as _t,V as Ie,dj as wt,F as ve,fY as kt,g as gt,ga as xt,o as m,Q as g,w as l,a as d,b as n,t as T,N as t,d as P,R as x,W as le,cY as Y,cZ as Z,P as Ue,aJ as Tt,dk as St,a7 as Q,c as S,ao as X,at as ee,T as _e,U as we,O as ke,S as De,aF as Lt,a$ as Mt,au as Ct,Y as Vt,Z as $t,$ as It,fU as Ut,X as oe,a4 as ae,_ as Dt}from"./DZZ6t_j4.js";import{_ as Ot}from"./Ck-cgwga.js";import{_ as zt}from"./CJNscGy3.js";import{_ as Et}from"./CyRMlOXW.js";import{_ as Nt}from"./Bdv7ru7D.js";import{f as L}from"./C3jLTHF4.js";import{F as Oe}from"./BYINaHrJ.js";import"./DKN1hQ6S.js";import{I as Wt}from"./BQuyMdA-.js";import{_ as Rt}from"./dfem9Uc_.js";import{S as jt,_ as Pt}from"./D_MsYLkT.js";import{_ as At}from"./DGj1ycqW.js";const Bt=ct("webhooksStore",()=>{const c=h([]),A=h(!0),{$api:w,$e:B}=Ne(),O=dt(),r=O.currentRoute,{getMeta:F}=ze(),{activeTable:C}=ge(Ee()),q=te(()=>W({openCreatePage:!0})),z=te(()=>W({openMainPage:!0}));async function E(){var y;A.value=!0;try{const u=(await w.dbTableWebhook.list((y=C.value)==null?void 0:y.id)).list;c.value=u.map(s=>(s.notification=xe(s.notification),s))}catch(u){U.error(await D(u))}finally{A.value=!1}}async function N(y){const u=c.value.findIndex(s=>s.id===y);try{y&&await w.dbTableWebhook.delete(y),c.value.splice(u,1),c.value.length||(c.value=[])}catch(s){U.error(await D(s))}finally{await F(C.value.id,!0)}}async function se(y){try{const u=await w.dbTableWebhook.create(y.fk_model_id,{...y,title:ut(`${y.title} copy`,c.value,"title","_",!0),active:y.event==="manual"});if(u){B("a:webhook:copy");const s=(await w.dbTableWebhookFilter.read(y.id,{})).list;for(const p of s)await w.dbTableWebhookFilter.create(u.id,{comparison_op:p.comparison_op,comparison_sub_op:p.comparison_sub_op,fk_column_id:p.fk_column_id,fk_parent_id:p.fk_parent_id,is_group:p.is_group,logical_op:p.logical_op,value:p.value});u.notification=xe(u.notification),c.value=[u,...c.value]}}catch(u){U.error(await D(u))}finally{await F(C.value.id,!0)}}async function $({hook:y,ogHook:u}){if(!C.value)throw new Error("activeTable is not defined");typeof y.notification=="string"&&(y.notification=JSON.parse(y.notification));let s=y;try{let p;s.id?p=await w.dbTableWebhook.update(s.id,{...s,notification:{...s.notification,payload:s.notification.payload}}):(p=await w.dbTableWebhook.create(C.value.id,{...s,notification:{...s.notification,payload:s.notification.payload}}),c.value.push(p)),p&&typeof p.notification=="string"&&(p.notification=JSON.parse(p.notification)),!s.id&&p&&(s={...s,...p}),c.value=c.value.map(e=>e.id===s.id?s:e)}catch(p){U.error(await D(p)),console.error(p),u&&(c.value=c.value.map(e=>e.id===u.id?u:e))}finally{await F(C.value.id,!0)}return B("a:webhook:add",{operation:s.operation,condition:s.condition,notification:s.notification.type}),s}function W({hookId:y,openCreatePage:u,openMainPage:s}){const{activeView:p}=Ve();if(!p)throw new Error("activeView is not defined");if(!s&&!u&&!y)throw new Error("hook id is not defined");return{name:"index-typeOrId-baseId-index-index-viewId-viewTitle-slugs",params:{typeOrId:r.value.params.typeOrId,baseId:r.value.params.baseId,viewId:r.value.params.viewId,viewTitle:p.id,slugs:s?["webhook"]:["webhook",u?"create":y]}}}return{hooks:c,loadHooksList:E,deleteHook:N,copyHook:se,saveHooks:$,navigateToWebhook:async({hookId:y,openCreatePage:u,openMainPage:s})=>{const{activeView:p}=Ve();p&&await O.push(W({hookId:y,openCreatePage:u,openMainPage:s}))},createWebhookUrl:q,webhookMainUrl:z,isHooksLoading:A,navigateToWebhookRoute:W}}),Ft=oe(()=>ae(()=>import("./BHAESLOB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url).then(c=>c.default||c)),qt=oe(()=>ae(()=>import("./D5-s86dt.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,18,15,10,19,11,8,9,12,13,14,20]),import.meta.url).then(c=>c.default||c)),Ht=oe(()=>ae(()=>import("./B4Lj1XSi.js"),__vite__mapDeps([21,22,2,3,23,24,25]),import.meta.url).then(c=>c.default||c)),Kt=oe(()=>ae(()=>import("./Co7bS_RQ.js"),__vite__mapDeps([26,2,3,18,15,10,19,11,6]),import.meta.url).then(c=>c.default||c)),Gt=oe(()=>ae(()=>import("./DqAHSrWO.js").then(c=>c.C),__vite__mapDeps([27,2,3,28,29,30,31,32,33,18,15,10,19,11,6,34,35,36,37,38,39,40,41,42,43,44,45,46,5,47,48,49,4,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85]),import.meta.url).then(c=>c.default||c)),Jt={class:"flex w-full items-center p-4 justify-between"},Yt={class:"flex items-center gap-3"},Zt={class:"text-gray-900 font-semibold text-xl"},Qt={class:"flex justify-end items-center gap-3"},Xt={class:"flex bg-white rounded-b-2xl h-[calc(100%_-_66px)]"},eo={style:{"max-width":"700px","min-width":"640px"},class:"mx-auto gap-8 flex flex-col"},to=["placeholder"],oo={class:"flex flex-col gap-4"},ao={class:"flex w-full gap-3 custom-select"},io={class:"flex items-center w-full gap-2 justify-between"},no={class:"flex items-center w-full gap-2"},lo={class:"flex-1"},so={key:0,class:"flex flex-col gap-8"},ro={class:"flex flex-col custom-select w-full gap-4"},co={class:"flex w-full gap-3"},uo={class:"flex items-center gap-2 justify-between w-full"},po={style:{"box-shadow":"0px 0px 4px 0px rgba(0, 0, 0, 0.08), 0px 0px 4px 0px rgba(0, 0, 0, 0.08)"},class:"my-3 mx-1 rounded-lg overflow-hidden"},fo={key:1,class:"flex flex-col w-full gap-3"},yo={key:2,class:"flex flex-col w-full gap-3"},mo={key:3,class:"flex flex-col w-full gap-3"},ho={key:4,class:"flex flex-col w-full gap-3"},bo={key:0},vo={class:"!text-gray-700 font-semibold"},_o={class:"flex flex-col gap-4"},wo={class:"flex items-center justify-between -ml-1.5"},ko={class:"flex items-center gap-3"},go={class:"h-full bg-gray-50 border-l-1 w-80 p-5 rounded-br-2xl border-gray-200"},xo={class:"w-full flex flex-col gap-3"},To={class:"text-sm text-gray-700 font-semibold !my-0"},So={class:"h-7 w-7 flex items-center justify-center"},Lo=pt({__name:"index",props:{value:{type:Boolean},eventList:{},hook:{}},emits:["close","update:value"],setup(c,{emit:A}){const w=c,B=A,{eventList:O}=ge(w),{t:r}=ft(),{$e:F,$api:C}=Ne(),{api:q,isLoading:z}=yt(),E=mt(w,"value"),{hooks:N}=$e(Bt()),{base:se}=$e(ht()),$=bt(vt,h()),{getMeta:W}=ze(),{activeTable:Te}=ge(Ee()),y=r("labels.webhook"),u=h(),s=h(""),p=Oe.useForm;let e=_t({id:"",title:y,event:void 0,operation:void 0,eventOperation:void 0,notification:{type:"URL",payload:{method:"POST",body:"{{ json event }}",headers:[{}],parameters:[{}],path:""}},condition:!1,active:!0,version:"v2"});const We=h(e.version==="v1"||Ie),re=h("params"),k=h(),ce=h([]),de=h([]),ue=h([]),pe=h([]),fe=h(),I=h(),Se=h({Email:[{key:"to",label:r("labels.toAddress"),placeholder:r("labels.toAddress"),type:"SingleLineText",required:!0},{key:"subject",label:r("labels.subject"),placeholder:r("labels.subject"),type:"SingleLineText",required:!0},{key:"body",label:r("labels.body"),placeholder:r("labels.body"),type:"LongText",required:!0}],Slack:[{key:"body",label:r("labels.body"),placeholder:r("labels.body"),type:"LongText",required:!0}],"Microsoft Teams":[{key:"body",label:r("labels.body"),placeholder:r("labels.body"),type:"LongText",required:!0}],Discord:[{key:"body",label:r("labels.body"),placeholder:r("labels.body"),type:"LongText",required:!0}],Mattermost:[{key:"body",label:r("labels.body"),placeholder:r("labels.body"),type:"LongText",required:!0}],Twilio:[{key:"body",label:r("labels.body"),placeholder:r("labels.body"),type:"LongText",required:!0},{key:"to",label:r("labels.commaSeparatedMobileNumber"),placeholder:r("labels.commaSeparatedMobileNumber"),type:"LongText",required:!0}],"Whatsapp Twilio":[{key:"body",label:r("labels.body"),placeholder:r("labels.body"),type:"LongText",required:!0},{key:"to",label:r("labels.commaSeparatedMobileNumber"),placeholder:r("labels.commaSeparatedMobileNumber"),type:"LongText",required:!0}]}),Re=te(()=>[{type:"URL",text:r("datatype.URL")},{type:"Email",text:r("datatype.Email")},{type:"Slack",text:r("general.slack")},{type:"Microsoft Teams",text:r("general.microsoftTeams")},{type:"Discord",text:r("general.discord")},{type:"Mattermost",text:r("general.matterMost")},{type:"Twilio",text:r("general.twilio")},{type:"Whatsapp Twilio",text:r("general.whatsappTwilio")}]),je=[{title:"GET"},{title:"POST"},{title:"DELETE"},{title:"PUT"},{title:"HEAD"},{title:"PATCH"}],Pe=te(()=>({title:[L()],eventOperation:[L()],"notification.type":[L()],...e.notification.type==="URL"&&{"notification.payload.method":[L()],"notification.payload.path":[L()]},...e.notification.type==="Email"&&{"notification.payload.to":[L()],"notification.payload.subject":[L()],"notification.payload.body":[L()]},...["Slack","Microsoft Teams","Discord","Mattermost"].includes(e.notification.type)&&{"notification.payload.channels":[L()],"notification.payload.body":[L()]},...(e.notification.type==="Twilio"||e.notification.type==="Whatsapp Twilio")&&{"notification.payload.body":[L()],"notification.payload.to":[L()]}})),{validate:Ae,validateInfos:M}=p(e,Pe),ie=o=>{if(o){if(Array.isArray(o))return o;if(typeof o=="object"&&Object.keys(o))return[o]}return[]};function Le(o=!1){var a,f,_,V,v,R,j,G;if(o&&(e.notification.payload={},["Slack","Microsoft Teams","Discord","Mattermost"].includes(e.notification.type)&&(e.notification.payload.channels=[],e.notification.payload.body="")),e.notification.type==="Slack"&&(ce.value=ie((f=(a=k==null?void 0:k.value)==null?void 0:a.Slack)==null?void 0:f.parsedInput)),e.notification.type==="Microsoft Teams"&&(de.value=ie((V=(_=k==null?void 0:k.value)==null?void 0:_["Microsoft Teams"])==null?void 0:V.parsedInput)),e.notification.type==="Discord"&&(ue.value=ie((R=(v=k==null?void 0:k.value)==null?void 0:v.Discord)==null?void 0:R.parsedInput)),e.notification.type==="Mattermost"&&(pe.value=ie((G=(j=k==null?void 0:k.value)==null?void 0:j.Mattermost)==null?void 0:G.parsedInput)),e.notification.type==="URL"){const J=e.notification.payload.body;e.notification.payload.body=J?J==="{{ json data }}"?"{{ json event }}":J:"{{ json event }}",e.notification.payload.parameters=e.notification.payload.parameters||[{}],e.notification.payload.headers=e.notification.payload.headers||[{}],e.notification.payload.method=e.notification.payload.method||"POST",e.notification.payload.auth=e.notification.payload.auth||""}}function Be(o){const a=o.notification;Object.assign(e,{...o,notification:{...a,payload:a.payload}})}function Fe(){const{notification:{payload:o={},type:a={}}={}}=e;Object.assign(e,{...e,notification:{type:a,payload:o}}),e.notification.payload=o;const f=h(null);switch(e.notification.type){case"Slack":f.value=ce.value;break;case"Microsoft Teams":f.value=de.value;break;case"Discord":f.value=ue.value;break;case"Mattermost":f.value=pe.value;break}f&&(e.notification.payload.webhook_url=e.notification.payload.webhook_url&&e.notification.payload.webhook_url.map(_=>{var V;return(V=f.value)==null?void 0:V.find(v=>_.webhook_url===v.webhook_url)})),e.notification.type==="URL"&&(e.notification.payload=e.notification.payload||{},e.notification.payload.parameters=e.notification.payload.parameters||[{}],e.notification.payload.headers=e.notification.payload.headers||[{}],e.notification.payload.method=e.notification.payload.method||"POST")}async function qe(){try{const o=(await q.plugin.webhookList({query:{base_id:se.value.id}})).list;k.value=o.reduce((a,f)=>{const _={title:"",tags:[],parsedInput:{},...f};return _.tags=f.tags?f.tags.split(","):[],_.parsedInput=xe(f.input),a[_.title]=_,a},{})}catch(o){U.error(await D(o))}}const Me=te(()=>e.eventOperation&&!(e.eventOperation.includes("bulk")||e.eventOperation.includes("manual")));async function He(){z.value=!0;try{await Ae()}catch{U.error(r("msg.error.invalidForm")),z.value=!1;return}try{let o;e.id?o=await q.dbTableWebhook.update(e.id,{...e,notification:{...e.notification,payload:e.notification.payload}}):(o=await q.dbTableWebhook.create($.value.id,{...e,notification:{...e.notification,payload:e.notification.payload}}),N.value.push(o)),o&&typeof o.notification=="string"&&(o.notification=JSON.parse(o.notification)),!e.id&&o&&(e={...e,...o}),fe.value&&await fe.value.applyChanges(e.id,!1,Me.value),N.value=N.value.map(a=>a.id===e.id?e:a),F("a:webhook:add",{operation:e.operation,condition:e.condition,notification:e.notification.type}),B("close",e)}catch(o){U.error(await D(o))}finally{W(Te.value.id,!0),z.value=!1}}const Ke=()=>{B("close",e)},ye=h(!1),H=h(),me=h(),[K,Ge]=wt(),Je=()=>{Ge(),Mt(()=>{K.value&&(me.value.scrollTop=me.value.scrollHeight)})};async function Ye(){var o;try{s.value="",u.value=!1,ye.value=!0,await C.dbTableWebhook.test((o=$.value)==null?void 0:o.id,{hook:e,payload:H.value}),u.value=!0}catch(a){s.value=await D(a)}finally{ye.value=!1}}const Ze=[{title:"Getting started",href:"https://docs.nocodb.com/automation/webhook/create-webhook/"},{title:"Create webhook",href:"https://docs.nocodb.com/automation/webhook/webhook-overview"},{title:"Custom payload",href:"https://docs.nocodb.com/automation/webhook/create-webhook#webhook-with-custom-payload-"},{title:"Trigger on condition",href:"https://docs.nocodb.com/automation/webhook/create-webhook#webhook-with-conditions"}];ve(()=>e==null?void 0:e.operation,async()=>{await Qe()});async function Qe(){var o;H.value=await C.dbTableWebhook.samplePayloadGet((o=$==null?void 0:$.value)==null?void 0:o.id,(e==null?void 0:e.operation)||"insert",e.version)}const Xe=o=>Ct([...o.map(a=>(a==null?void 0:a.title)||"")],y),et=o=>{switch(o){case"URL":return"link2";case"Email":return"mail";case"Slack":return"slack";case"Microsoft Teams":return"microsoftTeams";case"Discord":return"discord";case"Mattermost":return"mattermost";case"Twilio":return"twilio";case"Whatsapp Twilio":return"whatsapp"}};return kt("Escape",()=>{E.value=!1}),ve(()=>e.eventOperation,()=>{if(!e.eventOperation)return;const[o,a]=e.eventOperation.split(" ");e.event=o,e.operation=a}),ve(()=>w.hook,()=>{w.hook?(Be(w.hook),Fe()):e.title=Xe(N.value)},{immediate:!0}),gt(async()=>{await qe(),e.event&&e.operation?e.eventOperation=`${e.event} ${e.operation}`:e.eventOperation=O.value[0].value.join(" "),Le(),xt(()=>I.value).toBeTruthy().then(()=>{var o,a;(o=I.value)==null||o.focus(),(a=I.value)==null||a.select()})}),(o,a)=>{const f=Vt,_=$t,V=It,v=Rt,R=jt,j=Pt,G=Wt,J=Ft,he=Ut,tt=qt,Ce=Ht,ot=Ot,ne=Kt,at=zt,it=Gt,nt=At,lt=Oe,st=Et,rt=Nt;return m(),g(rt,{visible:t(E),"onUpdate:visible":a[21]||(a[21]=i=>ke(E)?E.value=i:null),"show-separator":!0,size:"large","wrap-class-name":"nc-modal-webhook-create-edit"},{header:l(()=>[d("div",Jt,[d("div",Yt,[n(f,{class:"text-gray-900 text-2xl",icon:"webhook"}),d("span",Zt,T(o.hook?o.$t("activity.webhookDetails"):o.$t("activity.newWebhook")),1)]),d("div",Qt,[n(V,{disabled:!t(s)},{title:l(()=>[P(T(t(s)),1)]),default:l(()=>[n(_,{loading:t(ye),type:"secondary",size:"small","icon-position":"right",onClick:Ye},{icon:l(()=>[t(u)?(m(),g(f,{key:0,icon:"circleCheckSolid",class:"!text-green-700 w-4 h-4 flex-none"})):t(s)?(m(),g(f,{key:1,icon:"alertTriangleSolid",class:"!text-red-700 w-4 h-4 flex-none"})):x("",!0)]),default:l(()=>[d("span",null,T(t(u)?"Test Successful":o.$t("activity.testWebhook")),1)]),_:1},8,["loading"])]),_:1},8,["disabled"]),n(_,{loading:t(z),type:"primary",size:"small","data-testid":"nc-save-webhook",onClick:le(He,["stop"])},{default:l(()=>[P(T(o.hook?o.$t("labels.multiField.saveChanges"):o.$t("activity.createWebhook")),1)]),_:1},8,["loading"]),n(_,{type:"text",size:"small","data-testid":"nc-close-webhook-modal",onClick:le(Ke,["stop"])},{default:l(()=>[n(f,{icon:"close"})]),_:1})])])]),default:l(()=>[d("div",Xt,[d("div",{ref_key:"containerElem",ref:me,class:"h-full flex-1 flex flex-col overflow-y-auto scroll-smooth nc-scrollbar-thin px-12 py-6 mx-auto"},[d("div",eo,[n(v,Y(Z(t(M).title)),{default:l(()=>[d("div",{class:"flex flex-grow px-2 py-1 title-input items-center border-b-1 rounded-t-md border-gray-200 bg-gray-100",onClick:a[3]||(a[3]=le(i=>{var b;return(b=t(I))==null?void 0:b.focus()},["prevent"]))},[Ue(d("input",{ref_key:"titleDomRef",ref:I,"onUpdate:modelValue":a[0]||(a[0]=i=>t(e).title=i),class:"flex flex-grow text-lg px-2 font-medium capitalize outline-none bg-inherit nc-text-field-hook-title",placeholder:o.$t("placeholder.webhookTitle"),contenteditable:!0,onKeydown:a[1]||(a[1]=Tt(i=>{var b;return(b=t(I))==null?void 0:b.blur()},["enter"]))},null,40,to),[[St,t(e).title]]),n(f,{icon:"rename",class:"cursor-text",onClick:a[2]||(a[2]=i=>{var b;return(b=t(I))==null?void 0:b.focus()})})])]),_:1},16),n(lt,{class:"flex flex-col gap-8",model:t(e),name:"create-or-edit-webhook"},{default:l(()=>[d("div",oo,[d("div",ao,[n(v,Q({class:"w-1/3"},t(M).eventOperation),{default:l(()=>[n(j,{value:t(e).eventOperation,"onUpdate:value":a[4]||(a[4]=i=>t(e).eventOperation=i),size:"medium",disabled:t(O).length===1,placeholder:o.$t("general.event"),class:"nc-text-field-hook-event !h-9 capitalize","dropdown-class-name":"nc-dropdown-webhook-event"},{suffixIcon:l(()=>[n(f,{icon:"arrowDown",class:"text-gray-700"})]),default:l(()=>[(m(!0),S(X,null,ee(t(O),(i,b)=>(m(),g(R,{key:b,class:"capitalize",value:i.value.join(" "),disabled:t(e).version==="v1"&&["bulkInsert","bulkUpdate","bulkDelete"].includes(i.value[1])},{default:l(()=>[d("div",io,[n(V,{class:"truncate","show-on-truncate-only":""},{title:l(()=>[P(T(i.text.join(" ")),1)]),default:l(()=>[P(" "+T(i.text.join(" ")),1)]),_:2},1024),t(e).eventOperation===i.value.join(" ")?(m(),g(_e(("iconMap"in o?o.iconMap:t(we)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4 flex-none"})):x("",!0)])]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["value","disabled","placeholder"])]),_:1},16),n(v,Q({class:"w-2/3"},t(M)["notification.type"]),{default:l(()=>[n(j,{value:t(e).notification.type,"onUpdate:value":a[5]||(a[5]=i=>t(e).notification.type=i),size:"medium",disabled:"isEeUI"in o?o.isEeUI:t(Ie),class:"nc-select-hook-notification-type !h-9",placeholder:o.$t("general.notification"),"dropdown-class-name":"nc-dropdown-webhook-notification",onChange:a[6]||(a[6]=i=>Le(!0))},{suffixIcon:l(()=>[n(f,{icon:"arrowDown",class:"text-gray-700"})]),default:l(()=>[(m(!0),S(X,null,ee(t(Re),(i,b)=>(m(),g(R,{key:b,value:i.type},{default:l(()=>[d("div",no,[n(f,{icon:et(i.type),class:"mr-2 stroke-transparent"},null,8,["icon"]),d("div",lo,T(i.text),1),t(e).notification.type===i.type?(m(),g(_e(("iconMap"in o?o.iconMap:t(we)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4 flex-none"})):x("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","placeholder"])]),_:1},16)]),t(e).notification.type==="URL"?(m(),S("div",so,[d("div",ro,[d("div",co,[n(v,{class:"w-1/3"},{default:l(()=>[n(j,{value:t(e).notification.payload.method,"onUpdate:value":a[7]||(a[7]=i=>t(e).notification.payload.method=i),size:"medium",class:"nc-select-hook-url-method","dropdown-class-name":"nc-dropdown-hook-notification-url-method"},{suffixIcon:l(()=>[n(f,{icon:"arrowDown",class:"text-gray-700"})]),default:l(()=>[(m(),S(X,null,ee(je,(i,b)=>n(R,{key:b,value:i.title},{default:l(()=>[d("div",uo,[d("div",null,T(i.title),1),t(e).notification.payload.method===i.title?(m(),g(_e(("iconMap"in o?o.iconMap:t(we)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4 flex-none"})):x("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),n(v,Q({class:"w-2/3"},t(M)["notification.payload.path"]),{default:l(()=>[n(G,{value:t(e).notification.payload.path,"onUpdate:value":a[8]||(a[8]=i=>t(e).notification.payload.path=i),size:"medium",placeholder:"http://example.com",class:"nc-text-field-hook-url-path nc-input-shadow h-9 !rounded-lg"},null,8,["value"])]),_:1},16)])]),d("div",null,[n(ot,{activeKey:t(re),"onUpdate:activeKey":a[12]||(a[12]=i=>ke(re)?re.value=i:null)},{default:l(()=>[n(he,{key:"params",tab:o.$t("title.parameter"),"force-render":""},{default:l(()=>[n(J,{modelValue:t(e).notification.payload.parameters,"onUpdate:modelValue":a[9]||(a[9]=i=>t(e).notification.payload.parameters=i)},null,8,["modelValue"])]),_:1},8,["tab"]),n(he,{key:"headers",tab:o.$t("title.headers"),class:"nc-tab-headers"},{default:l(()=>[n(tt,{modelValue:t(e).notification.payload.headers,"onUpdate:modelValue":a[10]||(a[10]=i=>t(e).notification.payload.headers=i)},null,8,["modelValue"])]),_:1},8,["tab"]),t(We)?(m(),g(he,{key:"body",tab:"Body"},{default:l(()=>[d("div",po,[n(Ce,{modelValue:t(e).notification.payload.body,"onUpdate:modelValue":a[11]||(a[11]=i=>t(e).notification.payload.body=i),lang:"handlebars","disable-deep-compare":"",validate:!1,class:"min-h-60 max-h-80 !rounded-lg","monaco-config":{minimap:{enabled:!1},padding:{top:8,bottom:8},fontSize:14.5,overviewRulerBorder:!1,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,lineDecorationsWidth:8,lineNumbersMinChars:0,roundedSelection:!1,selectOnLineNumbers:!1,scrollBeyondLastLine:!1,contextmenu:!1,glyphMargin:!1,folding:!1,bracketPairColorization:{enabled:!1},wordWrap:"on",scrollbar:{horizontal:"hidden",verticalScrollbarSize:6},wrappingStrategy:"advanced",renderLineHighlight:"none",tabSize:4}},null,8,["modelValue"])])]),_:1})):x("",!0)]),_:1},8,["activeKey"])])])):x("",!0),t(e).notification.type==="Slack"?(m(),S("div",fo,[n(v,Y(Z(t(M)["notification.payload.channels"])),{default:l(()=>[n(ne,{modelValue:t(e).notification.payload.channels,"onUpdate:modelValue":a[13]||(a[13]=i=>t(e).notification.payload.channels=i),"selected-channel-list":t(e).notification.payload.channels,"available-channel-list":t(ce),placeholder:o.$t("placeholder.selectSlackChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):x("",!0),t(e).notification.type==="Microsoft Teams"?(m(),S("div",yo,[n(v,Y(Z(t(M)["notification.payload.channels"])),{default:l(()=>[n(ne,{modelValue:t(e).notification.payload.channels,"onUpdate:modelValue":a[14]||(a[14]=i=>t(e).notification.payload.channels=i),"selected-channel-list":t(e).notification.payload.channels,"available-channel-list":t(de),placeholder:o.$t("placeholder.selectTeamsChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):x("",!0),t(e).notification.type==="Discord"?(m(),S("div",mo,[n(v,Y(Z(t(M)["notification.payload.channels"])),{default:l(()=>[n(ne,{modelValue:t(e).notification.payload.channels,"onUpdate:modelValue":a[15]||(a[15]=i=>t(e).notification.payload.channels=i),"selected-channel-list":t(e).notification.payload.channels,"available-channel-list":t(ue),placeholder:o.$t("placeholder.selectDiscordChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):x("",!0),t(e).notification.type==="Mattermost"?(m(),S("div",ho,[n(v,Y(Z(t(M)["notification.payload.channels"])),{default:l(()=>[n(ne,{modelValue:t(e).notification.payload.channels,"onUpdate:modelValue":a[16]||(a[16]=i=>t(e).notification.payload.channels=i),"selected-channel-list":t(e).notification.payload.channels,"available-channel-list":t(pe),placeholder:o.$t("placeholder.selectMattermostChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):x("",!0)]),t(Me)?(m(),S("div",bo,[d("div",{class:"w-full cursor-pointer flex items-center",onClick:a[17]||(a[17]=le(i=>t(e).condition=!t(e).condition,["prevent"]))},[n(at,{checked:!!t(e).condition,class:"nc-check-box-hook-condition"},{default:l(()=>[d("span",vo,T(o.$t("general.trigger"))+" "+T(o.$t("activity.onCondition")),1)]),_:1},8,["checked"])]),t(e).condition?(m(),g(it,{key:0,ref_key:"filterRef",ref:fe,class:"w-full","auto-save":!1,"show-loading":!1,"hook-id":t(e).id,"web-hook":!0,"action-btn-type":"secondary","onUpdate:filtersLength":a[18]||(a[18]=i=>t(e).condition=i>0)},null,8,["hook-id"])):x("",!0)])):x("",!0),t(Se)[t(e).notification.type]&&t(e).notification.payload?(m(),g(v,{key:1},{default:l(()=>[d("div",_o,[(m(!0),S(X,null,ee(t(Se)[t(e).notification.type],(i,b)=>(m(),S("div",{key:b},[i.type==="LongText"?(m(),g(v,Q({key:0,ref_for:!0},t(M)[`notification.payload.${i.key}`]),{default:l(()=>[n(nt,{value:t(e).notification.payload[i.key],"onUpdate:value":be=>t(e).notification.payload[i.key]=be,class:"!rounded-lg !min-h-[120px] nc-scrollbar-thin nc-input-shadow",placeholder:i.label},null,8,["value","onUpdate:value","placeholder"])]),_:2},1040)):(m(),g(v,Q({key:1,ref_for:!0},t(M)[`notification.payload.${i.key}`]),{default:l(()=>[n(G,{value:t(e).notification.payload[i.key],"onUpdate:value":be=>t(e).notification.payload[i.key]=be,class:"!rounded-lg nc-input-shadow !h-9",placeholder:i.label},null,8,["value","onUpdate:value","placeholder"])]),_:2},1040))]))),128))])]),_:1})):x("",!0),d("div",null,[d("div",wo,[n(_,{type:"text",class:"mb-3",size:"small",onClick:a[19]||(a[19]=i=>Je())},{default:l(()=>[d("div",ko,[a[22]||(a[22]=P(" Sample Payload ")),n(f,{class:De(["transition-transform",{"transform rotate-180":t(K)}]),icon:"arrowDown"},null,8,["class"])])]),_:1})]),Ue(d("div",null,[n(Ce,{modelValue:t(H),"onUpdate:modelValue":a[20]||(a[20]=i=>ke(H)?H.value=i:null),"monaco-config":{minimap:{enabled:!1},fontSize:14.5,overviewRulerBorder:!1,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,lineDecorationsWidth:12,lineNumbersMinChars:0,roundedSelection:!1,selectOnLineNumbers:!1,scrollBeyondLastLine:!1,contextmenu:!1,glyphMargin:!1,folding:!1,bracketPairColorization:{enabled:!1},wordWrap:"on",scrollbar:{horizontal:"hidden",verticalScrollbarSize:6},wrappingStrategy:"advanced",renderLineHighlight:"none",tabSize:4},"monaco-custom-theme":{base:"vs",inherit:!0,rules:[{token:"key",foreground:"#B33771",fontStyle:"bold"},{token:"string",foreground:"#2B99CC",fontStyle:"semibold"},{token:"number",foreground:"#1FAB51",fontStyle:"semibold"},{token:"boolean",foreground:"#1FAB51",fontStyle:"semibold"},{token:"delimiter",foreground:"#15171A",fontStyle:"semibold"}],colors:{}},class:De(["transition-all border-1 rounded-lg",{"w-0 min-w-0":!t(K),"min-h-60 max-h-80":t(K)}]),style:{"box-shadow":"0px 0px 4px 0px rgba(0, 0, 0, 0.08), 0px 0px 4px 0px rgba(0, 0, 0, 0.08)"}},null,8,["modelValue","class"])],512),[[Lt,t(K)]])])]),_:1},8,["model"])])],512),d("div",go,[d("div",xo,[d("h2",To,T(o.$t("labels.supportDocs")),1),d("div",null,[(m(),S(X,null,ee(Ze,(i,b)=>d("div",{key:b,class:"flex items-center gap-1"},[d("div",So,[n(f,{icon:"bookOpen",class:"flex-none w-4 h-4 text-gray-500"})]),n(st,{href:i.href,target:"_blank",rel:"noopener noreferrer",class:"!text-gray-500 text-sm !no-underline !hover:underline"},{default:l(()=>[P(T(i.title),1)]),_:2},1032,["href"])])),64))])])])])]),_:1},8,["visible"])}}}),Ro=Dt(Lo,[["__scopeId","data-v-1c07d509"]]);export{Ro as _,Bt as u};
