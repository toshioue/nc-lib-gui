const __vite__fileDeps=["./DGUfs1hX.js","./DZZ6t_j4.js","./entry.DIDWwc7m.css","./DKN1hQ6S.js","./BQuyMdA-.js","./BQQOEPN4.js","./vll-Pnjv.js","./B5RRVMt5.js","./DGj1ycqW.js","./DyDFI6NE.js","./BYINaHrJ.js","./dfem9Uc_.js","./BCJFTkwv.js","./D9tFZoTQ.js","./CDWovrGB.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e as F,ag as G,r as _,g as J,o as l,c as m,b as c,w as n,N as o,Q as d,R as A,a7 as Q,O as M,a,t as p,d as f,ao as X,at as Y,T as I,U as z,a8 as Z,S as q,X as H,a4 as K,ah as h,ai as P,ca as W,Z as ee,Y as te,aT as se,fF as ae,y as le,_ as ne}from"./DZZ6t_j4.js";import{_ as oe}from"./wMOVDMe3.js";import{T as ie}from"./DZw_XsHm.js";import{_ as re}from"./CXD-Dj4T.js";import"./DGj1ycqW.js";import"./BQuyMdA-.js";import"./BQQOEPN4.js";import"./vll-Pnjv.js";import"./CB1aB6F1.js";const ce=H(()=>K(()=>import("./DGUfs1hX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url).then(v=>v.default||v)),pe={class:"flex flex-col h-full"},de={class:"flex flex-row justify-center mt-2 text-center w-full text-base"},ue={class:"flex mt-6 justify-center space-x-2"},fe={class:"mb-5"},_e={class:"flex flex-row items-center gap-3"},me={class:"flex flex-wrap w-full gap-5"},ve={class:"install-btn flex flex-row justify-end space-x-1"},ge={class:"flex flex-row justify-center items-center caption capitalize nc-app-store-card-edit"},ye={class:"flex flex-row justify-center items-center caption capitalize nc-app-store-card-reset"},we={class:"flex ml-0.5"},xe={class:"flex flex-row justify-center items-center caption capitalize nc-app-store-card-install"},he={class:"flex flex-row space-x-2 items-center justify-start w-full"},be={class:"flex w-[68px]"},ke=["src"],Ce={key:1},$e={class:"flex flex-col flex-1 w-3/5 pl-3"},Se=F({__name:"AppStore",setup(v){const{t:N}=G(),{$api:b,$e:g}=le(),y=_(null),u=_(!1),r=_(!1),i=_(null),w=async()=>{try{const t=(await b.plugin.list()).list??[];y.value=t.filter(e=>!["email","storage"].includes(e.category.toLowerCase())).map(e=>({...e,tags:e.tags?e.tags.split(","):[],parsedInput:e.input&&JSON.parse(e.input)}))}catch(t){h.error(await P(t))}},j=async()=>{try{await b.plugin.update(i.value.id,{input:null,active:!1}),h.success(N("msg.success.pluginUninstalled")),u.value=!1,await w()}catch(t){h.error(await P(t))}g("a:appstore:reset",{app:i.value.title})},E=async()=>{r.value=!1,await w(),g("a:appstore:install",{app:i.value.title})},k=async t=>{r.value=!0,i.value=t,g("c:appstore:install",{app:t.title})},R=async t=>{u.value=!0,i.value=t};return J(async()=>{y.value===null&&await w()}),(t,e)=>{const T=ce,C=W,$=ee,B=te,D=re,U=oe,x=se,V=ie,L=ae;return l(),m("div",null,[c(C,Q({visible:o(r),"onUpdate:visible":e[2]||(e[2]=s=>M(r)?r.value=s:null),class:{active:o(r)},closable:!1,centered:"","min-height":"300",footer:null,"wrap-class-name":"nc-modal-plugin-install"},t.$attrs),{default:n(()=>[o(i)&&o(r)?(l(),d(T,{key:0,id:o(i).id,onClose:e[0]||(e[0]=s=>r.value=!1),onSaved:e[1]||(e[1]=s=>E())},null,8,["id"])):A("",!0)]),_:1},16,["visible","class"]),c(C,{visible:o(u),"onUpdate:visible":e[4]||(e[4]=s=>M(u)?u.value=s:null),closable:!1,width:"24rem",centered:"",footer:null,"wrap-class-name":"nc-modal-plugin-uninstall"},{default:n(()=>[a("div",pe,[a("div",de,p(`Click on confirm to reset ${o(i)&&o(i).title}`),1),a("div",ue,[c($,{type:"secondary",onClick:e[3]||(e[3]=s=>u.value=!1)},{default:n(()=>[f(p(t.$t("general.cancel")),1)]),_:1}),c($,{type:"danger",onClick:j},{default:n(()=>[f(p(t.$t("general.confirm")),1)]),_:1})])])]),_:1},8,["visible"]),a("div",fe,[c(D,{type:"warning",border:""},{message:n(()=>[a("div",_e,[c(B,{icon:"ncAlertCircle",class:"text-orange-500 w-6 h-6"}),e[5]||(e[5]=a("span",{class:"font-weight-bold"},"App Store Deprecation",-1))])]),description:n(()=>e[6]||(e[6]=[a("span",{class:"text-gray-500 ml-9"}," App store will soon be removed. Email & Storage plugins are now available in Accounts/Setup page. Rest of the plugins here will be moved to integrations. ",-1)])),_:1})]),a("div",me,[(l(!0),m(X,null,Y(o(y),(s,O)=>(l(),d(L,{key:O,class:q(["sm:w-100 md:w-130",`relative flex overflow-x-hidden app-item-card !shadow-sm rounded-md w-full nc-app-store-card-${s.title}`])},{default:n(()=>[a("div",ve,[s.parsedInput?(l(),d(x,{key:0,size:"small",type:"primary",onClick:S=>k(s)},{default:n(()=>[a("div",ge,[c(U,{class:"pr-0.5",height:12}),f(" "+p(t.$t("general.edit")),1)])]),_:2},1032,["onClick"])):A("",!0),s.parsedInput?(l(),d(x,{key:1,size:"small",outlined:"",onClick:S=>R(s)},{default:n(()=>[a("div",ye,[(l(),d(I(("iconMap"in t?t.iconMap:o(z)).closeCircle))),a("div",we,p(t.$t("general.reset")),1)])]),_:2},1032,["onClick"])):(l(),d(x,{key:2,size:"small",type:"primary",onClick:S=>k(s)},{default:n(()=>[a("div",xe,[(l(),d(I(("iconMap"in t?t.iconMap:o(z)).plus))),f(" "+p(t.$t("general.install")),1)])]),_:2},1032,["onClick"]))]),a("div",he,[a("div",be,[s.title!=="SMTP"?(l(),m("img",{key:0,class:"avatar",alt:"logo",style:Z({backgroundColor:s.title==="SES"?"#242f3e":""}),src:s.logo},null,12,ke)):(l(),m("div",Ce))]),a("div",$e,[c(V,{level:5},{default:n(()=>[f(p(s.title),1)]),_:2},1024),f(" "+p(s.description),1)])])]),_:2},1032,["class"]))),128))])])}}}),Te=ne(Se,[["__scopeId","data-v-b4a8d684"]]);export{Te as default};
