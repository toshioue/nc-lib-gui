import{e as D,L as P,bL as t,g2 as U,aC as h,r as p,h_ as K,hK as O,ab as _,f as b,dc as R,ha as L,aD as z,g as A,o as a,c as r,N as n,a as G,t as g,R as J,P as T,dk as W,O as $,S as q,aJ as u,W as l,ao as H,_ as Q}from"./DZZ6t_j4.js";const X={key:0,class:"nc-currency-code h-full !bg-gray-100 border-r border-gray-200 px-3 mr-1 flex items-center"},Y=["placeholder","disabled"],Z={key:2,class:"nc-cell-field nc-null uppercase"},ee={key:3,class:"nc-cell-field"},ne={key:4},se=D({__name:"Currency",props:{modelValue:{},placeholder:{},hidePrefix:{type:Boolean}},emits:["update:modelValue","save"],setup(I,{emit:M}){const N=I,C=M,{showNull:S}=P(),f=t(U),d=t(h),i=t(K,p(!1)),x=t(O,p(!1)),m=_(N,"modelValue",C),s=b({get:()=>m.value,set:o=>{o===""?m.value=null:m.value=o}}),v=p(),y=b(()=>{var o;return{currency_locale:"en-US",currency_code:"USD",...R((o=f==null?void 0:f.value)==null?void 0:o.meta)}}),k=b(()=>{try{return s.value===null||s.value===void 0||isNaN(s.value)?s.value:new Intl.NumberFormat(y.value.currency_locale||"en-US",{style:"currency",currency:y.value.currency_code||"USD"}).format(s.value)}catch{return s.value}}),E=t(L,p(!1)),c=t(z),j=o=>!E.value&&!i.value&&!c.value&&(o==null?void 0:o.focus()),w=()=>{v.value!==s.value&&(s.value=v.value=s.value??null,C("save")),d.value=!1},F=()=>{w()},V=()=>{/(Firefox|Safari)/.test(navigator.userAgent)&&w()};return A(()=>{v.value=s.value}),(o,e)=>(a(),r(H,null,[n(c)&&!n(i)&&n(d)&&!o.hidePrefix?(a(),r("div",X,[G("span",null,g(n(y).currency_code),1)])):J("",!0),!n(x)&&n(d)||n(c)&&!n(i)&&n(d)?T((a(),r("input",{key:1,ref:j,"onUpdate:modelValue":e[0]||(e[0]=B=>$(s)?s.value=B:null),type:"number",class:q(["nc-cell-field h-full border-none rounded-md py-1 outline-none focus:outline-none focus:ring-0",n(c)&&!n(i)&&!o.hidePrefix?"flex flex-1":"w-full"]),placeholder:o.placeholder,disabled:n(x),onBlur:F,onKeydown:[u(V,["enter"]),e[1]||(e[1]=u(l(()=>{},["stop"]),["down"])),e[2]||(e[2]=u(l(()=>{},["stop"]),["left"])),e[3]||(e[3]=u(l(()=>{},["stop"]),["right"])),e[4]||(e[4]=u(l(()=>{},["stop"]),["up"])),e[5]||(e[5]=u(l(()=>{},["stop"]),["delete"])),e[6]||(e[6]=l(()=>{},["alt","stop"]))],onSelectstartCapture:e[7]||(e[7]=l(()=>{},["stop"])),onMousedown:e[8]||(e[8]=l(()=>{},["stop"])),onContextmenu:e[9]||(e[9]=l(()=>{},["stop"]))},null,42,Y)),[[W,n(s)]]):n(s)===null&&n(S)?(a(),r("span",Z,g(o.$t("general.null")),1)):isNaN(n(s))?(a(),r("span",ne)):(a(),r("span",ee,g(n(k)),1))],64))}}),le=Q(se,[["__scopeId","data-v-cc16f11d"]]);export{le as default};
