import{gm as X,go as r,fy as p,U as u,gu as m,e as he,N as e,o as d,Q as j,S as ge,T as Ce,R as $,u as Pt,ap as mt,r as _,aw as Bt,ax as Ft,ag as Ve,f as W,gv as Kt,gw as ze,ah as Z,ai as ue,gx as rt,gy as ut,gk as zt,m as Pe,y as We,L as Gt,gz as Qt,w as o,b as a,c as w,a as c,a8 as Be,d as z,O as ve,ao as oe,at as we,t as N,as as dt,aJ as Ge,P as qt,aF as Vt,Y as He,Z as gt,$ as bt,aL as Wt,_ as Je,ab as Ht,dh as Jt,F as pt,g as Yt,gj as Xt,a$ as vt,a7 as M,W as Zt,gA as Fe,V as ea,bX as ta,gn as aa,gB as na,gp as oa,dD as sa,dp as la,gl as ia,ba as ca}from"./DZZ6t_j4.js";import{_ as ra}from"./B89oU1M4.js";import{_ as Qe}from"./Bdv7ru7D.js";import"./DKN1hQ6S.js";import{I as yt}from"./BQuyMdA-.js";import{L as ua,_ as da}from"./DuJHisTB.js";import{_ as St}from"./DGj1ycqW.js";import{_ as pa}from"./vK-WmZ7a.js";import{_ as va}from"./DnSVh-oD.js";import{_ as fa}from"./TJfB7GlU.js";import ma from"./B4Lj1XSi.js";import{_ as ga}from"./0QUe8GCE.js";import{u as ba}from"./GMLocJHP.js";import{_ as Ke}from"./DCjuPxLb.js";import{f as V,b as ya,e as Sa}from"./C3jLTHF4.js";import{r as _a}from"./C00NHga8.js";import{d as Ia}from"./G4Pt-Lbf.js";import{F as ft}from"./BYINaHrJ.js";import{_ as wa}from"./C3wAmqC5.js";import{_ as Ea,C as Ca}from"./CbjHV4v2.js";import{_ as ha}from"./dfem9Uc_.js";import{S as xa}from"./D_MsYLkT.js";import{_ as Ta}from"./DyDFI6NE.js";import{_ as Aa}from"./CDWovrGB.js";const ka=(y,A,S)=>{if("ssl"in y&&y.ssl)return A===X.No||typeof y.ssl=="object"&&Object.values(y.ssl).every(F=>F==null)?void 0:S==="pg"&&["true","false"].includes(y.ssl)?y.ssl==="true":S==="pg"&&!["boolean","object"].includes(typeof y.ssl)?void 0:y.ssl},Da=[{title:"labels.database",subtitle:"objects.integrationCategories.databaseSubtitle",value:r.DATABASE,isAvailable:!0},{title:"objects.integrationCategories.ai",subtitle:"objects.integrationCategories.ai",value:r.AI},{title:"objects.integrationCategories.communication",subtitle:"objects.integrationCategories.communicationSubtitle",value:r.COMMUNICATION},{title:"objects.integrationCategories.spreadSheet",subtitle:"objects.integrationCategories.spreadSheetSubtitle",value:r.SPREAD_SHEET,teleEventName:r.OTHERS},{title:"objects.integrationCategories.projectManagement",subtitle:"objects.integrationCategories.projectManagementSubtitle",value:r.PROJECT_MANAGEMENT},{title:"objects.integrationCategories.ticketing",subtitle:"objects.integrationCategories.ticketingSubtitle",value:r.TICKETING},{title:"objects.integrationCategories.crm",subtitle:"objects.integrationCategories.crmSubtitle",value:r.CRM},{title:"objects.integrationCategories.marketing",subtitle:"objects.integrationCategories.marketingSubtitle",value:r.MARKETING},{title:"objects.integrationCategories.ats",subtitle:"objects.integrationCategories.atsSubtitle",value:r.ATS},{title:"objects.integrationCategories.development",subtitle:"objects.integrationCategories.developmentSubtitle",value:r.DEVELOPMENT},{title:"objects.integrationCategories.finance",subtitle:"objects.integrationCategories.financeSubtitle",value:r.FINANCE},{title:"labels.storage",subtitle:"objects.integrationCategories.storageSubtitle",value:r.STORAGE},{title:"objects.integrationCategories.others",subtitle:"objects.integrationCategories.othersSubtitle",value:r.OTHERS}],_t=[{title:"objects.syncData.mysql",value:p.MYSQL,icon:u.mysql,categories:[r.DATABASE],isAvailable:!0,iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.postgreSQL",value:p.PG,icon:u.postgreSql,categories:[r.DATABASE],isAvailable:!0},{title:"objects.syncData.sqlite",value:p.SQLITE,icon:u.sqlServer,categories:[r.DATABASE],isAvailable:!0,isOssOnly:!0},{title:"objects.syncData.snowflake",value:p.SNOWFLAKE,icon:u.snowflake,categories:[r.DATABASE]},{title:"objects.syncData.dataBricks",value:p.DATABRICKS,icon:u.dataBricks,categories:[r.DATABASE]},{title:"objects.syncData.mssqlServer",value:p.MSSQL,icon:u.mssqlServer,categories:[r.DATABASE]},{title:"objects.syncData.oracle",value:m.ORACLE,icon:u.oracle,categories:[r.DATABASE]},{title:"objects.syncData.openai",value:m.OPENAI,icon:u.openai,categories:[r.AI]},{title:"objects.syncData.claude",value:m.CLAUDE,icon:u.claude,categories:[r.AI]},{title:"objects.syncData.ollama",value:m.OLLAMA,icon:u.ollama,categories:[r.AI]},{title:"objects.syncData.groq",value:m.GROQ,icon:u.groq,categories:[r.AI]},{title:"general.slack",value:m.SLACK,icon:u.slack,categories:[r.COMMUNICATION],iconStyle:{width:"32px",height:"32px"}},{title:"general.discord",value:m.DISCORD,icon:u.ncDiscord,categories:[r.COMMUNICATION],iconStyle:{width:"32px",height:"32px"}},{title:"general.twilio",value:m.TWILLO,icon:u.twilio,categories:[r.COMMUNICATION],iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.microsoftOutlook",value:m.MICROSOFT_OUTLOOK,icon:u.microsoftOutlook,categories:[r.COMMUNICATION]},{title:"general.microsoftTeams",value:m.MICROSOFT_TEAMS,icon:u.microsoftTeams,categories:[r.COMMUNICATION],iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.gmail",value:m.GMAIL,icon:u.gmail,categories:[r.COMMUNICATION]},{title:"objects.syncData.telegram",value:m.TELEGRAM,icon:u.telegram,categories:[r.COMMUNICATION]},{title:"objects.syncData.whatsapp",value:m.WHATSAPP,icon:u.whatsappSolid,categories:[r.COMMUNICATION],iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.asana",value:m.ASANA,icon:u.asana,categories:[r.PROJECT_MANAGEMENT]},{title:"objects.syncData.jira",value:m.JIRA,icon:u.jira,categories:[r.PROJECT_MANAGEMENT]},{title:"objects.syncData.miro",value:m.MIRO,icon:u.miro,categories:[r.PROJECT_MANAGEMENT]},{title:"objects.syncData.trello",value:m.TRELLO,icon:u.trello,categories:[r.PROJECT_MANAGEMENT]},{title:"objects.syncData.salesforce",value:m.SALESFORCE,icon:u.salesforce,categories:[r.CRM]},{title:"objects.syncData.hubspot",value:m.HUBSPOT,icon:u.hubspot,categories:[r.CRM]},{title:"objects.syncData.pipedrive",value:m.PIPEDRIVE,icon:u.pipedrive,categories:[r.CRM]},{title:"objects.syncData.microsoftDynamics365",value:m.MICROSOFT_DYNAMICS_365,icon:u.microsoftDynamics365,categories:[r.CRM]},{title:"objects.syncData.zohoCrm",value:m.ZOHO_CRM,icon:u.zohoCrm,categories:[r.CRM]},{title:"objects.syncData.hubspot",value:m.HUBSPOT,icon:u.hubspot,categories:[r.MARKETING]},{title:"objects.syncData.mailchimp",value:m.MAILCHIMP,icon:u.mailchimp,categories:[r.MARKETING]},{title:"objects.syncData.surveyMonkey",value:m.SURVEYMONKEY,icon:u.surveyMonkey,categories:[r.MARKETING]},{title:"objects.syncData.typeform",value:m.TYPEFORM,icon:u.typeform,categories:[r.MARKETING]},{title:"objects.syncData.workday",value:m.WORKDAY,icon:u.workday,categories:[r.ATS]},{title:"objects.syncData.greenhouse",value:m.GREENHOUSE,icon:u.greenhouse,categories:[r.ATS]},{title:"objects.syncData.lever",value:m.LEVER,icon:u.lever,categories:[r.ATS]},{title:"objects.syncData.bitbucket",value:m.BITBUCKET,icon:u.bitBucket,categories:[r.DEVELOPMENT]},{title:"objects.syncData.github",value:m.GITHUB,icon:u.githubSolid,categories:[r.DEVELOPMENT]},{title:"objects.syncData.gitlab",value:m.GITLAB,icon:u.gitlab,categories:[r.DEVELOPMENT]},{title:"objects.syncData.stripe",value:m.STRIPE,icon:u.stripe,categories:[r.FINANCE]},{title:"objects.syncData.quickbooks",value:m.QUICKBOOKS,icon:u.quickbooks,categories:[r.FINANCE]},{title:"objects.syncData.freshdesk",value:m.FRESHDESK,icon:u.freshdesk,categories:[r.TICKETING]},{title:"objects.syncData.intercom",value:m.INTERCOM,icon:u.intercom,categories:[r.TICKETING]},{title:"objects.syncData.zendesk",value:m.ZENDESK,icon:u.zendesk,categories:[r.TICKETING]},{title:"objects.syncData.salesforce",subtitle:"objects.syncData.serviceCloud",value:m.SALESFORCE_SERVICE_CLOUD,icon:u.salesforce,categories:[r.TICKETING]},{title:"objects.syncData.hubspot",subtitle:"objects.syncData.serviceHub",value:m.HUBSPOT_SERVICE_HUB,icon:u.hubspot,categories:[r.TICKETING]},{title:"objects.syncData.box",value:m.BOX,icon:u.box,categories:[r.STORAGE]},{title:"objects.syncData.dropbox",value:m.DROPBOX,icon:u.dropbox,categories:[r.STORAGE]},{title:"objects.syncData.googleDrive",value:m.GOOGLE_DRIVE,icon:u.googleDrive,categories:[r.STORAGE]},{title:"objects.syncData.appleNumbers",value:m.APPLE_NUMBERS,icon:u.appleSolid,categories:[r.SPREAD_SHEET]},{title:"objects.syncData.microsoftExcel",value:m.MICROSOFT_EXCEL,icon:u.microsoftExcel,categories:[r.SPREAD_SHEET]},{title:"objects.syncData.googleSheets",value:m.GOOGLE_SHEETS,icon:u.googleSheet,categories:[r.SPREAD_SHEET]}],qe=_t.reduce((y,A)=>(y[A.value]=A,y),{}),fo=he({__name:"IntegrationIcon",props:{type:{},size:{default:"sm"}},setup(y){const A=y;return(S,F)=>{var U,H;return(U=("allIntegrationsMapByValue"in S?S.allIntegrationsMapByValue:e(qe))[A.type])!=null&&U.icon?(d(),j(Ce((H=("allIntegrationsMapByValue"in S?S.allIntegrationsMapByValue:e(qe))[A.type])==null?void 0:H.icon),{key:0,class:ge(["stroke-transparent flex-none",{"w-3.5 h-3.5":S.size==="sx","w-4 h-4":S.size==="sm","w-5 h-5":S.size==="md","w-6 h-6":S.size==="lg","w-7 h-7":S.size==="xl","w-8 h-8":S.size==="xxl"}])},null,8,["class"])):$("",!0)}}});var It=(y=>(y[y.LIST=0]="LIST",y[y.ADD=1]="ADD",y[y.EDIT=2]="EDIT",y))(It||{});const be={PostgreSQL:p.PG,MySQL:p.MYSQL,SQLITE:p.SQLITE};function Oa(y){const A={payload:{}};switch(y){case be.PostgreSQL:return{...A,type:be.PostgreSQL,title:"PostgreSQL",logo:Pe(Ke,{"source-type":"pg",class:"logo"})};case be.MySQL:return{...A,type:be.MySQL,title:"MySQL",logo:Pe(Ke,{"source-type":"mysql2",class:"logo"})};case be.SQLITE:return{...A,type:be.SQLITE,title:"SQLite",logo:Pe(Ke,{"source-type":"sqlite3",class:"logo"})}}}const[Na,$a]=ba(()=>{const y=Pt(),A=y.currentRoute,{api:S}=mt(),F=_(null),U=_(null),H=Bt(),{activeWorkspaceId:se}=Ft(H),G=_([]),B=_(""),E=_({page:1,pageSize:25,totalRows:0}),te=_(),I=_(!1),J=Kt(Symbol("integrationStore")),{$e:Q}=We(),{t:L}=Ve(),de=_(!1),ae=_({isOpen:!1,title:L("msg.success.connectionAdded"),connectionTitle:"",description:L("msg.success.connectionAddedDesc")}),Y=_({isOpen:!1,msg:"",isLoading:!1}),le=W({get(){var s;return((s=A.value.query)==null?void 0:s.tab)??"integrations"},set(s){Y.value.isOpen&&(Y.value.isOpen=!1),y.push({query:{...A.value.query,tab:s}})}}),ce=async(s=!1,b=void 0,h=E.value.page,q=E.value.pageSize)=>{try{if(!se.value)return;I.value=!0,!s&&q*(h-1)>E.value.totalRows&&(E.value.page=1,h=1);const{list:C,pageInfo:Ee}=await S.integration.list(s?{type:ze.Database,includeDatabaseInfo:!0,baseId:b}:{offset:q*(h-1),limit:q,...B.value.trim()?{query:B.value}:{}});G.value=C,s||(E.value.totalRows=Ee.totalRows??0)}catch(C){await Z.error(await ue(C)),G.value=[],E.value.totalRows=0,E.value.page=1}finally{I.value=!1}},fe=s=>{U.value=Oa(s),F.value=1,Q("c:integration:add")},ye=async(s,b=!1)=>{var h;if(s!=null&&s.id){try{return await S.integration.delete(s.id,{query:b?{force:"true"}:{}}),Q("a:integration:delete"),await ce(),!0}catch(q){const C=await rt(q);if(C.error===ut.INTEGRATION_NOT_FOUND){await Z.error((h=C.message)==null?void 0:h.replace(s.id,s.title)),window.location.reload();return}await Z.error(await ue(q))}te.value=null}},ie=async s=>{if(s.id)try{await S.integration.update(s.id,s),Q("a:integration:update"),await ce(),F.value=null,U.value=null,await Z.success(`Connection "${s.title}" updated successfully`)}catch(b){await Z.error(await ue(b))}},n=async(s,b="create",h=!1,q=void 0)=>{try{const C=await S.integration.create(s);Q(b==="create"?"a:integration:create":"a:integration:duplicate"),C&&(C!=null&&C.id)&&(h||G.value.push(C)),await ce(h,q),b==="create"&&J.emit(zt.INTEGRATION_ADD,C),F.value=null,U.value=null,C!=null&&C.title&&b==="create"&&(de.value?(le.value="connections",ae.value.connectionTitle=C.title??"",ae.value.isOpen=!0):await Z.success(`Connection "${C.title}" created successfully`))}catch(C){await Z.error(await ue(C))}},ne=async s=>{if(s!=null&&s.id)try{I.value=!0,n({title:s.title,config:{},type:s.type,copy_from_id:s.id},"duplicate")}catch(b){await Z.error(await ue(b))}finally{I.value=!1}},re=async(s,b)=>{var h;if(s!=null&&s.id)try{return await S.integration.read(s.id,{...b||{}})}catch(q){const C=await rt(q);if(C.error===ut.INTEGRATION_NOT_FOUND){await Z.error((h=C.message)==null?void 0:h.replace(s.id,s.title)),window.location.reload();return}await Z.error(await ue(q))}};return{IntegrationsPageMode:It,integrationType:be,pageMode:F,activeIntegration:U,integrations:G,isLoadingIntegrations:I,deleteConfirmText:te,eventBus:J,requestIntegration:Y,integrationPaginationData:E,activeViewTab:le,isFromIntegrationPage:de,successConfirmModal:ae,searchQuery:B,addIntegration:fe,loadIntegrations:ce,deleteIntegration:ye,updateIntegration:ie,saveIntegration:n,editIntegration:async s=>{if(s!=null&&s.id)try{const b=await re(s,{includeConfig:!0});U.value=b,F.value=2,Q("c:integration:edit")}catch{}},duplicateIntegration:ne,saveIntegraitonRequest:async s=>{if(s!=null&&s.trim()){Y.value.isLoading=!0;try{Q("a:integration:new-request",{value:Y.value.msg}),Y.value.isLoading=!1,Y.value.isOpen=!1,Y.value.msg="",await Z.success("Your request has been successfully submitted")}catch(b){Y.value.isLoading=!1,await Z.error(await ue(b))}}},getIntegration:re}},"integrations-store");function Ye(){const y=$a();return y??Na()}const La={key:0,class:"p-4 w-full flex items-center justify-between gap-3 border-b-1 border-gray-200"},Ma={class:"flex items-center gap-3"},ja={key:0,class:"px-6 pt-6"},Ua={class:"flex-1"},Ra={class:"category-type-title flex gap-2"},Pa={key:0,class:"integration-type-list"},Ba=["onClick"],Fa={class:"integration-icon-wrapper"},Ka={class:"flex-1"},za={class:"name"},Ga={key:0,class:"subtitle flex-1"},Qa={key:0,class:"action-btn"},qa={key:1,class:""},Va={class:"flex items-center gap-2"},Wa={key:0,class:"h-full text-center flex items-center justify-center gap-3"},Ha={key:1,class:"h-full flex items-center justify-center"},Ja={class:"flex flex-col gap-4"},Ya={class:"flex items-center justify-between gap-4"},Xa={class:"flex flex-col gap-2"},Za={class:"flex items-center justify-end gap-3"},en=he({__name:"IntegrationsTab",props:{isModal:{type:Boolean,default:!1},filterCategory:{type:Function,default:()=>!0},filterIntegration:{type:Function,default:()=>!0}},setup(y){const A=y,{isModal:S,filterCategory:F,filterIntegration:U}=A,{$e:H}=We(),{t:se}=Ve(),{syncDataUpvotes:G,updateSyncDataUpvotes:B}=Gt(),{pageMode:E,IntegrationsPageMode:te,requestIntegration:I,addIntegration:J,saveIntegraitonRequest:Q}=Ye(),L=g=>{var s;return g&&((s=g==null?void 0:g.focus)==null?void 0:s.call(g))},de=_(null),ae=_(""),Y=_(),{width:le}=Qt(Y),ce=W(()=>le.value<=328||le.value<624?"328px":le.value<920?"576px":le.value<1216?"872px":"1168px"),fe=W(()=>new Set(G.value)),ye=(g,s)=>_t.filter(b=>U(b)&&b.categories.includes(g)&&se(b.title).toLowerCase().includes(s.trim().toLowerCase())),ie=W(()=>Da.filter(F).filter(g=>de.value?g.value===de.value.value:!0).reduce((g,s)=>(g[s.value]={title:s.title,subtitle:s.subtitle,list:ye(s.value,ae.value),isAvailable:s.isAvailable,teleEventName:s.teleEventName},g),{})),n=W(()=>{const g=Object.keys(ie.value);return g.length?!g.some(s=>ie.value[s].list.length>0):!0}),ne=W({get:()=>E.value===te.LIST,set:g=>{g||(E.value=null)}}),re=(g,s)=>{var b;fe.value.has(s)||(H(`a:integration-request:${((b=ie.value[g])==null?void 0:b.teleEventName)||g}:${s}`),B([...G.value,s]))},Se=(g,s)=>{if(!s.isAvailable){re(g,s.value);return}g===r.DATABASE&&J(s.value)};return(g,s)=>{const b=He,h=gt,q=yt,C=ra,Ee=bt,De=dt,xe=Wt,O=St,Te=ua,Ae=da;return d(),j(Ce(e(S)?Qe:"div"),{visible:e(ne),"onUpdate:visible":s[10]||(s[10]=k=>ve(ne)?ne.value=k:null),centered:"",size:"large",class:ge({"h-full":!e(S)}),"wrap-class-name":"nc-modal-available-integrations-list",onKeydown:s[11]||(s[11]=Ge(k=>ne.value=!1,["esc"]))},{default:o(()=>[a(Ae,null,{default:o(()=>[a(Te,{class:"nc-integration-layout-content"},{default:o(()=>[e(S)?(d(),w("div",La,[a(h,{type:"text",size:"small",onClick:s[0]||(s[0]=k=>ne.value=!1)},{default:o(()=>[a(b,{icon:"arrowLeft"})]),_:1}),a(b,{icon:"gitCommit",class:"flex-none h-5 w-5"}),s[12]||(s[12]=c("div",{class:"flex-1 text-base font-weight-700"},"New Connection",-1)),c("div",Ma,[a(h,{size:"small",type:"text",onClick:s[1]||(s[1]=k=>ne.value=!1)},{default:o(()=>[a(b,{icon:"close",class:"text-gray-600"})]),_:1})])])):$("",!0),c("div",{class:ge(["w-full flex flex-col gap-6",{"h-[calc(100%_-_66px)]":e(S),"h-full":!e(S)}])},[e(le)?(d(),w("div",ja,[c("div",{class:"flex items-end justify-end flex-wrap gap-3 m-auto",style:Be({maxWidth:e(ce)})},[c("div",Ua,[s[13]||(s[13]=c("div",{class:"text-sm font-normal text-gray-600 mb-2"},[c("div",null,[z(" Connect integrations with NocoDB. "),c("a",{href:"https://docs.nocodb.com/category/integrations",target:"_blank",rel:"noopener noreferrer"},"Learn more")])],-1)),a(q,{value:e(ae),"onUpdate:value":s[2]||(s[2]=k=>ve(ae)?ae.value=k:null),type:"text",class:"nc-input-border-on-value nc-search-integration-input !min-w-[300px] !max-w-[400px] nc-input-sm flex-none",placeholder:"Search integration","allow-clear":""},{prefix:o(()=>[a(b,{icon:"search",class:"mr-2 h-4 w-4 text-gray-500"})]),_:1},8,["value"])]),a(h,{type:"ghost",size:"small",class:"!text-primary",onClick:s[3]||(s[3]=k=>e(I).isOpen=!0)},{default:o(()=>s[14]||(s[14]=[z(" Request Integration ")])),_:1})],4)])):$("",!0),c("div",{ref_key:"integrationListRef",ref:Y,class:"flex-1 px-6 pb-6 flex flex-col nc-workspace-settings-integrations-list overflow-y-auto nc-scrollbar-thin"},[e(le)?(d(),w("div",{key:0,class:ge(["w-full flex justify-center",{"flex-1":e(n)}])},[c("div",{class:"flex flex-col space-y-6 w-full",style:Be({maxWidth:e(ce)})},[(d(!0),w(oe,null,we(e(ie),(k,pe)=>(d(),w(oe,null,[k.list.length?(d(),w("div",{key:pe,class:"integration-type-wrapper"},[c("div",Ra,[z(N(g.$t(k.title))+" ",1),k.isAvailable?$("",!0):(d(),j(C,{key:0,border:!1,class:"text-brand-500 !h-5 bg-brand-50 text-xs font-normal px-2"},{default:o(()=>[z(N(g.$t("msg.toast.futureRelease")),1)]),_:1}))]),k.list.length?(d(),w("div",Pa,[(d(!0),w(oe,null,we(k.list,R=>(d(),j(Ee,{key:R.value,disabled:R==null?void 0:R.isAvailable,placement:"bottom"},{title:o(()=>[z(N(g.$t("tooltip.comingSoonIntegration")),1)]),default:o(()=>[c("div",{tabindex:0,class:ge(["source-card focus-visible:outline-none outline-none h-full",{"is-available":R==null?void 0:R.isAvailable}]),onClick:me=>Se(pe,R)},[c("div",Fa,[(d(),j(Ce(R.icon),{class:"integration-icon",style:Be(R.iconStyle)},null,8,["style"]))]),c("div",Ka,[c("div",za,N(g.$t(R.title)),1),R.subtitle?(d(),w("div",Ga,N(g.$t(R.subtitle)),1)):$("",!0)]),R!=null&&R.isAvailable?(d(),w("div",Qa,"+")):(d(),w("div",qa,[a(h,{type:"secondary",size:"xs",class:ge(["integration-upvote-btn !rounded-lg !px-1 !py-0",{selected:e(fe).has(R.value)}])},{default:o(()=>[c("div",Va,[a(b,{icon:"ncArrowUp"})])]),_:2},1032,["class"])]))],10,Ba)]),_:2},1032,["disabled"]))),128))])):$("",!0)])):$("",!0)],64))),256)),e(n)?(d(),w("div",Wa,[a(De,{image:("Empty"in g?g.Empty:e(dt)).PRESENTED_IMAGE_SIMPLE,description:g.$t("labels.noData"),class:"!my-0"},null,8,["image","description"])])):$("",!0)],4)],2)):(d(),w("div",Ha,[a(xe,{size:"xlarge"})]))],512)],2),a(Qe,{visible:e(I).isOpen,"onUpdate:visible":s[8]||(s[8]=k=>e(I).isOpen=k),centered:"",size:"medium",onKeydown:s[9]||(s[9]=Ge(k=>e(I).isOpen=!1,["esc"]))},{default:o(()=>{var k;return[qt(c("div",Ja,[c("div",Ya,[s[15]||(s[15]=c("div",{class:"text-base font-bold text-gray-800"},"Request Integration",-1)),a(h,{size:"small",type:"text",onClick:s[4]||(s[4]=pe=>e(I).isOpen=!1)},{default:o(()=>[a(b,{icon:"close",class:"text-gray-600"})]),_:1})]),c("div",Xa,[a(O,{ref:L,value:e(I).msg,"onUpdate:value":s[5]||(s[5]=pe=>e(I).msg=pe),class:"!rounded-md !text-sm !min-h-[120px] max-h-[500px] nc-scrollbar-thin",size:"large","hide-details":"",placeholder:"Provide integration name and your use-case."},null,8,["value"])]),c("div",Za,[a(h,{size:"small",type:"secondary",onClick:s[6]||(s[6]=pe=>e(I).isOpen=!1)},{default:o(()=>[z(N(g.$t("general.cancel")),1)]),_:1}),a(h,{disabled:!((k=e(I).msg)!=null&&k.trim()),loading:e(I).isLoading,size:"small",onClick:s[7]||(s[7]=pe=>e(Q)(e(I).msg))},{default:o(()=>[z(N(g.$t("general.submit")),1)]),_:1},8,["disabled","loading"])])],512),[[Vt,e(I).isOpen]])]}),_:1},8,["visible"])]),_:1})]),_:1})]),_:1},40,["visible","class"])}}}),mo=Je(en,[["__scopeId","data-v-f08e6a40"]]),tn={};function an(y,A){return d(),w("span")}const nn=Je(tn,[["render",an]]),on={class:"w-full flex flex-col gap-3"},sn={class:"h-7 w-7 flex items-center justify-center"},ln=["href"],cn=he({__name:"SupportedDocs",setup(y){const A=[{title:"Integrations",href:"https://docs.nocodb.com/category/integrations"},{title:"Create new connection",href:"https://docs.nocodb.com/integrations/create-connection"},{title:"Add new Data source",href:"https://docs.nocodb.com/data-sources/connect-to-data-source"}];return(S,F)=>{const U=He;return d(),w("div",null,[c("div",on,[F[0]||(F[0]=c("div",{class:"text-sm text-gray-800 font-semibold"},"Supported Docs",-1)),c("div",null,[(d(),w(oe,null,we(A,(H,se)=>c("div",{key:se,class:"flex items-center gap-1"},[c("div",sn,[a(U,{icon:"bookOpen",class:"flex-none w-4 h-4 text-gray-600"})]),c("a",{href:H.href,target:"_blank",rel:"noopener noreferrer",class:"!text-gray-700 text-sm !no-underline !hover:underline"},N(H.title),9,ln)])),64))])])])}}}),rn={key:0,class:"h-full"},un={class:"p-4 w-full flex items-center justify-between gap-3 border-b-1 border-gray-200"},dn={class:"flex-1 flex items-center gap-3"},pn={key:1,class:"h-8 w-8 flex items-center justify-center children:flex-none bg-gray-200 rounded-lg"},vn={class:"flex-1 text-base font-weight-700"},fn={class:"flex items-center gap-3"},mn={class:"h-[calc(100%_-_66px)] flex"},gn={class:"nc-edit-or-add-integration-left-panel nc-scrollbar-thin relative"},bn={class:"w-full gap-8 max-w-[768px]"},yn={class:"nc-edit-or-add-connection bg-white relative flex flex-col justify-center gap-2 w-full"},Sn={class:"nc-form-section"},_n={class:"nc-form-section-body"},In={class:"nc-form-section"},wn={class:"flex items-center justify-between"},En={class:"flex items-center gap-2"},Cn={class:"p-4 w-[448px] flex flex-col gap-3"},hn={class:"flex items-center gap-2 justify-end"},xn={class:"nc-form-section-body"},Tn={class:"flex flex-col gap-3"},An={class:"flex gap-2"},kn={class:"flex items-center"},Dn={class:"flex"},On={class:"border-1 border-gray-200 rounded-lg p-3"},Nn={class:"w-full flex gap-2 items-center"},$n={class:"flex-1"},Ln={class:"flex gap-2 w-full"},Mn={class:"flex flex-col gap-2"},jn={class:"border-1 border-gray-200 !rounded-lg shadow-sm overflow-hidden"},Un={class:"flex items-center justify-center h-full w-full !bg-white !bg-opacity-85 z-1000"},Rn={class:"nc-edit-or-add-integration-right-panel"},Pn=3,Bn=he({__name:"EditOrAddDatabase",props:{open:{type:Boolean},connectionType:{},loadDatasourceInfo:{type:Boolean},baseId:{}},emits:["update:open"],setup(y,{emit:A}){const S=y,U=Ht(S,"open",A),H=W(()=>S.connectionType??p.MYSQL),{isFromIntegrationPage:se,pageMode:G,IntegrationsPageMode:B,activeIntegration:E,saveIntegration:te,updateIntegration:I}=Ye(),J=W(()=>G.value===B.EDIT),Q=ft.useForm,L=_(!1),de=_(!1),ae=_(),{api:Y}=mt(),{$e:le}=We(),{t:ce}=Ve(),fe=_(!1),ye=(l=p.MYSQL)=>{var v,f;const t=ia(l);return"database"in t.connection&&(t.connection.database=""),l===p.SQLITE&&((f=(v=t.connection)==null?void 0:v.connection)!=null&&f.filename)&&(t.connection.connection.filename=""),t},ie=(l=p.MYSQL)=>({title:"",dataSource:{...ye(l)},sslUse:X.No,extraParameters:[],is_private:!1}),n=_(ie()),ne=_(ie()),re=_(!1),Se=_(!1),g=_(0),s=_([]),b=_([]),h=_(!1),q=W(()=>J.value?!L.value&&!re.value:!L.value),C=()=>{g.value+=1,g.value>=2&&(Se.value=!0)},Ee=W(()=>Jt.filter(l=>[p.SNOWFLAKE,p.DATABRICKS].includes(l.value)&&Se.value||![p.SNOWFLAKE,p.DATABRICKS].includes(l.value))),De=W(()=>{let l={"dataSource.connection.host":[V()],"dataSource.connection.port":[V()],"dataSource.connection.user":[V()],"dataSource.connection.password":[V()]};switch(n.value.dataSource.client){case p.SQLITE:l={"dataSource.connection.connection.filename":[V()]};break;case p.SNOWFLAKE:l={"dataSource.connection.account":[V()],"dataSource.connection.username":[V()],"dataSource.connection.password":[V()],"dataSource.connection.warehouse":[V()],"dataSource.connection.database":[V()],"dataSource.connection.schema":[V()]};break;case p.DATABRICKS:l={"dataSource.connection.token":[V()],"dataSource.connection.host":[V()],"dataSource.connection.path":[V()]};break;case p.PG:case p.MSSQL:l["dataSource.searchPath.0"]=[V()];break}return{title:[{required:!0,message:"Connection name is required"},ya("connection")],extraParameters:[Sa],"dataSource.client":[V()],...l}}),{validate:xe,validateInfos:O}=Q(n,De),Te=()=>{n.value.dataSource={...ye(n.value.dataSource.client)}},Ae=l=>{if(n.value.dataSource.client!==p.SQLITE){const t=n.value.dataSource.connection;switch(l){case X.No:t.ssl=void 0;break;case X.Allowed:t.ssl="true";break;default:t.ssl={ca:"",cert:"",key:""};break}}},k=(l=!1)=>{if(n.value.dataSource.client!==p.SQLITE){const t=n.value.dataSource.connection;t.ssl?typeof t.ssl=="string"?n.value.sslUse=X.Allowed:n.value.sslUse=X.Preferred:n.value.sslUse=X.No,l&&(ne.value.sslUse=ta(n.value.sslUse),s.value=n.value.sslUse!==X.No?["1"]:[])}},pe=()=>{n.value.extraParameters.push({key:"",value:""})},R=l=>{n.value.extraParameters.splice(l,1)},me=_(""),_e=_(!1),Oe=_(),Ne=_(),$e=_(),Le=(l,t)=>{t&&_a(t,v=>{"ssl"in n.value.dataSource.connection&&typeof n.value.dataSource.connection.ssl=="object"&&(n.value.dataSource.connection.ssl[l]=v??""),t.value=null})},Me=W(()=>!!n.value.sslUse&&n.value.sslUse!==X.No&&n.value.sslUse!==X.Allowed);function Xe(){const l=Object.fromEntries(new Map(n.value.extraParameters.filter(v=>{var f;return(f=v.key)==null?void 0:f.trim()}).map(v=>[v.key,v.value]))),t={...n.value.dataSource.connection,...l};return t.ssl=ka(t,n.value.sslUse,n.value.dataSource.client),t}const Ze=()=>{var l,t,v,f,P;(P=(f=(v=(t=(l=ae.value)==null?void 0:l.$el.querySelector(".ant-form-item-explain-error"))==null?void 0:t.parentNode)==null?void 0:v.parentNode)==null?void 0:f.querySelector("input"))==null||P.focus()},wt=async()=>{var l;if(!(J.value&&!((l=E.value)!=null&&l.id))){try{await xe()}catch{Ze();return}try{fe.value=!0;const t=Xe(),v={...n.value.dataSource,connection:t};J.value?await I({id:E.value.id,title:n.value.title,type:ze.Database,sub_type:n.value.dataSource.client,config:v,is_private:n.value.is_private}):await te({title:n.value.title,type:ze.Database,sub_type:n.value.dataSource.client,config:v,is_private:n.value.is_private},"create",S.loadDatasourceInfo,S.baseId)}catch(t){Z.error(await ue(t))}finally{fe.value=!1}}};function Et(l){l&&(n.value.dataSource={...n.value.dataSource,...l,connection:{...n.value.dataSource.connection,...l.connection}})}const Ie=_(),et=async(l=0,t=null)=>{var v;try{await xe()}catch(f){if((v=f.errorFields)!=null&&v.length){Ze();return}}le("a:source:create:extdb:test-connection",[]);try{if(de.value=!0,n.value.dataSource.client===p.SQLITE)L.value=!0,re.value=!0;else{const f=Xe();f.database=aa(n.value.dataSource);const P={...n.value.dataSource,connection:f},T=await Y.utils.testConnection(P);T.code===0?(L.value=!0,re.value=!0):(L.value=!1,Z.error(`${ce("msg.error.dbConnectionFailed")} ${T.message}`))}}catch(f){const P=t||JSON.parse(JSON.stringify(n.value.dataSource));await Ct(f,l,P)}finally{de.value=!1}};async function Ct(l,t,v){if(t>=Pn){L.value=!1,Ie.value=await ue(l),n.value.dataSource=v;return}const f=na(l);if(f)return Et(f),et(t+1,v);L.value=!1,Ie.value=await ue(l)}const ht=async()=>{var t;if(!me.value||me.value==="")return;const l=await Y.utils.urlToConfig({url:me.value});l?(n.value.dataSource.client=l.client,n.value.dataSource.connection={...l.connection},l.client===p.SQLITE&&(n.value.dataSource.connection.connection={filename:((t=l==null?void 0:l.connection)==null?void 0:t.filename)||""})):Z.error(ce("msg.error.invalidURL")),_e.value=!1,k()},je=W({get:()=>({...n.value}),set:l=>{var t,v,f,P;l&&typeof l=="object"?n.value={...ie(),...l}:n.value=ie((v=(t=n.value)==null?void 0:t.dataSource)!=null&&v.client?(P=(f=n.value)==null?void 0:f.dataSource)==null?void 0:P.client:void 0),k()}});function xt(){const l=Ia(ne.value,n.value);return!(typeof l=="object"&&Object.keys(l).length===1&&(l==null?void 0:l.title)!==void 0)}const tt=l=>{l?s.value=["1"]:(s.value=[],n.value.sslUse=X.No,Ae(n.value.sslUse))},Tt=l=>{l?(b.value=["1"],At(!0,"nc-connection-advanced-options")):b.value=[]};let Ue;function At(l,t){Ue&&clearTimeout(Ue),vt(()=>{const v=document.querySelector(`.nc-edit-or-add-connection .${t}`);console.log("className",t,v),v&&(Ue=setTimeout(()=>{v.scrollIntoView({block:"center",behavior:"smooth"})},400))})}const at=W(()=>{var t,v,f,P,T;const l=J.value?((t=E.value)==null?void 0:t.sub_type)||((f=(v=E.value)==null?void 0:v.config)==null?void 0:f.client):(P=E.value)==null?void 0:P.type;return(T=qe[l])==null?void 0:T.icon});return pt(n,()=>{xt()?(L.value=!1,Ie.value=null,re.value=!1):re.value=!0},{deep:!0}),Yt(async()=>{var l;if(h.value=!0,G.value===B.ADD)n.value.title=await Xt();else{if(!E.value)return;const t=["host","port","user","password","database"],v=Object.entries(E.value.config.connection).filter(([f])=>!t.includes(f)).map(([f,P])=>({key:f,value:P}));n.value={title:E.value.title||"",dataSource:E.value.config,extraParameters:v,sslUse:X.No,is_private:(l=E.value)==null?void 0:l.is_private},ne.value=JSON.parse(JSON.stringify(n.value)),k(!0)}vt(()=>{setTimeout(()=>{var v,f;const t=(f=(v=ae.value)==null?void 0:v.$el)==null?void 0:f.querySelector("input[type=text]");t==null||t.setSelectionRange(0,n.value.title.length),t==null||t.focus()},500)}),h.value=!1}),pt(H,l=>{n.value.dataSource.client=l,Te()},{immediate:!0}),(l,t)=>{var ct;const v=He,f=gt,P=bt,T=yt,D=ha,x=oa,K=sa,kt=St,Dt=pa,nt=xa,ot=va,st=Ta,Ot=wa,Re=fa,Nt=Aa,lt=Ea,it=Ca,$t=ma,Lt=ft,Mt=la,jt=ga,Ut=nn,Rt=cn;return e(E)?(d(),w("div",rn,[c("div",un,[c("div",dn,[!e(J)&&!e(se)?(d(),j(f,{key:0,type:"text",size:"small",onClick:t[0]||(t[0]=i=>G.value=e(B).LIST)},{default:o(()=>[a(v,{icon:"arrowLeft"})]),_:1})):$("",!0),e(at)?(d(),w("div",pn,[(d(),j(Ce(e(at)),{class:"!stroke-transparent w-4 h-4"}))])):$("",!0),c("div",vn,N((ct=e(E))==null?void 0:ct.title),1)]),c("div",fn,[c("div",{class:"w-[15px] h-[15px] cursor-pointer",onDblclick:C},null,32),a(P,{disabled:!e(Ie)},{title:o(()=>[z(N(e(Ie)),1)]),default:o(()=>[a(f,{type:"secondary",size:"small",class:ge(["nc-extdb-btn-test-connection",{"pointer-events-none":e(L)}]),loading:e(de),disabled:e(h),"icon-position":"right",onClick:t[1]||(t[1]=i=>et())},{icon:o(()=>[e(L)?(d(),j(v,{key:0,icon:"circleCheckSolid",class:"!text-green-700 w-4 h-4"})):e(Ie)?(d(),j(v,{key:1,icon:"alertTriangleSolid",class:"!text-red-700 w-4 h-4"})):$("",!0)]),default:o(()=>[c("span",null,N(e(L)?"Test successful":"Test connection"),1)]),_:1},8,["class","loading","disabled"])]),_:1},8,["disabled"]),a(f,{size:"small",type:"primary",disabled:e(q)||e(h),loading:e(fe),class:"nc-extdb-btn-submit",onClick:wt},{default:o(()=>[z(N(e(G)===e(B).ADD?"Create connection":"Modify connection"),1)]),_:1},8,["disabled","loading"]),a(f,{size:"small",type:"text",onClick:t[2]||(t[2]=i=>U.value=!1)},{default:o(()=>[a(v,{icon:"close",class:"text-gray-600"})]),_:1})])]),c("div",mn,[c("div",gn,[c("div",bn,[c("div",yn,[a(Lt,{ref_key:"form",ref:ae,model:e(n),"hide-required-mark":"",name:"external-base-create-form",layout:"vertical",class:"flex flex-col gap-8"},{default:o(()=>[c("div",Sn,[t[40]||(t[40]=c("div",{class:"nc-form-section-title"},"General",-1)),c("div",_n,[a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:"Connection name"},e(O).title),{default:o(()=>[a(T,{value:e(n).title,"onUpdate:value":t[3]||(t[3]=i=>e(n).title=i)},null,8,["value"])]),_:1},16)]),_:1})]),_:1})])]),c("div",In,[c("div",wn,[t[43]||(t[43]=c("div",{class:"nc-form-section-title"},"Connection details",-1)),[e(p).SQLITE,e(p).SNOWFLAKE,e(p).DATABRICKS].includes(e(n).dataSource.client)?$("",!0):(d(),j(Dt,{key:0,visible:e(_e),"onUpdate:visible":t[7]||(t[7]=i=>ve(_e)?_e.value=i:null),placement:"bottomRight"},{overlay:o(()=>[c("div",Cn,[t[42]||(t[42]=c("div",{class:"text-sm text-gray-700"}," Auto populate connection configuration using database connection URL ",-1)),a(kt,{value:e(me),"onUpdate:value":t[5]||(t[5]=i=>ve(me)?me.value=i:null),class:"!rounded-lg !min-h-[120px] !max-h-[250px] nc-scrollbar-thin"},null,8,["value"]),c("div",hn,[a(f,{size:"small",type:"secondary",onClick:t[6]||(t[6]=()=>{_e.value=!1,me.value=""})},{default:o(()=>[z(N(l.$t("general.cancel")),1)]),_:1}),a(f,{size:"small",onClick:ht},{default:o(()=>t[41]||(t[41]=[z(" Import")])),_:1})])])]),default:o(()=>[a(f,{type:"text",size:"xsmall",class:"nc-extdb-btn-import-url !rounded-md !h-6 !px-2 flex-none",onClick:t[4]||(t[4]=Zt(i=>_e.value=!0,["stop"]))},{default:o(()=>[c("div",En,[a(v,{icon:"magic",class:"flex-none text-yellow-500"}),z(" "+N(l.$t("activity.useConnectionUrl")),1)])]),_:1})]),_:1},8,["visible"]))]),c("div",xn,[e(Se)?(d(),j(K,{key:0,gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:l.$t("labels.dbType")},e(O)["dataSource.client"]),{default:o(()=>[a(ot,{value:e(n).dataSource.client,"onUpdate:value":t[8]||(t[8]=i=>e(n).dataSource.client=i),class:"nc-select-shadow nc-extdb-db-type","dropdown-class-name":"nc-dropdown-ext-db-type",onChange:Te},{default:o(()=>[(d(!0),w(oe,null,we(e(Ee),i=>(d(),j(nt,{key:i.value,value:i.value},{default:o(()=>[z(N(i.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"])]),_:1})]),_:1})):$("",!0),e(n).dataSource.client===e(p).SQLITE?(d(),j(K,{key:1,gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:l.$t("labels.sqliteFile")},e(O)["dataSource.connection.connection.filename"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.connection.filename,"onUpdate:value":t[9]||(t[9]=i=>e(n).dataSource.connection.connection.filename=i),placeholder:"Enter absolute file path"},null,8,["value"])]),_:1},16,["label"])]),_:1})]),_:1})):e(n).dataSource.client===e(p).SNOWFLAKE?(d(),w(oe,{key:2},[a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:l.$t("labels.account")},e(O)["dataSource.connection.account"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.account,"onUpdate:value":t[10]||(t[10]=i=>e(n).dataSource.connection.account=i),class:"nc-extdb-host-address"},null,8,["value"])]),_:1},16,["label"])]),_:1})]),_:1}),a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:l.$t("labels.username")},e(O)["dataSource.connection.username"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.username,"onUpdate:value":t[11]||(t[11]=i=>e(n).dataSource.connection.username=i),class:"nc-extdb-host-user"},null,8,["value"])]),_:1},16,["label"])]),_:1}),a(x,{span:12},{default:o(()=>[a(D,M({label:l.$t("labels.password"),class:"nc-form-item-connection-password"},e(O)["dataSource.connection.password"]),{default:o(()=>[a(st,{value:e(n).dataSource.connection.password,"onUpdate:value":t[12]||(t[12]=i=>e(n).dataSource.connection.password=i),class:"nc-extdb-host-password"},null,8,["value"])]),_:1},16,["label"])]),_:1})]),_:1}),a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:"Warehouse"},e(O)["dataSource.connection.warehouse"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.warehouse,"onUpdate:value":t[13]||(t[13]=i=>e(n).dataSource.connection.warehouse=i),class:"nc-extdb-host-database"},null,8,["value"])]),_:1},16)]),_:1}),a(x,{span:12},{default:o(()=>[a(D,M({label:l.$t("labels.database")},e(O)["dataSource.connection.database"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.database,"onUpdate:value":t[14]||(t[14]=i=>e(n).dataSource.connection.database=i),class:"nc-extdb-host-database",placeholder:`${l.$t("labels.database")} ${l.$t("general.name").toLowerCase()}`},null,8,["value","placeholder"])]),_:1},16,["label"])]),_:1})]),_:1}),a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:"Schema"},e(O)["dataSource.connection.schema"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.schema,"onUpdate:value":t[15]||(t[15]=i=>e(n).dataSource.connection.schema=i),class:"nc-extdb-host-database"},null,8,["value"])]),_:1},16)]),_:1})]),_:1})],64)):e(n).dataSource.client===e(p).DATABRICKS?(d(),w(oe,{key:3},[a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:"Token"},e(O)["dataSource.connection.token"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.token,"onUpdate:value":t[16]||(t[16]=i=>e(n).dataSource.connection.token=i),class:"nc-extdb-host-token"},null,8,["value"])]),_:1},16)]),_:1}),a(x,{span:12},{default:o(()=>[a(D,M({label:"Host"},e(O)["dataSource.connection.host"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.host,"onUpdate:value":t[17]||(t[17]=i=>e(n).dataSource.connection.host=i),class:"nc-extdb-host-address"},null,8,["value"])]),_:1},16)]),_:1})]),_:1}),a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:"Path"},e(O)["dataSource.connection.path"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.path,"onUpdate:value":t[18]||(t[18]=i=>e(n).dataSource.connection.path=i),class:"nc-extdb-host-path"},null,8,["value"])]),_:1},16)]),_:1}),a(x,{span:12},{default:o(()=>[a(D,M({label:"Database"},e(O)["dataSource.connection.database"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.database,"onUpdate:value":t[19]||(t[19]=i=>e(n).dataSource.connection.database=i),placeholder:`${l.$t("labels.database")} ${l.$t("general.name").toLowerCase()}`,class:"nc-extdb-host-database"},null,8,["value","placeholder"])]),_:1},16)]),_:1})]),_:1}),a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:"Schema"},e(O)["dataSource.connection.schema"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.schema,"onUpdate:value":t[20]||(t[20]=i=>e(n).dataSource.connection.schema=i),class:"nc-extdb-host-schema"},null,8,["value"])]),_:1},16)]),_:1})]),_:1})],64)):(d(),w(oe,{key:4},[a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:l.$t("labels.hostAddress")},e(O)["dataSource.connection.host"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.host,"onUpdate:value":t[21]||(t[21]=i=>e(n).dataSource.connection.host=i),class:"nc-extdb-host-address"},null,8,["value"])]),_:1},16,["label"])]),_:1}),a(x,{span:12},{default:o(()=>[a(D,M({label:l.$t("labels.port"),class:"nc-form-item-connection-port"},e(O)["dataSource.connection.port"]),{default:o(()=>[a(Ot,{value:e(n).dataSource.connection.port,"onUpdate:value":t[22]||(t[22]=i=>e(n).dataSource.connection.port=i),class:"!w-full nc-extdb-host-port !rounded-md"},null,8,["value"])]),_:1},16,["label"])]),_:1})]),_:1}),a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:l.$t("labels.username")},e(O)["dataSource.connection.user"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.user,"onUpdate:value":t[23]||(t[23]=i=>e(n).dataSource.connection.user=i),class:"nc-extdb-host-user"},null,8,["value"])]),_:1},16,["label"])]),_:1}),a(x,{span:12},{default:o(()=>[a(D,{label:l.$t("labels.password")},{default:o(()=>[a(st,{value:e(n).dataSource.connection.password,"onUpdate:value":t[24]||(t[24]=i=>e(n).dataSource.connection.password=i),class:"nc-extdb-host-password"},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,M({label:l.$t("labels.database")},e(O)["dataSource.connection.database"]),{default:o(()=>[a(T,{value:e(n).dataSource.connection.database,"onUpdate:value":t[25]||(t[25]=i=>e(n).dataSource.connection.database=i),placeholder:`${l.$t("labels.database")} ${l.$t("general.name").toLowerCase()}`,class:"nc-extdb-host-database"},null,8,["value","placeholder"])]),_:1},16,["label"])]),_:1}),a(x,{span:12},{default:o(()=>[[e(p).MSSQL,e(p).PG].includes(e(n).dataSource.client)&&e(n).dataSource.searchPath?(d(),j(D,M({key:0,label:l.$t("labels.schemaName")},e(O)["dataSource.searchPath.0"]),{default:o(()=>[a(T,{value:e(n).dataSource.searchPath[0],"onUpdate:value":t[26]||(t[26]=i=>e(n).dataSource.searchPath[0]=i)},null,8,["value"])]),_:1},16,["label"])):$("",!0)]),_:1})]),_:1}),[e(p).SQLITE,e(p).SNOWFLAKE,e(p).DATABRICKS].includes(e(n).dataSource.client)?$("",!0):(d(),j(K,{key:0,gutter:24},{default:o(()=>[a(x,{span:24},{default:o(()=>[a(D,M({class:"nc-form-extra-connectin-parameters mb-2",label:"Connection parameters"},e(O).extraParameters),{default:o(()=>[c("div",Tn,[(d(!0),w(oe,null,we(e(n).extraParameters,(i,ee)=>(d(),w("div",{key:ee},[a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(T,{value:i.key,"onUpdate:value":ke=>i.key=ke,placeholder:"Key"},null,8,["value","onUpdate:value"])]),_:2},1024),a(x,{span:12},{default:o(()=>[c("div",An,[a(T,{value:i.value,"onUpdate:value":ke=>i.value=ke,placeholder:"Value"},null,8,["value","onUpdate:value"]),a(f,{type:"text",size:"small",onClick:ke=>R(ee)},{default:o(()=>[a(v,{icon:"delete",class:"flex-none text-gray-500"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024)]))),128)),c("div",null,[a(f,{size:"small",type:"secondary",class:"",onClick:pe},{default:o(()=>[c("div",kn,[a(v,{icon:"plus"}),t[44]||(t[44]=z(" Add "))])]),_:1})])])]),_:1},16)]),_:1})]),_:1}))],64))])]),[e(p).SQLITE,e(p).SNOWFLAKE,e(p).DATABRICKS].includes(e(n).dataSource.client)?$("",!0):(d(),w(oe,{key:0},[a(Re),a(it,{"active-key":e(s),"onUpdate:activeKey":t[36]||(t[36]=i=>ve(s)?s.value=i:null),ghost:"",class:"!mt-4"},{expandIcon:o(({isActive:i})=>[a(Nt,{checked:i,size:"small",onChange:t[27]||(t[27]=ee=>tt(ee))},null,8,["checked"])]),default:o(()=>[a(lt,{key:"1",collapsible:"disabled"},{header:o(()=>[c("div",Dn,[c("div",{class:"nc-form-section-title cursor-pointer",onClick:t[28]||(t[28]=i=>tt(!e(s).length))}," Use SSL ")])]),default:o(()=>[c("div",On,[a(K,{gutter:24},{default:o(()=>[a(x,{span:12},{default:o(()=>[a(D,{label:"SSL mode"},{default:o(()=>[a(ot,{value:e(n).sslUse,"onUpdate:value":t[29]||(t[29]=i=>e(n).sslUse=i),class:"nc-select-shadow","dropdown-class-name":"nc-dropdown-ssl-mode",onSelect:Ae},{default:o(()=>[(d(!0),w(oe,null,we(Object.values(e(X)),i=>(d(),j(nt,{key:i,value:i},{default:o(()=>[c("div",Nn,[c("div",$n,N(i),1),e(n).sslUse===i?(d(),j(Ce(("iconMap"in l?l.iconMap:e(u)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):$("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),a(K,{gutter:24},{default:o(()=>[a(x,{span:24},{default:o(()=>[e(n).sslUse&&![e(X).No,e(X).Allowed].includes(e(n).sslUse)?(d(),j(D,{key:0,label:"SSL keys",class:"!mt-3"},{default:o(()=>[c("div",Ln,[a(P,{placement:"top"},{title:o(()=>[c("span",null,N(l.$t("tooltip.clientCert")),1)]),default:o(()=>[a(f,{size:"small",type:"secondary",disabled:!e(Me),class:"shadow !w-[90px]",onClick:t[30]||(t[30]=i=>{var ee;return(ee=e($e))==null?void 0:ee.click()})},{default:o(()=>[z(N(l.$t("labels.clientCert")),1)]),_:1},8,["disabled"])]),_:1}),a(P,{placement:"top"},{title:o(()=>[c("span",null,N(l.$t("tooltip.clientKey")),1)]),default:o(()=>[a(f,{size:"small",type:"secondary",disabled:!e(Me),class:"shadow !w-[90px]",onClick:t[31]||(t[31]=i=>{var ee;return(ee=e(Ne))==null?void 0:ee.click()})},{default:o(()=>[z(N(l.$t("labels.clientKey")),1)]),_:1},8,["disabled"])]),_:1}),a(P,{placement:"top"},{title:o(()=>[c("span",null,N(l.$t("tooltip.clientCA")),1)]),default:o(()=>[a(f,{size:"small",type:"secondary",disabled:!e(Me),class:"shadow !w-[90px]",onClick:t[32]||(t[32]=i=>{var ee;return(ee=e(Oe))==null?void 0:ee.click()})},{default:o(()=>[z(N(l.$t("labels.serverCA")),1)]),_:1},8,["disabled"])]),_:1})])]),_:1})):$("",!0)]),_:1})]),_:1}),c("input",{ref_key:"caFileInput",ref:Oe,type:"file",class:"!hidden",accept:".ca",onChange:t[33]||(t[33]=i=>Le(("CertTypes"in l?l.CertTypes:e(Fe)).ca,e(Oe)))},null,544),c("input",{ref_key:"certFileInput",ref:$e,type:"file",class:"!hidden",accept:".cert",onChange:t[34]||(t[34]=i=>Le(("CertTypes"in l?l.CertTypes:e(Fe)).cert,e($e)))},null,544),c("input",{ref_key:"keyFileInput",ref:Ne,type:"file",class:"!hidden",accept:".key",onChange:t[35]||(t[35]=i=>Le(("CertTypes"in l?l.CertTypes:e(Fe)).key,e(Ne)))},null,544)])]),_:1})]),_:1},8,["active-key"])],64)),[e(p).SQLITE,e(p).SNOWFLAKE,e(p).DATABRICKS].includes(e(n).dataSource.client)?$("",!0):(d(),j(it,{key:1,"active-key":e(b),"onUpdate:activeKey":t[39]||(t[39]=i=>ve(b)?b.value=i:null),ghost:"",class:"nc-connection-advanced-options !mt-4"},{expandIcon:o(({isActive:i})=>[a(f,{type:"text",size:"small",class:"!-ml-1.5",onClick:t[37]||(t[37]=ee=>Tt(!e(b).length))},{default:o(()=>[t[45]||(t[45]=c("div",{class:"nc-form-section-title"},"Advanced options",-1)),a(v,{icon:"chevronDown",class:ge(["ml-2 flex-none cursor-pointer transform transition-transform duration-500",{"!rotate-180":i}])},null,8,["class"])]),_:2},1024)]),default:o(()=>[a(lt,{key:"1",collapsible:"disabled"},{header:o(()=>t[46]||(t[46]=[c("span",null,null,-1)])),default:o(()=>[c("div",Mn,[t[47]||(t[47]=c("div",null,"Edit Connection JSON",-1)),c("div",jn,[a($t,{modelValue:e(je),"onUpdate:modelValue":t[38]||(t[38]=i=>ve(je)?je.value=i:null),class:"nc-connection-json-editor h-[400px] w-full"},null,8,["modelValue"])])])]),_:1})]),_:1},8,["active-key"]))]),_:1},8,["model"]),t[48]||(t[48]=c("div",{class:"mt-10"},null,-1))])]),a(jt,{"model-value":e(h),inline:"",transition:"",class:"!bg-opacity-15"},{default:o(()=>[c("div",Un,[a(Mt,{size:"large"})])]),_:1},8,["model-value"])]),c("div",Rn,[("isEeUI"in l?l.isEeUI:e(ea))?(d(),w(oe,{key:0},[a(Ut,{varient:"new"}),a(Re)],64)):$("",!0),a(Rt),a(Re)])])])):$("",!0)}}}),Fn=Je(Bn,[["__scopeId","data-v-88215161"]]),Kn={key:0,class:"h-full"},go=he({__name:"EditOrAdd",props:{loadDatasourceInfo:{type:Boolean},baseId:{}},setup(y){const A=y,{loadDatasourceInfo:S,baseId:F}=ca(A),{pageMode:U,IntegrationsPageMode:H,integrationType:se,activeIntegration:G}=Ye(),B=W({get:()=>U.value===H.ADD||U.value===H.EDIT,set:te=>{te||(U.value=null)}}),E=W(()=>{var te,I,J,Q;switch(U.value===H.EDIT?((te=G.value)==null?void 0:te.sub_type)||((J=(I=G.value)==null?void 0:I.config)==null?void 0:J.client):(Q=G.value)==null?void 0:Q.type){case se.PostgreSQL:return p.PG;case se.MySQL:return p.MYSQL;case se.SQLITE:return p.SQLITE;default:return}});return(te,I)=>{const J=Fn,Q=Qe;return d(),j(Q,{visible:e(B),"onUpdate:visible":I[1]||(I[1]=L=>ve(B)?B.value=L:null),size:"large","wrap-class-name":"nc-modal-edit-or-add-integration",onKeydown:I[2]||(I[2]=Ge(L=>B.value=!1,["esc"]))},{default:o(()=>[e(E)?(d(),w("div",Kn,[a(J,{open:e(B),"onUpdate:open":I[0]||(I[0]=L=>ve(B)?B.value=L:null),"connection-type":e(E),"load-datasource-info":e(S),"base-id":e(F)},null,8,["open","connection-type","load-datasource-info","base-id"])])):$("",!0)]),_:1},8,["visible"])}}});export{fo as _,mo as a,go as b,Na as c,Ye as u,ka as v};
