import{e as $,bL as l,g2 as R,r as c,i6 as B,d7 as N,i2 as T,ha as P,J as S,dz as V,f as d,o as r,c as E,Q as u,w as m,N as t,S as _,R as f,d as G,t as h,a as L,a7 as z,T as A,ah as F,ai as D,aL as M,Y as U,$ as J,y as Q,_ as W}from"./DZZ6t_j4.js";import{a as Y}from"./CA74dF2b.js";import{e as q}from"./BDAIZopQ.js";import"./GMLocJHP.js";import"./qW2V2r_p.js";import"./ByVBARmO.js";import"./boyBAVNN.js";const H={class:"text-[13px] truncate font-medium"},K=$({__name:"Button",setup(X){const e=l(R),p=l(B,c()),{currentRow:b}=Y(),w=l(N,c()),k=l(T,c(!1)),O=l(P,c(!1)),{isUIAllowed:x}=S(),v=l(V,c(!1)),{$api:g}=Q(),y=d(()=>{var s;return q((s=b.value)==null?void 0:s.row,w.value.columns)}),i=c(!1),I=async()=>{var n;if(e.value.colOptions.type==="webhook")try{i.value=!0,await g.dbTableWebhook.trigger((n=p.value)==null?void 0:n.fk_webhook_id,y.value)}catch(a){console.log(a),F.error(await D(a))}finally{i.value=!1}},j=d(()=>{var s,n,a;if(e.value.colOptions.type==="url"){let o=`${(s=p.value)==null?void 0:s.url}`;return o=encodeURI(/^(https?|ftp|mailto|file):\/\//.test(o)?o:o.trim()?`http://${o}`:""),{href:o,target:"_blank",...(n=e.value)!=null&&n.colOptions.error?{disabled:!0}:{}}}else return{disabled:v.value||!x("hookTrigger")||i.value||!e.value.colOptions.fk_webhook_id||!((a=p.value)!=null&&a.fk_webhook_id)}});return(s,n)=>{const a=M,o=U,C=J;return r(),E("div",{class:_([{"justify-center":t(k)&&!t(O)},"w-full flex items-center"])},[(r(),u(A(t(e).colOptions.type==="url"?"a":"button"),z(t(j),{"data-testid":"nc-button-cell",class:[[`${t(e).colOptions.color??"brand"} ${t(e).colOptions.theme??"solid"}`,{"!w-6":!t(e).colOptions.label}],"nc-cell-button nc-button-cell-link btn-cell-colors truncate flex items-center h-6"],onClick:I}),{default:m(()=>[t(i)?(r(),u(a,{key:0,class:_([{solid:t(e).colOptions.theme==="solid",text:t(e).colOptions.theme==="text",light:t(e).colOptions.theme==="light"},"flex btn-cell-colors !bg-transparent w-4 h-4"]),size:"medium"},null,8,["class"])):t(e).colOptions.icon?(r(),u(o,{key:1,icon:t(e).colOptions.icon,class:"!w-4 min-w-4 min-h-4 !h-4"},null,8,["icon"])):f("",!0),t(e).colOptions.label?(r(),u(C,{key:2,class:"!truncate","show-on-truncate-only":""},{title:m(()=>[G(h(t(e).colOptions.label),1)]),default:m(()=>[L("span",H,h(t(e).colOptions.label),1)]),_:1})):f("",!0)]),_:1},16,["class"]))],2)}}}),le=W(K,[["__scopeId","data-v-ac7746d9"]]);export{le as default};
