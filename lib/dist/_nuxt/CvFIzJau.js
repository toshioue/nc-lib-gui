const __vite__fileDeps=["./BMEdhAIT.js","./DZZ6t_j4.js","./entry.DIDWwc7m.css","./Ck-cgwga.js","./Tabs.DaLSLYpn.css","./AdvanceColorPicker.BztCsLjV.css","./BG7GQPkT.js","./DqAHSrWO.js","./sz1d3zjm.js","./MenuItem.C7h59s4s.css","./BLgccLvp.js","./Menu.CQ8GNWeI.css","./vK-WmZ7a.js","./DnSVh-oD.js","./D_MsYLkT.js","./BCJFTkwv.js","./BQQOEPN4.js","./CB1aB6F1.js","./B5RRVMt5.js","./vll-Pnjv.js","./Select.C8Fy0-eI.css","./BtLb9F6G.js","./hZgTYrdl.js","./ByVBARmO.js","./37hePIet.js","./C4K5fdHe.js","./i4aLU0Nw.js","./GMLocJHP.js","./FieldListAutoCompleteDropdown.B9RfDcmT.css","./BC4FfNUJ.js","./EqBqqo9-.js","./DKoVb009.js","./CFvUUxCy.js","./eX8_g88K.js","./SingleSelect.B3VFmHbU.css","./BfEabL6Z.js","./DO2z7KR_.js","./DNgdBwTe.js","./MultiSelect.CPGlWfel.css","./_UtSxoDP.js","./CdfAcTJv.js","./CToWLgER.js","./DateWeekSelector.Cg_ptNCJ.css","./jD721dGr.js","./DatePicker.CPnQAVbd.css","./8CPSAnYl.js","./YearPicker.D3GFQXjv.css","./wnVheyFD.js","./CbkSs5Gy.js","./TimePicker.D71nJvtX.css","./B_hXH8Ph.js","./BDAIZopQ.js","./Rating.Bbd6kC9Q.css","./CwCOKBa8.js","./C9Sjn86N.js","./Duration.qRuog1CR.css","./ZFfr47_V.js","./CmWcz5yS.js","./Percent.CRLQxj2f.css","./Dw0oE3Jr.js","./Currency.B3r8b999.css","./Cj0Ygd-o.js","./Decimal.B3q8Nk6V.css","./DXGe1EHQ.js","./Integer.B2TNnrsi.css","./BL8INA0H.js","./Float.BKKVtNnp.css","./bWYzyg0p.js","./BGrG97ky.js","./DnwRMKX3.js","./UserIcon.DEVmGavY.css","./User.Cb8PWh8F.css","./B05h-4V9.js","./ColumnFilter.Nvete9xV.css","./BcnO2-mi.js","./d-K880gs.js","./C3jLTHF4.js","./BYINaHrJ.js","./dfem9Uc_.js","./D9tFZoTQ.js","./3mkq4YHx.js","./Dg0-TbNo.js","./t0mbNaqp.js","./9ZvwAtsX.js","./DKN1hQ6S.js","./BQuyMdA-.js","./DGj1ycqW.js","./DyDFI6NE.js","./SelectOptions.JaHDUZhn.css","./DkxvsUH0.js","./RichLongTextDefaultValue.WUdV6DkU.css","./DDUsq9qf.js","./B89oU1M4.js","./Badge.D0-UrqG9.css","./CA74dF2b.js","./qW2V2r_p.js","./boyBAVNN.js","./Deb3yIC8.js","./BXkAG49i.js","./Cz_1GoV3.js","./C3wAmqC5.js","./zkLO0R0R.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Hl=Object.defineProperty;var Wl=(y,M,w)=>M in y?Hl(y,M,{enumerable:!0,configurable:!0,writable:!0,value:w}):y[M]=w;var Ht=(y,M,w)=>(Wl(y,typeof M!="symbol"?M+"":M,w),w);import{e as he,ab as we,o as l,Q as u,w as n,a,W as $e,T as te,N as e,U as ve,d as B,a6 as Xl,b as o,t as x,O as le,Z as Ct,ba as Bt,r as Y,J as Ft,f as ue,ie as at,g as Ze,c$ as p,c as g,aJ as vt,R as h,ao as ee,at as me,S as ye,ig as dt,Y as Ie,iJ as ft,bL as Ye,d7 as nt,hM as Qt,eI as Yl,iK as Ql,iL as Zl,iM as Jl,ga as en,a8 as st,a7 as be,da as _l,a$ as Zt,_ as ze,a4 as Je,cr as Vt,cs as vl,ag as et,$ as mt,gp as Tt,dD as It,F as Ne,iN as it,X as ot,iO as tn,ax as yt,cL as Dt,cW as ht,ii as fl,f_ as rt,iP as ln,m as Mt,f$ as lt,iQ as Yt,iR as gl,fU as nn,iS as yl,a1 as on,fE as Rt,d0 as Jt,D as el,g3 as gt,iT as an,a5 as hl,cO as bl,iU as sn,V as Et,iV as un,d4 as rn,az as cn,cA as dn,M as mn,P as $t,iW as pn,d5 as _n,ft as vn,iX as fn,cm as gn,L as yn,aD as hn,i4 as bn,gT as wn,ah as il,iY as kn,dk as xn,ce as $n,y as Cn}from"./DZZ6t_j4.js";import{_ as Tn}from"./DgixBgIx.js";import{_ as In}from"./YB9ISZhn.js";import{_ as Dn}from"./BVrX6sNU.js";import"./DKN1hQ6S.js";import{I as tl}from"./BQuyMdA-.js";import St from"./hZgTYrdl.js";import Ot from"./37hePIet.js";import{a as Ve,_ as Mn,u as Sn}from"./d-K880gs.js";import{g as ul,m as On,o as xt,q as Ln,s as Un,i as rl,u as An}from"./BDAIZopQ.js";import{e as Nt,l as Wt,K as cl,R as dl,P as En}from"./CwK0k4WN.js";import{a as Nn,_ as Rn,L as Bn}from"./amsYJsUh.js";import{_ as ke}from"./dfem9Uc_.js";import{S as Ue,_ as Ae}from"./D_MsYLkT.js";import{_ as pt}from"./CJNscGy3.js";import{_ as ll}from"./vK-WmZ7a.js";import{R as nl,_ as ol}from"./CFvUUxCy.js";import{_ as Fn}from"./Ck-cgwga.js";import{a as wl}from"./i4aLU0Nw.js";import{d as Vn}from"./C9Sjn86N.js";import{_ as al}from"./CXD-Dj4T.js";import{_ as Pn}from"./CynerQ2m.js";import{_ as qn}from"./DnSVh-oD.js";import{_ as jn}from"./CDWovrGB.js";import{_ as Kn}from"./CR5b0rlC.js";import{u as zn,_ as Gn}from"./B4ZLG6hR.js";import{_ as Hn}from"./0azk-b-q.js";import{u as Wn}from"./BJrIHEse.js";import{u as Xn}from"./3mkq4YHx.js";import{u as Yn}from"./C3XbZq4f.js";import{k as ml,i as Xt,c as Qn}from"./C4K5fdHe.js";import{F as Zn}from"./BYINaHrJ.js";import{_ as Jn}from"./DGj1ycqW.js";const eo={class:"mb-3 text-gray-800"},to={class:"flex item-center gap-2 mb-4"},lo={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},no=he({__name:"ColumnUpdateConfirm",props:{visible:{type:Boolean},saving:{type:Boolean}},emits:["submit","cancel","update:visible"],setup(y,{emit:M}){const w=y,V=M,t=we(w,"visible",V);return(i,d)=>{const S=Ct,k=Tn;return l(),u(k,{visible:e(t),"onUpdate:visible":d[3]||(d[3]=c=>le(t)?t.value=c:null),size:"small"},{default:n(()=>[a("div",{class:"flex flex-col p-6",onClick:d[2]||(d[2]=$e(()=>{},["stop"]))},[d[7]||(d[7]=a("div",{class:"flex flex-row pb-2 mb-4 font-medium text-lg border-b-1 border-gray-50 text-gray-800"},"Field Type Change",-1)),a("div",eo,[a("div",to,[(l(),u(te(("iconMap"in i?i.iconMap:e(ve)).warning),{id:"nc-selected-item-icon",class:"text-yellow-500 w-10 h-10"})),d[4]||(d[4]=B(" This action cannot be undone. Converting data types may result in data loss. Proceed with caution! "))])]),Xl(i.$slots,"entity-preview"),a("div",lo,[o(S,{type:"secondary",onClick:d[0]||(d[0]=c=>t.value=!1)},{default:n(()=>[B(x(i.$t("general.cancel")),1)]),_:1}),o(S,{key:"submit",autofocus:"",type:"primary","html-type":"submit",loading:i.saving,"data-testid":"nc-delete-modal-delete-btn",onClick:d[1]||(d[1]=c=>V("submit"))},{loading:n(()=>d[5]||(d[5]=[B(" Saving... ")])),default:n(()=>[d[6]||(d[6]=B(" Update "))]),_:1},8,["loading"])])])]),_:3},8,["visible"])}}}),oo=["onKeydown"],ao={class:"nc-column-list-wrapper flex-col w-full max-h-[290px] nc-scrollbar-thin !overflow-y-auto px-2"},so={key:0,class:"px-2 py-6 text-gray-500 flex flex-col items-center gap-6"},io=["data-testid","onClick"],uo={class:"flex gap-2 items-center"},ro={class:"flex-1 text-sm"},co={key:0,class:"!text-xs !text-gray-300"},mo=he({__name:"UITypesOptionsWithSearch",props:{options:{}},emits:["selected"],setup(y,{emit:M}){const w=y,V=M,{options:t}=Bt(w),i=Y(""),{isMetaReadOnly:d}=Ft(),S=ue(()=>{var _;return((_=t.value)==null?void 0:_.filter(D=>D.name.toLowerCase().includes(i.value.toLowerCase())||at[D.name]&&at[D.name].toLowerCase().includes(i.value.toLowerCase())))??[]}),k=Y(),c=Y(-1),O=_=>d.value&&!dt.includes(_),$=_=>{!_||O(_)||V("selected",_)},j=()=>{const _=document.querySelector(".nc-column-list-option-active");_&&setTimeout(()=>{_==null||_.scrollIntoView({behavior:"smooth",block:"center"})},50)},P=()=>{c.value=Math.min(c.value+1,S.value.length-1),j()},K=()=>{c.value=Math.max(c.value-1,0),j()},m=()=>{(S.value[c.value]||S.value[0])&&$(S.value[c.value].name)};return Ze(()=>{i.value="",c.value=t.value.findIndex(_=>_.name===p.SingleLineText)}),(_,D)=>{const F=Ie,z=tl,re=In;return l(),g("div",{class:"flex-1 border-1 border-gray-200 rounded-lg flex flex-col py-2","data-testid":"nc-column-uitypes-options-list-wrapper",onKeydown:[vt($e(P,["prevent"]),["arrow-down"]),vt($e(K,["prevent"]),["arrow-up"]),D[3]||(D[3]=vt($e(Q=>$(e(S)[e(c)].name),["prevent"]),["enter"]))]},[a("div",{class:"w-full pb-2 px-2",onClick:D[2]||(D[2]=$e(()=>{},["stop"]))},[o(z,{ref_key:"inputRef",ref:k,value:e(i),"onUpdate:value":D[0]||(D[0]=Q=>le(i)?i.value=Q:null),placeholder:"Search field type",class:"nc-column-type-search-input nc-toolbar-dropdown-search-field-input",onKeydown:vt($e(m,["stop"]),["enter"]),onChange:D[1]||(D[1]=Q=>c.value=0)},{prefix:n(()=>[o(F,{icon:"search",class:"nc-search-icon h-4 w-4 mr-1"})]),_:1},8,["value","onKeydown"])]),a("div",ao,[e(S).length?h("",!0):(l(),g("div",so,[D[4]||(D[4]=a("img",{src:Dn,class:"!w-[164px] flex-none",alt:"No search results found"},null,-1)),B(" "+x(e(t).length?_.$t("title.noResultsMatchedYourSearch"):"The list is empty"),1)])),(l(!0),g(ee,null,me(e(S),(Q,H)=>(l(),u(re,{key:H,message:_.$t("tooltip.typeNotAllowed"),enabled:O(Q.name)},{default:n(()=>[a("div",{class:ye(["flex w-full py-2 items-center justify-between px-2 rounded-md",[`nc-column-list-option-${H}`,{"hover:bg-gray-100 cursor-pointer":!O(Q.name),"bg-gray-100 nc-column-list-option-active":e(c)===H&&!O(Q.name),"!text-gray-400 cursor-not-allowed":O(Q.name)}]]),"data-testid":Q.name,onClick:E=>$(Q.name)},[a("div",uo,[(l(),u(te(Q.icon),{class:ye(["w-4 h-4",O(Q.name)?"!text-gray-400":"text-gray-700"])},null,8,["class"])),a("div",ro,x(e(at)[Q.name]),1),Q.deprecated?(l(),g("span",co,"("+x(_.$t("general.deprecated"))+")",1)):h("",!0)])],10,io)]),_:2},1032,["message","enabled"]))),128))])],40,oo)}}}),po=Object.keys(ft);function pl(y,M){let w=!1,V=!1,t=!1;for(let i=0;i<M;i++){const d=y[i];if(t){t=!1;continue}if(d==="\\"){t=!0;continue}d==="'"&&!V?w=!w:d==='"'&&!w&&(V=!V)}return V||w}class _o{constructor(){Ht(this,"trie");Ht(this,"suggestions");this.trie={},this.suggestions=[]}newNode(){return{value:[],isLeaf:!1,children:{}}}add(M){Object.keys(this.trie).length===0&&(this.trie=this.newNode());let w=this.trie;for(const V of M.text.toLowerCase())V in w.children||(w.children[V]=this.newNode()),w=w.children[V];w.value=w.value||[],w.value.push(M),w.isLeaf=!0}find(M){Object.keys(this.trie).length===0&&(this.trie=this.newNode());let w=this.trie;for(const V of M)if(V in w.children)w=w.children[V];else return null;return w}traverse(M){M.isLeaf&&this.suggestions.push(...M.value);for(const w in M.children)this.traverse(M.children[w])}complete(M,w=null){this.suggestions=[];const V=this.find(M.toLowerCase());if(!V||Object.keys(V).length===0)return this.suggestions;this.suggestions.push(...V.value);const t=V.children;let i=0;for(const d in t)if(this.traverse(t[d]),i++,w&&i===w)break;return this.suggestions}}const vo=Object.keys(ft),fo={base:"vs",inherit:!0,rules:[{token:"string",foreground:"#007b77",fontStyle:"bold"},{token:"keyword",foreground:"#00921d",fontStyle:"bold"},{token:"number",foreground:"#9c6200",fontStyle:"bold"},{token:"operator",foreground:"#000000"},{token:"identifier",foreground:"#8541f9",fontStyle:"bold"},{token:"delimiter.parenthesis",foreground:"#333333",fontStyle:"bold"},{token:"delimiter.brace",foreground:"#8541f9",fontStyle:"bold"},{token:"invalid",foreground:"#000000"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editorCursor.foreground":"#3366FF","editor.selectionBackground":"#3366FF50",focusBorder:"#ffffff"}},go=y=>(y=y.map(w=>`{${w}}`),{defaultToken:"invalid",keywords:vo,identifiers:y,brackets:[{open:"(",close:")",token:"delimiter.parenthesis"},{open:"{",close:"}",token:"delimiter.brace"}],tokenizer:{root:[[/"/,{token:"string.quote",bracket:"@open",next:"@dblString"}],[/'/,{token:"string.quote",bracket:"@open",next:"@sglString"}],[new RegExp(`\\{(${y.join("|").replace(/[{}]/g,"")})\\}`),{cases:{"@identifiers":"identifier","@default":"invalid"}}],[/[a-zA-Z_]\w*/,{cases:{"@keywords":"keyword","@default":"invalid"}}],[/\d+/,"number"],[/[-+/*=<>!]+/,"operator"],[/[{}()]/,"@brackets"],[/[ \t\r\n]+/,"white"]],dblString:[[/[^\\"]+/,"string"],[/\\./,"string.escape"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],sglString:[[/[^\\']+/,"string"],[/\\./,"string.escape"],[/'/,{token:"string.quote",bracket:"@close",next:"@pop"}]]}}),yo={brackets:[["{","}"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},ct={name:"formula",theme:fo,generateLanguageDefinition:go,languageConfiguration:yo},ho={class:"pr-3"},bo={class:"flex flex-row w-full justify-between pb-2 border-b-1"},wo={class:"flex items-center gap-x-1 font-semibold text-lg text-gray-600"},ko={class:"flex flex-col max-h-120 nc-scrollbar-thin pr-2"},xo={class:"flex mt-3 text-[13px] leading-6"},$o={class:"bg-white rounded-md py-1 text-[13px] mono-font leading-6 px-2 border-1"},Co={class:"flex flex-row mt-3 mb-3 justify-end pr-3"},To=["href"],Io={key:0,class:"border-b-1 bg-gray-50 px-3 py-1 uppercase text-gray-600 text-xs font-semibold sticky top-0 z-10"},Do={key:0,class:"ml-5 text-gray-400 text-xs"},Mo={key:0,class:"border-b-1 bg-gray-50 px-3 py-1 uppercase text-gray-600 text-xs font-semibold sticky top-0 z-10"},So={class:"flex items-center gap-x-1 justify-between"},Oo={class:"flex items-center gap-x-1 rounded-md px-1 h-5"},Lo={class:"text-small leading-[18px] text-gray-800 font-weight-500"},Uo=he({__name:"FormulaInputHelper",props:{error:{type:Boolean},value:{},label:{},editorHeight:{},suggestionHeight:{default:"large"},disableSuggestionHeaders:{type:Boolean,default:!1}},emits:["update:value"],setup(y,{emit:M}){const w=y,V=M,{error:t,suggestionHeight:i,editorHeight:d}=Bt(w),S=we(w,"value",V),k=[p.QrCode,p.Barcode,p.Button],{sqlUi:c,column:O,fromTableExplorer:$,validateInfos:j}=Ve(),P=Ye(nt,Y()),K=ue(()=>{var I,A;return((A=(I=P==null?void 0:P.value)==null?void 0:I.columns)==null?void 0:A.filter(J=>!(k.includes(J.uidt)||Qt(J,P.value))))||[]}),m=Y(),_=Y(0),D=Y(!0),F=po,z=["+","-","*","/",">","<","==","<=",">=","!=","&"],re=Y(!1),Q=Y([]),H=Y([]),E=Y(""),b=Y(0),ne={column:0,function:1,op:2},ce=ue(()=>{const I=c.value.getUnsupportedFnList();return[...F.map(A=>({text:`${A}()`,type:"function",description:ft[A].description,syntax:ft[A].syntax,examples:ft[A].examples,docsUrl:ft[A].docsUrl,unsupported:I.includes(A)})),...K.value.filter(A=>{var J;return A.uidt===p.LinkToAnotherRecord&&A.system?!1:O?((J=O.value)==null?void 0:J.id)!==A.id:!0}).map(A=>({text:A.title,type:"column",icon:ul(A.uidt)?Yl(ul(A.uidt)):void 0,uidt:A.uidt})),...z.map(A=>({text:A,type:"op"}))].sort((A,J)=>A.unsupported&&!J.unsupported?1:!A.unsupported&&J.unsupported?-1:0)}),de=Y(ce.value),L=ue(()=>{const I=new _o;for(const A of ce.value)I.add(A);return I}),v=ue(()=>de.value.filter(I=>I&&I.type!=="column")),C=ue(()=>de.value.filter(I=>I&&I.type==="column")),U=Y();let N;function De(){const I=N.getModel(),A=N.getPosition();if(!I||!A)return null;const J=I.getWordAtPosition(A);return J==null?void 0:J.word}const xe=_l(function(){Qe()},250);Ze(async()=>{if(U.value){const I=Nt.createModel(S.value,"formula");Wt.register({id:ct.name}),Nt.defineTheme(ct.name,ct.theme),Wt.setMonarchTokensProvider(ct.name,ct.generateLanguageDefinition(K.value.map(A=>A.title.replace(/@/g,"")))),Wt.setLanguageConfiguration(ct.name,ct.languageConfiguration),Nt.addKeybindingRules([{keybinding:cl.DownArrow,when:"editorTextFocus"},{keybinding:cl.UpArrow,when:"editorTextFocus"}]),N=Nt.create(U.value,{model:I,contextmenu:!1,theme:"formula",selectOnLineNumbers:!1,language:"formula",roundedSelection:!1,scrollBeyondLastLine:!1,lineNumbers:"off",glyphMargin:!1,folding:!1,wordWrap:"on",wrappingStrategy:"advanced","bracketPairColorization.enabled":!1,padding:{top:8,bottom:8},lineDecorationsWidth:8,lineNumbersMinChars:0,renderLineHighlight:"none",renderIndentGuides:!1,scrollbar:{horizontal:"hidden"},tabSize:2,automaticLayout:!1,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,matchBrackets:"never",minimap:{enabled:!1}}),N.layout({width:339,height:120}),N.onDidChangeModelContent(async()=>{S.value=N.getValue(),await xe()}),N.onDidChangeCursorPosition(()=>{const A=N.getPosition(),J=N.getModel();if(!A||!J)return;const oe=J.getValue(),T=J.getOffsetAt(A);pl(oe,T)?(re.value=!1,de.value=[]):Qe();const q=(G,ie)=>{const pe=new RegExp(`\\b(?<!['"])(\\w+)\\s*\\(`,"g"),Te=/"/g,je=[];let Xe=!1,Me;for(;(Me=pe.exec(G))!==null&&!(Me.index>ie);){if(!Xe){const Oe={name:Me[1],start:Me.index,end:pe.lastIndex};let f=1,s=-1,r=-1;for(let Z=pe.lastIndex;Z<G.length;Z++){if(G[Z]==="(")f++;else if(G[Z]===")"&&(f--,f===0)){Oe.end=Z+1;break}if(s===-1&&["(",",","{"].includes(G[Z])||s!==-1&&["(",",","{"].includes(G[Z])?s=Z:s!==-1&&["}",",",")"].includes(G[Z])&&(r=Z,s=-1),Z>=ie){if(f>0){Oe.end=Z+1;break}const _e=q(G.substring(Oe.start+Me[1].length+1,Z),ie-Oe.start-Me[1].length-1);if(_e)return _e;je.push(Oe);break}}r!==-1&&r<ie&&(Oe.end=r+1),je.push(Oe)}let Ke;for(;(Ke=Te.exec(G))!==null&&Ke.index<Me.index;)Xe=!Xe}const Re=je.filter(Ke=>Ke.start<=ie&&Ke.end>=ie);return Re.length>0?Re[Re.length-1].name:null},se=q(oe,T);m.value=ce.value.find(G=>G.text===`${se}()`)||void 0}),N.focus()}}),Ql(U,I=>{const A=I[0],{height:J}=A.contentRect;N.layout({width:339,height:J})});function ge(I,A,J=!1){const oe=I.getPosition();if(!oe)return;const T=new dl(oe.lineNumber,oe.column,oe.lineNumber,oe.column);if(I.executeEdits("",[{range:T,text:A,forceMoveMarkers:!0}]),!J){const q=new En(oe.lineNumber,oe.column+A.length-1);I.setPosition(q)}I.focus()}function ae(I){var se;const A=((se=E.value)==null?void 0:se.length)||0;if(!(I!=null&&I.text))return;const J=I.text,oe=N.getPosition();if(!oe)return;const T=Math.max(1,oe.column-A),q=new dl(oe.lineNumber,T,oe.lineNumber,oe.column);N.executeEdits("",[{range:q,text:"",forceMoveMarkers:!0}]),I.type==="function"?ge(N,J):I.type==="column"?ge(N,`{${J}}`,!0):ge(N,J,!0),re.value=!1,E.value="",I.type==="function"||I.type==="op"?de.value=ce.value.filter(G=>G.type==="column"):de.value=ce.value}function Ce(){var q;const I=N==null?void 0:N.getPosition();if(!I||!N)return!1;const A=(q=N.getModel())==null?void 0:q.getLineContent(I.lineNumber);if(!A)return!1;const J=A.substring(0,I.column-1),oe=(J.match(/\(/g)||[]).length,T=(J.match(/\)/g)||[]).length;return oe>T}function Qe(){var se;if(!N)return;const I=N.getModel(),A=N.getPosition();if(!I||!A)return;const J=I.getValue(),oe=I.getOffsetAt(A);if(pl(J,oe)){re.value=!1,de.value=[];return}Ce()||(_.value=1),b.value=0,de.value=[];const q=(De()??"").split(/\W+/);E.value=q.pop()||"",de.value=(se=L.value.complete(E.value))==null?void 0:se.sort((G,ie)=>ne[G.type]-ne[ie.type]),Ce()?(de.value=de.value.sort((G,ie)=>G.type==="column"?-1:ie.type==="column"?1:0),b.value=0,_.value=-1):D.value||(D.value=!0),re.value=!!de.value.length}function He(){if(de.value&&b.value>-1&&b.value<ce.value.length)if(b.value<v.value.length){if(v.value[b.value].unsupported)return;ae(v.value[b.value])}else ae(C.value[b.value+v.value.length]);b.value=0}function tt(){de.value&&(b.value=--b.value>-1?b.value:de.value.length-1,m.value=v.value[b.value],Pe())}function We(){de.value&&(b.value=++b.value%de.value.length,m.value=v.value[b.value],Pe())}function Pe(){Zt(()=>{if(H.value[b.value])try{H.value[b.value].$el.scrollIntoView({block:"nearest",inline:"start"})}catch{}})}const Se=Y({top:"0px",left:"344px"});Ze(()=>{Zl.plugins.register(Jl),en(()=>U.value).toBeTruthy().then(()=>{setTimeout(()=>{var A;const I=(A=U.value)==null?void 0:A.getBoundingClientRect();I&&(Se.value.top=`${I.top-75}px`,$!=null&&$.value||I.left>352?Se.value.left=`${I.left-344}px`:Se.value.left=`${I.right+8}px`)},250)})});const qe=I=>{switch(I.stopPropagation(),I.key){case"ArrowUp":{I.preventDefault(),tt();break}case"ArrowDown":{I.preventDefault(),We();break}case"Enter":{I.preventDefault(),He();break}}};return(I,A)=>{const J=Ie,oe=Ct,T=ke,q=Nn,se=Rn,G=Bn;return l(),g(ee,null,[e(m)&&!e(m).unsupported&&e(m).type==="function"?(l(),g("div",{key:0,class:"w-84 fixed bg-white z-10 pl-3 pt-3 border-1 shadow-md rounded-xl",style:st({left:e(Se).left,top:e(Se).top})},[a("div",ho,[a("div",bo,[a("div",wo,[(l(),u(te(("iconMap"in I?I.iconMap:e(ve)).function),{class:"text-lg"})),B(" "+x(e(m).text),1)]),o(oe,{type:"text",size:"small",class:"!h-7 !w-7 !min-w-0",onClick:A[0]||(A[0]=ie=>m.value=void 0)},{default:n(()=>[o(J,{icon:"close"})]),_:1})])]),a("div",ko,[a("div",xo,x(e(m).description),1),A[1]||(A[1]=a("div",{class:"text-gray-500 uppercase text-[11px] mt-3 mb-2"},"Syntax",-1)),a("div",$o,x(e(m).syntax),1),A[2]||(A[2]=a("div",{class:"text-gray-500 uppercase text-[11px] mt-3 mb-2"},"Examples",-1)),(l(!0),g(ee,null,me(e(m).examples,(ie,pe)=>(l(),g("div",{key:ie,class:ye(["bg-gray-100 mono-font text-[13px] leading-6 py-1 px-2",{"border-t-1  border-gray-200":pe!==0,"rounded-b-md":pe===e(m).examples.length-1&&e(m).examples.length!==1,"rounded-t-md":pe===0&&e(m).examples.length!==1,"rounded-md":e(m).examples.length===1}])},x(ie),3))),128))]),a("div",Co,[e(m).docsUrl?(l(),g("a",{key:0,target:"_blank",rel:"noopener noreferrer",href:e(m).docsUrl},[o(oe,{type:"text",size:"small",class:"!text-gray-400 !hover:text-gray-700 !text-xs"},{default:n(()=>[A[3]||(A[3]=B("View in Docs ")),o(J,{icon:"openInNew",class:"ml-1"})]),_:1})],8,To)):h("",!0)])],4)):h("",!0),o(T,be({label:I.label,required:""},e(j).formula_raw),{default:n(()=>[a("div",{ref_key:"monacoRoot",ref:U,style:st({height:e(d)??"100px"}),class:ye([{"!border-red-500 formula-error":e(t),"!focus-within:border-brand-500 formula-success":!e(t)},"formula-monaco"]),onKeydown:$e(qe,["stop"])},null,38)]),_:1},16,["label"]),a("div",{class:ye([{"h-[250px]":e(i)==="large","h-[150px]":e(i)==="medium","h-[125px]":e(i)==="small"},"overflow-auto flex flex-col nc-suggestion-list nc-scrollbar-thin border-1 border-gray-200 rounded-lg mt-4"])},[e(v)&&e(D)?(l(),g("div",{key:0,style:st({order:e(_)===-1?2:1})},[I.disableSuggestionHeaders?h("",!0):(l(),g("div",Io," Formulas ")),o(G,{"data-source":e(v),locale:{emptyText:I.$t("msg.formula.noSuggestedFormulaFound")}},{renderItem:n(({item:ie,index:pe})=>[o(se,{ref:Te=>{e(H)[pe]=Te},class:ye(["cursor-pointer !overflow-hidden hover:bg-gray-50",{"!bg-gray-100":e(b)===pe,"cursor-not-allowed":ie.unsupported}]),onClick:$e(Te=>!ie.unsupported&&ae(ie),["prevent","stop"]),onMouseenter:Te=>m.value=ie},{default:n(()=>[o(q,null,{title:n(()=>[a("div",{class:ye(["flex items-center gap-x-1",{"text-gray-400":ie.unsupported}])},[ie.type==="function"?(l(),u(te(("iconMap"in I?I.iconMap:e(ve)).function),{key:0,class:"w-4 h-4 !text-gray-600"})):h("",!0),ie.type==="op"?(l(),u(te(("iconMap"in I?I.iconMap:e(ve)).calculator),{key:1,class:"w-4 h-4 !text-gray-600"})):h("",!0),ie.type==="column"?(l(),u(te(ie.icon),{key:2,class:"w-4 h-4 !text-gray-600"})):h("",!0),a("span",{class:ye(["text-small leading-[18px]",{"text-gray-800":!ie.unsupported}])},x(ie.text),3)],2),ie.unsupported?(l(),g("div",Do,x(I.$t("msg.formulaNotSupported")),1)):h("",!0)]),_:2},1024)]),_:2},1032,["class","onClick","onMouseenter"])]),_:1},8,["data-source","locale"])],4)):h("",!0),e(C)?(l(),g("div",{key:1,style:st({order:e(_)===1?2:1})},[I.disableSuggestionHeaders?h("",!0):(l(),g("div",Mo," Fields ")),o(G,{ref_key:"variableListRef",ref:Q,"data-source":e(C),locale:{emptyText:I.$t("msg.formula.noSuggestedFieldFound")},class:"!overflow-hidden"},{renderItem:n(({item:ie,index:pe})=>[o(se,{ref:Te=>{e(H)[pe+e(v).length]=Te},class:ye([{"!bg-gray-100":e(b)===pe+e(v).length},"cursor-pointer hover:bg-gray-50"]),onClick:$e(Te=>ae(ie),["prevent","stop"])},{default:n(()=>[o(q,{class:"nc-variable-list-item"},{title:n(()=>[a("div",So,[a("div",Oo,[(l(),u(te(ie.icon),{class:"w-4 h-4 !text-gray-600"})),a("span",Lo,x(ie.text),1)]),o(oe,{size:"small",type:"text",class:"nc-variable-list-item-use-field-btn !h-7 px-3 !text-small invisible"},{default:n(()=>[B(x(I.$t("general.use"))+" "+x(I.$t("objects.field").toLowerCase()),1)]),_:1})])]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:1},8,["data-source","locale"])],4)):h("",!0)],2)],64)}}}),kl=ze(Uo,[["__scopeId","data-v-412451d9"]]),xl=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYR","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUP","CVE","CYP","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHC","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","ROL","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDD","SEK","SGD","SHP","SIT","SKK","SLL","SOS","SRD","STD","SYP","SZL","THB","TJS","TMM","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","USS","UYU","UZS","VEB","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XFO","XFU","XOF","XPD","XPF","XPT","XTS","XXX","YER","ZAR","ZMK","ZWD"];function Ao(y){return xl.includes(y)}async function Eo(){const{all:y}=await Je(()=>import("./CSMLYy8G.js"),[],import.meta.url);return y.filter(M=>$l(M.tag)).map(M=>({text:`${M.name} (${M.tag})`,value:M.tag}))}function $l(y){try{return Intl.NumberFormat.supportedLocalesOf(y).length>0}catch{return!1}}const No=[1,2,3,4,5,6,7,8],Cl=[{value:"CODE128",label:"CODE128"},{value:"upc",label:"UPC"},{value:"EAN13",label:"EAN-13"},{value:"EAN8",label:"EAN-8"},{value:"EAN5",label:"EAN-5"},{value:"EAN2",label:"EAN-2"},{value:"CODE39",label:"CODE39"},{value:"ITF14",label:"ITF-14"},{value:"MSI",label:"MSI"},{value:"PHARMACODE",label:"PHARMACODE"},{value:"CODABAR",label:"CODABAR"}],Ro={barcodeFormat:Cl[0].value},Bo={iconIdx:0,icon:{checked:"mdi-check-bold",unchecked:"mdi-crop-square"},color:"#777"},Fo={currency_locale:"en-US",currency_code:"USD"},Vo={date_format:Vt[0]},Po={date_format:Vt[0],time_format:vl[0],is12hrFormat:!1},qo={precision:No[0],isLocaleString:!1},jo={duration:0},Ko={isLocaleString:!1},zo={is_progress:!1},Go={iconIdx:0,icon:{full:"mdi-star",empty:"mdi-star-outline"},color:"#fcb401",max:5},Ho={is12hrFormat:!1},Wo={is_multi:!1,notify:!1},Ge={[p.Checkbox]:Bo,[p.Currency]:Fo,[p.Date]:Vo,[p.DateTime]:Po,[p.Decimal]:qo,[p.Duration]:jo,[p.Number]:Ko,[p.Percent]:zo,[p.Rating]:Go,[p.Time]:Ho,[p.User]:Wo,[p.Barcode]:Ro},Xo={class:"flex gap-2 w-full truncate items-center"},Yo={class:"flex gap-2 w-full justify-between items-center"},Qo={class:"text-[#FB8C00]"},Tl=he({__name:"CurrencyOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const w=y,V=M,{t}=et(),i=we(w,"value",V),d={"meta.currency_locale":[{validator:(m,_)=>new Promise((D,F)=>{if(!$l(_))return F(new Error(t("msg.invalidLocale")));D()})}],"meta.currency_code":[{validator:(m,_)=>new Promise((D,F)=>{if(!Ao(_))return F(new Error(t("msg.invalidCurrencyCode")));D()})}]},{setAdditionalValidations:S,validateInfos:k,isPg:c}=Ve();S({...d});const O=xl||[],$=Y([]),j=ue(()=>i.value.dt==="money"),P=ue(()=>j.value&&c.value?t("msg.postgresHasItsOwnCurrencySettings"):"");function K(m,_){return _.value.toUpperCase().includes(m.toUpperCase())}return i.value.meta={...Ge[p.Currency],...i.value.meta||{}},Eo().then(m=>{$.value.push(...m)}),(m,_)=>{const D=Ie,F=mt,z=Ue,re=Ae,Q=ke,H=Tt,E=It;return l(),u(E,{gutter:8},{default:n(()=>[o(H,{span:12},{default:n(()=>[o(Q,be(e(k)["meta.currency_locale"],{label:m.$t("title.currencyLocale")}),{default:n(()=>[o(re,{value:e(i).meta.currency_locale,"onUpdate:value":_[0]||(_[0]=b=>e(i).meta.currency_locale=b),class:"w-52","show-search":"","filter-option":K,disabled:e(j)&&e(c),"dropdown-class-name":"nc-dropdown-currency-cell-locale"},{suffixIcon:n(()=>[o(D,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e($),(b,ne)=>(l(),u(z,{key:ne,value:b.value},{default:n(()=>[a("div",Xo,[o(F,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[B(x(b.text),1)]),default:n(()=>[B(" "+x(b.text),1)]),_:2},1024),e(i).meta.currency_locale===b.value?(l(),u(te(("iconMap"in m?m.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])]),_:1}),o(H,{span:12},{default:n(()=>[o(Q,be(e(k)["meta.currency_code"],{label:m.$t("title.currencyCode")}),{default:n(()=>[o(re,{value:e(i).meta.currency_code,"onUpdate:value":_[1]||(_[1]=b=>e(i).meta.currency_code=b),class:"w-52","show-search":"","filter-option":K,disabled:e(j)&&e(c),"dropdown-class-name":"nc-dropdown-currency-cell-code"},{suffixIcon:n(()=>[o(D,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(O),(b,ne)=>(l(),u(z,{key:ne,value:b},{default:n(()=>[a("div",Yo,[B(x(b)+" ",1),e(i).meta.currency_code===b?(l(),u(te(("iconMap"in m?m.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])]),_:1}),e(j)&&e(c)?(l(),u(H,{key:0},{default:n(()=>[a("span",Qo,x(e(P)),1)]),_:1})):h("",!0)]),_:1})}}}),Zo={class:"flex gap-2 w-full justify-between items-center"},Jo={class:"flex items-center gap-1"},ea={class:"text-sm text-gray-800 select-none"},Il=he({__name:"DecimalOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const w=y,V=M,t=[1,2,3,4,5,6,7,8],{t:i}=et(),d={1:i("placeholder.decimal1"),2:i("placeholder.decimal2"),3:i("placeholder.decimal3"),4:i("placeholder.decimal4"),5:i("placeholder.decimal5"),6:i("placeholder.decimal6"),7:i("placeholder.decimal7"),8:i("placeholder.decimal8")},S=we(w,"value",V);S.value.meta={...Ge[p.Decimal],...S.value.meta||{}};const k=O=>{S.value.dtxs=Math.max(O,S.value.dtxs)},{isMetaReadOnly:c}=Ft();return(O,$)=>{const j=Ie,P=Ue,K=Ae,m=ke,_=pt;return l(),g(ee,null,[o(m,{label:O.$t("placeholder.precision")},{default:n(()=>{var D;return[(D=e(S).meta)!=null&&D.precision?(l(),u(K,{key:0,value:e(S).meta.precision,"onUpdate:value":$[0]||($[0]=F=>e(S).meta.precision=F),disabled:e(c),"dropdown-class-name":"nc-dropdown-decimal-format",onChange:k},{suffixIcon:n(()=>[o(j,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),g(ee,null,me(t,(F,z)=>o(P,{key:z,value:F},{default:n(()=>[a("div",Zo,[B(x(d[F])+" ",1),e(S).meta.precision===F?(l(),u(te(("iconMap"in O?O.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value","disabled"])):h("",!0)]}),_:1},8,["label"]),o(m,null,{default:n(()=>[a("div",Jo,[e(S).meta?(l(),u(_,{key:0,checked:e(S).meta.isLocaleString,"onUpdate:checked":$[1]||($[1]=D=>e(S).meta.isLocaleString=D)},{default:n(()=>[a("div",ea,x(O.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked"])):h("",!0)])]),_:1})],64)}}}),ta={class:"flex flex-col"},la={class:"flex items-center gap-1"},na={class:"text-sm text-gray-800 select-none"},Dl=he({__name:"PercentOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M),i={},{setAdditionalValidations:d}=Ve();return d({...i}),t.value.meta={...Ge[p.Percent],...t.value.meta||{}},(S,k)=>{const c=pt,O=ke;return l(),g("div",ta,[o(O,null,{default:n(()=>[a("div",la,[e(t).meta?(l(),u(c,{key:0,checked:e(t).meta.is_progress,"onUpdate:checked":k[0]||(k[0]=$=>e(t).meta.is_progress=$)},{default:n(()=>[a("div",na,x(S.$t("labels.displayAsProgress")),1)]),_:1},8,["checked"])):h("",!0)])]),_:1})])}}}),oa=ot(()=>Je(()=>import("./BMEdhAIT.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(y=>y.default||y)),aa={class:"flex gap-2 w-full truncate items-center"},sa={class:"flex-1 flex items-center text-gray-700 gap-2 children:h-4 children:w-4"},ia={class:"flex-1 flex items-center gap-2 children:h-4 children:w-4"},ua={class:"flex gap-2 w-full justify-between items-center nc-dropdown-rating-max-option"},ra=he({__name:"RatingOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M),i=ue({get:()=>t.value.meta.color,set:k=>{t.value.meta.color=k}}),d=Y(!1);t.value.meta={...Ge[p.Rating],...t.value.meta||{},icon:On(t.value.meta||{})};const S=xt.findIndex(k=>k.full===t.value.meta.icon.full&&k.empty===t.value.meta.icon.empty);return t.value.meta.iconIdx=S===-1?0:S,Ne(()=>t.value.meta.iconIdx,k=>{t.value.meta.icon=xt[k]}),(k,c)=>{const O=Ie,$=Ue,j=Ae,P=ke,K=Tt,m=oa,_=ll,D=It;return l(),u(D,{gutter:8},{default:n(()=>[o(K,{span:8},{default:n(()=>[o(P,{label:k.$t("labels.icon")},{default:n(()=>[o(j,{value:e(t).meta.iconIdx,"onUpdate:value":c[0]||(c[0]=F=>e(t).meta.iconIdx=F),class:"w-52","dropdown-class-name":"nc-dropdown-rating-icon"},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me("ratingIconList"in k?k.ratingIconList:e(xt),(F,z)=>(l(),u($,{key:z,value:z},{default:n(()=>[a("div",aa,[a("div",sa,[(l(),u(te(("getMdiIcon"in k?k.getMdiIcon:e(it))(F.full)))),(l(),u(te(("getMdiIcon"in k?k.getMdiIcon:e(it))(F.empty))))]),e(t).meta.iconIdx===z?(l(),u(te(("iconMap"in k?k.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(K,{span:8},{default:n(()=>[o(P,{label:k.$t("general.colour")},{default:n(()=>[o(_,{visible:e(d),"onUpdate:visible":c[3]||(c[3]=F=>le(d)?d.value=F:null),placement:"bottom","auto-close":!1,class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",null,[o(m,{modelValue:e(i),"onUpdate:modelValue":c[1]||(c[1]=F=>le(i)?i.value=F:null),"is-open":e(d),onInput:c[2]||(c[2]=F=>e(t).meta.color=F)},null,8,["modelValue","is-open"])])]),default:n(()=>[a("div",{class:ye(["flex-1 border-1 border-gray-300 rounded-lg h-8 px-[11px] flex items-center justify-between transition-all cursor-pointer",{"border-brand-500 shadow-selected":e(d)}])},[a("div",ia,[(l(),u(te(("getMdiIcon"in k?k.getMdiIcon:e(it))(("ratingIconList"in k?k.ratingIconList:e(xt))[e(t).meta.iconIdx].full)),{style:st({color:e(t).meta.color})},null,8,["style"])),(l(),u(te(("getMdiIcon"in k?k.getMdiIcon:e(it))(("ratingIconList"in k?k.ratingIconList:e(xt))[e(t).meta.iconIdx].empty)),{style:st({color:e(t).meta.color})},null,8,["style"]))]),o(O,{icon:"arrowDown",class:"text-gray-700 h-4 w-4"})],2)]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1}),o(K,{span:8},{default:n(()=>[o(P,{label:k.$t("labels.max")},{default:n(()=>[o(j,{value:e(t).meta.max,"onUpdate:value":c[4]||(c[4]=F=>e(t).meta.max=F),"data-testid":"nc-dropdown-rating-max",class:"w-52","dropdown-class-name":"nc-dropdown-rating-color"},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),g(ee,null,me([1,2,3,4,5,6,7,8,9,10],(F,z)=>o($,{key:z,value:F},{default:n(()=>[a("div",ua,[B(x(F)+" ",1),e(t).meta.max===F?(l(),u(te(("iconMap"in k?k.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),Ml=ze(ra,[["__scopeId","data-v-b39242e6"]]),ca={class:"flex flex-col gap-2"},da={class:"flex items-center gap-2 children:flex-1"},ma=he({__name:"TimeOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M);return t.value.meta={...Ge[p.Time],...t.value.meta??{}},(i,d)=>{const S=nl,k=ol,c=ke;return l(),g("div",ca,[a("div",da,[o(c,null,{default:n(()=>[e(t).meta?(l(),u(k,{key:0,value:e(t).meta.is12hrFormat,"onUpdate:value":d[0]||(d[0]=O=>e(t).meta.is12hrFormat=O),class:"nc-time-form-layout"},{default:n(()=>[o(S,{value:!0},{default:n(()=>d[1]||(d[1]=[B("12 Hrs")])),_:1}),o(S,{value:!1},{default:n(()=>d[2]||(d[2]=[B("24 Hrs")])),_:1})]),_:1},8,["value"])):h("",!0)]),_:1})])])}}}),Sl=ze(ma,[["__scopeId","data-v-cd390529"]]),pa={class:"flex flex-col gap-4"},_a={class:"flex items-center gap-2 children:flex-1"},va={class:"flex gap-2 w-full justify-between items-center"},fa=["data-testid"],ga=he({__name:"DateTimeOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M);return t.value.meta={...Ge[p.DateTime],...t.value.meta||{}},(i,d)=>{const S=Ie,k=Ue,c=Ae,O=ke,$=nl,j=ol;return l(),g("div",pa,[a("div",_a,[o(O,null,{default:n(()=>[o(c,{value:e(t).meta.date_format,"onUpdate:value":d[0]||(d[0]=P=>e(t).meta.date_format=P),class:"nc-date-select","dropdown-class-name":"nc-dropdown-date-format"},{suffixIcon:n(()=>[o(S,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(Vt),(P,K)=>(l(),u(k,{key:K,value:P},{default:n(()=>[a("div",va,[B(x(P)+" ",1),e(t).meta.date_format===P?(l(),u(te(("iconMap"in i?i.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(O,null,{default:n(()=>[o(c,{value:e(t).meta.time_format,"onUpdate:value":d[1]||(d[1]=P=>e(t).meta.time_format=P),class:"nc-time-select","dropdown-class-name":"nc-dropdown-time-format"},{suffixIcon:n(()=>[o(S,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(vl),(P,K)=>(l(),u(k,{key:K,value:P},{default:n(()=>[a("div",{class:"flex gap-2 w-full justify-between items-center","data-testid":`nc-time-${P}`},[B(x(P)+" ",1),e(t).meta.time_format===P?(l(),u(te(("iconMap"in i?i.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)],8,fa)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),o(O,null,{default:n(()=>[e(t).meta?(l(),u(j,{key:0,value:e(t).meta.is12hrFormat,"onUpdate:value":d[2]||(d[2]=P=>e(t).meta.is12hrFormat=P),class:"nc-time-form-layout"},{default:n(()=>[o($,{value:!0},{default:n(()=>d[3]||(d[3]=[B("12 Hrs")])),_:1}),o($,{value:!1},{default:n(()=>d[4]||(d[4]=[B("24 Hrs")])),_:1})]),_:1},8,["value"])):h("",!0)]),_:1})])}}}),Ol=ze(ga,[["__scopeId","data-v-89ae0e65"]]),ya={class:"w-full flex gap-2 justify-between items-center"},Ll=he({__name:"DateOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M);return t.value.meta={...Ge[p.Date],...t.value.meta||{}},(i,d)=>{const S=Ie,k=Ue,c=Ae,O=ke;return l(),u(O,null,{default:n(()=>[o(c,{value:e(t).meta.date_format,"onUpdate:value":d[0]||(d[0]=$=>e(t).meta.date_format=$),"show-search":"",class:"nc-date-select","dropdown-class-name":"nc-dropdown-date-format"},{suffixIcon:n(()=>[o(S,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me([...e(Vt),...e(tn)],($,j)=>(l(),u(k,{key:j,value:$},{default:n(()=>[a("div",ya,[B(x($)+" ",1),e(t).meta.date_format===$?(l(),u(te(("iconMap"in i?i.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})}}}),ha=ot(()=>Je(()=>import("./BMEdhAIT.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(y=>y.default||y)),ba={class:"flex gap-2 w-full truncate items-center"},wa={class:"flex-1 flex items-center text-gray-700 gap-2 children:h-4 children:w-4"},ka={class:"flex-1 flex items-center gap-2 children:h-4 children:w-4"},xa=he({__name:"CheckboxOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M),i=Un,d=ue({get:()=>t.value.meta.color,set:c=>{t.value.meta.color=c}}),S=Y(!1);t.value.meta={...Ge[p.Checkbox],...t.value.meta||{},icon:Ln(t.value.meta||{})};const k=i.findIndex(c=>c.checked===t.value.meta.icon.checked&&c.unchecked===t.value.meta.icon.unchecked);return t.value.meta.iconIdx=k===-1?0:k,Ne(()=>t.value.meta.iconIdx,c=>{t.value.meta.icon=i[c]}),(c,O)=>{const $=Ie,j=Ue,P=Ae,K=ke,m=Tt,_=ha,D=ll,F=It;return l(),u(F,{gutter:8},{default:n(()=>[o(m,{span:12},{default:n(()=>[o(K,{label:c.$t("labels.icon")},{default:n(()=>[o(P,{value:e(t).meta.iconIdx,"onUpdate:value":O[0]||(O[0]=z=>e(t).meta.iconIdx=z),class:"w-52","dropdown-class-name":"nc-dropdown-checkbox-icon"},{suffixIcon:n(()=>[o($,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(i),(z,re)=>(l(),u(j,{key:re,value:re},{default:n(()=>[a("div",ba,[a("div",wa,[(l(),u(te(("getMdiIcon"in c?c.getMdiIcon:e(it))(z.checked)))),(l(),u(te(("getMdiIcon"in c?c.getMdiIcon:e(it))(z.unchecked))))]),e(t).meta.iconIdx===re?(l(),u(te(("iconMap"in c?c.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(m,{span:12},{default:n(()=>[o(K,{label:c.$t("general.colour")},{default:n(()=>[o(D,{visible:e(S),"onUpdate:visible":O[3]||(O[3]=z=>le(S)?S.value=z:null),placement:"bottomRight","auto-close":!1,class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",null,[o(_,{modelValue:e(d),"onUpdate:modelValue":O[1]||(O[1]=z=>le(d)?d.value=z:null),"is-open":e(S),onInput:O[2]||(O[2]=z=>e(t).meta.color=z)},null,8,["modelValue","is-open"])])]),default:n(()=>[a("div",{class:ye(["flex-1 border-1 border-gray-300 rounded-lg h-8 px-[11px] flex items-center justify-between transition-all cursor-pointer",{"border-brand-500 shadow-selected":e(S)}])},[a("div",ka,[(l(),u(te(("getMdiIcon"in c?c.getMdiIcon:e(it))(e(i)[e(t).meta.iconIdx].checked)),{style:st({color:e(t).meta.color})},null,8,["style"])),(l(),u(te(("getMdiIcon"in c?c.getMdiIcon:e(it))(e(i)[e(t).meta.iconIdx].unchecked)),{style:st({color:e(t).meta.color})},null,8,["style"]))]),o($,{icon:"arrowDown",class:"text-gray-700 h-4 w-4"})],2)]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),Ul=ze(xa,[["__scopeId","data-v-5289f9a8"]]),$a={class:"formula-wrapper relative"},Ca={class:"tab"},Ta={class:"px-0.5"},Ia={class:"tab"},Da={class:"flex flex-col px-0.5 gap-4"},Ma={class:"flex w-full items-center gap-2 justify-between"},Sa={class:"w-full"},Oa=he({__name:"FormulaOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){var H,E,b,ne,ce,de,L;const w=y,V=M,t=[p.QrCode,p.Barcode,p.Button],i=we(w,"value",V),{setAdditionalValidations:d,sqlUi:S,column:k,validateInfos:c}=Ve(),{t:O}=et(),$=Ye(nt,Y()),{base:j}=yt(Dt()),P=ue(()=>{var v,C;return((C=(v=$==null?void 0:$.value)==null?void 0:v.columns)==null?void 0:C.filter(U=>!(t.includes(U.uidt)||Qt(U,$.value))))||[]}),{getMeta:K}=ht(),m={formula_raw:[{required:!0,validator:(v,C)=>(async()=>{var U;if(!(C!=null&&C.trim()))throw new Error("Required");try{await Yt({column:k.value,formula:C,columns:P.value,clientOrSqlUi:S.value,getMeta:K})}catch(N){throw N instanceof gl&&((U=N.extra)!=null&&U.key)?new Error(O(N.extra.key,N.extra)):new Error(N.message)}})()}]};(E=(H=k.value)==null?void 0:H.colOptions)!=null&&E.formula_raw&&(i.value.formula_raw=fl((ne=(b=k.value)==null?void 0:b.colOptions)==null?void 0:ne.formula,(ce=$==null?void 0:$.value)==null?void 0:ce.columns,(L=(de=k.value)==null?void 0:de.colOptions)==null?void 0:L.formula_raw)||"");const _=ue(()=>{var v,C;return(C=(v=j.value)==null?void 0:v.sources)==null?void 0:C.find(U=>{var N;return U.id===((N=$.value)==null?void 0:N.source_id)})}),D=Y({dataType:rt.UNKNOWN});let F=0;const z=_l(async()=>{var C,U;F+=1;const v=F;try{const N=await Yt({formula:i.value.formula||i.value.formula_raw,columns:((C=$.value)==null?void 0:C.columns)||[],column:k.value??void 0,clientOrSqlUi:(U=_.value)==null?void 0:U.type,getMeta:async De=>await K(De)});v===F&&(D.value=N)}catch{v===F&&(D.value={dataType:rt.UNKNOWN})}},300);Ne(()=>i.value.formula||i.value.formula_raw,()=>{z()}),d({...m});const re=Y("formula"),Q=ue(()=>{var v,C;if(!((v=D.value)!=null&&v.dataType))return[];try{return ln((C=D.value)==null?void 0:C.dataType).map(U=>({value:U,label:O(`datatype.${U}`),icon:Mt(lt(U)?St:Ot,{columnMeta:{uidt:U}})}))}catch{return[]}});return Ne(()=>{var v;return(v=i.value.meta)==null?void 0:v.display_type},(v,C)=>{C===void 0&&!v&&(i.value.meta.display_column_meta={meta:{},custom:{}})},{immediate:!0}),Ne(D,(v,C)=>{C===void 0&&v||(v==null?void 0:v.dataType)!==(C==null?void 0:C.dataType)&&(i.value.meta.display_type=null)}),(v,C)=>{const U=kl,N=nn,De=Ue,xe=Ae,ge=ke,ae=Tl,Ce=Il,Qe=Dl,He=Ml,tt=Sl,We=Ol,Pe=Ll,Se=Ul,qe=Fn;return l(),g("div",$a,[o(qe,{activeKey:e(re),"onUpdate:activeKey":C[2]||(C[2]=I=>le(re)?re.value=I:null)},{default:n(()=>{var I,A;return[o(N,{key:"formula"},{tab:n(()=>[a("div",Ca,[a("div",null,x(v.$t("datatype.Formula")),1)])]),default:n(()=>{var J;return[a("div",Ta,[o(U,{value:e(i).formula_raw,"onUpdate:value":C[0]||(C[0]=oe=>e(i).formula_raw=oe),error:((J=e(c).formula_raw)==null?void 0:J.validateStatus)==="error"},null,8,["value","error"])])]}),_:1}),o(N,{key:"format",disabled:!((I=e(Q))!=null&&I.length)||!((A=e(D))!=null&&A.dataType)},{tab:n(()=>[a("div",Ia,[a("div",null,x(v.$t("labels.formatting")),1)])]),default:n(()=>{var J;return[a("div",Da,[o(ge,{class:"mt-4",label:v.$t("general.format")},{default:n(()=>[o(xe,{value:e(i).meta.display_type,"onUpdate:value":C[1]||(C[1]=oe=>e(i).meta.display_type=oe),class:"w-full",placeholder:v.$t("labels.selectAFormatType")},{default:n(()=>[(l(!0),g(ee,null,me(e(Q),oe=>(l(),u(De,{key:oe.value,value:oe.value},{default:n(()=>{var T;return[a("div",Ma,[a("div",Sa,[(l(),u(te(oe.icon),{class:"w-4 h-4 !text-gray-600"})),B(" "+x(oe.label),1)]),oe.value===((T=e(i).meta)==null?void 0:T.display_type)?(l(),u(te(("iconMap"in v?v.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]}),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"]),[e(rt).NUMERIC,e(rt).DATE,e(rt).BOOLEAN,e(rt).STRING,e(rt).COND_EXP].includes((J=e(D))==null?void 0:J.dataType)?(l(),g(ee,{key:0},[e(i).meta.display_type===e(p).Currency?(l(),u(ae,{key:0,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(p).Decimal?(l(),u(Ce,{key:1,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(p).Percent?(l(),u(Qe,{key:2,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(p).Rating?(l(),u(He,{key:3,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(p).Time?(l(),u(tt,{key:4,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(p).DateTime?(l(),u(We,{key:5,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(p).Date?(l(),u(Pe,{key:6,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(p).Checkbox?(l(),u(Se,{key:7,value:e(i).meta.display_column_meta},null,8,["value"])):h("",!0)],64)):h("",!0)])]}),_:1},8,["disabled"])]}),_:1},8,["activeKey"])])}}}),La=ze(Oa,[["__scopeId","data-v-440b580c"]]),Ua={class:"flex flex-col gap-2"},Aa=["data-testid"],Ea={class:"inline-flex items-center gap-2 flex-1 truncate"},Na=he({__name:"QrCodeOptions",props:{modelValue:{}},emits:["update:modelValue"],setup(y,{emit:M}){const w=y,V=M,{t}=et(),{fields:i,metaColumnById:d}=wl(),S=we(w,"modelValue",V),{setAdditionalValidations:k,validateInfos:c,column:O,isEdit:$}=Ve(),j=ue(()=>{var K;return((K=i.value)==null?void 0:K.filter(m=>m.fk_column_id&&yl.includes(d.value[m.fk_column_id].uidt)).map(m=>d.value[m.fk_column_id]))||[]});Ze(()=>{var K,m,_,D;S.value.fk_qr_value_column_id=((m=(K=O==null?void 0:O.value)==null?void 0:K.colOptions)==null?void 0:m.fk_qr_value_column_id)||($.value?null:(D=(_=j.value)==null?void 0:_[0])==null?void 0:D.id)}),k({fk_qr_value_column_id:[{required:!0,message:t("general.required")}]});const P=K=>Mt(lt(K)?St:Ot,{columnMeta:K});return(K,m)=>{const _=Ie,D=mt,F=Ue,z=Ae,re=ke;return l(),g("div",Ua,[o(re,be({class:"flex nc-qr-code-value-column-select",label:`${K.$t("placeholder.value")} ${e(t)("objects.field").toLowerCase()}`},e(c).fk_qr_value_column_id),{default:n(()=>[o(z,{value:e(S).fk_qr_value_column_id,"onUpdate:value":m[0]||(m[0]=Q=>e(S).fk_qr_value_column_id=Q),placeholder:K.$t("placeholder.selectAColumnForTheQRCodeValue"),onClick:m[1]||(m[1]=$e(()=>{},["stop"]))},{suffixIcon:n(()=>[o(_,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(j),(Q,H)=>(l(),u(F,{key:H,value:Q.id},{default:n(()=>[a("div",{class:"flex gap-2 w-full truncate items-center","data-testid":`nc-qr-${Q.title}`},[a("div",Ea,[(l(),u(te(P(Q)),{"column-meta":Q,class:"!mx-0 flex-none w-4 h-4"},null,8,["column-meta"])),o(D,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[B(x(Q.title),1)]),default:n(()=>[B(" "+x(Q.title),1)]),_:2},1024)]),e(S).fk_qr_value_column_id===Q.id?(l(),u(te(("iconMap"in K?K.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)],8,Aa)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},16,["label"])])}}}),Ra={class:"flex flex-col gap-4"},Ba={class:"flex flex-row items-center"},Fa=["data-testid"],Va={class:"inline-flex items-center gap-2 flex-1 truncate"},Pa={class:"truncate flex-1"},qa={key:0,class:"pl-2"},ja=he({__name:"BarcodeOptions",props:{modelValue:{}},emits:["update:modelValue"],setup(y,{emit:M}){const w=y,V=M,{fields:t,metaColumnById:i}=wl(),d=we(w,"modelValue",V),{setAdditionalValidations:S,validateInfos:k,column:c,isEdit:O}=Ve(),{t:$}=et(),j=ue(()=>{var m;return((m=t.value)==null?void 0:m.filter(_=>_.fk_column_id&&yl.includes(i.value[_.fk_column_id].uidt)).map(_=>i.value[_.fk_column_id]))||[]});Ze(()=>{var m,_,D,F;d.value.meta={...Ge[p.Barcode],...d.value.meta||{}},d.value.fk_barcode_value_column_id=((_=(m=c==null?void 0:c.value)==null?void 0:m.colOptions)==null?void 0:_.fk_barcode_value_column_id)||(O.value?null:(F=(D=j.value)==null?void 0:D[0])==null?void 0:F.id)}),Ne(j,m=>{var _;d.value.fk_barcode_value_column_id===null&&(d.value.fk_barcode_value_column_id=(_=m==null?void 0:m[0])==null?void 0:_.id)}),S({fk_barcode_value_column_id:[{required:!0,message:$("general.required")}],barcode_format:[{required:!0,message:$("general.required")}]});const P=ue(()=>{var m;return!((m=j.value)!=null&&m.length)}),K=m=>Mt(lt(m)?St:Ot,{columnMeta:m});return(m,_)=>{const D=Ie,F=Ue,z=Ae,re=on,Q=ke;return l(),g("div",Ra,[o(Q,be({class:"flex pb-2 nc-barcode-value-column-select flex-row",label:`${m.$t("placeholder.value")} ${e($)("objects.field").toLowerCase()}`},e(k).fk_barcode_value_column_id),{default:n(()=>[a("div",Ba,[o(z,{value:e(d).fk_barcode_value_column_id,"onUpdate:value":_[0]||(_[0]=H=>e(d).fk_barcode_value_column_id=H),placeholder:m.$t("placeholder.barcodeColumn"),"not-found-content":m.$t("placeholder.notFoundContent"),onClick:_[1]||(_[1]=$e(()=>{},["stop"]))},{suffixIcon:n(()=>[o(D,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(j),(H,E)=>(l(),u(F,{key:E,value:H.id},{default:n(()=>[a("div",{class:"w-full flex gap-2 truncate items-center justify-between","data-testid":`nc-barcode-${H.title}`},[a("div",Va,[(l(),u(te(K(H)),{"column-meta":H,class:"!mx-0"},null,8,["column-meta"])),a("div",Pa,x(H.title),1)]),e(d).fk_barcode_value_column_id===H.id?(l(),u(te(("iconMap"in m?m.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)],8,Fa)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","not-found-content"]),e(P)?(l(),g("div",qa,[o(re,{placement:"bottom"},{title:n(()=>[a("span",null,x(m.$t("msg.validColumnsForBarCode")),1)]),default:n(()=>[(l(),u(te(("iconMap"in m?m.iconMap:e(ve)).info),{class:"cursor-pointer"}))]),_:1})])):h("",!0)])]),_:1},16,["label"]),o(Q,be({class:"flexp nc-barcode-format-select",label:m.$t("general.format")},e(k).barcode_format),{default:n(()=>[o(z,{value:e(d).meta.barcodeFormat,"onUpdate:value":_[2]||(_[2]=H=>e(d).meta.barcodeFormat=H),options:"supportedBarcodeFormats"in m?m.supportedBarcodeFormats:e(Cl),placeholder:m.$t("placeholder.selectBarcodeFormat"),onClick:_[3]||(_[3]=$e(()=>{},["stop"]))},{suffixIcon:n(()=>[o(D,{icon:"arrowDown",class:"text-gray-700"})]),_:1},8,["value","options","placeholder"])]),_:1},16,["label"])])}}}),Ka={class:"flex flex-col gap-2"},za={class:"flex items-center gap-1"},Ga={class:"text-sm text-gray-800 select-none"},Ha=he({__name:"LongTextOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M),i=ue({get:()=>{var d;return!!((d=t.value.meta)!=null&&d.richMode)},set:d=>{t.value.meta||(t.value.meta={}),t.value.meta.richMode=d}});return Ne(i,()=>{t.value.cdf=null}),(d,S)=>{const k=pt,c=ke;return l(),g("div",Ka,[o(c,null,{default:n(()=>[a("div",za,[o(k,{checked:e(i),"onUpdate:checked":S[0]||(S[0]=O=>le(i)?i.value=O:null)},{default:n(()=>[a("div",Ga,x(d.$t("labels.enableRichText")),1)]),_:1},8,["checked"])])]),_:1})])}}}),Wa=["data-testid"],Xa=he({__name:"DurationOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M),i=Vn.map(d=>({...d,title:`${d.title}`}))||[];return t.value.meta={...Ge[p.Duration],...t.value.meta||{}},(d,S)=>{const k=Ie,c=mt,O=Ue,$=Ae,j=ke,P=Tt,K=It;return l(),u(K,null,{default:n(()=>[o(P,{span:24},{default:n(()=>[o(j,{label:d.$t("general.format")},{default:n(()=>[o($,{value:e(t).meta.duration,"onUpdate:value":S[0]||(S[0]=m=>e(t).meta.duration=m),class:"w-52","dropdown-class-name":"nc-dropdown-duration-option"},{suffixIcon:n(()=>[o(k,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(i),(m,_)=>(l(),u(O,{key:_,value:m.id},{default:n(()=>[a("div",{class:"flex gap-2 w-full truncate items-center","data-testid":m.title},[o(c,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[B(x(m.title),1)]),default:n(()=>[B(" "+x(m.title),1)]),_:2},1024),e(t).meta.duration===m.id?(l(),u(te(("iconMap"in d?d.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)],8,Wa)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),Ya={key:0,class:"w-full flex flex-row space-x-2"},Qa={class:"flex gap-2 w-full justify-between truncate items-center"},Za={class:"min-w-1/2 flex items-center gap-2"},Ja={class:"inline-flex items-center truncate gap-2"},es={class:"text-[0.65rem] leading-4 flex-1 truncate text-gray-600 nc-relation-details"},ts={class:"w-full flex gap-2 truncate items-center justify-between"},ls={class:"inline-flex items-center gap-2 flex-1 truncate"},ns={class:"truncate flex-1"},os={key:1},as=he({__name:"LookupOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M),i=Ye(nt,Y()),{t:d}=et(),{setAdditionalValidations:S,validateInfos:k,onDataTypeChange:c,isEdit:O,disableSubmitBtn:$,updateFieldName:j}=Ve(),P=Dt(),{tables:K}=yt(P),{metas:m,getMeta:_}=ht();S({fk_relation_column_id:[{required:!0,message:d("general.required")}],fk_lookup_column_id:[{required:!0,message:d("general.required")}]}),t.value.fk_relation_column_id||(t.value.fk_relation_column_id=null),t.value.fk_lookup_column_id||(t.value.fk_lookup_column_id=null);const D=ue(()=>!K.value||!K.value.length||!i.value||!i.value.columns?[]:i.value.columns.filter(b=>{var ne;return Rt(b)&&!b.system&&b.source_id===((ne=i.value)==null?void 0:ne.source_id)}).map(b=>({col:b.colOptions,column:b,...K.value.find(ne=>ne.id===b.colOptions.fk_related_model_id)||m.value[b.colOptions.fk_related_model_id]||{}})).filter(b=>{var ne;return((ne=b.col)==null?void 0:ne.fk_related_model_id)===b.id&&!b.mm})),F=ue(()=>D.value.find(E=>E.column.id===t.value.fk_relation_column_id)),z=ue(()=>{var E,b;return(E=F.value)!=null&&E.id?(b=m.value[F.value.id])==null?void 0:b.columns.filter(ne=>t.value.fk_lookup_column_id===ne.id||!Jt(ne)&&ne.id!==t.value.id&&ne.uidt!==p.Links):[]});Ze(()=>{var E,b;O.value&&(t.value.fk_lookup_column_id=(E=t.value.colOptions)==null?void 0:E.fk_lookup_column_id,t.value.fk_relation_column_id=(b=t.value.colOptions)==null?void 0:b.fk_relation_column_id)});const re=()=>{var b,ne;const E=(((b=i.value)==null?void 0:b.columns)||[]).filter(ce=>ce.uidt===p.Lookup).map(ce=>{var de;return(de=ce.colOptions)==null?void 0:de.fk_lookup_column_id});return(ne=z.value.find(ce=>!E.includes(ce.id)))==null?void 0:ne.id},Q=async()=>{var E,b;F.value&&await _(F.value.id),t.value.fk_lookup_column_id=re()||((b=(E=z.value)==null?void 0:E[0])==null?void 0:b.id),c()};el(()=>{D.value.length?D.value.length&&$.value&&($.value=!1):$.value=!0});const H=E=>Mt(lt(E)?St:Ot,{columnMeta:E});return Ne(()=>t.value.fk_relation_column_id,E=>{if(!E)return;const b=D.value.find(ne=>ne.col.fk_column_id===E);b&&(t.value.lookupTableTitle=(b==null?void 0:b.title)||b.table_name)}),Ne(()=>t.value.fk_lookup_column_id,E=>{if(!E)return;const b=z.value.find(ne=>ne.id===E);b&&(t.value.lookupColumnTitle=(b==null?void 0:b.title)||b.column_name,j())}),(E,b)=>{const ne=Ie,ce=mt,de=Ue,L=Ae,v=ke,C=al;return e(D).length?(l(),g("div",Ya,[o(v,be({class:"flex w-1/2 !max-w-[calc(50%_-_4px)]",label:`${E.$t("general.link")} ${E.$t("objects.field")}`},e(k).fk_relation_column_id),{default:n(()=>[o(L,{value:e(t).fk_relation_column_id,"onUpdate:value":b[0]||(b[0]=U=>e(t).fk_relation_column_id=U),placeholder:"-select-","dropdown-class-name":"!w-64 !rounded-md nc-dropdown-relation-table",onChange:Q},{suffixIcon:n(()=>[o(ne,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(D),(U,N)=>(l(),u(de,{key:N,value:U.col.fk_column_id},{default:n(()=>[a("div",Qa,[a("div",Za,[(l(),u(te(H(U.column)),{"column-meta":U.column,class:"!mx-0"},null,8,["column-meta"])),o(ce,{class:"truncate min-w-[calc(100%_-_24px)]","show-on-truncate-only":""},{title:n(()=>[B(x(U.column.title),1)]),default:n(()=>[B(" "+x(U.column.title),1)]),_:2},1024)]),a("div",Ja,[a("div",es,[o(ce,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[B(x(U.title||U.table_name),1)]),default:n(()=>[B(" "+x(U.title||U.table_name),1)]),_:2},1024)]),e(t).fk_relation_column_id===U.col.fk_column_id?(l(),u(te(("iconMap"in E?E.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"]),o(v,be({class:"flex w-1/2",label:`${E.$t("datatype.Lookup")} ${E.$t("objects.field")}`},e(t).fk_relation_column_id?e(k).fk_lookup_column_id:void 0),{default:n(()=>[o(L,{value:e(t).fk_lookup_column_id,"onUpdate:value":b[1]||(b[1]=U=>e(t).fk_lookup_column_id=U),name:"fk_lookup_column_id",placeholder:"-select-",disabled:!e(t).fk_relation_column_id,"dropdown-class-name":"nc-dropdown-relation-column !rounded-md",onChange:e(c)},{suffixIcon:n(()=>[o(ne,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(z),(U,N)=>(l(),u(de,{key:N,value:U.id},{default:n(()=>[a("div",ts,[a("div",ls,[(l(),u(te(H(U)),{"column-meta":U,class:"!mx-0"},null,8,["column-meta"])),a("div",ns,x(U.title),1)]),e(t).fk_lookup_column_id===U.id?(l(),u(te(("iconMap"in E?E.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},16,["label"])])):(l(),g("div",os,[o(C,{type:"warning","show-icon":""},{icon:n(()=>[o(ne,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>b[2]||(b[2]=[B(" Alert ")])),description:n(()=>[B(x(E.$t("msg.linkColumnClearNotSupportedYet",{type:"Lookup"})),1)]),_:1})]))}}}),ss=ze(as,[["__scopeId","data-v-5c3b99c0"]]),is={class:"flex items-center gap-1"},us={class:"text-sm text-gray-800 select-none"},rs=he({__name:"NumberOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M);return t.value.meta={...Ge[p.Number],...t.value.meta||{}},(i,d)=>{const S=pt,k=ke;return l(),u(k,null,{default:n(()=>[a("div",is,[e(t).meta?(l(),u(S,{key:0,checked:e(t).meta.isLocaleString,"onUpdate:checked":d[0]||(d[0]=c=>e(t).meta.isLocaleString=c)},{default:n(()=>[a("div",us,x(i.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked"])):h("",!0)])]),_:1})}}}),cs={key:0,class:"flex flex-col gap-4"},ds={class:"w-full flex flex-row space-x-2"},ms={class:"flex gap-2 w-full justify-between truncate items-center"},ps={class:"min-w-1/2 flex items-center gap-2"},_s={class:"inline-flex items-center truncate gap-2"},vs={class:"text-[0.65rem] leading-4 flex-1 truncate text-gray-600 nc-relation-details"},fs={class:"w-full flex gap-2 truncate items-center justify-between"},gs={class:"flex items-center gap-2 flex-1 truncate"},ys={class:"truncate flex-1"},hs={class:"flex gap-2 justify-between items-center"},bs={key:1},ws=he({__name:"RollupOptions",props:{value:{}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M),i=Ye(nt,Y()),{setAdditionalValidations:d,validateInfos:S,onDataTypeChange:k,isEdit:c,disableSubmitBtn:O,updateFieldName:$}=Ve(),j=Dt(),{tables:P}=yt(j),{metas:K,getMeta:m}=ht(),{t:_}=et();d({fk_relation_column_id:[{required:!0,message:_("general.required")}],fk_rollup_column_id:[{required:!0,message:_("general.required")}],rollup_function:[{required:!0,message:_("general.required")}]}),t.value.fk_relation_column_id||(t.value.fk_relation_column_id=null),t.value.fk_rollup_column_id||(t.value.fk_rollup_column_id=null),t.value.rollup_function||(t.value.rollup_function=null);const D=ue(()=>!P.value||!P.value.length||!i.value||!i.value.columns?[]:i.value.columns.filter(v=>{var C;return Rt(v)&&v.colOptions.type&&![gt.BELONGS_TO,gt.ONE_TO_ONE].includes(v.colOptions.type)&&!v.system&&v.source_id===((C=i.value)==null?void 0:C.source_id)}).map(v=>({col:v.colOptions,column:v,...P.value.find(C=>{var U;return C.id===((U=v.colOptions)==null?void 0:U.fk_related_model_id)})}))),F=ue(()=>D.value.find(L=>L.column.id===t.value.fk_relation_column_id)),z=ue(()=>{var L,v;return(L=F.value)!=null&&L.id?(v=K.value[F.value.id])==null?void 0:v.columns.filter(C=>!lt(C.uidt)&&(!Jt(C)||C.pk)):[]});Ze(()=>{var L,v,C;c.value&&(t.value.fk_relation_column_id=(L=t.value.colOptions)==null?void 0:L.fk_relation_column_id,t.value.fk_rollup_column_id=(v=t.value.colOptions)==null?void 0:v.fk_rollup_column_id,t.value.rollup_function=(C=t.value.colOptions)==null?void 0:C.rollup_function)});const re=()=>{var v,C;const L=(((v=i.value)==null?void 0:v.columns)||[]).filter(U=>U.uidt===p.Rollup).map(U=>{var N;return(N=U.colOptions)==null?void 0:N.fk_rollup_column_id});return(C=z.value.find(U=>!L.includes(U.id)))==null?void 0:C.id},Q=async()=>{var L,v;F.value&&await m(F.value.id),t.value.fk_rollup_column_id=re()||((v=(L=z.value)==null?void 0:L[0])==null?void 0:v.id),k()},H=L=>Mt(lt(L)?St:Ot,{columnMeta:L}),E=Y([]),b=[{text:_("datatype.Count"),value:"count"},{text:_("general.min"),value:"min"},{text:_("general.max"),value:"max"},{text:_("general.avg"),value:"avg"},{text:_("general.sum"),value:"sum"},{text:_("general.countDistinct"),value:"countDistinct"},{text:_("general.sumDistinct"),value:"sumDistinct"},{text:_("general.avgDistinct"),value:"avgDistinct"}],ne=ue(()=>{var v;const L={};return(v=z.value)==null||v.forEach(C=>{C!=null&&C.id&&(L[C.id]=b.filter(U=>an(C.uidt).includes(U.value)))}),L}),ce=ue(()=>{var L;return(L=z.value)==null?void 0:L.filter(v=>{var C;return v.id&&((C=ne.value[v.id])==null?void 0:C.length)})}),de=()=>{const L=E.value.find(v=>v.value===t.value.rollup_function);L&&(L!=null&&L.text)&&(t.value.rollup_function_name=L.text),k(),$()};return Ne(()=>t.value.fk_rollup_column_id,()=>{var v;const L=(v=z.value)==null?void 0:v.find(C=>C.id===t.value.fk_rollup_column_id);E.value=ne.value[L==null?void 0:L.id]||[],E.value.length&&!E.value.find(C=>C.value===t.value.rollup_function)&&(t.value.rollup_function=E.value[0].value,t.value.rollup_function_name=E.value[0].text),t.value.rollupColumnTitle=(L==null?void 0:L.title)||(L==null?void 0:L.column_name),$()}),el(()=>{D.value.length?D.value.length&&O.value&&(O.value=!1):O.value=!0}),Ne(()=>t.value.fk_relation_column_id,L=>{if(!L)return;const v=D.value.find(C=>C.col.fk_column_id===L);v&&(t.value.rollupTableTitle=(v==null?void 0:v.title)||v.table_name)}),(L,v)=>{const C=Ie,U=mt,N=Ue,De=Ae,xe=ke,ge=al;return e(D).length?(l(),g("div",cs,[a("div",ds,[o(xe,be({class:"flex w-1/2 !max-w-[calc(50%_-_4px)] pb-2",label:`${L.$t("general.link")} ${L.$t("objects.field")}`},e(S).fk_relation_column_id),{default:n(()=>[o(De,{value:e(t).fk_relation_column_id,"onUpdate:value":v[0]||(v[0]=ae=>e(t).fk_relation_column_id=ae),placeholder:"-select-","dropdown-class-name":"!w-64 nc-dropdown-relation-table !rounded-md",onChange:Q},{suffixIcon:n(()=>[o(C,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(D),(ae,Ce)=>(l(),u(N,{key:Ce,value:ae.col.fk_column_id},{default:n(()=>[a("div",ms,[a("div",ps,[(l(),u(te(H(ae.column)),{"column-meta":ae.column,class:"!mx-0"},null,8,["column-meta"])),o(U,{class:"truncate min-w-[calc(100%_-_24px)]","show-on-truncate-only":""},{title:n(()=>[B(x(ae.column.title),1)]),default:n(()=>[B(" "+x(ae.column.title),1)]),_:2},1024)]),a("div",_s,[a("div",vs,[o(U,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[B(x(ae.title||ae.table_name),1)]),default:n(()=>[B(" "+x(ae.title||ae.table_name),1)]),_:2},1024)]),e(t).fk_relation_column_id===ae.col.fk_column_id?(l(),u(te(("iconMap"in L?L.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"]),o(xe,be({class:"flex w-1/2",label:`${L.$t("datatype.Rollup")} ${L.$t("objects.field")}`},e(t).fk_relation_column_id?e(S).fk_rollup_column_id:void 0),{default:n(()=>[o(De,{value:e(t).fk_rollup_column_id,"onUpdate:value":v[1]||(v[1]=ae=>e(t).fk_rollup_column_id=ae),name:"fk_rollup_column_id",placeholder:"-select-",disabled:!e(t).fk_relation_column_id,"dropdown-class-name":"nc-dropdown-relation-column !rounded-xl",onChange:e(k)},{suffixIcon:n(()=>[o(C,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(ce),(ae,Ce)=>(l(),u(N,{key:Ce,value:ae.id},{default:n(()=>[a("div",fs,[a("div",gs,[(l(),u(te(H(ae)),{"column-meta":ae,class:"!mx-0"},null,8,["column-meta"])),a("div",ys,x(ae.title),1)]),e(t).fk_rollup_column_id===ae.id?(l(),u(te(("iconMap"in L?L.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},16,["label"])]),o(xe,be({label:L.$t("labels.aggregateFunction")},e(t).fk_relation_column_id?e(S).rollup_function:void 0),{default:n(()=>[o(De,{value:e(t).rollup_function,"onUpdate:value":v[2]||(v[2]=ae=>e(t).rollup_function=ae),disabled:!e(t).fk_relation_column_id,placeholder:"-select-","dropdown-class-name":"nc-dropdown-rollup-function",class:"!mt-0.5",onChange:de},{suffixIcon:n(()=>[o(C,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(E),(ae,Ce)=>(l(),u(N,{key:Ce,value:ae.value},{default:n(()=>[a("div",hs,[B(x(ae.text)+" ",1),e(t).rollup_function===ae.value?(l(),u(te(("iconMap"in L?L.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])])):(l(),g("div",bs,[o(ge,{type:"warning","show-icon":""},{icon:n(()=>[o(C,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>v[3]||(v[3]=[B(" Alert ")])),description:n(()=>[B(x(L.$t("msg.linkColumnClearNotSupportedYet",{type:"Rollup"})),1)]),_:1})]))}}}),ks=ze(ws,[["__scopeId","data-v-0525ba03"]]),xs=ot(()=>Je(()=>import("./BG7GQPkT.js"),__vite__mapDeps([6,1,2]),import.meta.url).then(y=>y.default||y)),$s=ot(()=>Je(()=>import("./DqAHSrWO.js").then(y=>y.C),__vite__mapDeps([7,1,2,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]),import.meta.url).then(y=>y.default||y)),Cs=ot(()=>Je(()=>import("./BcnO2-mi.js"),__vite__mapDeps([74,1,2,75,12,76,77,78,15,19,79,80,81,82,83,84,85,16,18,86,87,88]),import.meta.url).then(y=>y.default||y)),Ts={class:"w-full flex flex-col gap-4"},Is={class:"flex flex-col gap-4"},Ds={class:"nc-ltar-icon nc-mm-icon"},Ms={class:"nc-ltar-icon nc-hm-icon"},Ss={class:"nc-ltar-icon nc-oo-icon"},Os={key:0},Ls={key:1},Us={class:"flex w-full items-center gap-2"},As={class:"min-w-5 flex items-center justify-center"},Es={class:"flex flex-col gap-2"},Ns={class:"flex gap-2 items-center"},Rs={class:"flex w-full items-center gap-2"},Bs={class:"min-w-5 flex items-center justify-center"},Fs={key:0},Vs={key:3,class:"flex flex-col gap-2"},Ps={class:"flex gap-2 items-center"},qs={key:0,class:"overflow-auto"},js={class:"flex items-center gap-2"},Ks={class:"first-letter:capitalize"},zs={key:0,class:"flex flex-col gap-4"},Gs={class:"flex flex-row space-x-2"},Hs={class:"flex flex-row"},Ws={class:"flex items-center gap-1"},Xs={class:"text-sm text-gray-800 select-none"},Ys=he({__name:"LinkedToAnotherRecordOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(y,{emit:M}){var Pe,Se,qe,I,A,J,oe,T,q,se,G,ie,pe,Te,je,Xe,Me,Re,Ke,Oe;const w=y,t=we(w,"value",M),i=hl(w,"isEdit"),d=Ye(nt,Y()),S=Y(),{setAdditionalValidations:k,setPostSaveOrUpdateCbk:c,validateInfos:O,onDataTypeChange:$,sqlUi:j,isXcdbBase:P,updateFieldName:K}=Ve(),m=Dt(),{tables:_}=yt(m),D=bl(),{viewsByTable:F}=yt(D),{t:z}=et();i.value||k({childId:[{required:!0,message:z("general.required")}]});const re=j===pn?["NO ACTION"]:["NO ACTION","CASCADE","RESTRICT","SET NULL","SET DEFAULT"];if(!i.value)t.value.parentId||(t.value.parentId=(Pe=d.value)==null?void 0:Pe.id),t.value.childColumn||(t.value.childColumn=`${(Se=d.value)==null?void 0:Se.table_name}_id`),t.value.childTable||(t.value.childTable=(qe=d.value)==null?void 0:qe.table_name),t.value.parentTable||(t.value.parentTable=t.value.rtn||""),t.value.parentColumn||(t.value.parentColumn=t.value.rcn||""),t.value.type||(t.value.type="mm"),t.value.onUpdate||(t.value.onUpdate=re[0]),t.value.onDelete||(t.value.onDelete=re[0]),t.value.virtual||(t.value.virtual=j===sn),t.value.alias||(t.value.alias=t.value.column_name);else{const f=(I=t.value)==null?void 0:I.colOptions;if((J=(A=t.value)==null?void 0:A.meta)!=null&&J.custom&&Et){let s=f.fk_child_column_id,r=f.fk_parent_column_id;(f.type===gt.MANY_TO_MANY||f.type===gt.BELONGS_TO||(T=(oe=t==null?void 0:t.value)==null?void 0:oe.meta)!=null&&T.bt)&&(s=f.fk_parent_column_id,r=f.fk_child_column_id),t.value.custom={ref_model_id:f==null?void 0:f.fk_related_model_id,base_id:(q=d.value)==null?void 0:q.base_id,junc_base_id:(se=d.value)==null?void 0:se.base_id,junc_model_id:f==null?void 0:f.fk_mm_model_id,junc_ref_column_id:f==null?void 0:f.fk_mm_parent_column_id,junc_column_id:f==null?void 0:f.fk_mm_child_column_id,ref_column_id:s,column_id:r}}t.value.is_custom_link=(ie=(G=t.value)==null?void 0:G.meta)==null?void 0:ie.custom,t.value.childViewId||(t.value.childViewId=((Te=(pe=t.value)==null?void 0:pe.colOptions)==null?void 0:Te.fk_target_view_id)||null)}t.value.childId||(t.value.childId=((Xe=(je=t.value)==null?void 0:je.colOptions)==null?void 0:Xe.fk_related_model_id)||null),t.value.childViewId||(t.value.childViewId=((Re=(Me=t.value)==null?void 0:Me.colOptions)==null?void 0:Re.fk_target_view_id)||null),t.value.type||(t.value.type=((Oe=(Ke=t.value)==null?void 0:Ke.colOptions)==null?void 0:Oe.type)||"mm");const Q=Y(!1),H=ue(()=>!_.value||!_.value.length?[]:_.value.filter(f=>{var s;return f.type===un.TABLE&&f.source_id===((s=d.value)==null?void 0:s.source_id)})),E=ue(()=>{var r,Z,_e,fe;const f=(r=t.value)!=null&&r.is_custom_link?(_e=(Z=t.value)==null?void 0:Z.custom)==null?void 0:_e.ref_model_id:(fe=t.value)==null?void 0:fe.childId;return f?(F.value.get(f)||[]).filter(X=>X.type!==rn.FORM):[]}),b=(f,s)=>s.key.toLowerCase().includes(f.toLowerCase()),ne=ue(()=>t.value.uidt===p.Links&&t.value.type!==gt.ONE_TO_ONE),{metas:ce,getMeta:de}=ht();Ne(()=>{var f,s,r,Z;return(f=t.value)!=null&&f.is_custom_link?(r=(s=t.value)==null?void 0:s.custom)==null?void 0:r.ref_model_id:(Z=t.value)==null?void 0:Z.childId},async f=>{f&&(de(f).catch(()=>{}),D.loadViews({ignoreLoading:!0,tableId:f}).catch(()=>{}))},{immediate:!0}),t.value.meta=t.value.meta||{};const L=Y(!!t.value.childViewId),v=ue({get(){var f;return!!((f=t.value.meta)!=null&&f.enableConditions)},set(f){t.value.meta=t.value.meta||{},t.value.meta.enableConditions=f}}),C=f=>{f||(t.value.childViewId=null)};cn(nt,ue(()=>{var s,r,Z,_e;const f=(s=t.value)!=null&&s.is_custom_link?(Z=(r=t.value)==null?void 0:r.custom)==null?void 0:Z.ref_model_id:(_e=t.value)==null?void 0:_e.childId;return ce.value[f]||{}})),Ze(()=>{c(async({colId:f,column:s})=>{var r;await((r=S.value)==null?void 0:r.applyChanges(f||s.id,!1))})}),dn(()=>{c(null)});const U=ue({get:()=>{var f,s,r;return(i.value?(s=(f=t.value)==null?void 0:f.colOptions)==null?void 0:s.fk_related_model_id:(r=t.value)==null?void 0:r.childId)??null},set:f=>{var s;!i.value&&f&&(t.value.childId=f,t.value.childTableTitle=(s=H.value.find(r=>r.id===f))==null?void 0:s.title)}}),N=ue({get:()=>{var f,s,r;return(i.value?(s=(f=t.value)==null?void 0:f.colOptions)==null?void 0:s.type:(r=t.value)==null?void 0:r.type)??null},set:f=>{!i.value&&f&&(t.value.type=f,K())}}),De=()=>{$(),Zt(()=>{K()})},xe=Y(!1),ge={"custom.column_id":[{required:!0,message:z("general.required")}],"custom.ref_model_id":[{required:!0,message:z("general.required")}],"custom.ref_column_id":[{required:!0,message:z("general.required")}]},ae={"custom.junc_model_id":[{required:!0,message:z("general.required")}],"custom.junc_column_id":[{required:!0,message:z("general.required")}],"custom.junc_ref_column_id":[{required:!0,message:z("general.required")}]},Ce=()=>{var f;(f=t.value)!=null&&f.is_custom_link?(k({childId:[],...ge,...t.value.type===gt.MANY_TO_MANY?ae:{}}),t.value.virtual=!0):k({childId:[{required:!0,message:z("general.required")}]})},Qe=()=>{xe.value=!xe.value,xe.value||(t.value.is_custom_link=!1)},He=()=>{t.value.is_custom_link=!t.value.is_custom_link,Ce()},tt=()=>{var f;!t.value.childId&&!(t.value.is_custom_link&&((f=t.value.custom)!=null&&f.ref_model_id))||(L.value=!L.value,C())},We=()=>{var f;!t.value.childId&&!(t.value.is_custom_link&&((f=t.value.custom)!=null&&f.ref_model_id))||(v.value=!v.value)};return(f,s)=>{var Lt,Ut;const r=Ie,Z=nl,_e=ol,fe=ke,X=jn,Le=xs,Ee=Pn,Be=mt,ut=Ue,bt=Ae,Pt=_n,qt=qn,jt=$s,Kt=Ct,zt=Cs,Gt=pt,_t=mn("e");return l(),g("div",Ts,[a("div",Is,[o(fe,be({label:f.$t("labels.relationType")},e(O).type,{class:"nc-ltar-relation-type"}),{default:n(()=>[o(_e,be({value:e(N),"onUpdate:value":s[0]||(s[0]=W=>le(N)?N.value=W:null),name:"type"},e(O).type,{disabled:e(i)}),{default:n(()=>[o(Z,{value:"mm","data-testid":"Many to Many"},{default:n(()=>[a("span",Ds,[o(r,{icon:"mm_solid"})]),B(" "+x(f.$t("title.manyToMany")),1)]),_:1}),o(Z,{value:"hm","data-testid":"Has Many"},{default:n(()=>[a("span",Ms,[o(r,{icon:"hm_solid"})]),B(" "+x(f.$t("title.hasMany")),1)]),_:1}),o(Z,{value:"oo","data-testid":"One to One",onDblclick:Qe},{default:n(()=>[a("span",Ss,[o(r,{icon:"oneToOneSolid"})]),B(" "+x(f.$t("title.oneToOne")),1)]),_:1})]),_:1},16,["value","disabled"])]),_:1},16,["label"])]),e(xe)&&("isEeUI"in f?f.isEeUI:e(Et))?(l(),g("div",Os,[o(X,{checked:e(t).is_custom_link,"onUpdate:checked":s[1]||(s[1]=W=>e(t).is_custom_link=W),disabled:e(i),"is-edit":e(i),size:"small",name:"Custom",onChange:Ce},null,8,["checked","disabled","is-edit"]),a("span",{class:"ml-3 cursor-pointer",onClick:He},"Advanced Link")])):h("",!0),("isEeUI"in f?f.isEeUI:e(Et))&&e(t).is_custom_link?(l(),g("div",Ls,[o(Le,{value:e(t),"onUpdate:value":s[2]||(s[2]=W=>le(t)?t.value=W:null),"is-edit":e(i),meta:e(d)},null,8,["value","is-edit","meta"])])):(l(),u(fe,be({key:2,class:"flex w-full pb-2 nc-ltar-child-table"},e(O).childId),{default:n(()=>[o(bt,{value:e(U),"onUpdate:value":s[3]||(s[3]=W=>le(U)?U.value=W:null),"show-search":"",disabled:e(i),"filter-option":b,placeholder:"select table to link","dropdown-class-name":"nc-dropdown-ltar-child-table",onChange:De},{suffixIcon:n(()=>[o(r,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(H),W=>(l(),u(ut,{key:W.title,value:W.id},{default:n(()=>[a("div",Us,[a("div",As,[o(Ee,{meta:W,class:"text-gray-500"},null,8,["meta"])]),o(Be,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[B(x(W.title),1)]),default:n(()=>[a("span",null,x(W.title),1)]),_:2},1024)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16)),a("div",Es,[a("div",Ns,[$t(o(X,{checked:e(L),"onUpdate:checked":s[4]||(s[4]=W=>le(L)?L.value=W:null),size:"small",disabled:!e(t).childId&&!(e(t).is_custom_link&&((Lt=e(t).custom)!=null&&Lt.ref_model_id)),onChange:C},null,8,["checked","disabled"]),[[_t,["c:link:limit-record-by-view",{status:e(L)}]]]),$t((l(),g("span",{class:"text-s","data-testid":"nc-limit-record-view",onClick:tt},s[13]||(s[13]=[B("Limit record selection to a view")]))),[[_t,["c:link:limit-record-by-view",{status:e(L)}]]])]),e(L)?(l(),u(fe,{key:0,class:"!pl-8 flex w-full pb-2 mt-4 space-y-2 nc-ltar-child-view"},{default:n(()=>[o(qt,{value:e(t).childViewId,"onUpdate:value":s[5]||(s[5]=W=>e(t).childViewId=W),placeholder:f.$t("labels.selectView"),"show-search":"","filter-option":b,"dropdown-class-name":"nc-dropdown-ltar-child-view"},{default:n(()=>[(l(!0),g(ee,null,me(e(E),W=>(l(),u(ut,{key:W.title,value:W.id},{default:n(()=>[a("div",Rs,[a("div",Bs,[o(Pt,{meta:W,class:"text-gray-500"},null,8,["meta"])]),W.is_default?(l(),g("span",Fs,x(f.$t("labels.defaultView")),1)):(l(),u(Be,{key:1,class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[B(x(W.title),1)]),default:n(()=>[a("span",null,x(W.title),1)]),_:2},1024))])]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1})):h("",!0)]),("isEeUI"in f?f.isEeUI:e(Et))?(l(),g("div",Vs,[a("div",Ps,[$t(o(X,{checked:e(v),"onUpdate:checked":s[6]||(s[6]=W=>le(v)?v.value=W:null),disabled:!e(t).childId&&!(e(t).is_custom_link&&((Ut=e(t).custom)!=null&&Ut.ref_model_id)),size:"small"},null,8,["checked","disabled"]),[[_t,["c:link:limit-record-by-filter",{status:e(v)}]]]),$t((l(),g("span",{"data-testid":"nc-limit-record-filters",onClick:We},s[14]||(s[14]=[B(" Limit record selection to filters ")]))),[[_t,["c:link:limit-record-by-filter",{status:e(v)}]]])]),e(v)?(l(),g("div",qs,[o(jt,{ref_key:"filterRef",ref:S,modelValue:e(t).filters,"onUpdate:modelValue":s[7]||(s[7]=W=>e(t).filters=W),class:"!pl-8 !p-0 max-w-620px","auto-save":!1,"show-loading":!1,link:!0,"root-meta":e(d),"link-col-id":e(t).id},null,8,["modelValue","root-meta","link-col-id"])])):h("",!0)])):h("",!0),!e(P)&&!e(i)||e(ne)?(l(),g(ee,{key:4},[a("div",null,[o(Kt,{size:"small",type:"text",class:"!text-gray-500 !hover:text-gray-700",onClick:s[8]||(s[8]=$e(W=>Q.value=!e(Q),["stop"]))},{default:n(()=>[a("div",js,[a("span",Ks,x(f.$t("title.advancedSettings").toLowerCase()),1),o(r,{icon:e(Q)?"arrowUp":"arrowDown",class:"h-4 w-4"},null,8,["icon"])])]),_:1})]),e(Q)?(l(),g("div",zs,[e(ne)?(l(),u(zt,{key:0,value:e(t),"onUpdate:value":s[9]||(s[9]=W=>le(t)?t.value=W:null)},null,8,["value"])):h("",!0),!e(P)&&!e(i)?(l(),g(ee,{key:1},[a("div",Gs,[o(fe,{class:"flex w-1/2",label:f.$t("labels.onUpdate")},{default:n(()=>[o(bt,{value:e(t).onUpdate,"onUpdate:value":s[10]||(s[10]=W=>e(t).onUpdate=W),disabled:e(t).virtual,name:"onUpdate","dropdown-class-name":"nc-dropdown-on-update",onChange:e($)},{suffixIcon:n(()=>[o(r,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(re),(W,wt)=>(l(),u(ut,{key:wt,value:W},{default:n(()=>[W==="NO ACTION"?(l(),g(ee,{key:0},[B(x(f.$t("title.links.noAction")),1)],64)):W==="CASCADE"?(l(),g(ee,{key:1},[B(x(f.$t("title.links.cascade")),1)],64)):W==="RESTRICT"?(l(),g(ee,{key:2},[B(x(f.$t("title.links.restrict")),1)],64)):W==="SET NULL"?(l(),g(ee,{key:3},[B(x(f.$t("title.links.setNull")),1)],64)):W==="SET DEFAULT"?(l(),g(ee,{key:4},[B(x(f.$t("title.links.setDefault")),1)],64)):(l(),g(ee,{key:5},[B(x(W),1)],64))]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"]),o(fe,{class:"flex w-1/2",label:f.$t("labels.onDelete")},{default:n(()=>[o(bt,{value:e(t).onDelete,"onUpdate:value":s[11]||(s[11]=W=>e(t).onDelete=W),disabled:e(t).virtual,name:"onDelete","dropdown-class-name":"nc-dropdown-on-delete",onChange:e($)},{suffixIcon:n(()=>[o(r,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(re),(W,wt)=>(l(),u(ut,{key:wt,value:W},{default:n(()=>[W==="NO ACTION"?(l(),g(ee,{key:0},[B(x(f.$t("title.links.noAction")),1)],64)):W==="CASCADE"?(l(),g(ee,{key:1},[B(x(f.$t("title.links.cascade")),1)],64)):W==="RESTRICT"?(l(),g(ee,{key:2},[B(x(f.$t("title.links.restrict")),1)],64)):W==="SET NULL"?(l(),g(ee,{key:3},[B(x(f.$t("title.links.setNull")),1)],64)):W==="SET DEFAULT"?(l(),g(ee,{key:4},[B(x(f.$t("title.links.setDefault")),1)],64)):(l(),g(ee,{key:5},[B(x(W),1)],64))]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"])]),a("div",Hs,[o(fe,null,{default:n(()=>[a("div",Ws,[o(Gt,{checked:e(t).virtual,"onUpdate:checked":s[12]||(s[12]=W=>e(t).virtual=W),disabled:e(t).is_custom_link,onChange:e($)},{default:n(()=>[a("div",Xs,x(f.$t("title.virtualRelation")),1)]),_:1},8,["checked","disabled","onChange"])])]),_:1})])],64)):h("",!0)])):h("",!0)],64)):h("",!0)])}}}),Qs=ze(Ys,[["__scopeId","data-v-290ca0f4"]]),Zs={},Js={class:"hidden"};function ei(y,M){return l(),g("div",Js)}const ti=ze(Zs,[["render",ei]]),li={class:"flex flex-col gap-4"},ni={key:0,class:"flex items-center gap-1"},oi={key:0,class:"flex items-center gap-1"},ai=he({__name:"UserOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(y,{emit:M}){const t=we(y,"value",M),i=Y(!1),d=Y(),S={},{setAdditionalValidations:k,updateFieldName:c}=Ve();k({...S}),t.value.meta={...Ge[p.User],...t.value.meta||{}},Ze(()=>{d.value=t.value.meta.is_multi});const O=$=>{var j;t.value.meta.is_multi=$,t.value.meta.is_multi||(t.value.cdf=((j=t.value.cdf)==null?void 0:j.split(",")[0])||null),c()};return($,j)=>{const P=pt,K=ke,m=Ie,_=al;return l(),g("div",li,[o(K,null,{default:n(()=>[e(t).meta?(l(),g("div",ni,[o(P,{checked:e(t).meta.is_multi,"data-testid":"user-column-allow-multiple",onChange:O},{default:n(()=>j[1]||(j[1]=[a("div",{class:"text-sm text-gray-800 select-none"},"Allow adding multiple users",-1)])),_:1},8,["checked"])])):h("",!0)]),_:1}),e(i)?(l(),u(K,{key:0},{default:n(()=>[e(t).meta?(l(),g("div",oi,[o(P,{checked:e(t).meta.notify,"onUpdate:checked":j[0]||(j[0]=D=>e(t).meta.notify=D),"data-testid":"user-column-notify-user"},{default:n(()=>j[2]||(j[2]=[a("div",{class:"text-sm text-gray-800 select-none"},"Notify users with base access when they're added",-1)])),_:1},8,["checked"])])):h("",!0)]),_:1})):h("",!0),e(d)&&$.isEdit&&!e(t).meta.is_multi?(l(),u(_,{key:1,type:"warning","show-icon":""},{icon:n(()=>[o(m,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>j[3]||(j[3]=[B(" Alert ")])),description:n(()=>j[4]||(j[4]=[B(" Changing from multiple mode to single will retain only first user in each cell! ")])),_:1})):h("",!0)])}}}),si={class:"relative"},ii={class:"bg-white space-y-2 p-2 rounded-lg"},ui=["onClick"],ri={class:"flex w-full items-center leading-5 justify-between gap-1"},ci={key:1,class:"text-sm flex items-center leading-5 text-gray-500"},di={class:"bg-white w-80 space-y-3 h-70 overflow-y-auto rounded-lg"},mi={class:"!sticky top-0 flex gap-2 bg-white px-2 py-2"},pi={class:"text-[13px]"},_i={class:"grid px-3 auto-rows-max pb-2 nc-scrollbar-md gap-3 grid-cols-10"},vi={class:"flex gap-2 w-full capitalize text-gray-800 truncate items-center"},fi={key:0,class:"!mt-4"},gi={class:"mb-2 text-gray-800 text-[13px] flex justify-between"},yi={class:"flex rounded-lg"},hi={class:"w-full flex justify-between items-center gap-2 px-2 py-2 rounded-md hover:bg-gray-100"},bi={class:"flex w-full items-center gap-2"},wi=he({__name:"ButtonOptions",props:{value:{},fromTableExplorer:{type:Boolean}},emits:["update:value"],async setup(y,{emit:M}){var Pe,Se,qe,I,A,J,oe;let w,V;const t=y,i=M,{t:d}=et(),{isUIAllowed:S}=Ft(),{getMeta:k}=ht(),c=we(t,"value",i),O=Ye(nt,Y()),{isEdit:$,setAdditionalValidations:j,validateInfos:P,sqlUi:K,column:m,isWebhookCreateModalOpen:_,validate:D}=Ve(),F=[p.QrCode,p.Barcode,p.Button],z=zn(),{loadHooksList:re}=z;[w,V]=vn(()=>re()),await w,V();const{hooks:Q}=Bt(z),H=Y(),E=ue(()=>Q.value.filter(T=>T.event==="manual"&&T.active)),b=[{label:d("labels.openUrl"),value:"url"},{label:d("labels.runWebHook"),value:"webhook"}],ne=ue(()=>{var T,q;return((q=(T=O==null?void 0:O.value)==null?void 0:T.columns)==null?void 0:q.filter(se=>!(F.includes(se.uidt)||Qt(se,O.value))))||[]}),ce={formula_raw:[{required:c.value.type==="url",validator:(T,q)=>(async()=>{var se;if(c.value.type==="url"){if(!(q!=null&&q.trim()))throw new Error("Formula is required for URL Button");try{await Yt({column:m.value,formula:q,columns:ne.value,clientOrSqlUi:K.value,getMeta:k})}catch(G){throw G instanceof gl&&((se=G.extra)!=null&&se.key)?new Error(d(G.extra.key,G.extra)):new Error(G.message)}}})()}],fk_webhook_id:[{required:c.value.type==="webhook",validator:(T,q)=>new Promise((se,G)=>{c.value.type==="webhook"&&!q&&G(new Error(d("general.required"))),se()})}],color:[{validator:(T,q)=>new Promise((se,G)=>{["brand","red","green","maroon","blue","orange","pink","purple","yellow","gray"].includes(q)||G(new Error(d("msg.invalidColor"))),se()})}],theme:[{validator:(T,q)=>new Promise((se,G)=>{["solid","light","text"].includes(q)||G(new Error(d("msg.invalidTheme"))),se()})}],type:[{validator:(T,q)=>new Promise((se,G)=>{["url","webhook"].includes(q)||G(new Error(d("msg.invalidType"))),se()})}],label:[{validator:(T,q)=>new Promise((se,G)=>{!(q.length>0)&&!c.value.icon&&G(new Error(d("msg.invalidLabel"))),se()})}]};if($.value){const T=c.value.colOptions;c.value.type=T==null?void 0:T.type,c.value.theme=T==null?void 0:T.theme,c.value.label=T==null?void 0:T.label,c.value.color=T==null?void 0:T.color,c.value.fk_webhook_id=T==null?void 0:T.fk_webhook_id,c.value.icon=T==null?void 0:T.icon,H.value=Q.value.find(q=>{var se;return q.id===((se=c.value)==null?void 0:se.fk_webhook_id)})}else c.value.type=b[0].value,c.value.theme="solid",c.value.label="Button",c.value.color="brand",c.value.formula_raw="";j({...ce}),(Se=(Pe=m.value)==null?void 0:Pe.colOptions)!=null&&Se.formula_raw?c.value.formula_raw=fl((I=(qe=m.value)==null?void 0:qe.colOptions)==null?void 0:I.formula,(A=O==null?void 0:O.value)==null?void 0:A.columns,(oe=(J=m.value)==null?void 0:J.colOptions)==null?void 0:oe.formula_raw)||"":c.value.formula_raw="";const de={solid:{brand:"bg-brand-500 text-white",red:"bg-red-600 text-white",green:"bg-green-600 text-white",maroon:"bg-maroon-600 text-white",blue:"bg-blue-600 text-white",orange:"bg-orange-600 text-white",pink:"bg-pink-600 text-white",purple:"bg-purple-500 text-white",yellow:"bg-yellow-600 text-white",gray:"bg-gray-600 text-white"},light:{brand:"bg-brand-200 text-gray-800",red:"bg-red-200 text-gray-800",green:"bg-green-200 text-gray-800",maroon:"bg-maroon-200 text-gray-800",blue:"bg-blue-200 text-gray-800",orange:"bg-orange-200 text-gray-800",pink:"bg-pink-200 text-gray-800",purple:"bg-purple-200 text-gray-800",yellow:"bg-yellow-200 text-gray-800",gray:"bg-gray-200"},text:{brand:"text-brand-500",red:"text-red-600",green:"text-green-600",maroon:"text-maroon-600",blue:"text-blue-600",orange:"text-orange-600",pink:"text-pink-600",purple:"text-purple-500",yellow:"text-yellow-600",gray:"text-gray-600"}},L=Y(!1),v=(T,q)=>{c.value.theme=T,c.value.color=q,L.value=!1},C=Y(!1),U=Y(!1),N=Y(""),De=ue(()=>fn(N.value)),xe=Y([{text:[d("general.manual"),d("general.trigger")],value:["manual","trigger"]}]),ge=Y(!1),ae=()=>{H.value=void 0,ge.value=!0,_.value=!0},Ce=T=>{H.value=T.id?T:void 0,c.value.fk_webhook_id=T.id,ge.value=!1,setTimeout(()=>{_.value=!1},500)},Qe=T=>{c.value.fk_webhook_id=T.id,H.value=T,C.value=!1,ge.value=!1},He=()=>{c.value.icon=null,U.value=!1},tt=()=>{H.value&&(_.value=!0,ge.value=!0)};Ne(ge,T=>{T||setTimeout(()=>{_.value=!1},500)});const We=T=>{c.value.icon=T,U.value=!1};return(T,q)=>{var Z,_e,fe;const se=tl,G=ke,ie=Tt,pe=Ie,Te=ll,je=Ct,Xe=It,Me=Ue,Re=Ae,Ke=kl,Oe=Hn,f=Kn,s=mt,r=Gn;return l(),g("div",si,[o(Xe,{gutter:8},{default:n(()=>[o(ie,{span:12},{default:n(()=>[o(G,be(e(P).label,{class:"mt-4",label:T.$t("general.label")}),{default:n(()=>[o(se,{value:e(c).label,"onUpdate:value":q[0]||(q[0]=X=>e(c).label=X),class:"nc-column-label-input !rounded-lg",placeholder:"Button"},null,8,["value"])]),_:1},16,["label"])]),_:1}),o(ie,{span:6},{default:n(()=>[o(G,be({label:T.$t("general.style")},e(P).theme),{default:n(()=>[o(Te,{visible:e(L),"onUpdate:visible":q[1]||(q[1]=X=>le(L)?L.value=X:null),class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",ii,[(l(!0),g(ee,null,me(Object.entries(de),([X,Le])=>(l(),g("div",{key:X,class:"flex gap-2"},[(l(!0),g(ee,null,me(Object.entries(Le),([Ee,Be])=>(l(),g("div",{key:Ee},[a("button",{class:ye([{[Be]:!0,"!border-transparent":X!=="text"},"border-1 border-gray-200 flex items-center justify-center rounded h-6 w-6"]),onClick:ut=>v(X,Ee)},[(l(),u(te(("iconMap"in T?T.iconMap:e(ve)).cellText),{class:"w-3.5 h-3.5"}))],10,ui)]))),128))]))),128))])]),default:n(()=>[a("div",{class:ye([{"!border-brand-500 shadow-selected nc-button-style-dropdown ":e(L)},"flex items-center justify-between border-1 h-8 px-[11px] border-gray-300 !w-full transition-all cursor-pointer !rounded-lg"])},[a("div",{class:ye([`${e(c).color??"brand"} ${e(c).theme??"solid"}`,"flex items-center justify-center nc-cell-button rounded-md h-6 w-6 gap-2"])},[(l(),u(te(("iconMap"in T?T.iconMap:e(ve)).cellText),{class:"w-4 h-4"}))],2),o(pe,{icon:"arrowDown",class:"text-gray-500 !w-4 !h-4"})],2)]),_:1},8,["visible"])]),_:1},16,["label"])]),_:1}),o(ie,{span:6},{default:n(()=>[o(G,be({label:T.$t("labels.icon")},e(P).icon),{default:n(()=>[o(Te,{visible:e(U),"onUpdate:visible":q[3]||(q[3]=X=>le(U)?U.value=X:null),class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",di,[a("div",mi,[o(se,{ref:"inputRef",value:e(N),"onUpdate:value":q[2]||(q[2]=X=>le(N)?N.value=X:null),placeholder:T.$t("placeholder.searchIcons"),class:"nc-dropdown-search-unified-input z-10"},{prefix:n(()=>[o(pe,{icon:"search",class:"nc-search-icon h-3.5 w-3.5 mr-1"})]),_:1},8,["value","placeholder"]),o(je,{size:"small",class:"!px-4",type:"text",onClick:He},{default:n(()=>[a("span",pi,x(T.$t("general.remove")),1)]),_:1})]),a("div",_i,[(l(!0),g(ee,null,me(e(De),({icon:X,name:Le},Ee)=>(l(),u(te(X),{key:Ee,icon:X,class:"w-6 hover:bg-gray-100 cursor-pointer rounded p-1 text-gray-700 h-6",onClick:Be=>We(Le)},null,8,["icon","onClick"]))),128))])])]),default:n(()=>[a("div",{class:ye([{"!border-brand-500 shadow-selected nc-button-style-dropdown ":e(U)},"flex items-center justify-center border-1 h-8 px-[11px] border-gray-300 !w-full transition-all cursor-pointer !rounded-lg"])},[a("div",ri,[e(c).icon?(l(),u(pe,{key:0,icon:e(c).icon,class:"w-4 h-4 text-gray-700"},null,8,["icon"])):(l(),g("div",ci,x(T.$t("labels.selectIcon")),1)),o(pe,{icon:"arrowDown",class:"text-gray-500 !w-4 !h-4"})])],2)]),_:1},8,["visible"])]),_:1},16,["label"])]),_:1})]),_:1}),o(Xe,{class:"mt-4",gutter:8},{default:n(()=>[o(ie,{span:24},{default:n(()=>[o(G,be({label:T.$t("labels.onClick")},e(P).type),{default:n(()=>[o(Re,{value:e(c).type,"onUpdate:value":q[4]||(q[4]=X=>e(c).type=X),class:"w-52 nc-button-type-select","dropdown-class-name":"nc-dropdown-button-cell-type"},{suffixIcon:n(()=>[o(pe,{icon:"arrowDown",class:"text-gray-500"})]),default:n(()=>[(l(),g(ee,null,me(b,(X,Le)=>o(Me,{key:Le,value:X.value},{default:n(()=>[a("div",vi,[B(x(X.label)+" ",1),e(c).type===X.value?(l(),u(te(("iconMap"in T?T.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1},16,["label"])]),_:1})]),_:1}),((Z=e(c))==null?void 0:Z.type)==="url"?(l(),g("div",fi,[o(Ke,{value:e(c).formula_raw,"onUpdate:value":q[5]||(q[5]=X=>e(c).formula_raw=X),"suggestion-height":"medium","editor-height":"50px","disable-suggestion-headers":"",label:T.$t("labels.urlFormula"),error:((_e=e(P).formula_raw)==null?void 0:_e.validateStatus)==="error"},null,8,["value","label","error"])])):h("",!0),((fe=e(c))==null?void 0:fe.type)==="webhook"?(l(),u(G,{key:1,class:"!mt-4"},{default:n(()=>[a("div",gi,[B(x(T.$t("labels.webhook"))+" ",1),q[8]||(q[8]=a("a",{class:"font-medium",href:"https://docs.nocodb.com/fields/field-types/custom-types/button#create-a-button-field",target:"_blank"}," Docs ",-1))]),a("div",yi,[o(Te,{visible:e(C),"onUpdate:visible":q[6]||(q[6]=X=>le(C)?C.value=X:null),trigger:["click"]},{overlay:n(()=>{var X;return[e(C)?(l(),u(f,{key:0,"is-parent-open":e(C),"search-input-placeholder":T.$t("placeholder.searchFields"),"option-config":{selectOptionEvent:["c:actions:webhook"],optionClassName:""},options:e(E),"selected-option-id":(X=e(H))==null?void 0:X.id,"disable-mascot":"",class:"max-h-72 max-w-85","filter-field":"title","show-selected-option":"",onSelected:Qe},gn({_:2},[e(S)("hookCreate")?{name:"bottom",fn:n(()=>[o(Oe,{style:{margin:"4px 0"}}),a("div",{class:"flex items-center text-brand-500 text-sm cursor-pointer",onClick:ae},[a("div",hi,[B(x(T.$t("general.create"))+" "+x(T.$t("objects.webhook").toLowerCase())+" ",1),o(pe,{icon:"plus",class:"flex-none"})])])]),key:"0"}:void 0]),1032,["is-parent-open","search-input-placeholder","options","selected-option-id"])):h("",!0)]}),default:n(()=>{var X,Le;return[a("div",{class:ye([{"nc-button-style-dropdown shadow-dropdown-open remove-right-shadow":e(C)},"nc-button-webhook-select border-r-0 flex items-center justify-center border-1 h-8 px-[8px] border-gray-300 !w-full transition-all cursor-pointer !rounded-l-lg"])},[a("div",bi,[(l(),g("div",{key:(X=e(H))==null?void 0:X.id,class:"flex items-center overflow-x-clip truncate text-ellipsis w-full gap-1 text-gray-800"},[o(s,{class:ye([{"text-gray-500":!((Le=e(H))!=null&&Le.title)},"truncate max-w-full"]),"show-on-truncate-only":""},{title:n(()=>{var Ee,Be;return[B(x((Ee=e(H))!=null&&Ee.title?(Be=e(H))==null?void 0:Be.title:T.$t("labels.selectAWebhook")),1)]}),default:n(()=>{var Ee,Be;return[B(" "+x((Ee=e(H))!=null&&Ee.title?(Be=e(H))==null?void 0:Be.title:T.$t("labels.selectAWebhook")),1)]}),_:1},8,["class"])])),o(pe,{icon:"arrowDown",class:ye([{"transform rotate-180":e(C)},"text-gray-500 transition-all transition-transform"])},null,8,["class"])])],2)]}),_:1},8,["visible"]),o(je,{size:"small",type:"secondary",class:ye(["!rounded-l-none border-l-[#d9d9d9] !hover:bg-white nc-button-style-dropdown",{"nc-button-style-dropdown shadow-dropdown-open remove-left-shadow":e(C)}]),onClick:tt},{default:n(()=>[o(pe,{class:ye({"text-gray-400":!e(H),"text-gray-700":e(H)}),icon:"ncEdit"},null,8,["class"])]),_:1},8,["class"])])]),_:1})):h("",!0),e(ge)?(l(),u(r,{key:2,value:e(ge),"onUpdate:value":q[7]||(q[7]=X=>le(ge)?ge.value=X:null),hook:e(H),"event-list":e(xe),onClose:Ce},null,8,["value","hook","event-list"])):h("",!0)])}}}),ki=ze(wi,[["__scopeId","data-v-a70469d2"]]),xi={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},$i=a("path",{fill:"currentColor",d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2m1 5h-2v4H7v2h4v4h2v-4h4v-2h-4z"},null,-1),Ci=[$i];function Ti(y,M){return l(),g("svg",xi,[...Ci])}const Ii={name:"mdi-plus-circle-outline",render:Ti},Di={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Mi=a("path",{fill:"currentColor",d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2M7 13h10v-2H7"},null,-1),Si=[Mi];function Oi(y,M){return l(),g("svg",Di,[...Si])}const Li={name:"mdi-minus-circle-outline",render:Oi},Ui={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ai=a("path",{fill:"currentColor",d:"M10 7v2H9v6h1v2H6v-2h1V9H6V7zm6 0a2 2 0 0 1 2 2v6c0 1.11-.89 2-2 2h-4V7m4 2h-2v6h2z"},null,-1),Ei=[Ai];function Ni(y,M){return l(),g("svg",Ui,[...Ei])}const Ri={name:"mdi-identifier",render:Ni},Bi=ot(()=>Je(()=>import("./DkxvsUH0.js"),__vite__mapDeps([89,1,2,90]),import.meta.url).then(y=>y.default||y)),Fi=ot(()=>Je(()=>import("./DDUsq9qf.js"),__vite__mapDeps([91,1,2,92,93,94,27,95,23,96,51]),import.meta.url).then(y=>y.default||y)),Vi=ot(()=>Je(()=>import("./Deb3yIC8.js"),__vite__mapDeps([97,1,2,75,12,76,77,78,15,19,79,80,81,82,83,84,85,16,18,86,87,88,37,33,98,14,17,99,100]),import.meta.url).then(y=>y.default||y)),Pi=ot(()=>Je(()=>import("./zkLO0R0R.js"),__vite__mapDeps([101,1,2,75,12,76,77,78,15,19,79,80,81,82,83,84,85,16,18,86,87,88,37,33,14,17]),import.meta.url).then(y=>y.default||y)),qi={class:"flex flex-grow px-2 py-1 items-center rounded-md bg-gray-100 focus:bg-gray-100 outline-none",style:{"outline-style":"solid","outline-width":"thin"}},ji=["disabled","placeholder"],Ki={class:"flex items-center gap-1"},zi=["data-testid"],Gi={class:"flex gap-2 items-center"},Hi={class:"flex-1"},Wi={key:0,class:"!text-xs !text-gray-300"},Xi={key:0,class:"flex items-center gap-1"},Yi={class:"text-sm text-gray-800"},Qi={class:"nc-column-options-wrapper flex flex-col gap-4"},Zi={key:2,class:"flex gap-1"},Ji={key:0,class:"text-xs text-gray-400 flex items-center justify-end"},eu={key:0,class:"overflow-hidden"},tu={class:"flex gap-3 text-gray-800 h-7 mb-1 items-center justify-between"},lu={class:"text-[13px]"},nu={class:"flex !text-gray-700 items-center gap-2"},ou={class:"first-letter:capitalize"},au={key:4,class:"flex items-center justify-between gap-2"},su={class:"flex !text-gray-700 items-center gap-2"},iu={class:"first-letter:capitalize"},uu={key:1},ru=he({__name:"EditOrAdd",props:{preload:{},columnPosition:{},embedMode:{type:Boolean},columnLabel:{},hideTitle:{type:Boolean},hideType:{type:Boolean},hideAdditionalOptions:{type:Boolean},fromTableExplorer:{type:Boolean},editDescription:{type:Boolean},readonly:{type:Boolean},disableTitleFocus:{type:Boolean}},emits:["submit","cancel","mounted","add","update"],setup(y,{emit:M}){const w=y,V=M,{formState:t,isWebhookCreateModalOpen:i,generateNewColumnMeta:d,addOrUpdate:S,onAlter:k,onUidtOrIdTypeChange:c,validateInfos:O,isEdit:$,disableSubmitBtn:j,column:P}=Ve(),K=hl(w,"editDescription"),{getMeta:m}=ht(),{t:_}=et(),{isMetaReadOnly:D}=Ft(),F=ue(()=>w.columnLabel||_("objects.field")),{$e:z}=Cn(),{appInfo:re}=yn(),{betaFeatureToggleState:Q}=Wn(),{openedViewsTab:H}=yt(bl());Xn();const E=Ye(nt,Y()),b=Ye(hn,Y(!1)),ne=Ye(bn,Y(!1)),ce=ue(()=>w.readonly),{isMysql:de,isMssql:L,isDatabricks:v,isXcdbBase:C}=Dt(),U=Ye(wn),N=Y(!1),De=Y(!1),xe=Y(!1),ge=Y(!0),ae=ue({get:()=>(rl(t.value.cdf)&&!xe.value&&(xe.value=!0),rl(t.value.cdf)||xe.value),set:s=>{xe.value=s}}),Ce=[p.Email,p.URL,p.PhoneNumber],Qe=[p.LinkToAnotherRecord,p.Lookup,p.Rollup,p.Links,p.CreatedTime,p.LastModifiedTime,p.CreatedBy,p.LastModifiedBy,p.Formula,p.QrCode,p.Barcode,p.Button],He=Y(!1),tt=s=>re.value.ee?Q.show?Q.show:!s.name.includes(p.GeoData):!0,We=Y(!1),Pe=s=>[p.CreatedBy,p.CreatedTime,p.LastModifiedBy,p.LastModifiedTime].includes(s.name),Se=s=>{var X;const r=!Pe(s)||t.value.uidt===s.name||!$.value,Z=tt(s)&&(!$.value||!s.virtual||s.name===t.value.uidt),_e=s.name===p.SpecificDBType&&C((X=E.value)==null?void 0:X.source_id),fe=!s.deprecated||We.value;return r&&Z&&!_e&&fe},qe=ue(()=>{var r,Z;const s=[...An.filter(Se),...!$.value&&((Z=(r=E==null?void 0:E.value)==null?void 0:r.columns)!=null&&Z.every(_e=>!_e.pk))?[{name:p.ID,icon:Ri,virtual:0}]:[]];return D.value&&s.sort((_e,fe)=>{const X=dt.includes(_e.name),Le=dt.includes(fe.name);return X&&!Le?-1:!X&&Le?1:0}),s}),I=s=>{t.value.uidt=s,c()},A=async()=>{var s;await m((s=E.value)==null?void 0:s.id,!0),ne.value||U==null||U.trigger()},J=Y(!1),oe=Y(!1),T=async()=>{if(ce.value)return;J.value=!0;const s=await S(A,w.columnPosition);J.value=!1,s&&(setTimeout(()=>{N.value=!1},500),V("submit"),b.value&&z("a:form-view:add-new-field"))};async function q(){var s;if(!ce.value)if($.value&&t.value.uidt!==((s=P.value)==null?void 0:s.uidt)){oe.value=!0;const{close:r}=Yn(no,{visible:oe,"onUpdate:visible":Z=>oe.value=Z,saving:J,onSubmit:async()=>{r(),await T()}})}else await T()}const se=Y();el(()=>{se.value&&t.value&&!ce.value&&setTimeout(()=>{var s,r,Z;(document.activeElement===document.body||document.activeElement===null||["BUTTON","DIV"].includes((s=document.activeElement)==null?void 0:s.tagName))&&!w.disableTitleFocus&&((r=se.value)==null||r.focus(),(Z=se.value)==null||Z.select())},300),N.value=!1});const G=Y(!1),ie=Y(),pe=()=>{t.value.description="",G.value=!1};Ze(()=>{var s,r,Z;if(((r=(s=P.value)==null?void 0:s.description)!=null&&r.length||K.value)&&(G.value=!0),$.value?t.value.pk?(il.info(_("msg.info.editingPKnotSupported")),V("cancel")):Jt(t.value)&&!kn(t.value)&&(il.info(_("msg.info.editingSystemKeyNotSupported")),V("cancel")):d(!0),w.preload){const{colOptions:_e,...fe}=w.preload;if(t.value={...t.value,...fe},_e){const X=t.value.meta||{};c(),t.value={...t.value,colOptions:{..._e},meta:X}}}else t.value.filters=void 0;t.value&&!t.value.column_name&&!Rt(t.value)&&(t.value.column_name=(Z=t.value)==null?void 0:Z.title),Zt(()=>{var _e;De.value=!0,V("mounted"),$.value||(_e=t.value)!=null&&_e.temp_id||V("add",t.value),b.value&&!w.fromTableExplorer&&!G.value?setTimeout(()=>{var fe,X;(fe=se.value)==null||fe.focus(),(X=se.value)==null||X.select()},100):G.value&&setTimeout(()=>{var fe;(fe=ie.value)==null||fe.focus()},100)})});const Te=s=>{He.value||i.value||s.key==="Escape"&&V("cancel")},je=ue(()=>H.value==="field"),Xe=s=>{s?He.value=s:(ge.value=!0,setTimeout(()=>{He.value=s},300))},Me=()=>{ge.value&&(ge.value=!1)};w.fromTableExplorer&&Ne(t,()=>{De.value&&V("update",t.value)},{deep:!0});const Re=ue(()=>({label:`${$.value&&!w.columnLabel?_("general.update"):_("general.save")} ${F.value}`,loadingLabel:`${$.value&&!w.columnLabel?_("general.updating"):_("general.saving")} ${F.value}`})),Ke=(s,r)=>r.value.toLowerCase().includes(s.toLowerCase())||at[r.value]&&at[r.value].toLowerCase().includes(s.toLowerCase()),Oe=()=>{G.value?G.value=!1:(G.value=!0,setTimeout(()=>{var s;(s=ie.value)==null||s.focus()},100))},f=ue(()=>{var s;return!(D.value&&!dt.includes((s=t.value)==null?void 0:s.uidt)&&!lt(t.value))});return(s,r)=>{const Z=ke,_e=tl,fe=mo,X=Ie,Le=Ue,Ee=Ae,Be=La,ut=Na,bt=ja,Pt=Tl,qt=Ha,jt=Xa,Kt=Ml,zt=Ul,Gt=ss,_t=Ll,Lt=Sl,Ut=rs,W=Il,wt=Ol,Al=ks,El=Qs,Nl=Dl,Rl=ti,Bl=ai,Fl=Mn,Vl=ki,sl=pt,Pl=Bi,ql=Fi,jl=Vi,Kl=Pi,kt=Ct,zl=Jn,Gl=Zn;return e(oe)?h("",!0):(l(),g("div",{key:0,class:ye(["overflow-auto nc-scrollbar-md max-h-[max(80vh,500px)]",{"bg-white":!w.fromTableExplorer,"w-[384px]":!w.embedMode,"min-w-[500px]":e(t).uidt===e(p).LinkToAnotherRecord||e(t).uidt===e(p).Links,"!w-[600px]":e(t).uidt===e(p).LinkToAnotherRecord||e(t).uidt===e(p).Links,"min-w-[422px] !w-full":e(Rt)(e(t).uidt),"shadow-lg shadow-gray-300 border-1 border-gray-200 rounded-xl p-5":!s.embedMode}]),onKeydown:Te,onClick:r[38]||(r[38]=$e(()=>{},["stop"]))},[o(Gl,{modelValue:e(t),"onUpdate:modelValue":r[37]||(r[37]=At=>le(t)?t.value=At:null),"no-style":"",name:"column-create-or-edit",layout:"vertical","data-testid":"add-or-edit-column",class:"flex flex-col gap-4"},{default:n(()=>{var At;return[e(je)?(l(),u(Z,be({key:0},e(O).title,{class:"flex flex-grow"}),{default:n(()=>[a("div",qi,[$t(a("input",{ref_key:"antInput",ref:se,"onUpdate:modelValue":r[0]||(r[0]=R=>e(t).title=R),disabled:e(ce)||!e(f),placeholder:`${s.$t("objects.field")} ${s.$t("general.name").toLowerCase()} ${e($)?"":s.$t("labels.optional")}`,class:"flex flex-grow nc-fields-input text-sm font-semibold outline-none bg-inherit min-h-6",contenteditable:!0,onInput:r[1]||(r[1]=R=>e(t).userHasChangedTitle=!0)},null,40,ji),[[xn,e(t).title]])])]),_:1},16)):h("",!0),!w.hideTitle&&!e(je)?(l(),u(Z,be({key:1},e(O).title,{required:!1,class:"!mb-0"}),{default:n(()=>[o(_e,{ref_key:"antInput",ref:se,value:e(t).title,"onUpdate:value":r[2]||(r[2]=R=>e(t).title=R),class:"nc-column-name-input !rounded-lg",placeholder:`${s.$t("objects.field")} ${s.$t("general.name").toLowerCase()} ${e($)?"":s.$t("labels.optional")}`,disabled:e(ne)||e(ce)||!e(f),onInput:r[3]||(r[3]=R=>e(k)(8))},null,8,["value","placeholder","disabled"])]),_:1},16)):h("",!0),a("div",Ki,[!w.hideType&&!e(t).uidt?(l(),u(fe,{key:0,options:e(qe),onSelected:I},null,8,["options"])):w.hideType?h("",!0):(l(),u(Z,{key:1,class:"flex-1",onKeydown:[vt($e(Me,["stop"]),["up"]),vt($e(Me,["stop"]),["down"])]},{default:n(()=>{var R;return[o(Ee,{value:e(t).uidt,"onUpdate:value":r[4]||(r[4]=Fe=>e(t).uidt=Fe),"show-search":"",class:"nc-column-type-input !rounded-lg",disabled:e($)&&e(D)&&!e(dt).includes(e(t).uidt)||e(ne)||e(ce)||e($)&&!!Qe.includes((R=e(P))==null?void 0:R.uidt)||e($)&&!e(f),"dropdown-class-name":"nc-dropdown-column-type border-1 !rounded-lg border-gray-200","filter-option":Ke,onDropdownVisibleChange:Xe,onChange:e(c),onDblclick:r[5]||(r[5]=Fe=>We.value=!e(We))},{suffixIcon:n(()=>[o(X,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),g(ee,null,me(e(qe),Fe=>(l(),u(Le,be({key:Fe.name,value:Fe.name,disabled:e(D)&&!e(dt).includes(Fe.name),ref_for:!0},e(O).uidt,{class:{"ant-select-item-option-active-selected":e(ge)&&e(t).uidt===Fe.name},onMouseover:Me}),{default:n(()=>[a("div",{class:"w-full flex gap-2 items-center justify-between","data-testid":Fe.name},[a("div",Gi,[(l(),u(te(Fe.icon),{class:ye(["w-4 h-4",e(D)&&!e(dt).includes(Fe.name)?"text-gray-300":"text-gray-700"])},null,8,["class"])),a("div",Hi,x(e(at)[Fe.name]),1),Fe.deprecated?(l(),g("span",Wi,"("+x(s.$t("general.deprecated"))+")",1)):h("",!0)]),e(t).uidt===Fe.name?(l(),u(te(("iconMap"in s?s.iconMap:e(ve)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)],8,zi)]),_:2},1040,["value","disabled","class"]))),128))]),_:1},8,["value","disabled","onChange"])]}),_:1},8,["onKeydown"]))]),!e(ce)&&e(t).uidt?(l(),g(ee,{key:2},[e(t).uidt===e(p).Formula?(l(),u(Be,{key:0,value:e(t),"onUpdate:value":r[6]||(r[6]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).QrCode?(l(),u(ut,{key:1,modelValue:e(t),"onUpdate:modelValue":r[7]||(r[7]=R=>le(t)?t.value=R:null)},null,8,["modelValue"])):h("",!0),e(t).uidt===e(p).Barcode?(l(),u(bt,{key:2,modelValue:e(t),"onUpdate:modelValue":r[8]||(r[8]=R=>le(t)?t.value=R:null)},null,8,["modelValue"])):h("",!0),e(t).uidt===e(p).Currency?(l(),u(Pt,{key:3,value:e(t),"onUpdate:value":r[9]||(r[9]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).LongText?(l(),u(qt,{key:4,value:e(t),"onUpdate:value":r[10]||(r[10]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).Duration?(l(),u(jt,{key:5,value:e(t),"onUpdate:value":r[11]||(r[11]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).Rating?(l(),u(Kt,{key:6,value:e(t),"onUpdate:value":r[12]||(r[12]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).Checkbox?(l(),u(zt,{key:7,value:e(t),"onUpdate:value":r[13]||(r[13]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).Lookup?(l(),u(Gt,{key:8,value:e(t),"onUpdate:value":r[14]||(r[14]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).Date?(l(),u(_t,{key:9,value:e(t),"onUpdate:value":r[15]||(r[15]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).Time?(l(),u(Lt,{key:10,value:e(t),"onUpdate:value":r[16]||(r[16]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).Number?(l(),u(Ut,{key:11,value:e(t),"onUpdate:value":r[17]||(r[17]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).Decimal?(l(),u(W,{key:12,value:e(t),"onUpdate:value":r[18]||(r[18]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),[e(p).DateTime,e(p).CreatedTime,e(p).LastModifiedTime].includes(e(t).uidt)?(l(),u(wt,{key:13,value:e(t),"onUpdate:value":r[19]||(r[19]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).Rollup?(l(),u(Al,{key:14,value:e(t),"onUpdate:value":r[20]||(r[20]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).LinkToAnotherRecord||e(t).uidt===e(p).Links?(l(),u(El,{key:`${e(t).uidt}-${e(t).id||"new"}`,value:e(t),"onUpdate:value":r[21]||(r[21]=R=>le(t)?t.value=R:null),"is-edit":e($)},null,8,["value","is-edit"])):h("",!0),e(t).uidt===e(p).Percent?(l(),u(Nl,{key:16,value:e(t),"onUpdate:value":r[22]||(r[22]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt===e(p).SpecificDBType?(l(),u(Rl,{key:17})):h("",!0),e(t).uidt===e(p).User?(l(),u(Bl,{key:18,value:e(t),"onUpdate:value":r[23]||(r[23]=R=>le(t)?t.value=R:null),"is-edit":e($)},null,8,["value","is-edit"])):h("",!0),e(t).uidt===e(p).SingleSelect||e(t).uidt===e(p).MultiSelect?(l(),u(Fl,{key:19,value:e(t),"onUpdate:value":r[24]||(r[24]=R=>le(t)?t.value=R:null),"from-table-explorer":w.fromTableExplorer||!1},null,8,["value","from-table-explorer"])):h("",!0),e(t).uidt===e(p).Button?(l(),u(Vl,{key:20,value:e(t),"onUpdate:value":r[25]||(r[25]=R=>le(t)?t.value=R:null),"from-table-explorer":w.fromTableExplorer||!1},null,8,["value","from-table-explorer"])):h("",!0)],64)):h("",!0),e(t).uidt?(l(),g(ee,{key:3},[e(t).meta&&Ce.includes(e(t).uidt)?(l(),g("div",Xi,[o(sl,{checked:e(t).meta.validate,"onUpdate:checked":r[26]||(r[26]=R=>e(t).meta.validate=R),size:"small",class:"nc-switch"},{default:n(()=>[a("div",Yi,x(`${s.$t("msg.acceptOnlyValid",{type:e(t).uidt===e(p).URL?`${e(at)[e(t).uidt]}s`:`${e(at)[e(t).uidt]}s`.toLowerCase()})}`),1)]),_:1},8,["checked"])])):h("",!0),!e(ce)&&e(f)?(l(),g(ee,{key:1},[a("div",Qi,[("isTextArea"in s?s.isTextArea:e(ml))(e(t))&&((At=e(t).meta)!=null&&At.richMode)?(l(),u(Pl,{key:0,value:e(t),"onUpdate:value":r[27]||(r[27]=R=>le(t)?t.value=R:null),"is-visible-default-value-input":e(ae),"onUpdate:isVisibleDefaultValueInput":r[28]||(r[28]=R=>le(ae)?ae.value=R:null)},null,8,["value","is-visible-default-value-input"])):!e(lt)(e(t))&&!("isAttachment"in s?s.isAttachment:e(Xt))(e(t))&&!e(L)(e(E).source_id)&&!(e(de)(e(E).source_id)&&(("isJSON"in s?s.isJSON:e(Qn))(e(t))||("isTextArea"in s?s.isTextArea:e(ml))(e(t))))&&!(e(v)(e(E).source_id)&&e(t).unique)?(l(),u(ql,{key:1,value:e(t),"onUpdate:value":r[29]||(r[29]=R=>le(t)?t.value=R:null),"is-visible-default-value-input":e(ae),"onUpdate:isVisibleDefaultValueInput":r[30]||(r[30]=R=>le(ae)?ae.value=R:null)},null,8,["value","is-visible-default-value-input"])):h("",!0),e(v)(e(E).source_id)&&!e(t).cdf&&![e(p).MultiSelect,e(p).Checkbox,e(p).Rating,e(p).Attachment,e(p).Lookup,e(p).Rollup,e(p).Formula,e(p).Barcode,e(p).QrCode,e(p).CreatedTime,e(p).LastModifiedTime,e(p).CreatedBy,e(p).LastModifiedBy].includes(e(t).uidt)?(l(),g("div",Zi,[o(sl,{checked:e(t).unique,"onUpdate:checked":r[31]||(r[31]=R=>e(t).unique=R),size:"small",class:"nc-switch"},{default:n(()=>r[39]||(r[39]=[a("div",{class:"text-sm text-gray-800"},"Set as Unique",-1)])),_:1},8,["checked"])])):h("",!0)]),!w.hideAdditionalOptions&&!e(lt)(e(t).uidt)&&!(!e(re).ee&&("isAttachment"in s?s.isAttachment:e(Xt))(e(t)))&&(!e(re).ee||e(re).ee&&!e(C)(e(E).source_id)&&e(t).uidt===e(p).SpecificDBType)?(l(),g("div",Ji,[a("div",{class:"nc-more-options flex items-center gap-1 cursor-pointer select-none",onClick:r[32]||(r[32]=R=>N.value=!e(N))},[B(x(e(N)?s.$t("general.hideAll"):s.$t("general.showMore"))+" ",1),(l(),u(te(e(N)?e(Li):e(Ii))))])])):h("",!0),o($n,{name:"layout",mode:"out-in"},{default:n(()=>[e(N)?(l(),g("div",eu,[e(re).ee&&("isAttachment"in s?s.isAttachment:e(Xt))(e(t))?(l(),u(jl,{key:0,value:e(t),"onUpdate:value":r[33]||(r[33]=R=>le(t)?t.value=R:null)},null,8,["value"])):h("",!0),e(t).uidt!==e(p).Attachment?(l(),u(Kl,{key:1,value:e(t),"onUpdate:value":r[34]||(r[34]=R=>le(t)?t.value=R:null),"advanced-db-options":e(N)||e(t).uidt===e(p).SpecificDBType},null,8,["value","advanced-db-options"])):h("",!0)])):h("",!0)]),_:1})],64)):h("",!0),e(G)?(l(),u(Z,{key:2},{default:n(()=>[a("div",tu,[a("span",lu,x(s.$t("labels.description")),1),o(kt,{type:"text",class:"!h-6 !w-5",size:"xsmall",onClick:pe},{default:n(()=>[o(X,{icon:"delete",class:"text-gray-700 w-3.5 h-3.5"})]),_:1})]),o(zl,{ref_key:"descInputEl",ref:ie,value:e(t).description,"onUpdate:value":r[35]||(r[35]=R=>e(t).description=R),class:ye([{"!min-h-[200px]":s.fromTableExplorer,"h-[150px] !min-h-[100px]":!s.fromTableExplorer},"nc-input-sm nc-input-text-area nc-input-shadow !text-gray-800 px-3 !max-h-[300px]"]),"hide-details":"","data-testid":"create-field-description-input",placeholder:s.$t("msg.info.enterFieldDescription")},null,8,["value","class","placeholder"])]),_:1})):h("",!0),w.fromTableExplorer?(l(),u(Z,{key:3},{default:n(()=>[e(G)?h("",!0):(l(),u(kt,{key:0,size:"small",type:"text",onClick:$e(Oe,["stop"])},{default:n(()=>[a("div",nu,[o(X,{icon:"plus",class:"h-4 w-4"}),a("span",ou,x(s.$t("labels.addDescription").toLowerCase()),1)])]),_:1}))]),_:1})):(l(),g("div",au,[e(G)?(l(),g("div",uu)):(l(),u(kt,{key:0,size:"small",type:"text",onClick:$e(Oe,["stop"])},{default:n(()=>[a("div",su,[o(X,{icon:"plus",class:"h-4 w-4"}),a("span",iu,x(s.$t("labels.addDescription").toLowerCase()),1)])]),_:1})),o(Z,null,{default:n(()=>[a("div",{class:ye(["flex gap-x-2 justify-end",{"justify-end":!w.embedMode}])},[o(kt,{size:"small","html-type":"button",type:"secondary",onClick:r[36]||(r[36]=R=>V("cancel"))},{default:n(()=>[B(x(s.$t("general.cancel")),1)]),_:1}),o(kt,{"html-type":"submit",type:"primary",loading:e(J),disabled:!e(t).uidt||e(j),size:"small",label:e(Re).label,"loading-label":e(Re).loadingLabel,"data-testid":"nc-field-modal-submit-btn",onClick:$e(q,["prevent"])},{loading:n(()=>[B(x(e(Re).loadingLabel),1)]),default:n(()=>[B(x(e(Re).label)+" ",1)]),_:1},8,["loading","disabled","label","loading-label"])],2)]),_:1})]))],64)):h("",!0)]}),_:1},8,["modelValue"])],34))}}}),cu=ze(ru,[["__scopeId","data-v-0644c78a"]]),zu=he({__name:"EditOrAddProvider",props:{column:{},columnPosition:{},preload:{},tableExplorerColumns:{},editDescription:{type:Boolean},fromTableExplorer:{type:Boolean},isColumnValid:{type:Function},disableTitleFocus:{type:Boolean}},emits:["submit","cancel","mounted"],setup(y,{expose:M,emit:w}){const V=y,t=w,i=Ye(nt,Y()),{column:d,preload:S,tableExplorerColumns:k,fromTableExplorer:c,isColumnValid:O,editDescription:$}=Bt(V);Sn(i,d,k,c,O);const{isWebhookCreateModalOpen:j}=Ve();return M({isWebHookModalOpen:()=>j.value}),(K,m)=>{const _=cu;return l(),u(_,{preload:e(S),"column-position":V.columnPosition,"edit-description":e($),"from-table-explorer":V.fromTableExplorer||!1,"disable-title-focus":K.disableTitleFocus,onSubmit:m[0]||(m[0]=D=>t("submit")),onCancel:m[1]||(m[1]=D=>t("cancel")),onMounted:m[2]||(m[2]=D=>t("mounted"))},null,8,["preload","column-position","edit-description","from-table-explorer","disable-title-focus"])}}});export{zu as _,Ge as c};
