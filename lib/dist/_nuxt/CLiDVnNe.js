import{f as W,bL as Z,d0 as v,ai as l,cP as V,ab as tt,at as A,cB as B,au as rt,r as st,g as nt,o as it,c as et,t as at,P as ut,T as ft,hz as ct,hA as ot,d4 as d,ce as a,cf as pt,cg as _t,_ as dt}from"./nEPQs079.js";import{c as mt}from"./C9Sjn86N.js";import{f as gt,k as yt,j as kt,F as bt,d as Dt,m as Nt,e as Yt,n as St,t as ht,u as At,s as Bt,w as Mt,p as Tt,x as $t,c as Ct,i as jt}from"./C3R8onno.js";import{a as Ut,i as Ot,l as Ft,f as Lt}from"./BQDKbNwe.js";const Pt=W({__name:"PlainCell",props:{column:{},modelValue:{},bold:{type:[Number,Boolean,null]},italic:{type:[Number,Boolean,null]},underline:{type:[Number,Boolean,null]}},setup(M){var S,h;const T=M,e=Z(v),{t:k}=l(),{metas:b}=V(),m=tt(T,"column"),{sqlUis:D}=A(B()),$=rt(),{basesUser:C}=A($),{isXcdbBase:j,isMssql:U,isMysql:O}=B(),F=st((S=m.value)!=null&&S.source_id?D.value[(h=m.value)==null?void 0:h.source_id]:Object.values(D.value)[0]),p=nt(()=>m.value&&F.value.getAbstractType(m.value)),L=t=>!!t&&t!=="0"&&t!==0&&t!=="false",P=(t,r)=>t?t?Array.isArray(t)?t.join(", "):t.toString():O(r.source_id)?t.toString().split(",").join(", "):t.split(", "):"",N=(t,r,s)=>{var i;const n=s?"YYYY-MM-DD HH:mm:ss":((i=d(r.meta))==null?void 0:i.date_format)??"YYYY-MM-DD";return!t||!a(t).isValid()?"":a(/^\d+$/.test(String(t))?+t:t).format(n)},R=t=>t&&a(t).isValid()?a(t.toString(),"YYYY").format("YYYY"):"",H=(t,r)=>{var c,u;if(!t||!a(t).isValid())return"";const s=((c=d(r==null?void 0:r.meta))==null?void 0:c.date_format)??pt[0],n=((u=d(r==null?void 0:r.meta))==null?void 0:u.time_format)??_t[0],i=`${s} ${n}`;return j(r.source_id)?U(r.source_id)?a(t,i).format(i):a(t).utc().local().format(i):a(/^\d+$/.test(t)?+t:t,i).format(i)},I=t=>{if(!t)return"";let r=a(t);return r.isValid()||(r=a(t,"HH:mm:ss")),r.isValid()||(r=a(`1999-01-01 ${t}`)),r.isValid()?r.format("HH:mm"):""},x=(t,r)=>{var n;const s=((n=d(r.meta))==null?void 0:n.duration)||0;return mt(t,s)},q=t=>t?`${t}%`:"",J=(t,r)=>{const s={currency_locale:"en-US",currency_code:"USD",...d(r.meta)};try{return t==null||isNaN(t)?t??"":new Intl.NumberFormat(s.currency_locale||"en-US",{style:"currency",currency:s.currency_code||"USD"}).format(+t)}catch{return t}},Y=t=>{if(!t)return"";const r=e!=null&&e.value.base_id?C.value.get(e==null?void 0:e.value.base_id)||[]:[];return typeof t=="string"?t.split(",").map(n=>{const i=r.find(f=>f.id===n||f.email===n);return i?i.display_name||i.email:n.id}).join(", "):Array.isArray(t)?t.map(s=>{const n=r.find(i=>i.id===s.id||i.email===s.email);return n?n.display_name||n.email:s.id}).join(", "):t?t.display_name||t.email:""},X=(t,r)=>{if(!t||isNaN(Number(t)))return"";const s=d(r.meta);return Number(t).toFixed((s==null?void 0:s.precision)??1)},w=t=>!t||isNaN(Number(t))?"":Number(t),z=(t,r)=>{var n;return(typeof r.meta=="string"?JSON.parse(r.meta).richMode:(n=r.meta)==null?void 0:n.richMode)?(t==null?void 0:t.replace(/[*_~\[\]]|<\/?[^>]+(>|$)/g,""))||"":t||""},E=(t,r)=>{var i,f,c;const s=r.colOptions;if(["count","avg","sum","countDistinct","sumDistinct","avgDistinct"].includes(s.rollup_function))return t;{const u=s.fk_relation_column_id?(f=(i=e==null?void 0:e.value.columns)==null?void 0:i.find(y=>y.id===s.fk_relation_column_id))==null?void 0:f.colOptions:null,_=(u==null?void 0:u.fk_related_model_id)&&((c=b.value)==null?void 0:c[u.fk_related_model_id]),o=_==null?void 0:_.columns.find(y=>y.id===s.fk_rollup_column_id);return g(t,o)}},G=(t,r)=>{var c,u,_;const s=r.colOptions,n=s.fk_relation_column_id?(u=(c=e==null?void 0:e.value.columns)==null?void 0:c.find(o=>o.id===s.fk_relation_column_id))==null?void 0:u.colOptions:null,i=(n==null?void 0:n.fk_related_model_id)&&((_=b.value)==null?void 0:_[n.fk_related_model_id]),f=i==null?void 0:i.columns.find(o=>o.id===s.fk_lookup_column_id);return Array.isArray(t)?t.map(o=>g(o,f)).join(", "):g(t,f)},K=t=>Array.isArray(t)?t.map(r=>`${r.title}`).join(", "):t,Q=(t,r)=>{var n,i;typeof r.meta=="string"&&(r.meta=JSON.parse(r.meta));const s=+t||0;return s?s===1?`1 ${((n=r==null?void 0:r.meta)==null?void 0:n.singular)||k("general.link")}`:`${s} ${((i=r==null?void 0:r.meta)==null?void 0:i.plural)||k("general.links")}`:""},g=(t,r)=>{if(!r)return"";if(gt(r)){const[s,n]=(t||"").split(";");return s&&n?`${s}; ${n}`:t}return yt(r)?z(t,r):kt(r,p)?L(t)?"Checked":"Unchecked":bt(r)?P(t,r):Dt(r,p)?N(t,r):Nt(r,p)?R(t):Yt(r,p)?H(t,r):St(r,p)?I(t):ht(r)?x(t,r):At(r)?q(t):Bt(r)?J(t,r):Mt(r)?Y(t):Tt(r)?X(t,r):$t(r,p)?w(t):Ct(r)?JSON.stringify(t,null,2):Ut(r)?E(t,r):Ot(r)||Ft(r.uidt,r.colOptions)?G(t,r):ct(r)?N(t,r,!0):ot(r)?Y(t):jt(r)?K(t):Lt(r)?Q(t,r):t};return(t,r)=>(it(),et("span",{class:ft(["plain-cell before:px-1",{"!font-bold":t.bold,italic:t.italic,underline:t.underline}]),"data-testid":"nc-plain-cell"},at(g(t.modelValue,ut(m))),3))}}),qt=dt(Pt,[["__scopeId","data-v-be7d94df"]]);export{qt as default};
