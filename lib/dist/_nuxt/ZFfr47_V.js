import{e as B,L as T,bL as p,g2 as h,r as u,aC as z,h_ as L,hK as W,ab as G,ha as J,aD as U,f as S,dc as H,o as y,c as b,N as s,P as Q,fm as X,O as Y,aJ as i,W as a,t as g,b as Z,S as ee,a$ as oe,_ as se}from"./DZZ6t_j4.js";import{_ as te}from"./CmWcz5yS.js";import"./CB1aB6F1.js";const le=["tabindex"],ne=["type","placeholder"],ae={key:1,class:"nc-cell-field nc-null uppercase"},re={key:2,class:"px-2"},ue={key:3,class:"nc-cell-field"},ce=B({__name:"Percent",props:{modelValue:{},placeholder:{}},emits:["update:modelValue"],setup(N,{emit:k}){const M=N,q=k,{showNull:C}=T(),j=p(h),d=p(z,u(!1)),w=p(L,u(!1)),F=p(W,u(!1)),r=G(M,"modelValue",q),x=u(),f=p(J,u(!1)),v=p(U),V=o=>!f.value&&!w.value&&!v.value&&(o==null?void 0:o.focus()),m=u(!1),c=u(!1),t=S({get:()=>v.value&&!w.value&&r.value&&!m.value&&!isNaN(Number(r.value))?`${r.value}%`:r.value,set:o=>{o===""?r.value=null:v.value&&!w.value?r.value=isNaN(Number(o))?o:Number(o):r.value=o}}),E=S(()=>{var o;return{is_progress:!1,...H((o=j.value)==null?void 0:o.meta)}}),D=S(()=>v.value&&!w.value?"text":"number"),P=()=>{d&&(d.value=!1),m.value=!1,c.value=!1},$=()=>{m.value=!0,d.value=!0,c.value=!0},K=()=>{m.value=!0,d.value=!0,c.value=!0,oe(()=>{var o,e,l,n;(e=(o=x.value)==null?void 0:o.querySelector("input"))==null||e.focus(),(n=(l=x.value)==null?void 0:l.querySelector("input"))==null||n.select()})},O=()=>{c.value=!0},R=()=>{m.value||(c.value=!1)},A=o=>{if(o.shiftKey&&(f.value||v.value)){o.preventDefault();const e=Array.from(document.querySelectorAll(`${f.value?".nc-expanded-form-row":".nc-form-wrapper"} .nc-data-cell`)).findIndex(l=>l.querySelector(".nc-filter-value-select")===x.value);if(e>=0){const l=document.querySelectorAll(`${f.value?".nc-expanded-form-row":".nc-form-wrapper"} .nc-data-cell`);for(let n=e-1;n>=0;n--){const _=l[n],I=_.querySelector('[tabindex="0"]')??_.querySelector("input")??_.querySelector("textarea")??_.querySelector("button");if(I){I.focus();break}}}}};return(o,e)=>{const l=te;return y(),b("div",{ref_key:"wrapperRef",ref:x,tabindex:s(F)?-1:0,class:ee(["nc-filter-value-select w-full focus:outline-transparent",s(F)?"cursor-not-allowed pointer-events-none":""]),onMouseover:O,onMouseleave:R,onFocus:K},[!s(F)&&s(d)&&(!s(f)||s(c)||!s(E).is_progress)?Q((y(),b("input",{key:0,ref:V,"onUpdate:modelValue":e[0]||(e[0]=n=>Y(t)?t.value=n:null),class:"nc-cell-field w-full !border-none !outline-none focus:ring-0 py-1",type:s(D),placeholder:o.placeholder,onBlur:P,onFocus:$,onKeydown:[e[1]||(e[1]=i(a(()=>{},["stop"]),["down"])),e[2]||(e[2]=i(a(()=>{},["stop"]),["left"])),e[3]||(e[3]=i(a(()=>{},["stop"]),["right"])),e[4]||(e[4]=i(a(()=>{},["stop"]),["up"])),e[5]||(e[5]=i(a(()=>{},["stop"]),["delete"])),i(A,["tab"]),e[6]||(e[6]=a(()=>{},["alt","stop"]))],onSelectstartCapture:e[7]||(e[7]=a(()=>{},["stop"])),onMousedown:e[8]||(e[8]=a(()=>{},["stop"]))},null,40,ne)),[[X,s(t)]]):s(t)===null&&s(C)?(y(),b("span",ae,g(o.$t("general.null")),1)):s(E).is_progress===!0&&s(t)!==null&&s(t)!==void 0?(y(),b("div",re,[Z(l,{percent:Number(parseFloat(s(t).toString()).toFixed(2)),size:"small",status:"normal","stroke-color":"#3366FF","trail-color":"#E5E5E5","show-info":!1},null,8,["percent"])])):(y(),b("span",ue,g(s(t))+" "+g(s(t)?"":"Â "),1))],42,le)}}}),fe=se(ce,[["__scopeId","data-v-6e04843c"]]);export{fe as default};
