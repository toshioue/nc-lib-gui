const __vite__fileDeps=["./CjzcE-AP.js","./DKhUGBot.js","./entry.B8GgT5QA.css","./lyxpGZoZ.js","./DFT4Rrrq.js","./VirtualCell.CZh3Dt_h.css","./THlkrJVo.js","./DrSobHNn.js","./DGy9VVU7.js","./DO1hNe_j.js","./boyBAVNN.js","./Ce4Hnuew.js","./Cell.DV_4HH8i.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as $,cP as Y,bL as k,r as m,fG as Z,d0 as B,hw as q,hY as J,hr as H,av as _,g as w,H as P,cU as n,fH as g,is as K,hV as Q,o as a,c as r,a as j,P as e,al as b,fF as X,am as x,U as O,b as ee,T as A,t as R,S as I,a8 as le,Z as M,a5 as U}from"./DKhUGBot.js";import{i as d,G as F}from"./DFT4Rrrq.js";import{u as te}from"./BUpgiGSk.js";import"./BIe2oNDw.js";const ae=M(()=>U(()=>import("./CjzcE-AP.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(p=>p.default||p)),ne=M(()=>U(()=>import("./THlkrJVo.js"),__vite__mapDeps([6,1,2,7,8,9,3,10,11,4,12]),import.meta.url).then(p=>p.default||p)),oe={key:0,class:"flex h-full"},ie={key:0},se={key:0,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},ue={key:1,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},fe=$({__name:"Lookup",setup(p){const{metas:L,getMeta:z}=Y(),S=k(Z,m()),N=k(B,m()),v=k(q,m()),D=k(J,m(!1)),E=m(1),o=k(H,m(1));_(H,E);const y=w(()=>{var l,i,s,c;return(l=N.value)!=null&&l.id?(c=(s=L.value[(i=N.value)==null?void 0:i.id])==null?void 0:s.columns)==null?void 0:c.find(u=>{var h,V;return u.id===((V=(h=S.value)==null?void 0:h.colOptions)==null?void 0:V.fk_relation_column_id)}):void 0});P(y,async l=>{l&&l.colOptions&&await z(l.colOptions.fk_related_model_id)},{immediate:!0});const C=w(()=>{var l;if(y.value&&((l=y.value)!=null&&l.colOptions))return L.value[y.value.colOptions.fk_related_model_id]}),t=w(()=>{var l,i;return(i=(l=C.value)==null?void 0:l.columns)==null?void 0:i.find(s=>{var c,u;return s.id===((u=(c=S.value)==null?void 0:c.colOptions)==null?void 0:u.fk_lookup_column_id)})});P([t,o],()=>{t.value&&!d(t.value)?E.value=1:E.value=o.value});const f=w(()=>{var l,i,s;return v.value?((l=t.value)==null?void 0:l.uidt)===n.Attachment&&[g.BELONGS_TO,g.ONE_TO_ONE].includes((s=(i=y.value)==null?void 0:i.colOptions)==null?void 0:s.type)?[v.value]:Array.isArray(v.value)?v.value.filter(c=>c!==null):[v.value]:[]});_(B,C),_(K,m(!0)),_(Q,m(!0));const{showEditNonEditableFieldWarning:G,showClearNonEditableFieldWarning:W,activateShowEditNonEditableFieldWarning:T}=te();return(l,i)=>{const s=ae,c=ne;return a(),r("div",{class:"nc-cell-field h-full w-full nc-lookup-cell",tabindex:"-1",style:le({height:e(D)||e(t)&&("isAttachment"in l?l.isAttachment:e(d))(e(t))?void 0:e(o)?`${e(o)===1?("rowHeightInPx"in l?l.rowHeightInPx:e(F))[1]-4:("rowHeightInPx"in l?l.rowHeightInPx:e(F))[`${e(o)}`]-18}px`:"2.85rem"}),onDblclick:i[0]||(i[0]=(...u)=>e(T)&&e(T)(...u))},[j("div",{class:A(["h-full w-full flex gap-1",{"!overflow-x-auto nc-cell-lookup-scroll nc-scrollbar-x-md !overflow-y-hidden":e(o)===1}])},[e(t)?(a(),r(b,{key:0},[e(X)(e(t))&&e(t).uidt!==e(n).Rollup?(a(),r("div",oe,[e(t).uidt!==e(n).LinkToAnotherRecord||e(t).uidt===e(n).LinkToAnotherRecord&&[e(g).BELONGS_TO,e(g).ONE_TO_ONE].includes(e(t).colOptions.type)?(a(!0),r(b,{key:0},x(e(f),(u,h)=>(a(),O(s,{key:h,"edit-enabled":!1,"model-value":u,column:e(t),"read-only":!0},null,8,["model-value","column"]))),128)):(a(),O(s,{key:1,"edit-enabled":!1,"read-only":!0,"model-value":e(f),column:e(t)},null,8,["model-value","column"]))])):(a(),r(b,{key:1},[("isAttachment"in l?l.isAttachment:e(d))(e(t))&&e(f)[0]&&!Array.isArray(e(f)[0])&&typeof e(f)[0]=="object"?(a(),r("div",ie,[ee(c,{"model-value":e(f),column:e(t),"edit-enabled":!1,"read-only":!0},null,8,["model-value","column"])])):(a(),r("div",{key:1,class:A(["max-h-full max-w-full w-full nc-cell-lookup-scroll",{"nc-scrollbar-md ":e(o)!==1&&!("isAttachment"in l?l.isAttachment:e(d))(e(t))}])},[j("div",{class:A(["flex gap-1.5 w-full h-full py-[3px]",{"flex-wrap":e(o)!==1&&!("isAttachment"in l?l.isAttachment:e(d))(e(t)),"!overflow-x-auto nc-cell-lookup-scroll nc-scrollbar-x-md !overflow-y-hidden":e(o)===1||("isAttachment"in l?l.isAttachment:e(d))(e(t)),"items-center":e(o)===1,"items-start":e(o)!==1}])},[(a(!0),r(b,null,x(e(f),(u,h)=>(a(),r("div",{key:h,class:A(["flex-none",{"bg-gray-100 rounded-full":!("isAttachment"in l?l.isAttachment:e(d))(e(t)),"border-gray-200 rounded border-1":![e(n).Attachment,e(n).MultiSelect,e(n).SingleSelect,e(n).User,e(n).CreatedBy,e(n).LastModifiedBy].includes(e(t).uidt),"min-h-0 min-w-0":("isAttachment"in l?l.isAttachment:e(d))(e(t))}])},[e(t).uidt===e(n).Rollup?(a(),O(s,{key:0,"edit-enabled":!1,"read-only":!0,"model-value":u,column:e(t),class:"px-2"},null,8,["model-value","column"])):(a(),O(c,{key:1,"model-value":u,column:e(t),"edit-enabled":!1,virtual:!0,"read-only":!0,class:A([`${[e(n).MultiSelect,e(n).SingleSelect,e(n).User].includes(e(t).uidt)?"pl-2":("isAttachment"in l?l.isAttachment:e(d))(e(t))?"":"px-2"}`,{"min-h-0 min-w-0":("isAttachment"in l?l.isAttachment:e(d))(e(t)),"!w-auto ":!("isAttachment"in l?l.isAttachment:e(d))(e(t))}])},null,8,["model-value","column","class"]))],2))),128))],2),e(G)?(a(),r("div",se,R(l.$t("msg.info.computedFieldEditWarning")),1)):I("",!0),e(W)?(a(),r("div",ue,R(l.$t("msg.info.computedFieldDeleteWarning")),1)):I("",!0)],2))],64))],64)):I("",!0)],2)],36)}}});export{fe as default};
