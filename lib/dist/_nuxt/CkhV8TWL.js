import{f as A,N as B,bL as p,fH as K,r,ay as O,hp as G,hf as H,ac as L,gx as Q,az as U,g,d4 as W,o as y,c as b,P as s,R as Y,fe as J,Q as X,aF as i,Y as u,t as E,b as Z,T as ee,a_ as oe,_ as se}from"./BLdk6lRf.js";import{_ as te}from"./CpASSaD_.js";import"./DTv03lbO.js";const le=["tabindex"],ne=["type","placeholder"],ae={key:1,class:"nc-cell-field nc-null uppercase"},re={key:2,class:"px-2"},ue={key:3,class:"nc-cell-field"},ce=A({__name:"Percent",props:{modelValue:{},placeholder:{}},emits:["update:modelValue"],setup(S,{emit:k}){const M=S,q=k,{showNull:j}=B(),C=p(K),d=p(O,r(!1)),w=p(G,r(!1)),F=p(H,r(!1)),a=L(M,"modelValue",q),x=r(),f=p(Q,r(!1)),v=p(U),V=o=>!f.value&&!w.value&&!v.value&&(o==null?void 0:o.focus()),m=r(!1),c=r(!1),t=g({get:()=>v.value&&!w.value&&a.value&&!m.value&&!isNaN(Number(a.value))?`${a.value}%`:a.value,set:o=>{o===""?a.value=null:v.value&&!w.value?a.value=isNaN(Number(o))?o:Number(o):a.value=o}}),I=g(()=>{var o;return{is_progress:!1,...W((o=C.value)==null?void 0:o.meta)}}),P=g(()=>v.value&&!w.value?"text":"number"),R=()=>{d&&(d.value=!1),m.value=!1,c.value=!1},D=()=>{m.value=!0,d.value=!0,c.value=!0},T=()=>{m.value=!0,d.value=!0,c.value=!0,oe(()=>{var o,e,l,n;(e=(o=x.value)==null?void 0:o.querySelector("input"))==null||e.focus(),(n=(l=x.value)==null?void 0:l.querySelector("input"))==null||n.select()})},$=()=>{c.value=!0},h=()=>{m.value||(c.value=!1)},z=o=>{if(o.shiftKey&&(f.value||v.value)){o.preventDefault();const e=Array.from(document.querySelectorAll(`${f.value?".nc-expanded-form-row":".nc-form-wrapper"} .nc-data-cell`)).findIndex(l=>l.querySelector(".nc-filter-value-select")===x.value);if(e>=0){const l=document.querySelectorAll(`${f.value?".nc-expanded-form-row":".nc-form-wrapper"} .nc-data-cell`);for(let n=e-1;n>=0;n--){const _=l[n],N=_.querySelector('[tabindex="0"]')??_.querySelector("input")??_.querySelector("textarea")??_.querySelector("button");if(N){N.focus();break}}}}};return(o,e)=>{const l=te;return y(),b("div",{ref_key:"wrapperRef",ref:x,tabindex:s(F)?-1:0,class:ee(["nc-filter-value-select w-full focus:outline-transparent",s(F)?"cursor-not-allowed pointer-events-none":""]),onMouseover:$,onMouseleave:h,onFocus:T},[!s(F)&&s(d)&&(!s(f)||s(c)||!s(I).is_progress)?Y((y(),b("input",{key:0,ref:V,"onUpdate:modelValue":e[0]||(e[0]=n=>X(t)?t.value=n:null),class:"nc-cell-field w-full !border-none !outline-none focus:ring-0 py-1",type:s(P),placeholder:o.placeholder,onBlur:R,onFocus:D,onKeydown:[e[1]||(e[1]=i(u(()=>{},["stop"]),["down"])),e[2]||(e[2]=i(u(()=>{},["stop"]),["left"])),e[3]||(e[3]=i(u(()=>{},["stop"]),["right"])),e[4]||(e[4]=i(u(()=>{},["stop"]),["up"])),e[5]||(e[5]=i(u(()=>{},["stop"]),["delete"])),i(z,["tab"])],onSelectstartCapture:e[6]||(e[6]=u(()=>{},["stop"])),onMousedown:e[7]||(e[7]=u(()=>{},["stop"]))},null,40,ne)),[[J,s(t)]]):s(t)===null&&s(j)?(y(),b("span",ae,E(o.$t("general.null")),1)):s(I).is_progress===!0&&s(t)!==null&&s(t)!==void 0?(y(),b("div",re,[Z(l,{percent:Number(parseFloat(s(t).toString()).toFixed(2)),size:"small",status:"normal","stroke-color":"#3366FF","trail-color":"#E5E5E5","show-info":!1},null,8,["percent"])])):(y(),b("span",ue,E(s(t))+" "+E(s(t)?"":"Â "),1))],42,le)}}}),fe=se(ce,[["__scopeId","data-v-3fba2036"]]);export{fe as default};
