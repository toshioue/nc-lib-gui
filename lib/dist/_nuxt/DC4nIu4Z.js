import{f as B,bL as d,r,d1 as I,c$ as L,N as V,g as j,H as A,av as E,iN as U,h9 as $,O,o as a,U as p,w as c,b as R,P as o,Q as u,R as T,a as f,V as z,W,c as _,t as v,S as b,a2 as G}from"./B2hUoZAs.js";import{u as H,_ as P}from"./CVC42l5u.js";import{_ as Q}from"./e4fIiYA_.js";import{a as q}from"./Bye44sky.js";import{u as J}from"./CR-MWfkw.js";import"./DerldqwU.js";import"./DfZ7_DBQ.js";import"./BeKg4PXl.js";import"./CaxUP45y.js";import"./1orNHd0L.js";import"./BQQOEPN4.js";import"./R1pHeCcp.js";import"./BGKYJ52S.js";import"./C9qKCFvP.js";import"./D-yb_G2t.js";import"./CGFlARNL.js";import"./fS-pjH0A.js";import"./DSjSw5ad.js";import"./BXXS6TCz.js";import"./D1iILnOh.js";import"./B_8aIjz8.js";import"./DKGZEluf.js";import"./CEs-fTPr.js";import"./B3nR1Eu5.js";import"./Df48od_3.js";import"./Coz9Ftud.js";import"./BOjhQDxh.js";import"./CY5huSrU.js";import"./DMylWvyY.js";import"./BxQk1kmM.js";import"./xq9YlIVR.js";import"./CjZLV3bP.js";import"./C80dkAHb.js";import"./QE4JhtMV.js";import"./BofvbJjd.js";import"./mojFMNDD.js";import"./o7n49Dc8.js";import"./D_j6pbUL.js";import"./C9Sjn86N.js";import"./BbiCYzwg.js";import"./KChPo3uB.js";import"./DbYhEzJg.js";import"./BGeUBmxt.js";import"./ydZR65vY.js";import"./Cd1RDrCc.js";import"./BtjDSNy_.js";import"./DXDQ_YQg.js";import"./3I_Awkws.js";const K={class:"flex items-center gap-1"},X={class:"flex items-center gap-2"},Y={key:0,class:"text-capitalize !text-[13px] font-medium"},Z={key:0,class:"bg-brand-50 text-brand-500 py-1 px-2 text-md rounded-md"},Jt=B({__name:"ColumnFilterMenu",setup(tt){const h=d(I,r(!1)),n=d(L,r()),{isMobileMode:y}=V(),k=r(),{nestedFilters:F,eventBus:w}=q(),{nonDeletedFilters:g,loadFilters:x}=H(n,void 0,j(()=>!0),()=>!1,F.value,!0),l=r(0);A(()=>{var t;return(t=n==null?void 0:n.value)==null?void 0:t.id},async t=>{t&&(await x({hookId:void 0,isWebhook:!1,loadAllFilters:!0}),l.value=g.value.length||0)},{immediate:!0});const i=r(!1),C=r({});E(U,C),J(i);const m=r({});return w.on(async(t,e)=>{e&&t===$.FILTER_ADD&&(m.value={fk_column_id:e.id},i.value=!0)}),(t,e)=>{const D=G,M=P,N=Q,S=O("e");return a(),p(N,{visible:o(i),"onUpdate:visible":e[2]||(e[2]=s=>u(i)?i.value=s:null),trigger:["click"],"overlay-class-name":"nc-dropdown-filter-menu nc-toolbar-dropdown",class:"!xs:hidden"},{overlay:c(()=>[R(M,{ref_key:"filterComp",ref:k,"draft-filter":o(m),"onUpdate:draftFilter":e[0]||(e[0]=s=>u(m)?m.value=s:null),class:"nc-table-toolbar-menu","auto-save":!0,"data-testid":"nc-filter-menu","is-open":o(i),"onUpdate:filtersLength":e[1]||(e[1]=s=>l.value=s)},null,8,["draft-filter","is-open"])]),default:c(()=>[T((a(),p(D,{disabled:o(h),class:"nc-filter-menu-btn nc-toolbar-btn !border-0 !h-7",size:"small",type:"secondary"},{default:c(()=>[f("div",K,[f("div",X,[(a(),p(z(("iconMap"in t?t.iconMap:o(W)).filter),{class:"h-4 w-4"})),o(y)?b("",!0):(a(),_("span",Y,v(t.$t("activity.filter")),1))]),o(l)?(a(),_("span",Z,v(o(l)),1)):b("",!0)])]),_:1},8,["disabled"])),[[S,["c:filter"]]])]),_:1},8,["visible"])}}});export{Jt as default};
