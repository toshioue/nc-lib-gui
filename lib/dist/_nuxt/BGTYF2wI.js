const __vite__fileDeps=["./Qun9Gu7P.js","./BLdk6lRf.js","./entry.B8GgT5QA.css","./BTh9o-aK.js","./DWFLnnq8.js","./BQQOEPN4.js","./BD_L_KCX.js","./JimKVLH8.js","./C-Z2v8Hi.js","./ETGzLqdt.js","./JCToPTxN.js","./BLwY008C.js","./CBNgcPSC.js","./wBAlULwF.js","./yAvBJhn8.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as L,ai as O,r as m,i as F,o as l,c as _,b as u,w as i,P as n,U as d,S as M,a7 as J,Q as P,a,t as c,d as f,al as Q,am as W,V as z,W as A,a8 as Z,T as q,Z as G,a5 as H,an as h,ao as I,ca as K,a2 as X,aS as Y,dt as ee,A as te,_ as se}from"./BLdk6lRf.js";import{_ as ae}from"./CHsHpGW4.js";import{T as le}from"./CrbWcN5i.js";import"./BTh9o-aK.js";import"./DWFLnnq8.js";import"./BQQOEPN4.js";import"./BD_L_KCX.js";import"./DTv03lbO.js";const ne=G(()=>H(()=>import("./Qun9Gu7P.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url).then(v=>v.default||v)),oe={class:"flex flex-col h-full"},ie={class:"flex flex-row justify-center mt-2 text-center w-full text-base"},re={class:"flex mt-6 justify-center space-x-2"},ce={class:"flex flex-wrap mt-4 w-full gap-5 mb-10"},de={class:"install-btn flex flex-row justify-end space-x-1"},pe={class:"flex flex-row justify-center items-center caption capitalize nc-app-store-card-edit"},ue={class:"flex flex-row justify-center items-center caption capitalize nc-app-store-card-reset"},fe={class:"flex ml-0.5"},me={class:"flex flex-row justify-center items-center caption capitalize nc-app-store-card-install"},_e={class:"flex flex-row space-x-2 items-center justify-start w-full"},ve={class:"flex w-20 pl-3"},ye=["src"],ge={key:1},we={class:"flex flex-col flex-1 w-3/5 pl-3"},xe=L({__name:"AppStore",setup(v){const{t:j}=O(),{$api:k,$e:y}=te(),g=m(null),p=m(!1),r=m(!1),o=m(null),w=async()=>{try{const e=(await k.plugin.list()).list??[];g.value=e.map(s=>({...s,tags:s.tags?s.tags.split(","):[],parsedInput:s.input&&JSON.parse(s.input)}))}catch(e){h.error(await I(e))}},N=async()=>{try{await k.plugin.update(o.value.id,{input:null,active:!1}),h.success(j("msg.success.pluginUninstalled")),p.value=!1,await w()}catch(e){h.error(await I(e))}y("a:appstore:reset",{app:o.value.title})},B=async()=>{r.value=!1,await w(),y("a:appstore:install",{app:o.value.title})},C=async e=>{r.value=!0,o.value=e,y("c:appstore:install",{app:e.title})},E=async e=>{p.value=!0,o.value=e};return F(async()=>{g.value===null&&await w()}),(e,s)=>{const T=ne,b=K,$=X,V=ae,x=Y,R=le,U=ee;return l(),_("div",null,[u(b,J({visible:n(r),"onUpdate:visible":s[2]||(s[2]=t=>P(r)?r.value=t:null),class:{active:n(r)},closable:!1,centered:"","min-height":"300",footer:null,"wrap-class-name":"nc-modal-plugin-install"},e.$attrs),{default:i(()=>[n(o)&&n(r)?(l(),d(T,{key:0,id:n(o).id,onClose:s[0]||(s[0]=t=>r.value=!1),onSaved:s[1]||(s[1]=t=>B())},null,8,["id"])):M("",!0)]),_:1},16,["visible","class"]),u(b,{visible:n(p),"onUpdate:visible":s[4]||(s[4]=t=>P(p)?p.value=t:null),closable:!1,width:"24rem",centered:"",footer:null,"wrap-class-name":"nc-modal-plugin-uninstall"},{default:i(()=>[a("div",oe,[a("div",ie,c(`Click on confirm to reset ${n(o)&&n(o).title}`),1),a("div",re,[u($,{type:"secondary",onClick:s[3]||(s[3]=t=>p.value=!1)},{default:i(()=>[f(c(e.$t("general.cancel")),1)]),_:1}),u($,{type:"danger",onClick:N},{default:i(()=>[f(c(e.$t("general.confirm")),1)]),_:1})])])]),_:1},8,["visible"]),a("div",ce,[(l(!0),_(Q,null,W(n(g),(t,D)=>(l(),d(U,{key:D,class:q(["sm:w-100 md:w-138.1",`relative flex overflow-x-hidden app-item-card !shadow-sm rounded-md w-full nc-app-store-card-${t.title}`])},{default:i(()=>[a("div",de,[t.parsedInput?(l(),d(x,{key:0,size:"small",type:"primary",onClick:S=>C(t)},{default:i(()=>[a("div",pe,[u(V,{class:"pr-0.5",height:12}),f(" "+c(e.$t("general.edit")),1)])]),_:2},1032,["onClick"])):M("",!0),t.parsedInput?(l(),d(x,{key:1,size:"small",outlined:"",onClick:S=>E(t)},{default:i(()=>[a("div",ue,[(l(),d(z(("iconMap"in e?e.iconMap:n(A)).closeCircle))),a("div",fe,c(e.$t("general.reset")),1)])]),_:2},1032,["onClick"])):(l(),d(x,{key:2,size:"small",type:"primary",onClick:S=>C(t)},{default:i(()=>[a("div",me,[(l(),d(z(("iconMap"in e?e.iconMap:n(A)).plus))),f(" "+c(e.$t("general.install")),1)])]),_:2},1032,["onClick"]))]),a("div",_e,[a("div",ve,[t.title!=="SMTP"?(l(),_("img",{key:0,class:"avatar",alt:"logo",style:Z({backgroundColor:t.title==="SES"?"#242f3e":""}),src:t.logo},null,12,ye)):(l(),_("div",ge))]),a("div",we,[u(R,{level:5},{default:i(()=>[f(c(t.title),1)]),_:2},1024),f(" "+c(t.description),1)])])]),_:2},1032,["class"]))),128))])])}}}),ze=se(xe,[["__scopeId","data-v-914b9a0b"]]);export{ze as default};
