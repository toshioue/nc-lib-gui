import{e as Z,bL as v,d7 as l,ag as V,cW as tt,a5 as rt,ax as C,cL as $,ay as st,r as nt,f as it,o as et,c as at,t as ut,N as ft,S as ct,i8 as ot,i9 as pt,dc as p,cq as c,cr as _t,cs as mt,_ as dt}from"./DZZ6t_j4.js";import{c as yt}from"./C9Sjn86N.js";import{f as gt,k as kt,j as Dt,G as bt,d as Nt,m as Yt,e as St,n as At,t as Bt,u as Ct,s as $t,w as ht,p as Mt,x as Tt,c as jt,i as Ot,C as Ut}from"./C4K5fdHe.js";import{a as Ft,i as Lt,l as Rt,f as xt,g as Ht}from"./ByVBARmO.js";const It=Z({__name:"PlainCell",props:{column:{},modelValue:{},bold:{type:[Number,Boolean,null]},italic:{type:[Number,Boolean,null]},underline:{type:[Number,Boolean,null]}},setup(h){var S,A,B;const M=h,a=v(l),{t:D}=V(),{metas:b}=tt(),_=rt(M,"column"),{sqlUis:g}=C($()),T=st(),{basesUser:j}=C(T),{isXcdbBase:O,isMssql:U,isMysql:F}=$(),L=nt((S=_.value)!=null&&S.source_id&&g.value[(A=_.value)==null?void 0:A.source_id]?g.value[(B=_.value)==null?void 0:B.source_id]:Object.values(g.value)[0]),m=it(()=>_.value&&L.value.getAbstractType(_.value)),R=t=>!!t&&t!=="0"&&t!==0&&t!=="false",x=(t,r)=>t?t?Array.isArray(t)?t.join(", "):t.toString():F(r.source_id)?t.toString().split(",").join(", "):t.split(", "):"",N=(t,r,s)=>{var n;const i=s?"YYYY-MM-DD HH:mm:ss":((n=p(r.meta))==null?void 0:n.date_format)??"YYYY-MM-DD";return!t||!c(t).isValid()?"":c(/^\d+$/.test(String(t))?+t:t).format(i)},H=t=>t&&c(t).isValid()?c(t.toString(),"YYYY").format("YYYY"):"",I=(t,r)=>{var f,e;if(!t||!c(t).isValid())return"";const s=((f=p(r==null?void 0:r.meta))==null?void 0:f.date_format)??_t[0],i=((e=p(r==null?void 0:r.meta))==null?void 0:e.time_format)??mt[0],n=`${s} ${i}`;return O(r.source_id)?U(r.source_id)?c(t,n).format(n):c(t).utc().local().format(n):c(/^\d+$/.test(t)?+t:t,n).format(n)},q=t=>{if(!t)return"";let r=c(t);return r.isValid()||(r=c(t,"HH:mm:ss")),r.isValid()||(r=c(`1999-01-01 ${t}`)),r.isValid()?r.format("HH:mm"):""},P=(t,r)=>{var i;const s=((i=p(r.meta))==null?void 0:i.duration)||0;return yt(t,s)},J=t=>t?`${t}%`:"",X=(t,r)=>{const s={currency_locale:"en-US",currency_code:"USD",...p(r.meta)};try{return t==null||isNaN(t)?t??"":new Intl.NumberFormat(s.currency_locale||"en-US",{style:"currency",currency:s.currency_code||"USD"}).format(+t)}catch{return t}},Y=t=>{if(!t)return"";const r=a!=null&&a.value.base_id?j.value.get(a==null?void 0:a.value.base_id)||[]:[];return typeof t=="string"?t.split(",").map(i=>{const n=r.find(u=>u.id===i||u.email===i);return n?n.display_name||n.email:i.id}).join(", "):Array.isArray(t)?t.map(s=>{const i=r.find(n=>n.id===s.id||n.email===s.email);return i?i.display_name||i.email:s.id}).join(", "):t?t.display_name||t.email:""},w=(t,r)=>{if(!t||isNaN(Number(t)))return"";const s=p(r.meta);return Number(t).toFixed((s==null?void 0:s.precision)??1)},G=t=>!t||isNaN(Number(t))?"":Number(t),z=(t,r)=>p(r.meta).richMode?(t==null?void 0:t.replace(/[*_~\[\]]|<\/?[^>]+(>|$)/g,""))||"":t||"",E=(t,r)=>{var n,u,f;const s=r.colOptions;if(["count","avg","sum","countDistinct","sumDistinct","avgDistinct"].includes(s.rollup_function))return t;{const e=s.fk_relation_column_id?(u=(n=a==null?void 0:a.value.columns)==null?void 0:n.find(k=>k.id===s.fk_relation_column_id))==null?void 0:u.colOptions:null,d=(e==null?void 0:e.fk_related_model_id)&&((f=b.value)==null?void 0:f[e.fk_related_model_id]),o=d==null?void 0:d.columns.find(k=>k.id===s.fk_rollup_column_id);return y(t,o)}},W=(t,r)=>{var f,e,d;const s=r.colOptions,i=s.fk_relation_column_id?(e=(f=a==null?void 0:a.value.columns)==null?void 0:f.find(o=>o.id===s.fk_relation_column_id))==null?void 0:e.colOptions:null,n=(i==null?void 0:i.fk_related_model_id)&&((d=b.value)==null?void 0:d[i.fk_related_model_id]),u=n==null?void 0:n.columns.find(o=>o.id===s.fk_lookup_column_id);return Array.isArray(t)?t.map(o=>y(o,u)).join(", "):y(t,u)},K=t=>Array.isArray(t)?t.map(r=>`${r.title}`).join(", "):t,Q=(t,r)=>{var i,n;typeof r.meta=="string"&&(r.meta=JSON.parse(r.meta));const s=+t||0;return s?s===1?`1 ${((i=r==null?void 0:r.meta)==null?void 0:i.singular)||D("general.link")}`:`${s} ${((n=r==null?void 0:r.meta)==null?void 0:n.plural)||D("general.links")}`:""},y=(t,r)=>{var s,i,n,u;if(!r)return"";if(gt(r)){const[f,e]=(t||"").split(";");return f&&e?`${f}; ${e}`:t}return kt(r)?z(t,r):Dt(r,m)?R(t)?"Checked":"Unchecked":bt(r)?x(t,r):Nt(r,m)?N(t,r):Yt(r,m)?H(t):St(r,m)?I(t,r):At(r,m)?q(t):Bt(r)?P(t,r):Ct(r)?J(t):$t(r)?X(t,r):ht(r)?Y(t):Mt(r)?w(t,r):Tt(r,m)?G(t):jt(r)?JSON.stringify(t,null,2):Ft(r)?E(t,r):Lt(r)||Rt(r.uidt,r.colOptions)?W(t,r):ot(r)?N(t,r,!0):pt(r)?Y(t):Ot(r)?K(t):xt(r)?Q(t,r):Ht(r)&&((s=r==null?void 0:r.meta)!=null&&s.display_type)?y(t,{uidt:(i=r==null?void 0:r.meta)==null?void 0:i.display_type,...(n=r==null?void 0:r.meta)==null?void 0:n.display_column_meta}):Ut(r)?r.colOptions.type==="url"?t:(u=r.colOptions)==null?void 0:u.label:t};return(t,r)=>(et(),at("span",{class:ct(["plain-cell before:px-1",{"!font-bold":t.bold,italic:t.italic,underline:t.underline}]),"data-testid":"nc-plain-cell"},ut(y(t.modelValue,ft(_))),3))}}),wt=dt(It,[["__scopeId","data-v-52a65027"]]);export{wt as default};
