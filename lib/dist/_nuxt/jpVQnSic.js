import{g8 as X,ga as r,fl as p,W as u,gg as f,f as xe,P as e,o as d,S as j,U as ge,V as Ce,T as $,u as Kt,ar as gt,r as S,ay as zt,az as Ft,ai as We,g as q,gh as Gt,gi as Ge,aj as Z,ak as pe,gj as ut,gk as dt,g6 as Qt,n as Be,A as He,N as qt,gl as Vt,w as s,b as t,c as I,a as c,aa as Ke,Q as ve,d as K,aq as oe,av as Ie,t as O,au as pt,aL as Qe,R as Wt,aH as Ht,$ as Ye,a0 as bt,a1 as _t,aN as Yt,p as yt,e as St,_ as Je,ad as Jt,dj as Xt,H as vt,i as Zt,b1 as ft,a9 as M,Y as ea,gm as ze,X as ta,bZ as aa,g9 as sa,gb as oa,dD as na,dr as la,g7 as ia,bc as ca}from"./3QBYHahY.js";import{_ as ra}from"./DHsWytsD.js";import{_ as qe}from"./C95Svpv6.js";import"./kHOslGNR.js";import{I as ht}from"./CmN9vPg3.js";import{L as ua,_ as da}from"./S6k-HM05.js";import{_ as It}from"./BsWDDIqE.js";import{_ as pa}from"./Kma333Sh.js";import{_ as va}from"./D7hrRKCy.js";import{_ as fa}from"./leimKhvx.js";import ma from"./BKGO7k13.js";import{_ as ga}from"./C726Gdw3.js";import{u as ba}from"./CSl6euFG.js";import{_ as Fe}from"./BrEnaVC0.js";import{f as Q,b as _a,e as ya}from"./CWtzMcwx.js";import{r as Sa}from"./C00NHga8.js";import{a as ha}from"./DgfVJyEd.js";import{d as Ia}from"./G4Pt-Lbf.js";import{F as mt}from"./DAKhk9t6.js";import{_ as wa}from"./DbU9XkQ5.js";import{_ as Ea,C as Ca}from"./CPUhUHn0.js";import{_ as xa}from"./Bk0xUMNV.js";import{S as Ta}from"./BEpKpjF5.js";import{_ as Aa}from"./ceYq-xax.js";import{_ as ka}from"./DD1BMgnW.js";const Da=(v,T,y)=>{if("ssl"in v&&v.ssl)return T===X.No||typeof v.ssl=="object"&&Object.values(v.ssl).every(V=>V==null)?void 0:y==="pg"&&["true","false"].includes(v.ssl)?v.ssl==="true":y==="pg"&&!["boolean","object"].includes(typeof v.ssl)?void 0:v.ssl},Oa=[{title:"labels.database",subtitle:"objects.integrationCategories.databaseSubtitle",value:r.DATABASE,isAvailable:!0},{title:"objects.integrationCategories.ai",subtitle:"objects.integrationCategories.ai",value:r.AI},{title:"objects.integrationCategories.communication",subtitle:"objects.integrationCategories.communicationSubtitle",value:r.COMMUNICATION},{title:"objects.integrationCategories.spreadSheet",subtitle:"objects.integrationCategories.spreadSheetSubtitle",value:r.SPREAD_SHEET,teleEventName:r.OTHERS},{title:"objects.integrationCategories.projectManagement",subtitle:"objects.integrationCategories.projectManagementSubtitle",value:r.PROJECT_MANAGEMENT},{title:"objects.integrationCategories.ticketing",subtitle:"objects.integrationCategories.ticketingSubtitle",value:r.TICKETING},{title:"objects.integrationCategories.crm",subtitle:"objects.integrationCategories.crmSubtitle",value:r.CRM},{title:"objects.integrationCategories.marketing",subtitle:"objects.integrationCategories.marketingSubtitle",value:r.MARKETING},{title:"objects.integrationCategories.ats",subtitle:"objects.integrationCategories.atsSubtitle",value:r.ATS},{title:"objects.integrationCategories.development",subtitle:"objects.integrationCategories.developmentSubtitle",value:r.DEVELOPMENT},{title:"objects.integrationCategories.finance",subtitle:"objects.integrationCategories.financeSubtitle",value:r.FINANCE},{title:"labels.storage",subtitle:"objects.integrationCategories.storageSubtitle",value:r.STORAGE},{title:"objects.integrationCategories.others",subtitle:"objects.integrationCategories.othersSubtitle",value:r.OTHERS}],wt=[{title:"objects.syncData.mysql",value:p.MYSQL,icon:u.mysql,categories:[r.DATABASE],isAvailable:!0,iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.postgreSQL",value:p.PG,icon:u.postgreSql,categories:[r.DATABASE],isAvailable:!0},{title:"objects.syncData.sqlite",value:p.SQLITE,icon:u.sqlServer,categories:[r.DATABASE],isAvailable:!0,isOssOnly:!0},{title:"objects.syncData.snowflake",value:p.SNOWFLAKE,icon:u.snowflake,categories:[r.DATABASE]},{title:"objects.syncData.dataBricks",value:p.DATABRICKS,icon:u.dataBricks,categories:[r.DATABASE]},{title:"objects.syncData.mssqlServer",value:p.MSSQL,icon:u.mssqlServer,categories:[r.DATABASE]},{title:"objects.syncData.oracle",value:f.ORACLE,icon:u.oracle,categories:[r.DATABASE]},{title:"objects.syncData.openai",value:f.OPENAI,icon:u.openai,categories:[r.AI]},{title:"objects.syncData.claude",value:f.CLAUDE,icon:u.claude,categories:[r.AI]},{title:"objects.syncData.ollama",value:f.OLLAMA,icon:u.ollama,categories:[r.AI]},{title:"objects.syncData.groq",value:f.GROQ,icon:u.groq,categories:[r.AI]},{title:"general.slack",value:f.SLACK,icon:u.slack,categories:[r.COMMUNICATION],iconStyle:{width:"32px",height:"32px"}},{title:"general.discord",value:f.DISCORD,icon:u.ncDiscord,categories:[r.COMMUNICATION],iconStyle:{width:"32px",height:"32px"}},{title:"general.twilio",value:f.TWILLO,icon:u.twilio,categories:[r.COMMUNICATION],iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.microsoftOutlook",value:f.MICROSOFT_OUTLOOK,icon:u.microsoftOutlook,categories:[r.COMMUNICATION]},{title:"general.microsoftTeams",value:f.MICROSOFT_TEAMS,icon:u.microsoftTeams,categories:[r.COMMUNICATION],iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.gmail",value:f.GMAIL,icon:u.gmail,categories:[r.COMMUNICATION]},{title:"objects.syncData.telegram",value:f.TELEGRAM,icon:u.telegram,categories:[r.COMMUNICATION]},{title:"objects.syncData.whatsapp",value:f.WHATSAPP,icon:u.whatsappSolid,categories:[r.COMMUNICATION],iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.asana",value:f.ASANA,icon:u.asana,categories:[r.PROJECT_MANAGEMENT]},{title:"objects.syncData.jira",value:f.JIRA,icon:u.jira,categories:[r.PROJECT_MANAGEMENT]},{title:"objects.syncData.miro",value:f.MIRO,icon:u.miro,categories:[r.PROJECT_MANAGEMENT]},{title:"objects.syncData.trello",value:f.TRELLO,icon:u.trello,categories:[r.PROJECT_MANAGEMENT]},{title:"objects.syncData.salesforce",value:f.SALESFORCE,icon:u.salesforce,categories:[r.CRM]},{title:"objects.syncData.hubspot",value:f.HUBSPOT,icon:u.hubspot,categories:[r.CRM]},{title:"objects.syncData.pipedrive",value:f.PIPEDRIVE,icon:u.pipedrive,categories:[r.CRM]},{title:"objects.syncData.microsoftDynamics365",value:f.MICROSOFT_DYNAMICS_365,icon:u.microsoftDynamics365,categories:[r.CRM]},{title:"objects.syncData.zohoCrm",value:f.ZOHO_CRM,icon:u.zohoCrm,categories:[r.CRM]},{title:"objects.syncData.hubspot",value:f.HUBSPOT,icon:u.hubspot,categories:[r.MARKETING]},{title:"objects.syncData.mailchimp",value:f.MAILCHIMP,icon:u.mailchimp,categories:[r.MARKETING]},{title:"objects.syncData.surveyMonkey",value:f.SURVEYMONKEY,icon:u.surveyMonkey,categories:[r.MARKETING]},{title:"objects.syncData.typeform",value:f.TYPEFORM,icon:u.typeform,categories:[r.MARKETING]},{title:"objects.syncData.workday",value:f.WORKDAY,icon:u.workday,categories:[r.ATS]},{title:"objects.syncData.greenhouse",value:f.GREENHOUSE,icon:u.greenhouse,categories:[r.ATS]},{title:"objects.syncData.lever",value:f.LEVER,icon:u.lever,categories:[r.ATS]},{title:"objects.syncData.bitbucket",value:f.BITBUCKET,icon:u.bitBucket,categories:[r.DEVELOPMENT]},{title:"objects.syncData.github",value:f.GITHUB,icon:u.githubSolid,categories:[r.DEVELOPMENT]},{title:"objects.syncData.gitlab",value:f.GITLAB,icon:u.gitlab,categories:[r.DEVELOPMENT]},{title:"objects.syncData.stripe",value:f.STRIPE,icon:u.stripe,categories:[r.FINANCE]},{title:"objects.syncData.quickbooks",value:f.QUICKBOOKS,icon:u.quickbooks,categories:[r.FINANCE]},{title:"objects.syncData.freshdesk",value:f.FRESHDESK,icon:u.freshdesk,categories:[r.TICKETING]},{title:"objects.syncData.intercom",value:f.INTERCOM,icon:u.intercom,categories:[r.TICKETING]},{title:"objects.syncData.zendesk",value:f.ZENDESK,icon:u.zendesk,categories:[r.TICKETING]},{title:"objects.syncData.salesforce",subtitle:"objects.syncData.serviceCloud",value:f.SALESFORCE_SERVICE_CLOUD,icon:u.salesforce,categories:[r.TICKETING]},{title:"objects.syncData.hubspot",subtitle:"objects.syncData.serviceHub",value:f.HUBSPOT_SERVICE_HUB,icon:u.hubspot,categories:[r.TICKETING]},{title:"objects.syncData.box",value:f.BOX,icon:u.box,categories:[r.STORAGE]},{title:"objects.syncData.dropbox",value:f.DROPBOX,icon:u.dropbox,categories:[r.STORAGE]},{title:"objects.syncData.googleDrive",value:f.GOOGLE_DRIVE,icon:u.googleDrive,categories:[r.STORAGE]},{title:"objects.syncData.appleNumbers",value:f.APPLE_NUMBERS,icon:u.appleSolid,categories:[r.SPREAD_SHEET]},{title:"objects.syncData.microsoftExcel",value:f.MICROSOFT_EXCEL,icon:u.microsoftExcel,categories:[r.SPREAD_SHEET]},{title:"objects.syncData.googleSheets",value:f.GOOGLE_SHEETS,icon:u.googleSheet,categories:[r.SPREAD_SHEET]}],Ve=wt.reduce((v,T)=>(v[T.value]=T,v),{}),Co=xe({__name:"IntegrationIcon",props:{type:{},size:{default:"sm"}},setup(v){const T=v;return(y,V)=>{var U,W;return(U=("allIntegrationsMapByValue"in y?y.allIntegrationsMapByValue:e(Ve))[T.type])!=null&&U.icon?(d(),j(Ce((W=("allIntegrationsMapByValue"in y?y.allIntegrationsMapByValue:e(Ve))[T.type])==null?void 0:W.icon),{key:0,class:ge(["stroke-transparent flex-none",{"w-3.5 h-3.5":y.size==="sx","w-4 h-4":y.size==="sm","w-5 h-5":y.size==="md","w-6 h-6":y.size==="lg","w-7 h-7":y.size==="xl","w-8 h-8":y.size==="xxl"}])},null,8,["class"])):$("",!0)}}});var Et=(v=>(v[v.LIST=0]="LIST",v[v.ADD=1]="ADD",v[v.EDIT=2]="EDIT",v))(Et||{});const be={PostgreSQL:p.PG,MySQL:p.MYSQL,SQLITE:p.SQLITE};function $a(v){const T={payload:{}};switch(v){case be.PostgreSQL:return{...T,type:be.PostgreSQL,title:"PostgreSQL",logo:Be(Fe,{"source-type":"pg",class:"logo"})};case be.MySQL:return{...T,type:be.MySQL,title:"MySQL",logo:Be(Fe,{"source-type":"mysql2",class:"logo"})};case be.SQLITE:return{...T,type:be.SQLITE,title:"SQLite",logo:Be(Fe,{"source-type":"sqlite3",class:"logo"})}}}const[Na,La]=ba(()=>{const v=Kt(),T=v.currentRoute,{api:y}=gt(),V=S(null),U=S(null),W=zt(),{activeWorkspaceId:ne}=Ft(W),z=S([]),P=S(""),w=S({page:1,pageSize:25,totalRows:0}),te=S(),h=S(!1),H=Gt(Symbol("integrationStore")),{$e:F}=He(),{t:L}=We(),ue=S(!1),ae=S({isOpen:!1,title:L("msg.success.connectionAdded"),connectionTitle:"",description:L("msg.success.connectionAddedDesc")}),Y=S({isOpen:!1,msg:"",isLoading:!1}),le=q({get(){var n;return((n=T.value.query)==null?void 0:n.tab)??"integrations"},set(n){Y.value.isOpen&&(Y.value.isOpen=!1),v.push({query:{...T.value.query,tab:n}})}}),ce=async(n=!1,b=void 0,C=w.value.page,G=w.value.pageSize)=>{try{if(!ne.value)return;h.value=!0,!n&&G*(C-1)>w.value.totalRows&&(w.value.page=1,C=1);const{list:E,pageInfo:we}=await y.integration.list(n?{type:Ge.Database,includeDatabaseInfo:!0,baseId:b}:{offset:G*(C-1),limit:G,...P.value.trim()?{query:P.value}:{}});z.value=E,n||(w.value.totalRows=we.totalRows??0)}catch(E){await Z.error(await pe(E)),z.value=[],w.value.totalRows=0,w.value.page=1}finally{h.value=!1}},fe=n=>{U.value=$a(n),V.value=1,F("c:integration:add")},ye=async(n,b=!1)=>{var C;if(n!=null&&n.id){try{return await y.integration.delete(n.id,{query:b?{force:"true"}:{}}),F("a:integration:delete"),await ce(),!0}catch(G){const E=await ut(G);if(E.error===dt.INTEGRATION_NOT_FOUND){await Z.error((C=E.message)==null?void 0:C.replace(n.id,n.title)),window.location.reload();return}await Z.error(await pe(G))}te.value=null}},ie=async n=>{if(n.id)try{await y.integration.update(n.id,n),F("a:integration:update"),await ce(),V.value=null,U.value=null,await Z.success(`Connection "${n.title}" updated successfully`)}catch(b){await Z.error(await pe(b))}},o=async(n,b="create",C=!1,G=void 0)=>{try{const E=await y.integration.create(n);F(b==="create"?"a:integration:create":"a:integration:duplicate"),E&&(E!=null&&E.id)&&(C||z.value.push(E)),await ce(C,G),b==="create"&&H.emit(Qt.INTEGRATION_ADD,E),V.value=null,U.value=null,E!=null&&E.title&&b==="create"&&(ue.value?(le.value="connections",ae.value.connectionTitle=E.title??"",ae.value.isOpen=!0):await Z.success(`Connection "${E.title}" created successfully`))}catch(E){await Z.error(await pe(E))}},se=async n=>{if(n!=null&&n.id)try{h.value=!0,o({title:n.title,config:{},type:n.type,copy_from_id:n.id},"duplicate")}catch(b){await Z.error(await pe(b))}finally{h.value=!1}},re=async(n,b)=>{var C;if(n!=null&&n.id)try{return await y.integration.read(n.id,{...b||{}})}catch(G){const E=await ut(G);if(E.error===dt.INTEGRATION_NOT_FOUND){await Z.error((C=E.message)==null?void 0:C.replace(n.id,n.title)),window.location.reload();return}await Z.error(await pe(G))}};return{IntegrationsPageMode:Et,integrationType:be,pageMode:V,activeIntegration:U,integrations:z,isLoadingIntegrations:h,deleteConfirmText:te,eventBus:H,requestIntegration:Y,integrationPaginationData:w,activeViewTab:le,isFromIntegrationPage:ue,successConfirmModal:ae,searchQuery:P,addIntegration:fe,loadIntegrations:ce,deleteIntegration:ye,updateIntegration:ie,saveIntegration:o,editIntegration:async n=>{if(n!=null&&n.id)try{const b=await re(n,{includeConfig:!0});U.value=b,V.value=2,F("c:integration:edit")}catch{}},duplicateIntegration:se,saveIntegraitonRequest:async n=>{if(n!=null&&n.trim()){Y.value.isLoading=!0;try{F("a:integration:new-request",{value:Y.value.msg}),Y.value.isLoading=!1,Y.value.isOpen=!1,Y.value.msg="",await Z.success("Your request has been successfully submitted")}catch(b){Y.value.isLoading=!1,await Z.error(await pe(b))}}},getIntegration:re}},"integrations-store");function Xe(){const v=La();return v??Na()}const Ze=v=>(yt("data-v-02f2d71e"),v=v(),St(),v),Ma={key:0,class:"p-4 w-full flex items-center justify-between gap-3 border-b-1 border-gray-200"},ja=Ze(()=>c("div",{class:"flex-1 text-base font-weight-700"},"New Connection",-1)),Ua={class:"flex items-center gap-3"},Ra={key:0,class:"px-6 pt-6"},Pa={class:"flex-1"},Ba=Ze(()=>c("div",{class:"text-sm font-normal text-gray-600 mb-2"},[c("div",null,[K(" Connect integrations with NocoDB. "),c("a",{href:"https://docs.nocodb.com/category/integrations",target:"_blank",rel:"noopener noreferrer"},"Learn more")])],-1)),Ka={class:"category-type-title flex gap-2"},za={key:0,class:"integration-type-list"},Fa=["onClick"],Ga={class:"integration-icon-wrapper"},Qa={class:"flex-1"},qa={class:"name"},Va={key:0,class:"subtitle flex-1"},Wa={key:0,class:"action-btn"},Ha={key:1,class:""},Ya={class:"flex items-center gap-2"},Ja={key:0,class:"h-full text-center flex items-center justify-center gap-3"},Xa={key:1,class:"h-full flex items-center justify-center"},Za={class:"flex flex-col gap-4"},es={class:"flex items-center justify-between gap-4"},ts=Ze(()=>c("div",{class:"text-base font-bold text-gray-800"},"Request Integration",-1)),as={class:"flex flex-col gap-2"},ss={class:"flex items-center justify-end gap-3"},os=xe({__name:"IntegrationsTab",props:{isModal:{type:Boolean,default:!1},filterCategory:{type:Function,default:()=>!0},filterIntegration:{type:Function,default:()=>!0}},setup(v){const T=v,{isModal:y,filterCategory:V,filterIntegration:U}=T,{$e:W}=He(),{t:ne}=We(),{syncDataUpvotes:z,updateSyncDataUpvotes:P}=qt(),{pageMode:w,IntegrationsPageMode:te,requestIntegration:h,addIntegration:H,saveIntegraitonRequest:F}=Xe(),L=g=>{var n;return g&&((n=g==null?void 0:g.focus)==null?void 0:n.call(g))},ue=S(null),ae=S(""),Y=S(),{width:le}=Vt(Y),ce=q(()=>le.value<=328||le.value<624?"328px":le.value<920?"576px":le.value<1216?"872px":"1168px"),fe=q(()=>new Set(z.value)),ye=(g,n)=>wt.filter(b=>U(b)&&b.categories.includes(g)&&ne(b.title).toLowerCase().includes(n.trim().toLowerCase())),ie=q(()=>Oa.filter(V).filter(g=>ue.value?g.value===ue.value.value:!0).reduce((g,n)=>(g[n.value]={title:n.title,subtitle:n.subtitle,list:ye(n.value,ae.value),isAvailable:n.isAvailable,teleEventName:n.teleEventName},g),{})),o=q(()=>{const g=Object.keys(ie.value);return g.length?!g.some(n=>ie.value[n].list.length>0):!0}),se=q({get:()=>w.value===te.LIST,set:g=>{g||(w.value=null)}}),re=(g,n)=>{var b;fe.value.has(n)||(W(`a:integration-request:${((b=ie.value[g])==null?void 0:b.teleEventName)||g}:${n}`),P([...z.value,n]))},Se=(g,n)=>{if(!n.isAvailable){re(g,n.value);return}g===r.DATABASE&&H(n.value)};return(g,n)=>{const b=Ye,C=bt,G=ht,E=ra,we=_t,Oe=pt,Te=Yt,D=It,Ae=ua,ke=da;return d(),j(Ce(e(y)?qe:"div"),{visible:e(se),"onUpdate:visible":n[10]||(n[10]=A=>ve(se)?se.value=A:null),centered:"",size:"large",class:ge({"h-full":!e(y)}),"wrap-class-name":"nc-modal-available-integrations-list",onKeydown:n[11]||(n[11]=Qe(A=>se.value=!1,["esc"]))},{default:s(()=>[t(ke,null,{default:s(()=>[t(Ae,{class:"nc-integration-layout-content"},{default:s(()=>[e(y)?(d(),I("div",Ma,[t(C,{type:"text",size:"small",onClick:n[0]||(n[0]=A=>se.value=!1)},{default:s(()=>[t(b,{icon:"arrowLeft"})]),_:1}),t(b,{icon:"gitCommit",class:"flex-none h-5 w-5"}),ja,c("div",Ua,[t(C,{size:"small",type:"text",onClick:n[1]||(n[1]=A=>se.value=!1)},{default:s(()=>[t(b,{icon:"close",class:"text-gray-600"})]),_:1})])])):$("",!0),c("div",{class:ge(["w-full flex flex-col gap-6",{"h-[calc(100%_-_66px)]":e(y),"h-full":!e(y)}])},[e(le)?(d(),I("div",Ra,[c("div",{class:"flex items-end justify-end flex-wrap gap-3 m-auto",style:Ke({maxWidth:e(ce)})},[c("div",Pa,[Ba,t(G,{value:e(ae),"onUpdate:value":n[2]||(n[2]=A=>ve(ae)?ae.value=A:null),type:"text",class:"nc-input-border-on-value nc-search-integration-input !min-w-[300px] !max-w-[400px] nc-input-sm flex-none",placeholder:"Search integration","allow-clear":""},{prefix:s(()=>[t(b,{icon:"search",class:"mr-2 h-4 w-4 text-gray-500"})]),_:1},8,["value"])]),t(C,{type:"ghost",size:"small",class:"!text-primary",onClick:n[3]||(n[3]=A=>e(h).isOpen=!0)},{default:s(()=>[K(" Request Integration ")]),_:1})],4)])):$("",!0),c("div",{ref_key:"integrationListRef",ref:Y,class:"flex-1 px-6 pb-6 flex flex-col nc-workspace-settings-integrations-list overflow-y-auto nc-scrollbar-thin"},[e(le)?(d(),I("div",{key:0,class:ge(["w-full flex justify-center",{"flex-1":e(o)}])},[c("div",{class:"flex flex-col space-y-6 w-full",style:Ke({maxWidth:e(ce)})},[(d(!0),I(oe,null,Ie(e(ie),(A,de)=>(d(),I(oe,null,[A.list.length?(d(),I("div",{key:de,class:"integration-type-wrapper"},[c("div",Ka,[K(O(g.$t(A.title))+" ",1),A.isAvailable?$("",!0):(d(),j(E,{key:0,border:!1,class:"text-brand-500 !h-5 bg-brand-50 text-xs font-normal px-2"},{default:s(()=>[K(O(g.$t("msg.toast.futureRelease")),1)]),_:1}))]),A.list.length?(d(),I("div",za,[(d(!0),I(oe,null,Ie(A.list,R=>(d(),j(we,{key:R.value,disabled:R==null?void 0:R.isAvailable,placement:"bottom"},{title:s(()=>[K(O(g.$t("tooltip.comingSoonIntegration")),1)]),default:s(()=>[c("div",{tabindex:0,class:ge(["source-card focus-visible:outline-none h-full",{"is-available":R==null?void 0:R.isAvailable}]),onClick:me=>Se(de,R)},[c("div",Ga,[(d(),j(Ce(R.icon),{class:"integration-icon",style:Ke(R.iconStyle)},null,8,["style"]))]),c("div",Qa,[c("div",qa,O(g.$t(R.title)),1),R.subtitle?(d(),I("div",Va,O(g.$t(R.subtitle)),1)):$("",!0)]),R!=null&&R.isAvailable?(d(),I("div",Wa,"+")):(d(),I("div",Ha,[t(C,{type:"secondary",size:"xs",class:ge(["integration-upvote-btn !rounded-lg !px-1 !py-0",{selected:e(fe).has(R.value)}])},{default:s(()=>[c("div",Ya,[t(b,{icon:"ncArrowUp"})])]),_:2},1032,["class"])]))],10,Fa)]),_:2},1032,["disabled"]))),128))])):$("",!0)])):$("",!0)],64))),256)),e(o)?(d(),I("div",Ja,[t(Oe,{image:("Empty"in g?g.Empty:e(pt)).PRESENTED_IMAGE_SIMPLE,description:g.$t("labels.noData"),class:"!my-0"},null,8,["image","description"])])):$("",!0)],4)],2)):(d(),I("div",Xa,[t(Te,{size:"xlarge"})]))],512)],2),t(qe,{visible:e(h).isOpen,"onUpdate:visible":n[8]||(n[8]=A=>e(h).isOpen=A),centered:"",size:"medium",onKeydown:n[9]||(n[9]=Qe(A=>e(h).isOpen=!1,["esc"]))},{default:s(()=>{var A;return[Wt(c("div",Za,[c("div",es,[ts,t(C,{size:"small",type:"text",onClick:n[4]||(n[4]=de=>e(h).isOpen=!1)},{default:s(()=>[t(b,{icon:"close",class:"text-gray-600"})]),_:1})]),c("div",as,[t(D,{ref:L,value:e(h).msg,"onUpdate:value":n[5]||(n[5]=de=>e(h).msg=de),class:"!rounded-md !text-sm !min-h-[120px] max-h-[500px] nc-scrollbar-thin",size:"large","hide-details":"",placeholder:"Provide integration name and your use-case."},null,8,["value"])]),c("div",ss,[t(C,{size:"small",type:"secondary",onClick:n[6]||(n[6]=de=>e(h).isOpen=!1)},{default:s(()=>[K(O(g.$t("general.cancel")),1)]),_:1}),t(C,{disabled:!((A=e(h).msg)!=null&&A.trim()),loading:e(h).isLoading,size:"small",onClick:n[7]||(n[7]=de=>e(F)(e(h).msg))},{default:s(()=>[K(O(g.$t("general.submit")),1)]),_:1},8,["disabled","loading"])])],512),[[Ht,e(h).isOpen]])]}),_:1},8,["visible"])]),_:1})]),_:1})]),_:1},40,["visible","class"])}}}),xo=Je(os,[["__scopeId","data-v-02f2d71e"]]),ns={};function ls(v,T){return d(),I("span")}const is=Je(ns,[["render",ls]]),cs={class:"w-full flex flex-col gap-3"},rs=c("div",{class:"text-sm text-gray-800 font-semibold"},"Supported Docs",-1),us={class:"h-7 w-7 flex items-center justify-center"},ds=["href"],ps=xe({__name:"SupportedDocs",setup(v){const T=[{title:"Integrations",href:"https://docs.nocodb.com/category/integrations"},{title:"Create new connection",href:"https://docs.nocodb.com/integrations/create-connection"},{title:"Add new Data source",href:"https://docs.nocodb.com/data-sources/connect-to-data-source"}];return(y,V)=>{const U=Ye;return d(),I("div",null,[c("div",cs,[rs,c("div",null,[(d(),I(oe,null,Ie(T,(W,ne)=>c("div",{key:ne,class:"flex items-center gap-1"},[c("div",us,[t(U,{icon:"bookOpen",class:"flex-none w-4 h-4 text-gray-600"})]),c("a",{href:W.href,target:"_blank",rel:"noopener noreferrer",class:"!text-gray-700 text-sm !no-underline !hover:underline"},O(W.title),9,ds)])),64))])])])}}}),_e=v=>(yt("data-v-2af8ed09"),v=v(),St(),v),vs={key:0,class:"h-full"},fs={class:"p-4 w-full flex items-center justify-between gap-3 border-b-1 border-gray-200"},ms={class:"flex-1 flex items-center gap-3"},gs={key:1,class:"h-8 w-8 flex items-center justify-center children:flex-none bg-gray-200 rounded-lg"},bs={class:"flex-1 text-base font-weight-700"},_s={class:"flex items-center gap-3"},ys={class:"h-[calc(100%_-_66px)] flex"},Ss={class:"nc-edit-or-add-integration-left-panel nc-scrollbar-thin relative"},hs={class:"w-full gap-8 max-w-[768px]"},Is={class:"nc-edit-or-add-connection bg-white relative flex flex-col justify-center gap-2 w-full"},ws={class:"nc-form-section"},Es=_e(()=>c("div",{class:"nc-form-section-title"},"General",-1)),Cs={class:"nc-form-section-body"},xs={class:"nc-form-section"},Ts={class:"flex items-center justify-between"},As=_e(()=>c("div",{class:"nc-form-section-title"},"Connection details",-1)),ks={class:"flex items-center gap-2"},Ds={class:"p-4 w-[448px] flex flex-col gap-3"},Os=_e(()=>c("div",{class:"text-sm text-gray-700"}," Auto populate connection configuration using database connection URL ",-1)),$s={class:"flex items-center gap-2 justify-end"},Ns={class:"nc-form-section-body"},Ls={class:"flex flex-col gap-3"},Ms={class:"flex gap-2"},js={class:"flex items-center"},Us={class:"flex"},Rs={class:"border-1 border-gray-200 rounded-lg p-3"},Ps={class:"w-full flex gap-2 items-center"},Bs={class:"flex-1"},Ks={class:"flex gap-2 w-full"},zs=_e(()=>c("div",{class:"nc-form-section-title"},"Advanced options",-1)),Fs=_e(()=>c("span",null,null,-1)),Gs={class:"flex flex-col gap-2"},Qs=_e(()=>c("div",null,"Edit Connection JSON",-1)),qs={class:"border-1 border-gray-200 !rounded-lg shadow-sm overflow-hidden"},Vs=_e(()=>c("div",{class:"mt-10"},null,-1)),Ws={class:"flex items-center justify-center h-full w-full !bg-white !bg-opacity-85 z-1000"},Hs={class:"nc-edit-or-add-integration-right-panel"},Ys=xe({__name:"EditOrAddDatabase",props:{open:{type:Boolean},connectionType:{},loadDatasourceInfo:{type:Boolean},baseId:{}},emits:["update:open"],setup(v,{emit:T}){const y=v,U=Jt(y,"open",T),W=q(()=>y.connectionType??p.MYSQL),{isFromIntegrationPage:ne,pageMode:z,IntegrationsPageMode:P,activeIntegration:w,saveIntegration:te,updateIntegration:h}=Xe(),H=q(()=>z.value===P.EDIT),F=mt.useForm,L=S(!1),ue=S(!1),ae=S(),{api:Y}=gt(),{$e:le}=He(),{t:ce}=We(),fe=S(!1),ye=(l=p.MYSQL)=>{var m,_;const a=ia(l);return"database"in a.connection&&(a.connection.database=""),l===p.SQLITE&&((_=(m=a.connection)==null?void 0:m.connection)!=null&&_.filename)&&(a.connection.connection.filename=""),a},ie=(l=p.MYSQL)=>({title:"",dataSource:{...ye(l)},sslUse:X.No,extraParameters:[],is_private:!1}),o=S(ie()),se=S(ie()),re=S(!1),Se=S(!1),g=S(0),n=S([]),b=S([]),C=S(!1),G=q(()=>H.value?!L.value&&!re.value:!L.value),E=()=>{g.value+=1,g.value>=2&&(Se.value=!0)},we=q(()=>Xt.filter(l=>[p.SNOWFLAKE,p.DATABRICKS].includes(l.value)&&Se.value||![p.SNOWFLAKE,p.DATABRICKS].includes(l.value))),Oe=q(()=>{let l={"dataSource.connection.host":[Q()],"dataSource.connection.port":[Q()],"dataSource.connection.user":[Q()],"dataSource.connection.password":[Q()]};switch(o.value.dataSource.client){case p.SQLITE:l={"dataSource.connection.connection.filename":[Q()]};break;case p.SNOWFLAKE:l={"dataSource.connection.account":[Q()],"dataSource.connection.username":[Q()],"dataSource.connection.password":[Q()],"dataSource.connection.warehouse":[Q()],"dataSource.connection.database":[Q()],"dataSource.connection.schema":[Q()]};break;case p.DATABRICKS:l={"dataSource.connection.token":[Q()],"dataSource.connection.host":[Q()],"dataSource.connection.path":[Q()]};break;case p.PG:case p.MSSQL:l["dataSource.searchPath.0"]=[Q()];break}return{title:[{required:!0,message:"Connection name is required"},_a("connection")],extraParameters:[ya],"dataSource.client":[Q()],...l}}),{validate:Te,validateInfos:D}=F(o,Oe),Ae=()=>{o.value.dataSource={...ye(o.value.dataSource.client)}},ke=l=>{if(o.value.dataSource.client!==p.SQLITE){const a=o.value.dataSource.connection;switch(l){case X.No:a.ssl=void 0;break;case X.Allowed:a.ssl="true";break;default:a.ssl={ca:"",cert:"",key:""};break}}},A=(l=!1)=>{if(o.value.dataSource.client!==p.SQLITE){const a=o.value.dataSource.connection;a.ssl?typeof a.ssl=="string"?o.value.sslUse=X.Allowed:o.value.sslUse=X.Preferred:o.value.sslUse=X.No,l&&(se.value.sslUse=aa(o.value.sslUse),n.value=o.value.sslUse!==X.No?["1"]:[])}},de=()=>{o.value.extraParameters.push({key:"",value:""})},R=l=>{o.value.extraParameters.splice(l,1)},me=S(""),he=S(!1),$e=S(),Ne=S(),Le=S(),Me=(l,a)=>{a&&Sa(a,m=>{"ssl"in o.value.dataSource.connection&&typeof o.value.dataSource.connection.ssl=="object"&&(o.value.dataSource.connection.ssl[l]=m??""),a.value=null})},je=q(()=>!!o.value.sslUse&&o.value.sslUse!==X.No&&o.value.sslUse!==X.Allowed);function et(){const l=Object.fromEntries(new Map(o.value.extraParameters.filter(m=>{var _;return(_=m.key)==null?void 0:_.trim()}).map(m=>[m.key,m.value]))),a={...o.value.dataSource.connection,...l};return a.ssl=Da(a,o.value.sslUse,o.value.dataSource.client),a}const tt=()=>{var l,a,m,_,J;(J=(_=(m=(a=(l=ae.value)==null?void 0:l.$el.querySelector(".ant-form-item-explain-error"))==null?void 0:a.parentNode)==null?void 0:m.parentNode)==null?void 0:_.querySelector("input"))==null||J.focus()},Ct=async()=>{var l;if(!(H.value&&!((l=w.value)!=null&&l.id))){try{await Te()}catch{tt();return}try{fe.value=!0;const a=et(),m={...o.value.dataSource,connection:a};H.value?await h({id:w.value.id,title:o.value.title,type:Ge.Database,sub_type:o.value.dataSource.client,config:m,is_private:o.value.is_private}):await te({title:o.value.title,type:Ge.Database,sub_type:o.value.dataSource.client,config:m,is_private:o.value.is_private},"create",y.loadDatasourceInfo,y.baseId)}catch(a){Z.error(await pe(a))}finally{fe.value=!1}}},Ee=S(),xt=async()=>{try{await Te()}catch{tt();return}le("a:source:create:extdb:test-connection",[]);try{if(ue.value=!0,o.value.dataSource.client===p.SQLITE)L.value=!0,re.value=!0;else{const l=et();l.database=sa(o.value.dataSource);const a={...o.value.dataSource,connection:l},m=await Y.utils.testConnection(a);m.code===0?(L.value=!0,re.value=!0):(L.value=!1,Z.error(`${ce("msg.error.dbConnectionFailed")} ${m.message}`))}}catch(l){L.value=!1,Ee.value=await pe(l)}ue.value=!1},Tt=async()=>{var a;if(!me.value||me.value==="")return;const l=await Y.utils.urlToConfig({url:me.value});l?(o.value.dataSource.client=l.client,o.value.dataSource.connection={...l.connection},l.client===p.SQLITE&&(o.value.dataSource.connection.connection={filename:((a=l==null?void 0:l.connection)==null?void 0:a.filename)||""})):Z.error(ce("msg.error.invalidURL")),he.value=!1,A()},Ue=q({get:()=>({...o.value}),set:l=>{var a,m,_,J;l&&typeof l=="object"?o.value={...ie(),...l}:o.value=ie((m=(a=o.value)==null?void 0:a.dataSource)!=null&&m.client?(J=(_=o.value)==null?void 0:_.dataSource)==null?void 0:J.client:void 0),A()}});function At(){const l=Ia(se.value,o.value);return!(typeof l=="object"&&Object.keys(l).length===1&&(l==null?void 0:l.title)!==void 0)}const at=l=>{l?n.value=["1"]:(n.value=[],o.value.sslUse=X.No,ke(o.value.sslUse))},kt=l=>{l?(b.value=["1"],Dt(!0,"nc-connection-advanced-options")):b.value=[]};let Re;function Dt(l,a){Re&&clearTimeout(Re),ft(()=>{const m=document.querySelector(`.nc-edit-or-add-connection .${a}`);console.log("className",a,m),m&&(Re=setTimeout(()=>{m.scrollIntoView({block:"center",behavior:"smooth"})},400))})}const st=q(()=>{var a,m,_,J,N;const l=H.value?((a=w.value)==null?void 0:a.sub_type)||((_=(m=w.value)==null?void 0:m.config)==null?void 0:_.client):(J=w.value)==null?void 0:J.type;return(N=Ve[l])==null?void 0:N.icon});return vt(o,()=>{At()?(L.value=!1,Ee.value=null,re.value=!1):re.value=!0},{deep:!0}),Zt(async()=>{var l;if(C.value=!0,z.value===P.ADD)o.value.title=await ha();else{if(!w.value)return;const a=["host","port","user","password","database"],m=Object.entries(w.value.config.connection).filter(([_])=>!a.includes(_)).map(([_,J])=>({key:_,value:J}));o.value={title:w.value.title||"",dataSource:w.value.config,extraParameters:m,sslUse:X.No,is_private:(l=w.value)==null?void 0:l.is_private},se.value=JSON.parse(JSON.stringify(o.value)),A(!0)}ft(()=>{setTimeout(()=>{var m,_;const a=(_=(m=ae.value)==null?void 0:m.$el)==null?void 0:_.querySelector("input[type=text]");a==null||a.setSelectionRange(0,o.value.title.length),a==null||a.focus()},500)}),C.value=!1}),vt(W,l=>{o.value.dataSource.client=l,Ae()},{immediate:!0}),(l,a)=>{var rt;const m=Ye,_=bt,J=_t,N=ht,k=xa,x=oa,B=na,Ot=It,$t=pa,ot=Ta,nt=va,lt=Aa,Nt=wa,Pe=fa,Lt=ka,it=Ea,ct=Ca,Mt=ma,jt=mt,Ut=la,Rt=ga,Pt=is,Bt=ps;return e(w)?(d(),I("div",vs,[c("div",fs,[c("div",ms,[!e(H)&&!e(ne)?(d(),j(_,{key:0,type:"text",size:"small",onClick:a[0]||(a[0]=i=>z.value=e(P).LIST)},{default:s(()=>[t(m,{icon:"arrowLeft"})]),_:1})):$("",!0),e(st)?(d(),I("div",gs,[(d(),j(Ce(e(st)),{class:"!stroke-transparent w-4 h-4"}))])):$("",!0),c("div",bs,O((rt=e(w))==null?void 0:rt.title),1)]),c("div",_s,[c("div",{class:"w-[15px] h-[15px] cursor-pointer",onDblclick:E},null,32),t(J,{disabled:!e(Ee)},{title:s(()=>[K(O(e(Ee)),1)]),default:s(()=>[t(_,{type:"secondary",size:"small",class:ge(["nc-extdb-btn-test-connection",{"pointer-events-none":e(L)}]),loading:e(ue),disabled:e(C),"icon-position":"right",onClick:xt},{icon:s(()=>[e(L)?(d(),j(m,{key:0,icon:"circleCheckSolid",class:"!text-green-700 w-4 h-4"})):e(Ee)?(d(),j(m,{key:1,icon:"alertTriangleSolid",class:"!text-red-700 w-4 h-4"})):$("",!0)]),default:s(()=>[c("span",null,O(e(L)?"Test successful":"Test connection"),1)]),_:1},8,["class","loading","disabled"])]),_:1},8,["disabled"]),t(_,{size:"small",type:"primary",disabled:e(G)||e(C),loading:e(fe),class:"nc-extdb-btn-submit",onClick:Ct},{default:s(()=>[K(O(e(z)===e(P).ADD?"Create connection":"Modify connection"),1)]),_:1},8,["disabled","loading"]),t(_,{size:"small",type:"text",onClick:a[1]||(a[1]=i=>U.value=!1)},{default:s(()=>[t(m,{icon:"close",class:"text-gray-600"})]),_:1})])]),c("div",ys,[c("div",Ss,[c("div",hs,[c("div",Is,[t(jt,{ref_key:"form",ref:ae,model:e(o),"hide-required-mark":"",name:"external-base-create-form",layout:"vertical",class:"flex flex-col gap-8"},{default:s(()=>[c("div",ws,[Es,c("div",Cs,[t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:"Connection name"},e(D).title),{default:s(()=>[t(N,{value:e(o).title,"onUpdate:value":a[2]||(a[2]=i=>e(o).title=i)},null,8,["value"])]),_:1},16)]),_:1})]),_:1})])]),c("div",xs,[c("div",Ts,[As,[e(p).SQLITE,e(p).SNOWFLAKE,e(p).DATABRICKS].includes(e(o).dataSource.client)?$("",!0):(d(),j($t,{key:0,visible:e(he),"onUpdate:visible":a[6]||(a[6]=i=>ve(he)?he.value=i:null),placement:"bottomRight"},{overlay:s(()=>[c("div",Ds,[Os,t(Ot,{value:e(me),"onUpdate:value":a[4]||(a[4]=i=>ve(me)?me.value=i:null),class:"!rounded-lg !min-h-[120px] !max-h-[250px] nc-scrollbar-thin"},null,8,["value"]),c("div",$s,[t(_,{size:"small",type:"secondary",onClick:a[5]||(a[5]=()=>{he.value=!1,me.value=""})},{default:s(()=>[K(O(l.$t("general.cancel")),1)]),_:1}),t(_,{size:"small",onClick:Tt},{default:s(()=>[K(" Import")]),_:1})])])]),default:s(()=>[t(_,{type:"text",size:"xsmall",class:"nc-extdb-btn-import-url !rounded-md !h-6 !px-2 flex-none",onClick:a[3]||(a[3]=ea(i=>he.value=!0,["stop"]))},{default:s(()=>[c("div",ks,[t(m,{icon:"magic",class:"flex-none text-yellow-500"}),K(" "+O(l.$t("activity.useConnectionUrl")),1)])]),_:1})]),_:1},8,["visible"]))]),c("div",Ns,[e(Se)?(d(),j(B,{key:0,gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:l.$t("labels.dbType")},e(D)["dataSource.client"]),{default:s(()=>[t(nt,{value:e(o).dataSource.client,"onUpdate:value":a[7]||(a[7]=i=>e(o).dataSource.client=i),class:"nc-select-shadow nc-extdb-db-type","dropdown-class-name":"nc-dropdown-ext-db-type",onChange:Ae},{default:s(()=>[(d(!0),I(oe,null,Ie(e(we),i=>(d(),j(ot,{key:i.value,value:i.value},{default:s(()=>[K(O(i.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"])]),_:1})]),_:1})):$("",!0),e(o).dataSource.client===e(p).SQLITE?(d(),j(B,{key:1,gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:l.$t("labels.sqliteFile")},e(D)["dataSource.connection.connection.filename"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.connection.filename,"onUpdate:value":a[8]||(a[8]=i=>e(o).dataSource.connection.connection.filename=i),placeholder:"Enter absolute file path"},null,8,["value"])]),_:1},16,["label"])]),_:1})]),_:1})):e(o).dataSource.client===e(p).SNOWFLAKE?(d(),I(oe,{key:2},[t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:l.$t("labels.account")},e(D)["dataSource.connection.account"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.account,"onUpdate:value":a[9]||(a[9]=i=>e(o).dataSource.connection.account=i),class:"nc-extdb-host-address"},null,8,["value"])]),_:1},16,["label"])]),_:1})]),_:1}),t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:l.$t("labels.username")},e(D)["dataSource.connection.username"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.username,"onUpdate:value":a[10]||(a[10]=i=>e(o).dataSource.connection.username=i),class:"nc-extdb-host-user"},null,8,["value"])]),_:1},16,["label"])]),_:1}),t(x,{span:12},{default:s(()=>[t(k,M({label:l.$t("labels.password"),class:"nc-form-item-connection-password"},e(D)["dataSource.connection.password"]),{default:s(()=>[t(lt,{value:e(o).dataSource.connection.password,"onUpdate:value":a[11]||(a[11]=i=>e(o).dataSource.connection.password=i),class:"nc-extdb-host-password"},null,8,["value"])]),_:1},16,["label"])]),_:1})]),_:1}),t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:"Warehouse"},e(D)["dataSource.connection.warehouse"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.warehouse,"onUpdate:value":a[12]||(a[12]=i=>e(o).dataSource.connection.warehouse=i),class:"nc-extdb-host-database"},null,8,["value"])]),_:1},16)]),_:1}),t(x,{span:12},{default:s(()=>[t(k,M({label:l.$t("labels.database")},e(D)["dataSource.connection.database"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.database,"onUpdate:value":a[13]||(a[13]=i=>e(o).dataSource.connection.database=i),class:"nc-extdb-host-database",placeholder:`${l.$t("labels.database")} ${l.$t("general.name").toLowerCase()}`},null,8,["value","placeholder"])]),_:1},16,["label"])]),_:1})]),_:1}),t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:"Schema"},e(D)["dataSource.connection.schema"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.schema,"onUpdate:value":a[14]||(a[14]=i=>e(o).dataSource.connection.schema=i),class:"nc-extdb-host-database"},null,8,["value"])]),_:1},16)]),_:1})]),_:1})],64)):e(o).dataSource.client===e(p).DATABRICKS?(d(),I(oe,{key:3},[t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:"Token"},e(D)["dataSource.connection.token"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.token,"onUpdate:value":a[15]||(a[15]=i=>e(o).dataSource.connection.token=i),class:"nc-extdb-host-token"},null,8,["value"])]),_:1},16)]),_:1}),t(x,{span:12},{default:s(()=>[t(k,M({label:"Host"},e(D)["dataSource.connection.host"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.host,"onUpdate:value":a[16]||(a[16]=i=>e(o).dataSource.connection.host=i),class:"nc-extdb-host-address"},null,8,["value"])]),_:1},16)]),_:1})]),_:1}),t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:"Path"},e(D)["dataSource.connection.path"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.path,"onUpdate:value":a[17]||(a[17]=i=>e(o).dataSource.connection.path=i),class:"nc-extdb-host-path"},null,8,["value"])]),_:1},16)]),_:1}),t(x,{span:12},{default:s(()=>[t(k,M({label:"Database"},e(D)["dataSource.connection.database"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.database,"onUpdate:value":a[18]||(a[18]=i=>e(o).dataSource.connection.database=i),placeholder:`${l.$t("labels.database")} ${l.$t("general.name").toLowerCase()}`,class:"nc-extdb-host-database"},null,8,["value","placeholder"])]),_:1},16)]),_:1})]),_:1}),t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:"Schema"},e(D)["dataSource.connection.schema"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.schema,"onUpdate:value":a[19]||(a[19]=i=>e(o).dataSource.connection.schema=i),class:"nc-extdb-host-schema"},null,8,["value"])]),_:1},16)]),_:1})]),_:1})],64)):(d(),I(oe,{key:4},[t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:l.$t("labels.hostAddress")},e(D)["dataSource.connection.host"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.host,"onUpdate:value":a[20]||(a[20]=i=>e(o).dataSource.connection.host=i),class:"nc-extdb-host-address"},null,8,["value"])]),_:1},16,["label"])]),_:1}),t(x,{span:12},{default:s(()=>[t(k,M({label:l.$t("labels.port"),class:"nc-form-item-connection-port"},e(D)["dataSource.connection.port"]),{default:s(()=>[t(Nt,{value:e(o).dataSource.connection.port,"onUpdate:value":a[21]||(a[21]=i=>e(o).dataSource.connection.port=i),class:"!w-full nc-extdb-host-port !rounded-md"},null,8,["value"])]),_:1},16,["label"])]),_:1})]),_:1}),t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:l.$t("labels.username")},e(D)["dataSource.connection.user"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.user,"onUpdate:value":a[22]||(a[22]=i=>e(o).dataSource.connection.user=i),class:"nc-extdb-host-user"},null,8,["value"])]),_:1},16,["label"])]),_:1}),t(x,{span:12},{default:s(()=>[t(k,{label:l.$t("labels.password")},{default:s(()=>[t(lt,{value:e(o).dataSource.connection.password,"onUpdate:value":a[23]||(a[23]=i=>e(o).dataSource.connection.password=i),class:"nc-extdb-host-password"},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,M({label:l.$t("labels.database")},e(D)["dataSource.connection.database"]),{default:s(()=>[t(N,{value:e(o).dataSource.connection.database,"onUpdate:value":a[24]||(a[24]=i=>e(o).dataSource.connection.database=i),placeholder:`${l.$t("labels.database")} ${l.$t("general.name").toLowerCase()}`,class:"nc-extdb-host-database"},null,8,["value","placeholder"])]),_:1},16,["label"])]),_:1}),t(x,{span:12},{default:s(()=>[[e(p).MSSQL,e(p).PG].includes(e(o).dataSource.client)&&e(o).dataSource.searchPath?(d(),j(k,M({key:0,label:l.$t("labels.schemaName")},e(D)["dataSource.searchPath.0"]),{default:s(()=>[t(N,{value:e(o).dataSource.searchPath[0],"onUpdate:value":a[25]||(a[25]=i=>e(o).dataSource.searchPath[0]=i)},null,8,["value"])]),_:1},16,["label"])):$("",!0)]),_:1})]),_:1}),[e(p).SQLITE,e(p).SNOWFLAKE,e(p).DATABRICKS].includes(e(o).dataSource.client)?$("",!0):(d(),j(B,{key:0,gutter:24},{default:s(()=>[t(x,{span:24},{default:s(()=>[t(k,M({class:"nc-form-extra-connectin-parameters mb-2",label:"Connection parameters"},e(D).extraParameters),{default:s(()=>[c("div",Ls,[(d(!0),I(oe,null,Ie(e(o).extraParameters,(i,ee)=>(d(),I("div",{key:ee},[t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(N,{value:i.key,"onUpdate:value":De=>i.key=De,placeholder:"Key"},null,8,["value","onUpdate:value"])]),_:2},1024),t(x,{span:12},{default:s(()=>[c("div",Ms,[t(N,{value:i.value,"onUpdate:value":De=>i.value=De,placeholder:"Value"},null,8,["value","onUpdate:value"]),t(_,{type:"text",size:"small",onClick:De=>R(ee)},{default:s(()=>[t(m,{icon:"delete",class:"flex-none text-gray-500"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024)]))),128)),c("div",null,[t(_,{size:"small",type:"secondary",class:"",onClick:de},{default:s(()=>[c("div",js,[t(m,{icon:"plus"}),K(" Add ")])]),_:1})])])]),_:1},16)]),_:1})]),_:1}))],64))])]),[e(p).SQLITE,e(p).SNOWFLAKE,e(p).DATABRICKS].includes(e(o).dataSource.client)?$("",!0):(d(),I(oe,{key:0},[t(Pe),t(ct,{"active-key":e(n),"onUpdate:activeKey":a[35]||(a[35]=i=>ve(n)?n.value=i:null),ghost:"",class:"!mt-4"},{expandIcon:s(({isActive:i})=>[t(Lt,{checked:i,size:"small",onChange:a[26]||(a[26]=ee=>at(ee))},null,8,["checked"])]),default:s(()=>[t(it,{key:"1",collapsible:"disabled"},{header:s(()=>[c("div",Us,[c("div",{class:"nc-form-section-title cursor-pointer",onClick:a[27]||(a[27]=i=>at(!e(n).length))}," Use SSL ")])]),default:s(()=>[c("div",Rs,[t(B,{gutter:24},{default:s(()=>[t(x,{span:12},{default:s(()=>[t(k,{label:"SSL mode"},{default:s(()=>[t(nt,{value:e(o).sslUse,"onUpdate:value":a[28]||(a[28]=i=>e(o).sslUse=i),class:"nc-select-shadow","dropdown-class-name":"nc-dropdown-ssl-mode",onSelect:ke},{default:s(()=>[(d(!0),I(oe,null,Ie(Object.values(e(X)),i=>(d(),j(ot,{key:i,value:i},{default:s(()=>[c("div",Ps,[c("div",Bs,O(i),1),e(o).sslUse===i?(d(),j(Ce(("iconMap"in l?l.iconMap:e(u)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):$("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(B,{gutter:24},{default:s(()=>[t(x,{span:24},{default:s(()=>[e(o).sslUse&&![e(X).No,e(X).Allowed].includes(e(o).sslUse)?(d(),j(k,{key:0,label:"SSL keys",class:"!mt-3"},{default:s(()=>[c("div",Ks,[t(J,{placement:"top"},{title:s(()=>[c("span",null,O(l.$t("tooltip.clientCert")),1)]),default:s(()=>[t(_,{size:"small",type:"secondary",disabled:!e(je),class:"shadow !w-[90px]",onClick:a[29]||(a[29]=i=>{var ee;return(ee=e(Le))==null?void 0:ee.click()})},{default:s(()=>[K(O(l.$t("labels.clientCert")),1)]),_:1},8,["disabled"])]),_:1}),t(J,{placement:"top"},{title:s(()=>[c("span",null,O(l.$t("tooltip.clientKey")),1)]),default:s(()=>[t(_,{size:"small",type:"secondary",disabled:!e(je),class:"shadow !w-[90px]",onClick:a[30]||(a[30]=i=>{var ee;return(ee=e(Ne))==null?void 0:ee.click()})},{default:s(()=>[K(O(l.$t("labels.clientKey")),1)]),_:1},8,["disabled"])]),_:1}),t(J,{placement:"top"},{title:s(()=>[c("span",null,O(l.$t("tooltip.clientCA")),1)]),default:s(()=>[t(_,{size:"small",type:"secondary",disabled:!e(je),class:"shadow !w-[90px]",onClick:a[31]||(a[31]=i=>{var ee;return(ee=e($e))==null?void 0:ee.click()})},{default:s(()=>[K(O(l.$t("labels.serverCA")),1)]),_:1},8,["disabled"])]),_:1})])]),_:1})):$("",!0)]),_:1})]),_:1}),c("input",{ref_key:"caFileInput",ref:$e,type:"file",class:"!hidden",accept:".ca",onChange:a[32]||(a[32]=i=>Me(("CertTypes"in l?l.CertTypes:e(ze)).ca,e($e)))},null,544),c("input",{ref_key:"certFileInput",ref:Le,type:"file",class:"!hidden",accept:".cert",onChange:a[33]||(a[33]=i=>Me(("CertTypes"in l?l.CertTypes:e(ze)).cert,e(Le)))},null,544),c("input",{ref_key:"keyFileInput",ref:Ne,type:"file",class:"!hidden",accept:".key",onChange:a[34]||(a[34]=i=>Me(("CertTypes"in l?l.CertTypes:e(ze)).key,e(Ne)))},null,544)])]),_:1})]),_:1},8,["active-key"])],64)),[e(p).SQLITE,e(p).SNOWFLAKE,e(p).DATABRICKS].includes(e(o).dataSource.client)?$("",!0):(d(),j(ct,{key:1,"active-key":e(b),"onUpdate:activeKey":a[38]||(a[38]=i=>ve(b)?b.value=i:null),ghost:"",class:"nc-connection-advanced-options !mt-4"},{expandIcon:s(({isActive:i})=>[t(_,{type:"text",size:"small",class:"!-ml-1.5",onClick:a[36]||(a[36]=ee=>kt(!e(b).length))},{default:s(()=>[zs,t(m,{icon:"chevronDown",class:ge(["ml-2 flex-none cursor-pointer transform transition-transform duration-500",{"!rotate-180":i}])},null,8,["class"])]),_:2},1024)]),default:s(()=>[t(it,{key:"1",collapsible:"disabled"},{header:s(()=>[Fs]),default:s(()=>[c("div",Gs,[Qs,c("div",qs,[t(Mt,{modelValue:e(Ue),"onUpdate:modelValue":a[37]||(a[37]=i=>ve(Ue)?Ue.value=i:null),class:"nc-connection-json-editor h-[400px] w-full"},null,8,["modelValue"])])])]),_:1})]),_:1},8,["active-key"]))]),_:1},8,["model"]),Vs])]),t(Rt,{"model-value":e(C),inline:"",transition:"",class:"!bg-opacity-15"},{default:s(()=>[c("div",Ws,[t(Ut,{size:"large"})])]),_:1},8,["model-value"])]),c("div",Hs,[("isEeUI"in l?l.isEeUI:e(ta))?(d(),I(oe,{key:0},[t(Pt,{varient:"new"}),t(Pe)],64)):$("",!0),t(Bt),t(Pe)])])])):$("",!0)}}}),Js=Je(Ys,[["__scopeId","data-v-2af8ed09"]]),Xs={key:0,class:"h-full"},To=xe({__name:"EditOrAdd",props:{loadDatasourceInfo:{type:Boolean},baseId:{}},setup(v){const T=v,{loadDatasourceInfo:y,baseId:V}=ca(T),{pageMode:U,IntegrationsPageMode:W,integrationType:ne,activeIntegration:z}=Xe(),P=q({get:()=>U.value===W.ADD||U.value===W.EDIT,set:te=>{te||(U.value=null)}}),w=q(()=>{var te,h,H,F;switch(U.value===W.EDIT?((te=z.value)==null?void 0:te.sub_type)||((H=(h=z.value)==null?void 0:h.config)==null?void 0:H.client):(F=z.value)==null?void 0:F.type){case ne.PostgreSQL:return p.PG;case ne.MySQL:return p.MYSQL;case ne.SQLITE:return p.SQLITE;default:return}});return(te,h)=>{const H=Js,F=qe;return d(),j(F,{visible:e(P),"onUpdate:visible":h[1]||(h[1]=L=>ve(P)?P.value=L:null),size:"large","wrap-class-name":"nc-modal-edit-or-add-integration",onKeydown:h[2]||(h[2]=Qe(L=>P.value=!1,["esc"]))},{default:s(()=>[e(w)?(d(),I("div",Xs,[t(H,{open:e(P),"onUpdate:open":h[0]||(h[0]=L=>ve(P)?P.value=L:null),"connection-type":e(w),"load-datasource-info":e(y),"base-id":e(V)},null,8,["open","connection-type","load-datasource-info","base-id"])])):$("",!0)]),_:1},8,["visible"])}}});export{Co as _,xo as a,To as b,Na as c,Xe as u,Da as v};
