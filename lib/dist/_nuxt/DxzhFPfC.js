const __vite__fileDeps=["./D9P7GPY7.js","./3QBYHahY.js","./entry.Ic44fwRn.css","./leimKhvx.js","./CyuhXrst.js","./Divider.DqtSqZhb.css","./kHOslGNR.js","./CmN9vPg3.js","./BQQOEPN4.js","./xnDaHwV-.js","./DPgYHC40.js","./BsWDDIqE.js","./ceYq-xax.js","./List.D58N8urB.css","./qAM_WqEm.js","./EmojiPicker.B3qwzTNG.css","./DBIAawZH.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as Z,aA as me,az as A,cM as H,cR as Y,r as q,o as b,S as V,w as t,P as e,Q as F,b as a,de as _e,d as N,t as I,T as $,a8 as ee,B as pe,ds as fe,a1 as J,$ as W,Z as M,a6 as U,N as te,L as se,g as X,co as le,a as _,A as ne,ai as ve,cQ as oe,cU as ye,Y as we,d6 as z,d7 as ie,ab as be,a2 as xe,ac as he,c as K,aq as Q,U as G,aO as ge}from"./3QBYHahY.js";import{_ as ae}from"./Kma333Sh.js";import{_ as ke}from"./B3xChUf-.js";import{_ as re}from"./leimKhvx.js";import{u as ce}from"./BVQBF9Vn.js";import{_ as Te}from"./DQEIlAel.js";import{u as $e}from"./Uiq3YTcq.js";import"./C95Svpv6.js";import"./C_IZzKNf.js";import"./DgfVJyEd.js";import"./CWtzMcwx.js";import"./DAKhk9t6.js";import"./Bk0xUMNV.js";import"./CGxepfeV.js";import"./xnDaHwV-.js";import"./wEQwkVjR.js";import"./kHOslGNR.js";import"./CmN9vPg3.js";import"./BQQOEPN4.js";import"./DPgYHC40.js";import"./BsWDDIqE.js";import"./ceYq-xax.js";import"./Dg1gNFnz.js";import"./Ci1lK5Ee.js";import"./CyuhXrst.js";import"./ISaCd8Ij.js";import"./BV5EkxN-.js";import"./DPqnb67u.js";import"./CtMydB5S.js";import"./D4iSzjWt.js";import"./D7hrRKCy.js";import"./BEpKpjF5.js";import"./3ezdMRmZ.js";const Ie=M(()=>U(()=>import("./D9P7GPY7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url).then(u=>u.default||u)),Le=Z({__name:"ProjectListDropdown",setup(u){const n=me(),{basesList:x}=A(n),O=H(),{base:h,isSharedBase:y}=A(O),{loadProjectTables:k}=Y(),T=q(!1),w=async g=>{if(!(g!=null&&g.id))return;const C=n.isProjectPopulated(g.id);await pe(O.baseUrl({id:g.id,type:"database",isSharedBase:y.value})),C||await k(g.id)};return(g,C)=>{const j=fe,P=J,s=W,p=Ie,S=ae;return b(),V(S,{visible:e(T),"onUpdate:visible":C[1]||(C[1]=i=>F(T)?T.value=i:null)},{overlay:t(()=>[e(h).id?(b(),V(p,{key:0,open:e(T),"onUpdate:open":C[0]||(C[0]=i=>F(T)?T.value=i:null),value:e(h).id,list:e(x),"option-value-key":"id","option-label-key":"title","search-input-placeholder":"Search bases",onChange:w},{listItem:t(({option:i})=>[a(j,{type:i==null?void 0:i.type,"model-value":("parseProp"in g?g.parseProp:e(_e))(i.meta).iconColor,size:"xsmall",readonly:""},null,8,["type","model-value"]),a(P,{class:"truncate flex-1","show-on-truncate-only":""},{title:t(()=>[N(I(i==null?void 0:i.title),1)]),default:t(()=>[N(" "+I(i==null?void 0:i.title),1)]),_:2},1024),i.id===e(h).id?(b(),V(s,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):$("",!0)]),_:1},8,["open","value","list"])):$("",!0)]),default:t(()=>[ee(g.$slots,"default",{isOpen:e(T)})]),_:3},8,["visible"])}}}),Ve=M(()=>U(()=>import("./qAM_WqEm.js"),__vite__mapDeps([14,1,2,15]),import.meta.url).then(u=>u.default||u)),Se=M(()=>U(()=>import("./D9P7GPY7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url).then(u=>u.default||u)),De={class:"px-2 py-1.5 flex items-center justify-between gap-2 text-sm font-weight-500 !text-brand-500 hover:bg-gray-100 rounded-md cursor-pointer"},Ne={class:"flex items-center gap-2"},Ce=Z({__name:"TableListDropdown",setup(u){const{isMobileMode:n}=te(),{$e:x}=ne(),{isUIAllowed:O}=se(),{base:h}=A(H()),{activeTable:y,activeTables:k}=A(Y()),{openTable:T}=Y(),w=q(!1),g=X(()=>{var s,p;return((p=(s=h.value)==null?void 0:s.sources)==null?void 0:p.findIndex(S=>{var i;return S.id===((i=y.value)==null?void 0:i.source_id)}))??-1}),C=X(()=>k.value.filter(s=>{var p;return(s==null?void 0:s.source_id)===((p=y.value)==null?void 0:p.source_id)})||[]),j=s=>{s!=null&&s.id&&T(s)};function P(){var E,o;if(x("c:table:create:topbar"),g.value===-1)return;w.value=!1;const s=q(!0),p=(E=h.value.sources)==null?void 0:E[g.value].id;if(!p||!((o=h.value)!=null&&o.id))return;const{close:S}=ce(ke,{modelValue:s,sourceId:p,baseId:h.value.id,onCreate:i,"onUpdate:modelValue":()=>i()});function i(l){s.value=!1,l&&(setTimeout(()=>{const d=document.querySelector(`[data-table-id="${l.id}"]`);d&&(d==null||d.scrollIntoView({behavior:"smooth",block:"nearest"}))},1e3),S(1e3))}}return(s,p)=>{const S=W,i=Ve,E=J,o=re,l=Se,d=ae;return b(),V(d,{visible:e(w),"onUpdate:visible":p[2]||(p[2]=v=>F(w)?w.value=v:null)},{overlay:t(()=>{var v,m,L,D;return[a(l,{open:e(w),"onUpdate:open":p[1]||(p[1]=r=>F(w)?w.value=r:null),value:e(y).id,list:e(C),"option-value-key":"id","option-label-key":"title","search-input-placeholder":"Search tables",onChange:j},le({listItem:t(({option:r})=>{var f;return[_("div",null,[a(i,{emoji:(f=r==null?void 0:r.meta)==null?void 0:f.icon,readonly:"",size:"xsmall"},{default:t(()=>[a(S,{icon:"table",class:"min-w-4 !text-gray-500"})]),_:2},1032,["emoji"])]),a(E,{class:"truncate flex-1","show-on-truncate-only":""},{title:t(()=>[N(I(r==null?void 0:r.title),1)]),default:t(()=>[N(" "+I(r==null?void 0:r.title),1)]),_:2},1024),r.id===e(y).id?(b(),V(S,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):$("",!0)]}),_:2},[!e(n)&&e(O)("tableCreate",{roles:((v=e(h))==null?void 0:v.project_role)||((m=e(h))==null?void 0:m.workspace_role),source:((D=(L=e(h))==null?void 0:L.sources)==null?void 0:D[e(g)])||{}})?{name:"listFooter",fn:t(()=>[a(o,{class:"!mt-0 !mb-2"}),_("div",{class:"px-2 mb-2",onClick:p[0]||(p[0]=r=>P())},[_("div",De,[_("div",Ne,[a(S,{icon:"plus"}),_("div",null,I(s.$t("general.createEntity",{entity:s.$t("objects.table")})),1)])])])]),key:"0"}:void 0]),1032,["open","value","list"])]}),default:t(()=>[ee(s.$slots,"default",{isOpen:e(w)})]),_:3},8,["visible"])}}}),Pe=M(()=>U(()=>import("./qAM_WqEm.js"),__vite__mapDeps([14,1,2,15]),import.meta.url).then(u=>u.default||u)),Ee=M(()=>U(()=>import("./D9P7GPY7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url).then(u=>u.default||u)),je={class:"overflow-hidden mb-2"},ze={class:"flex items-center justify-between gap-2 text-sm font-weight-500 !text-brand-500"},Ae={class:"flex items-center gap-2"},Re={class:"nc-viewlist-submenu-popup-item","data-testid":"topbar-view-create-grid"},Oe={class:"nc-viewlist-submenu-popup-item","data-testid":"topbar-view-create-form"},Ge={class:"nc-viewlist-submenu-popup-item","data-testid":"topbar-view-create-gallery"},Be={class:"nc-viewlist-submenu-popup-item"},Me={class:"nc-viewlist-submenu-popup-item"},Ue=Z({__name:"ViewListDropdown",setup(u){const{isMobileMode:n}=te(),{t:x}=ve(),{$e:O}=ne(),{isUIAllowed:h}=se(),{base:y}=A(H()),{activeTable:k}=A(Y()),T=oe(),{activeView:w,views:g}=A(T),{loadViews:C,navigateToView:j}=T,{refreshCommandPalette:P}=ye(),s=q(!1),p=X(()=>{var o;return(o=y.value.sources)==null?void 0:o.find(l=>{var d;return l.id===((d=w.value)==null?void 0:d.source_id)})}),S=async o=>{var l;o!=null&&o.id&&await j({view:o,tableId:k.value.id,baseId:y.value.id,hardReload:o.type===z.FORM&&((l=w.value)==null?void 0:l.id)===o.id,doNotSwitchTab:!0})},i=(o="",l)=>{var d,v;return l.is_default&&x("title.defaultView").toLowerCase().includes(o)?!0:(v=(d=l.title)==null?void 0:d.toLowerCase())==null?void 0:v.includes(o.toLowerCase())};async function E({title:o="",type:l,copyViewId:d,groupingFieldColumnId:v,calendarRange:m,coverImageColumnId:L}){s.value=!1;const D=q(!0),{close:r}=ce(Te,{modelValue:D,title:o,type:l,tableId:k.value.id,selectedViewId:d,calendarRange:m,groupingFieldColumnId:v,coverImageColumnId:L,"onUpdate:modelValue":f,onCreated:async R=>{f(),P(),await C({tableId:k.value.id,force:!0}),k.value.meta={...k.value.meta,hasNonDefaultViews:!0},j({view:R,tableId:k.value.id,baseId:y.value.id,doNotSwitchTab:!0}),O("a:view:create",{view:R.type})}});function f(){s.value=!1,D.value=!1,r(1e3)}}return(o,l)=>{const d=ie,v=Pe,m=J,L=W,D=re,r=be,f=xe,R=he,ue=Ee,de=ae;return e(w)?(b(),V(de,{key:0,visible:e(s),"onUpdate:visible":l[6]||(l[6]=c=>F(s)?s.value=c:null)},{overlay:t(()=>[a(ue,{open:e(s),"onUpdate:open":l[5]||(l[5]=c=>F(s)?s.value=c:null),value:e(w).id,list:e(g),"option-value-key":"id","option-label-key":"title","search-input-placeholder":"Search views","filter-option":i,onChange:S},le({listItem:t(({option:c})=>{var B;return[_("div",null,[a(v,{emoji:(B=c==null?void 0:c.meta)==null?void 0:B.icon,readonly:"",size:"xsmall"},{default:t(()=>[a(d,{meta:{type:c==null?void 0:c.type},class:"min-w-4 text-lg flex"},null,8,["meta"])]),_:2},1032,["emoji"])]),a(m,{class:"truncate flex-1","show-on-truncate-only":""},{title:t(()=>[N(I(c!=null&&c.is_default?o.$t("title.defaultView"):c==null?void 0:c.title),1)]),default:t(()=>[N(" "+I(c!=null&&c.is_default?o.$t("title.defaultView"):c==null?void 0:c.title),1)]),_:2},1024),c.id===e(w).id?(b(),V(L,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):$("",!0)]}),_:2},[!e(n)&&e(h)("viewCreateOrEdit")?{name:"listFooter",fn:t(()=>[a(D,{class:"!mt-0 !mb-2"}),_("div",je,[a(R,{class:"nc-viewlist-menu"},{default:t(()=>[a(f,{"popup-class-name":"nc-viewlist-submenu-popup "},{title:t(()=>[_("div",ze,[_("div",Ae,[a(L,{icon:"plus"}),_("div",null,I(o.$t("general.createEntity",{entity:o.$t("objects.view")})),1)]),a(L,{icon:"arrowRight",class:"text-base text-gray-600 group-hover:text-gray-800"})])]),expandIcon:t(()=>[]),default:t(()=>{var c;return[a(r,{onClick:l[0]||(l[0]=we(B=>E({type:e(z).GRID}),["stop"]))},{default:t(()=>[_("div",Re,[a(d,{meta:{type:e(z).GRID}},null,8,["meta"]),N(" Grid ")])]),_:1}),(c=e(p))!=null&&c.is_schema_readonly?$("",!0):(b(),V(r,{key:0,onClick:l[1]||(l[1]=B=>E({type:e(z).FORM}))},{default:t(()=>[_("div",Oe,[a(d,{meta:{type:e(z).FORM}},null,8,["meta"]),N(" Form ")])]),_:1})),a(r,{onClick:l[2]||(l[2]=B=>E({type:e(z).GALLERY}))},{default:t(()=>[_("div",Ge,[a(d,{meta:{type:e(z).GALLERY}},null,8,["meta"]),N(" Gallery ")])]),_:1}),a(r,{"data-testid":"topbar-view-create-kanban",onClick:l[3]||(l[3]=B=>E({type:e(z).KANBAN}))},{default:t(()=>[_("div",Be,[a(d,{meta:{type:e(z).KANBAN}},null,8,["meta"]),N(" Kanban ")])]),_:1}),a(r,{"data-testid":"topbar-view-create-calendar",onClick:l[4]||(l[4]=B=>E({type:e(z).CALENDAR}))},{default:t(()=>[_("div",Me,[a(d,{meta:{type:e(z).CALENDAR},class:"!w-4 !h-4"},null,8,["meta"]),N(" "+I(o.$t("objects.viewType.calendar")),1)])]),_:1})]}),_:1})]),_:1})])]),key:"0"}:void 0]),1032,["open","value","list"])]),default:t(()=>[ee(o.$slots,"default",{isOpen:e(s)})]),_:3},8,["visible"])):$("",!0)}}}),Fe=M(()=>U(()=>import("./qAM_WqEm.js"),__vite__mapDeps([14,1,2,15]),import.meta.url).then(u=>u.default||u)),Ke=M(()=>U(()=>import("./DBIAawZH.js"),__vite__mapDeps([16,1,2]),import.meta.url).then(u=>u.default||u)),Ye={class:"capitalize"},qe={class:"capitalize"},Qe={class:"text-ellipsis capitalize",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},Ze={class:"text-ellipsis",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},He={class:"text-ellipsis",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},Dt=Z({__name:"ViewInfo",setup(u){const{isMobileMode:n}=te(),{activeView:x,openedViewsTab:O}=A(oe()),{base:h,isSharedBase:y}=A(H()),{activeTable:k}=A(Y()),{isLeftSidebarOpen:T}=A($e());return(w,g)=>{var l,d;const C=ge,j=J,P=W,s=Le,p=Fe,S=Ce,i=ie,E=Ue,o=Ke;return b(),K("div",{class:G(["flex flex-row items-center border-gray-50 transition-all duration-100 select-none",{"text-base w-[calc(100%_-_52px)]":e(n),"w-[calc(100%_-_44px)]":!e(n)&&!e(T),"w-full":!e(n)&&e(T)}])},[e(n)?$("",!0):(b(),K(Q,{key:0},[e(k)?(b(),V(s,{key:0},{default:t(({isOpen:v})=>[_("div",{class:G(["rounded-lg h-8 px-2 text-gray-700 font-weight-500 hover:bg-gray-100 hover:text-gray-900 flex items-center gap-1 cursor-pointer max-w-1/3",{"!max-w-none":e(y)&&!e(n),"":!e(n)&&e(T)}])},[a(j,{disabled:e(y)||v},{title:t(()=>{var m;return[_("span",Ye,I((m=e(h))==null?void 0:m.title),1)]}),default:t(()=>{var m;return[a(C,{type:(m=e(h))==null?void 0:m.type,class:"!grayscale min-w-4",style:{filter:"grayscale(100%) brightness(115%)"}},null,8,["type"])]}),_:2},1032,["disabled"]),e(y)?(b(),K(Q,{key:0},[a(j,{class:"ml-1 truncate nc-active-base-title max-w-full !leading-5","show-on-truncate-only":"",disabled:v},{title:t(()=>{var m;return[_("span",qe,I((m=e(h))==null?void 0:m.title),1)]}),default:t(()=>{var m;return[_("span",Qe,I((m=e(h))==null?void 0:m.title),1)]}),_:2},1032,["disabled"]),a(P,{icon:"chevronDown",class:G(["!text-current opacity-70 flex-none transform transition-transform duration-25 w-3.5 h-3.5",{"!rotate-180":v}])},null,8,["class"])],64)):$("",!0)],2)]),_:1})):$("",!0),a(P,{icon:"ncSlash1",class:"nc-breadcrumb-divider"})],64)),e(n)&&!((l=e(x))!=null&&l.is_default)?$("",!0):(b(),K(Q,{key:1},[e(k)?(b(),V(S,{key:0},{default:t(({isOpen:v})=>{var m,L,D,r;return[_("div",{class:G(["rounded-lg h-8 px-2 text-gray-700 font-weight-500 hover:bg-gray-100 hover:text-gray-900 flex items-center gap-1 cursor-pointer",{"max-w-full":e(n),"max-w-1/2":(m=e(x))==null?void 0:m.is_default,"max-w-1/4":!e(y)&&!e(n)&&!((L=e(x))!=null&&L.is_default),"max-w-none":e(y)&&!e(n)}])},[e(n)?(b(),V(p,{key:0,emoji:(r=(D=e(k))==null?void 0:D.meta)==null?void 0:r.icon,readonly:"",size:"xsmall",class:"mr-1"},{default:t(()=>[a(P,{icon:"table",class:G(["min-w-5",{"!text-gray-500":!e(n),"!text-gray-700":e(n)}])},null,8,["class"])]),_:1},8,["emoji"])):$("",!0),a(j,{class:"truncate nc-active-table-title max-w-full !leading-5","show-on-truncate-only":"",disabled:v},{title:t(()=>{var f;return[N(I((f=e(k))==null?void 0:f.title),1)]}),default:t(()=>{var f;return[_("span",Ze,I((f=e(k))==null?void 0:f.title),1)]}),_:2},1032,["disabled"]),a(P,{icon:"chevronDown",class:G(["!text-current opacity-70 flex-none transform transition-transform duration-25 w-3.5 h-3.5",{"!rotate-180":v}])},null,8,["class"])],2)]}),_:1})):$("",!0)],64)),e(n)?$("",!0):(b(),V(P,{key:2,icon:"ncSlash1",class:"nc-breadcrumb-divider"})),e(n)&&((d=e(x))!=null&&d.is_default)?$("",!0):(b(),K(Q,{key:3},[a(E,null,{default:t(({isOpen:v})=>{var m,L,D,r;return[_("div",{class:G(["rounded-lg h-8 px-2 text-gray-800 font-semibold hover:bg-gray-100 hover:text-gray-900 flex items-center gap-1 cursor-pointer",{"max-w-full":e(n),"max-w-2/5":!e(y)&&!e(n)&&((m=e(x))==null?void 0:m.is_default),"max-w-1/2":!e(y)&&!e(n)&&!((L=e(x))!=null&&L.is_default),"max-w-none":e(y)&&!e(n)}])},[e(n)?(b(),V(p,{key:0,emoji:(r=(D=e(x))==null?void 0:D.meta)==null?void 0:r.icon,readonly:"",size:"xsmall",class:"mr-1"},{default:t(()=>{var f;return[a(i,{meta:{type:(f=e(x))==null?void 0:f.type},class:"min-w-4.5 text-lg flex"},null,8,["meta"])]}),_:1},8,["emoji"])):$("",!0),a(j,{class:"truncate nc-active-view-title max-w-full !leading-5","show-on-truncate-only":"",disabled:v},{title:t(()=>{var f,R;return[N(I((f=e(x))!=null&&f.is_default?w.$t("title.defaultView"):(R=e(x))==null?void 0:R.title),1)]}),default:t(()=>{var f,R;return[_("span",He,I((f=e(x))!=null&&f.is_default?w.$t("title.defaultView"):(R=e(x))==null?void 0:R.title),1)]}),_:2},1032,["disabled"]),a(P,{icon:"chevronDown",class:G(["!text-current opacity-70 flex-none transform transition-transform duration-25 w-3.5 h-3.5",{"!rotate-180":v}])},null,8,["class"])],2)]}),_:1}),e(O)==="view"&&!e(n)?(b(),V(o,{key:0})):$("",!0)],64))],2)}}});export{Dt as default};
